(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Of(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Im={exports:{}},Kc={},Om={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function GP(){if(PE)return lt;PE=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function g(w){return w===null||typeof w!="object"?null:(w=m&&w[m]||w["@@iterator"],typeof w=="function"?w:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function C(w,T,H){this.props=w,this.context=T,this.refs=S,this.updater=H||_}C.prototype.isReactComponent={},C.prototype.setState=function(w,T){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,T,"setState")},C.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function z(){}z.prototype=C.prototype;function D(w,T,H){this.props=w,this.context=T,this.refs=S,this.updater=H||_}var M=D.prototype=new z;M.constructor=D,x(M,C.prototype),M.isPureReactComponent=!0;var A=Array.isArray,j=Object.prototype.hasOwnProperty,G={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function $(w,T,H){var I,V={},ne=null,B=null;if(T!=null)for(I in T.ref!==void 0&&(B=T.ref),T.key!==void 0&&(ne=""+T.key),T)j.call(T,I)&&!L.hasOwnProperty(I)&&(V[I]=T[I]);var Q=arguments.length-2;if(Q===1)V.children=H;else if(1<Q){for(var Z=Array(Q),ee=0;ee<Q;ee++)Z[ee]=arguments[ee+2];V.children=Z}if(w&&w.defaultProps)for(I in Q=w.defaultProps,Q)V[I]===void 0&&(V[I]=Q[I]);return{$$typeof:e,type:w,key:ne,ref:B,props:V,_owner:G.current}}function O(w,T){return{$$typeof:e,type:w.type,key:T,ref:w.ref,props:w.props,_owner:w._owner}}function Y(w){return typeof w=="object"&&w!==null&&w.$$typeof===e}function q(w){var T={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(H){return T[H]})}var ae=/\/+/g;function ce(w,T){return typeof w=="object"&&w!==null&&w.key!=null?q(""+w.key):T.toString(36)}function Ae(w,T,H,I,V){var ne=typeof w;(ne==="undefined"||ne==="boolean")&&(w=null);var B=!1;if(w===null)B=!0;else switch(ne){case"string":case"number":B=!0;break;case"object":switch(w.$$typeof){case e:case t:B=!0}}if(B)return B=w,V=V(B),w=I===""?"."+ce(B,0):I,A(V)?(H="",w!=null&&(H=w.replace(ae,"$&/")+"/"),Ae(V,T,H,"",function(ee){return ee})):V!=null&&(Y(V)&&(V=O(V,H+(!V.key||B&&B.key===V.key?"":(""+V.key).replace(ae,"$&/")+"/")+w)),T.push(V)),1;if(B=0,I=I===""?".":I+":",A(w))for(var Q=0;Q<w.length;Q++){ne=w[Q];var Z=I+ce(ne,Q);B+=Ae(ne,T,H,Z,V)}else if(Z=g(w),typeof Z=="function")for(w=Z.call(w),Q=0;!(ne=w.next()).done;)ne=ne.value,Z=I+ce(ne,Q++),B+=Ae(ne,T,H,Z,V);else if(ne==="object")throw T=String(w),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.");return B}function nt(w,T,H){if(w==null)return w;var I=[],V=0;return Ae(w,I,"","",function(ne){return T.call(H,ne,V++)}),I}function Me(w){if(w._status===-1){var T=w._result;T=T(),T.then(function(H){(w._status===0||w._status===-1)&&(w._status=1,w._result=H)},function(H){(w._status===0||w._status===-1)&&(w._status=2,w._result=H)}),w._status===-1&&(w._status=0,w._result=T)}if(w._status===1)return w._result.default;throw w._result}var Ee={current:null},me={transition:null},N={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:me,ReactCurrentOwner:G};function E(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:nt,forEach:function(w,T,H){nt(w,function(){T.apply(this,arguments)},H)},count:function(w){var T=0;return nt(w,function(){T++}),T},toArray:function(w){return nt(w,function(T){return T})||[]},only:function(w){if(!Y(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},lt.Component=C,lt.Fragment=n,lt.Profiler=r,lt.PureComponent=D,lt.StrictMode=i,lt.Suspense=u,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,lt.act=E,lt.cloneElement=function(w,T,H){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var I=x({},w.props),V=w.key,ne=w.ref,B=w._owner;if(T!=null){if(T.ref!==void 0&&(ne=T.ref,B=G.current),T.key!==void 0&&(V=""+T.key),w.type&&w.type.defaultProps)var Q=w.type.defaultProps;for(Z in T)j.call(T,Z)&&!L.hasOwnProperty(Z)&&(I[Z]=T[Z]===void 0&&Q!==void 0?Q[Z]:T[Z])}var Z=arguments.length-2;if(Z===1)I.children=H;else if(1<Z){Q=Array(Z);for(var ee=0;ee<Z;ee++)Q[ee]=arguments[ee+2];I.children=Q}return{$$typeof:e,type:w.type,key:V,ref:ne,props:I,_owner:B}},lt.createContext=function(w){return w={$$typeof:c,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:a,_context:w},w.Consumer=w},lt.createElement=$,lt.createFactory=function(w){var T=$.bind(null,w);return T.type=w,T},lt.createRef=function(){return{current:null}},lt.forwardRef=function(w){return{$$typeof:l,render:w}},lt.isValidElement=Y,lt.lazy=function(w){return{$$typeof:d,_payload:{_status:-1,_result:w},_init:Me}},lt.memo=function(w,T){return{$$typeof:f,type:w,compare:T===void 0?null:T}},lt.startTransition=function(w){var T=me.transition;me.transition={};try{w()}finally{me.transition=T}},lt.unstable_act=E,lt.useCallback=function(w,T){return Ee.current.useCallback(w,T)},lt.useContext=function(w){return Ee.current.useContext(w)},lt.useDebugValue=function(){},lt.useDeferredValue=function(w){return Ee.current.useDeferredValue(w)},lt.useEffect=function(w,T){return Ee.current.useEffect(w,T)},lt.useId=function(){return Ee.current.useId()},lt.useImperativeHandle=function(w,T,H){return Ee.current.useImperativeHandle(w,T,H)},lt.useInsertionEffect=function(w,T){return Ee.current.useInsertionEffect(w,T)},lt.useLayoutEffect=function(w,T){return Ee.current.useLayoutEffect(w,T)},lt.useMemo=function(w,T){return Ee.current.useMemo(w,T)},lt.useReducer=function(w,T,H){return Ee.current.useReducer(w,T,H)},lt.useRef=function(w){return Ee.current.useRef(w)},lt.useState=function(w){return Ee.current.useState(w)},lt.useSyncExternalStore=function(w,T,H){return Ee.current.useSyncExternalStore(w,T,H)},lt.useTransition=function(){return Ee.current.useTransition()},lt.version="18.3.1",lt}var RE;function og(){return RE||(RE=1,Om.exports=GP()),Om.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE;function UP(){if(AE)return Kc;AE=1;var e=og(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(l,u,f){var d,m={},g=null,_=null;f!==void 0&&(g=""+f),u.key!==void 0&&(g=""+u.key),u.ref!==void 0&&(_=u.ref);for(d in u)i.call(u,d)&&!a.hasOwnProperty(d)&&(m[d]=u[d]);if(l&&l.defaultProps)for(d in u=l.defaultProps,u)m[d]===void 0&&(m[d]=u[d]);return{$$typeof:t,type:l,key:g,ref:_,props:m,_owner:r.current}}return Kc.Fragment=n,Kc.jsx=c,Kc.jsxs=c,Kc}var DE;function WP(){return DE||(DE=1,Im.exports=UP()),Im.exports}var zs=WP(),yv=og(),xp={},Lm={exports:{}},Hn={},Bm={exports:{}},$m={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function YP(){return kE||(kE=1,function(e){function t(me,N){var E=me.length;me.push(N);e:for(;0<E;){var w=E-1>>>1,T=me[w];if(0<r(T,N))me[w]=N,me[E]=T,E=w;else break e}}function n(me){return me.length===0?null:me[0]}function i(me){if(me.length===0)return null;var N=me[0],E=me.pop();if(E!==N){me[0]=E;e:for(var w=0,T=me.length,H=T>>>1;w<H;){var I=2*(w+1)-1,V=me[I],ne=I+1,B=me[ne];if(0>r(V,E))ne<T&&0>r(B,V)?(me[w]=B,me[ne]=E,w=ne):(me[w]=V,me[I]=E,w=I);else if(ne<T&&0>r(B,E))me[w]=B,me[ne]=E,w=ne;else break e}}return N}function r(me,N){var E=me.sortIndex-N.sortIndex;return E!==0?E:me.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,l=c.now();e.unstable_now=function(){return c.now()-l}}var u=[],f=[],d=1,m=null,g=3,_=!1,x=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(me){for(var N=n(f);N!==null;){if(N.callback===null)i(f);else if(N.startTime<=me)i(f),N.sortIndex=N.expirationTime,t(u,N);else break;N=n(f)}}function A(me){if(S=!1,M(me),!x)if(n(u)!==null)x=!0,Me(j);else{var N=n(f);N!==null&&Ee(A,N.startTime-me)}}function j(me,N){x=!1,S&&(S=!1,z($),$=-1),_=!0;var E=g;try{for(M(N),m=n(u);m!==null&&(!(m.expirationTime>N)||me&&!q());){var w=m.callback;if(typeof w=="function"){m.callback=null,g=m.priorityLevel;var T=w(m.expirationTime<=N);N=e.unstable_now(),typeof T=="function"?m.callback=T:m===n(u)&&i(u),M(N)}else i(u);m=n(u)}if(m!==null)var H=!0;else{var I=n(f);I!==null&&Ee(A,I.startTime-N),H=!1}return H}finally{m=null,g=E,_=!1}}var G=!1,L=null,$=-1,O=5,Y=-1;function q(){return!(e.unstable_now()-Y<O)}function ae(){if(L!==null){var me=e.unstable_now();Y=me;var N=!0;try{N=L(!0,me)}finally{N?ce():(G=!1,L=null)}}else G=!1}var ce;if(typeof D=="function")ce=function(){D(ae)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,nt=Ae.port2;Ae.port1.onmessage=ae,ce=function(){nt.postMessage(null)}}else ce=function(){C(ae,0)};function Me(me){L=me,G||(G=!0,ce())}function Ee(me,N){$=C(function(){me(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(me){me.callback=null},e.unstable_continueExecution=function(){x||_||(x=!0,Me(j))},e.unstable_forceFrameRate=function(me){0>me||125<me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<me?Math.floor(1e3/me):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(me){switch(g){case 1:case 2:case 3:var N=3;break;default:N=g}var E=g;g=N;try{return me()}finally{g=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(me,N){switch(me){case 1:case 2:case 3:case 4:case 5:break;default:me=3}var E=g;g=me;try{return N()}finally{g=E}},e.unstable_scheduleCallback=function(me,N,E){var w=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?w+E:w):E=w,me){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=E+T,me={id:d++,callback:N,priorityLevel:me,startTime:E,expirationTime:T,sortIndex:-1},E>w?(me.sortIndex=E,t(f,me),n(u)===null&&me===n(f)&&(S?(z($),$=-1):S=!0,Ee(A,E-w))):(me.sortIndex=T,t(u,me),x||_||(x=!0,Me(j))),me},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(me){var N=g;return function(){var E=g;g=N;try{return me.apply(this,arguments)}finally{g=E}}}}($m)),$m}var ME;function KP(){return ME||(ME=1,Bm.exports=YP()),Bm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE;function qP(){if(NE)return Hn;NE=1;var e=og(),t=KP();function n(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,p=1;p<arguments.length;p++)s+="&args[]="+encodeURIComponent(arguments[p]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function a(o,s){c(o,s),c(o+"Capture",s)}function c(o,s){for(r[o]=s,o=0;o<s.length;o++)i.add(s[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function g(o){return u.call(m,o)?!0:u.call(d,o)?!1:f.test(o)?m[o]=!0:(d[o]=!0,!1)}function _(o,s,p,h){if(p!==null&&p.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:p!==null?!p.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function x(o,s,p,h){if(s===null||typeof s>"u"||_(o,s,p,h))return!0;if(h)return!1;if(p!==null)switch(p.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function S(o,s,p,h,v,y,P){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=v,this.mustUseProperty=p,this.propertyName=o,this.type=s,this.sanitizeURL=y,this.removeEmptyString=P}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){C[o]=new S(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];C[s]=new S(s,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){C[o]=new S(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){C[o]=new S(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){C[o]=new S(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){C[o]=new S(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){C[o]=new S(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){C[o]=new S(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){C[o]=new S(o,5,!1,o.toLowerCase(),null,!1,!1)});var z=/[\-:]([a-z])/g;function D(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(z,D);C[s]=new S(s,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(z,D);C[s]=new S(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(z,D);C[s]=new S(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){C[o]=new S(o,1,!1,o.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){C[o]=new S(o,1,!1,o.toLowerCase(),null,!0,!0)});function M(o,s,p,h){var v=C.hasOwnProperty(s)?C[s]:null;(v!==null?v.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,p,v,h)&&(p=null),h||v===null?g(s)&&(p===null?o.removeAttribute(s):o.setAttribute(s,""+p)):v.mustUseProperty?o[v.propertyName]=p===null?v.type===3?!1:"":p:(s=v.attributeName,h=v.attributeNamespace,p===null?o.removeAttribute(s):(v=v.type,p=v===3||v===4&&p===!0?"":""+p,h?o.setAttributeNS(h,s,p):o.setAttribute(s,p))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),G=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),q=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),nt=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),me=Symbol.iterator;function N(o){return o===null||typeof o!="object"?null:(o=me&&o[me]||o["@@iterator"],typeof o=="function"?o:null)}var E=Object.assign,w;function T(o){if(w===void 0)try{throw Error()}catch(p){var s=p.stack.trim().match(/\n( *(at )?)/);w=s&&s[1]||""}return`
`+w+o}var H=!1;function I(o,s){if(!o||H)return"";H=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(oe){var h=oe}Reflect.construct(o,[],s)}else{try{s.call()}catch(oe){h=oe}o.call(s.prototype)}else{try{throw Error()}catch(oe){h=oe}o()}}catch(oe){if(oe&&h&&typeof oe.stack=="string"){for(var v=oe.stack.split(`
`),y=h.stack.split(`
`),P=v.length-1,F=y.length-1;1<=P&&0<=F&&v[P]!==y[F];)F--;for(;1<=P&&0<=F;P--,F--)if(v[P]!==y[F]){if(P!==1||F!==1)do if(P--,F--,0>F||v[P]!==y[F]){var K=`
`+v[P].replace(" at new "," at ");return o.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",o.displayName)),K}while(1<=P&&0<=F);break}}}finally{H=!1,Error.prepareStackTrace=p}return(o=o?o.displayName||o.name:"")?T(o):""}function V(o){switch(o.tag){case 5:return T(o.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 2:case 15:return o=I(o.type,!1),o;case 11:return o=I(o.type.render,!1),o;case 1:return o=I(o.type,!0),o;default:return""}}function ne(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case L:return"Fragment";case G:return"Portal";case O:return"Profiler";case $:return"StrictMode";case ce:return"Suspense";case Ae:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case q:return(o.displayName||"Context")+".Consumer";case Y:return(o._context.displayName||"Context")+".Provider";case ae:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case nt:return s=o.displayName||null,s!==null?s:ne(o.type)||"Memo";case Me:s=o._payload,o=o._init;try{return ne(o(s))}catch{}}return null}function B(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(s);case 8:return s===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Q(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Z(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ee(o){var s=Z(o)?"checked":"value",p=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),h=""+o[s];if(!o.hasOwnProperty(s)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var v=p.get,y=p.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return v.call(this)},set:function(P){h=""+P,y.call(this,P)}}),Object.defineProperty(o,s,{enumerable:p.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function le(o){o._valueTracker||(o._valueTracker=ee(o))}function pe(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var p=s.getValue(),h="";return o&&(h=Z(o)?o.checked?"true":"false":o.value),o=h,o!==p?(s.setValue(o),!0):!1}function ve(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function se(o,s){var p=s.checked;return E({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:p??o._wrapperState.initialChecked})}function ue(o,s){var p=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;p=Q(s.value!=null?s.value:p),o._wrapperState={initialChecked:h,initialValue:p,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function je(o,s){s=s.checked,s!=null&&M(o,"checked",s,!1)}function ze(o,s){je(o,s);var p=Q(s.value),h=s.type;if(p!=null)h==="number"?(p===0&&o.value===""||o.value!=p)&&(o.value=""+p):o.value!==""+p&&(o.value=""+p);else if(h==="submit"||h==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?dt(o,s.type,p):s.hasOwnProperty("defaultValue")&&dt(o,s.type,Q(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function Ce(o,s,p){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,p||s===o.value||(o.value=s),o.defaultValue=s}p=o.name,p!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,p!==""&&(o.name=p)}function dt(o,s,p){(s!=="number"||ve(o.ownerDocument)!==o)&&(p==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+p&&(o.defaultValue=""+p))}var Ie=Array.isArray;function Xe(o,s,p,h){if(o=o.options,s){s={};for(var v=0;v<p.length;v++)s["$"+p[v]]=!0;for(p=0;p<o.length;p++)v=s.hasOwnProperty("$"+o[p].value),o[p].selected!==v&&(o[p].selected=v),v&&h&&(o[p].defaultSelected=!0)}else{for(p=""+Q(p),s=null,v=0;v<o.length;v++){if(o[v].value===p){o[v].selected=!0,h&&(o[v].defaultSelected=!0);return}s!==null||o[v].disabled||(s=o[v])}s!==null&&(s.selected=!0)}}function it(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return E({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function mt(o,s){var p=s.value;if(p==null){if(p=s.children,s=s.defaultValue,p!=null){if(s!=null)throw Error(n(92));if(Ie(p)){if(1<p.length)throw Error(n(93));p=p[0]}s=p}s==null&&(s=""),p=s}o._wrapperState={initialValue:Q(p)}}function we(o,s){var p=Q(s.value),h=Q(s.defaultValue);p!=null&&(p=""+p,p!==o.value&&(o.value=p),s.defaultValue==null&&o.defaultValue!==p&&(o.defaultValue=p)),h!=null&&(o.defaultValue=""+h)}function Oe(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function ui(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yr(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?ui(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var fr,Jo=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,p,h,v){MSApp.execUnsafeLocalFunction(function(){return o(s,p,h,v)})}:o}(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for(fr=fr||document.createElement("div"),fr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=fr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function Yi(o,s){if(s){var p=o.firstChild;if(p&&p===o.lastChild&&p.nodeType===3){p.nodeValue=s;return}}o.textContent=s}var pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ea=["Webkit","ms","Moz","O"];Object.keys(pi).forEach(function(o){ea.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),pi[s]=pi[o]})});function ns(o,s,p){return s==null||typeof s=="boolean"||s===""?"":p||typeof s!="number"||s===0||pi.hasOwnProperty(o)&&pi[o]?(""+s).trim():s+"px"}function ta(o,s){o=o.style;for(var p in s)if(s.hasOwnProperty(p)){var h=p.indexOf("--")===0,v=ns(p,s[p],h);p==="float"&&(p="cssFloat"),h?o.setProperty(p,v):o[p]=v}}var is=E({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kr(o,s){if(s){if(is[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function qr(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tn=null;function Xr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Qr=null,fi=null,tn=null;function Zr(o){if(o=Nc(o)){if(typeof Qr!="function")throw Error(n(280));var s=o.stateNode;s&&(s=Lu(s),Qr(o.stateNode,o.type,s))}}function na(o){fi?tn?tn.push(o):tn=[o]:fi=o}function ia(){if(fi){var o=fi,s=tn;if(tn=fi=null,Zr(o),s)for(o=0;o<s.length;o++)Zr(s[o])}}function dr(o,s){return o(s)}function ra(){}var oa=!1;function yu(o,s,p){if(oa)return o(s,p);oa=!0;try{return dr(o,s,p)}finally{oa=!1,(fi!==null||tn!==null)&&(ra(),ia())}}function aa(o,s){var p=o.stateNode;if(p===null)return null;var h=Lu(p);if(h===null)return null;p=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(o=o.type,h=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!h;break e;default:o=!1}if(o)return null;if(p&&typeof p!="function")throw Error(n(231,s,typeof p));return p}var Jr=!1;if(l)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){Jr=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{Jr=!1}function eh(o,s,p,h,v,y,P,F,K){var oe=Array.prototype.slice.call(arguments,3);try{s.apply(p,oe)}catch(he){this.onError(he)}}var eo=!1,to=null,rs=!1,os=null,th={onError:function(o){eo=!0,to=o}};function _u(o,s,p,h,v,y,P,F,K){eo=!1,to=null,eh.apply(th,arguments)}function Eu(o,s,p,h,v,y,P,F,K){if(_u.apply(this,arguments),eo){if(eo){var oe=to;eo=!1,to=null}else throw Error(n(198));rs||(rs=!0,os=oe)}}function Ki(o){var s=o,p=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,s.flags&4098&&(p=s.return),o=s.return;while(o)}return s.tag===3?p:null}function mc(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function as(o){if(Ki(o)!==o)throw Error(n(188))}function hr(o){var s=o.alternate;if(!s){if(s=Ki(o),s===null)throw Error(n(188));return s!==o?null:o}for(var p=o,h=s;;){var v=p.return;if(v===null)break;var y=v.alternate;if(y===null){if(h=v.return,h!==null){p=h;continue}break}if(v.child===y.child){for(y=v.child;y;){if(y===p)return as(v),o;if(y===h)return as(v),s;y=y.sibling}throw Error(n(188))}if(p.return!==h.return)p=v,h=y;else{for(var P=!1,F=v.child;F;){if(F===p){P=!0,p=v,h=y;break}if(F===h){P=!0,h=v,p=y;break}F=F.sibling}if(!P){for(F=y.child;F;){if(F===p){P=!0,p=y,h=v;break}if(F===h){P=!0,h=y,p=v;break}F=F.sibling}if(!P)throw Error(n(189))}}if(p.alternate!==h)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?o:s}function no(o){return o=hr(o),o!==null?io(o):null}function io(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=io(o);if(s!==null)return s;o=o.sibling}return null}var ca=t.unstable_scheduleCallback,ss=t.unstable_cancelCallback,nh=t.unstable_shouldYield,ih=t.unstable_requestPaint,_t=t.unstable_now,In=t.unstable_getCurrentPriorityLevel,qi=t.unstable_ImmediatePriority,Ai=t.unstable_UserBlockingPriority,On=t.unstable_NormalPriority,la=t.unstable_LowPriority,qn=t.unstable_IdlePriority,Ln=null,Xn=null;function xu(o){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(Ln,o,void 0,(o.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:vc,Qn=Math.log,cs=Math.LN2;function vc(o){return o>>>=0,o===0?32:31-(Qn(o)/cs|0)|0}var ro=64,oo=4194304;function mr(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function vr(o,s){var p=o.pendingLanes;if(p===0)return 0;var h=0,v=o.suspendedLanes,y=o.pingedLanes,P=p&268435455;if(P!==0){var F=P&~v;F!==0?h=mr(F):(y&=P,y!==0&&(h=mr(y)))}else P=p&~v,P!==0?h=mr(P):y!==0&&(h=mr(y));if(h===0)return 0;if(s!==0&&s!==h&&!(s&v)&&(v=h&-h,y=s&-s,v>=y||v===16&&(y&4194240)!==0))return s;if(h&4&&(h|=p&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=h;0<s;)p=31-gn(s),v=1<<p,h|=o[p],s&=~v;return h}function Xi(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rh(o,s){for(var p=o.suspendedLanes,h=o.pingedLanes,v=o.expirationTimes,y=o.pendingLanes;0<y;){var P=31-gn(y),F=1<<P,K=v[P];K===-1?(!(F&p)||F&h)&&(v[P]=Xi(F,s)):K<=s&&(o.expiredLanes|=F),y&=~F}}function ls(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function us(){var o=ro;return ro<<=1,!(ro&4194240)&&(ro=64),o}function ps(o){for(var s=[],p=0;31>p;p++)s.push(o);return s}function ua(o,s,p){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-gn(s),o[s]=p}function oh(o,s){var p=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var h=o.eventTimes;for(o=o.expirationTimes;0<p;){var v=31-gn(p),y=1<<v;s[v]=0,h[v]=-1,o[v]=-1,p&=~y}}function R(o,s){var p=o.entangledLanes|=s;for(o=o.entanglements;p;){var h=31-gn(p),v=1<<h;v&s|o[h]&s&&(o[h]|=s),p&=~v}}var k=0;function U(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var re,de,Pe,rt,$t,Ft=!1,Ut=[],Yt=null,ao=null,so=null,gc=new Map,yc=new Map,co=[],fT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u0(o,s){switch(o){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":gc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(s.pointerId)}}function _c(o,s,p,h,v,y){return o===null||o.nativeEvent!==y?(o={blockedOn:s,domEventName:p,eventSystemFlags:h,nativeEvent:y,targetContainers:[v]},s!==null&&(s=Nc(s),s!==null&&de(s)),o):(o.eventSystemFlags|=h,s=o.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),o)}function dT(o,s,p,h,v){switch(s){case"focusin":return Yt=_c(Yt,o,s,p,h,v),!0;case"dragenter":return ao=_c(ao,o,s,p,h,v),!0;case"mouseover":return so=_c(so,o,s,p,h,v),!0;case"pointerover":var y=v.pointerId;return gc.set(y,_c(gc.get(y)||null,o,s,p,h,v)),!0;case"gotpointercapture":return y=v.pointerId,yc.set(y,_c(yc.get(y)||null,o,s,p,h,v)),!0}return!1}function p0(o){var s=pa(o.target);if(s!==null){var p=Ki(s);if(p!==null){if(s=p.tag,s===13){if(s=mc(p),s!==null){o.blockedOn=s,$t(o.priority,function(){Pe(p)});return}}else if(s===3&&p.stateNode.current.memoizedState.isDehydrated){o.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}o.blockedOn=null}function wu(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var p=sh(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(p===null){p=o.nativeEvent;var h=new p.constructor(p.type,p);Tn=h,p.target.dispatchEvent(h),Tn=null}else return s=Nc(p),s!==null&&de(s),o.blockedOn=p,!1;s.shift()}return!0}function f0(o,s,p){wu(o)&&p.delete(s)}function hT(){Ft=!1,Yt!==null&&wu(Yt)&&(Yt=null),ao!==null&&wu(ao)&&(ao=null),so!==null&&wu(so)&&(so=null),gc.forEach(f0),yc.forEach(f0)}function Ec(o,s){o.blockedOn===s&&(o.blockedOn=null,Ft||(Ft=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,hT)))}function xc(o){function s(v){return Ec(v,o)}if(0<Ut.length){Ec(Ut[0],o);for(var p=1;p<Ut.length;p++){var h=Ut[p];h.blockedOn===o&&(h.blockedOn=null)}}for(Yt!==null&&Ec(Yt,o),ao!==null&&Ec(ao,o),so!==null&&Ec(so,o),gc.forEach(s),yc.forEach(s),p=0;p<co.length;p++)h=co[p],h.blockedOn===o&&(h.blockedOn=null);for(;0<co.length&&(p=co[0],p.blockedOn===null);)p0(p),p.blockedOn===null&&co.shift()}var fs=A.ReactCurrentBatchConfig,bu=!0;function mT(o,s,p,h){var v=k,y=fs.transition;fs.transition=null;try{k=1,ah(o,s,p,h)}finally{k=v,fs.transition=y}}function vT(o,s,p,h){var v=k,y=fs.transition;fs.transition=null;try{k=4,ah(o,s,p,h)}finally{k=v,fs.transition=y}}function ah(o,s,p,h){if(bu){var v=sh(o,s,p,h);if(v===null)Sh(o,s,h,Su,p),u0(o,h);else if(dT(v,o,s,p,h))h.stopPropagation();else if(u0(o,h),s&4&&-1<fT.indexOf(o)){for(;v!==null;){var y=Nc(v);if(y!==null&&re(y),y=sh(o,s,p,h),y===null&&Sh(o,s,h,Su,p),y===v)break;v=y}v!==null&&h.stopPropagation()}else Sh(o,s,h,null,p)}}var Su=null;function sh(o,s,p,h){if(Su=null,o=Xr(h),o=pa(o),o!==null)if(s=Ki(o),s===null)o=null;else if(p=s.tag,p===13){if(o=mc(s),o!==null)return o;o=null}else if(p===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return Su=o,null}function d0(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(In()){case qi:return 1;case Ai:return 4;case On:case la:return 16;case qn:return 536870912;default:return 16}default:return 16}}var lo=null,ch=null,Cu=null;function h0(){if(Cu)return Cu;var o,s=ch,p=s.length,h,v="value"in lo?lo.value:lo.textContent,y=v.length;for(o=0;o<p&&s[o]===v[o];o++);var P=p-o;for(h=1;h<=P&&s[p-h]===v[y-h];h++);return Cu=v.slice(o,1<h?1-h:void 0)}function Tu(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Pu(){return!0}function m0(){return!1}function Zn(o){function s(p,h,v,y,P){this._reactName=p,this._targetInst=v,this.type=h,this.nativeEvent=y,this.target=P,this.currentTarget=null;for(var F in o)o.hasOwnProperty(F)&&(p=o[F],this[F]=p?p(y):y[F]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Pu:m0,this.isPropagationStopped=m0,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Pu)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Pu)},persist:function(){},isPersistent:Pu}),s}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lh=Zn(ds),wc=E({},ds,{view:0,detail:0}),gT=Zn(wc),uh,ph,bc,Ru=E({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==bc&&(bc&&o.type==="mousemove"?(uh=o.screenX-bc.screenX,ph=o.screenY-bc.screenY):ph=uh=0,bc=o),uh)},movementY:function(o){return"movementY"in o?o.movementY:ph}}),v0=Zn(Ru),yT=E({},Ru,{dataTransfer:0}),_T=Zn(yT),ET=E({},wc,{relatedTarget:0}),fh=Zn(ET),xT=E({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),wT=Zn(xT),bT=E({},ds,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ST=Zn(bT),CT=E({},ds,{data:0}),g0=Zn(CT),TT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AT(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=RT[o])?!!s[o]:!1}function dh(){return AT}var DT=E({},wc,{key:function(o){if(o.key){var s=TT[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Tu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?PT[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dh,charCode:function(o){return o.type==="keypress"?Tu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Tu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),kT=Zn(DT),MT=E({},Ru,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y0=Zn(MT),NT=E({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dh}),IT=Zn(NT),OT=E({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),LT=Zn(OT),BT=E({},Ru,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),$T=Zn(BT),FT=[9,13,27,32],hh=l&&"CompositionEvent"in window,Sc=null;l&&"documentMode"in document&&(Sc=document.documentMode);var jT=l&&"TextEvent"in window&&!Sc,_0=l&&(!hh||Sc&&8<Sc&&11>=Sc),E0=" ",x0=!1;function w0(o,s){switch(o){case"keyup":return FT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var hs=!1;function zT(o,s){switch(o){case"compositionend":return b0(s);case"keypress":return s.which!==32?null:(x0=!0,E0);case"textInput":return o=s.data,o===E0&&x0?null:o;default:return null}}function HT(o,s){if(hs)return o==="compositionend"||!hh&&w0(o,s)?(o=h0(),Cu=ch=lo=null,hs=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _0&&s.locale!=="ko"?null:s.data;default:return null}}var VT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S0(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!VT[o.type]:s==="textarea"}function C0(o,s,p,h){na(h),s=Nu(s,"onChange"),0<s.length&&(p=new lh("onChange","change",null,p,h),o.push({event:p,listeners:s}))}var Cc=null,Tc=null;function GT(o){V0(o,0)}function Au(o){var s=_s(o);if(pe(s))return o}function UT(o,s){if(o==="change")return s}var T0=!1;if(l){var mh;if(l){var vh="oninput"in document;if(!vh){var P0=document.createElement("div");P0.setAttribute("oninput","return;"),vh=typeof P0.oninput=="function"}mh=vh}else mh=!1;T0=mh&&(!document.documentMode||9<document.documentMode)}function R0(){Cc&&(Cc.detachEvent("onpropertychange",A0),Tc=Cc=null)}function A0(o){if(o.propertyName==="value"&&Au(Tc)){var s=[];C0(s,Tc,o,Xr(o)),yu(GT,s)}}function WT(o,s,p){o==="focusin"?(R0(),Cc=s,Tc=p,Cc.attachEvent("onpropertychange",A0)):o==="focusout"&&R0()}function YT(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Au(Tc)}function KT(o,s){if(o==="click")return Au(s)}function qT(o,s){if(o==="input"||o==="change")return Au(s)}function XT(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var Di=typeof Object.is=="function"?Object.is:XT;function Pc(o,s){if(Di(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var p=Object.keys(o),h=Object.keys(s);if(p.length!==h.length)return!1;for(h=0;h<p.length;h++){var v=p[h];if(!u.call(s,v)||!Di(o[v],s[v]))return!1}return!0}function D0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function k0(o,s){var p=D0(o);o=0;for(var h;p;){if(p.nodeType===3){if(h=o+p.textContent.length,o<=s&&h>=s)return{node:p,offset:s-o};o=h}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=D0(p)}}function M0(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?M0(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function N0(){for(var o=window,s=ve();s instanceof o.HTMLIFrameElement;){try{var p=typeof s.contentWindow.location.href=="string"}catch{p=!1}if(p)o=s.contentWindow;else break;s=ve(o.document)}return s}function gh(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function QT(o){var s=N0(),p=o.focusedElem,h=o.selectionRange;if(s!==p&&p&&p.ownerDocument&&M0(p.ownerDocument.documentElement,p)){if(h!==null&&gh(p)){if(s=h.start,o=h.end,o===void 0&&(o=s),"selectionStart"in p)p.selectionStart=s,p.selectionEnd=Math.min(o,p.value.length);else if(o=(s=p.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var v=p.textContent.length,y=Math.min(h.start,v);h=h.end===void 0?y:Math.min(h.end,v),!o.extend&&y>h&&(v=h,h=y,y=v),v=k0(p,y);var P=k0(p,h);v&&P&&(o.rangeCount!==1||o.anchorNode!==v.node||o.anchorOffset!==v.offset||o.focusNode!==P.node||o.focusOffset!==P.offset)&&(s=s.createRange(),s.setStart(v.node,v.offset),o.removeAllRanges(),y>h?(o.addRange(s),o.extend(P.node,P.offset)):(s.setEnd(P.node,P.offset),o.addRange(s)))}}for(s=[],o=p;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<s.length;p++)o=s[p],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var ZT=l&&"documentMode"in document&&11>=document.documentMode,ms=null,yh=null,Rc=null,_h=!1;function I0(o,s,p){var h=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;_h||ms==null||ms!==ve(h)||(h=ms,"selectionStart"in h&&gh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Rc&&Pc(Rc,h)||(Rc=h,h=Nu(yh,"onSelect"),0<h.length&&(s=new lh("onSelect","select",null,s,p),o.push({event:s,listeners:h}),s.target=ms)))}function Du(o,s){var p={};return p[o.toLowerCase()]=s.toLowerCase(),p["Webkit"+o]="webkit"+s,p["Moz"+o]="moz"+s,p}var vs={animationend:Du("Animation","AnimationEnd"),animationiteration:Du("Animation","AnimationIteration"),animationstart:Du("Animation","AnimationStart"),transitionend:Du("Transition","TransitionEnd")},Eh={},O0={};l&&(O0=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function ku(o){if(Eh[o])return Eh[o];if(!vs[o])return o;var s=vs[o],p;for(p in s)if(s.hasOwnProperty(p)&&p in O0)return Eh[o]=s[p];return o}var L0=ku("animationend"),B0=ku("animationiteration"),$0=ku("animationstart"),F0=ku("transitionend"),j0=new Map,z0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function uo(o,s){j0.set(o,s),a(s,[o])}for(var xh=0;xh<z0.length;xh++){var wh=z0[xh],JT=wh.toLowerCase(),eP=wh[0].toUpperCase()+wh.slice(1);uo(JT,"on"+eP)}uo(L0,"onAnimationEnd"),uo(B0,"onAnimationIteration"),uo($0,"onAnimationStart"),uo("dblclick","onDoubleClick"),uo("focusin","onFocus"),uo("focusout","onBlur"),uo(F0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ac));function H0(o,s,p){var h=o.type||"unknown-event";o.currentTarget=p,Eu(h,s,void 0,o),o.currentTarget=null}function V0(o,s){s=(s&4)!==0;for(var p=0;p<o.length;p++){var h=o[p],v=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var P=h.length-1;0<=P;P--){var F=h[P],K=F.instance,oe=F.currentTarget;if(F=F.listener,K!==y&&v.isPropagationStopped())break e;H0(v,F,oe),y=K}else for(P=0;P<h.length;P++){if(F=h[P],K=F.instance,oe=F.currentTarget,F=F.listener,K!==y&&v.isPropagationStopped())break e;H0(v,F,oe),y=K}}}if(rs)throw o=os,rs=!1,os=null,o}function xt(o,s){var p=s[Dh];p===void 0&&(p=s[Dh]=new Set);var h=o+"__bubble";p.has(h)||(G0(s,o,2,!1),p.add(h))}function bh(o,s,p){var h=0;s&&(h|=4),G0(p,o,h,s)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function Dc(o){if(!o[Mu]){o[Mu]=!0,i.forEach(function(p){p!=="selectionchange"&&(tP.has(p)||bh(p,!1,o),bh(p,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[Mu]||(s[Mu]=!0,bh("selectionchange",!1,s))}}function G0(o,s,p,h){switch(d0(s)){case 1:var v=mT;break;case 4:v=vT;break;default:v=ah}p=v.bind(null,s,p,o),v=void 0,!Jr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),h?v!==void 0?o.addEventListener(s,p,{capture:!0,passive:v}):o.addEventListener(s,p,!0):v!==void 0?o.addEventListener(s,p,{passive:v}):o.addEventListener(s,p,!1)}function Sh(o,s,p,h,v){var y=h;if(!(s&1)&&!(s&2)&&h!==null)e:for(;;){if(h===null)return;var P=h.tag;if(P===3||P===4){var F=h.stateNode.containerInfo;if(F===v||F.nodeType===8&&F.parentNode===v)break;if(P===4)for(P=h.return;P!==null;){var K=P.tag;if((K===3||K===4)&&(K=P.stateNode.containerInfo,K===v||K.nodeType===8&&K.parentNode===v))return;P=P.return}for(;F!==null;){if(P=pa(F),P===null)return;if(K=P.tag,K===5||K===6){h=y=P;continue e}F=F.parentNode}}h=h.return}yu(function(){var oe=y,he=Xr(p),ge=[];e:{var fe=j0.get(o);if(fe!==void 0){var Re=lh,Ne=o;switch(o){case"keypress":if(Tu(p)===0)break e;case"keydown":case"keyup":Re=kT;break;case"focusin":Ne="focus",Re=fh;break;case"focusout":Ne="blur",Re=fh;break;case"beforeblur":case"afterblur":Re=fh;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=v0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=_T;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=IT;break;case L0:case B0:case $0:Re=wT;break;case F0:Re=LT;break;case"scroll":Re=gT;break;case"wheel":Re=$T;break;case"copy":case"cut":case"paste":Re=ST;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=y0}var Le=(s&4)!==0,jt=!Le&&o==="scroll",te=Le?fe!==null?fe+"Capture":null:fe;Le=[];for(var X=oe,ie;X!==null;){ie=X;var ye=ie.stateNode;if(ie.tag===5&&ye!==null&&(ie=ye,te!==null&&(ye=aa(X,te),ye!=null&&Le.push(kc(X,ye,ie)))),jt)break;X=X.return}0<Le.length&&(fe=new Re(fe,Ne,null,p,he),ge.push({event:fe,listeners:Le}))}}if(!(s&7)){e:{if(fe=o==="mouseover"||o==="pointerover",Re=o==="mouseout"||o==="pointerout",fe&&p!==Tn&&(Ne=p.relatedTarget||p.fromElement)&&(pa(Ne)||Ne[gr]))break e;if((Re||fe)&&(fe=he.window===he?he:(fe=he.ownerDocument)?fe.defaultView||fe.parentWindow:window,Re?(Ne=p.relatedTarget||p.toElement,Re=oe,Ne=Ne?pa(Ne):null,Ne!==null&&(jt=Ki(Ne),Ne!==jt||Ne.tag!==5&&Ne.tag!==6)&&(Ne=null)):(Re=null,Ne=oe),Re!==Ne)){if(Le=v0,ye="onMouseLeave",te="onMouseEnter",X="mouse",(o==="pointerout"||o==="pointerover")&&(Le=y0,ye="onPointerLeave",te="onPointerEnter",X="pointer"),jt=Re==null?fe:_s(Re),ie=Ne==null?fe:_s(Ne),fe=new Le(ye,X+"leave",Re,p,he),fe.target=jt,fe.relatedTarget=ie,ye=null,pa(he)===oe&&(Le=new Le(te,X+"enter",Ne,p,he),Le.target=ie,Le.relatedTarget=jt,ye=Le),jt=ye,Re&&Ne)t:{for(Le=Re,te=Ne,X=0,ie=Le;ie;ie=gs(ie))X++;for(ie=0,ye=te;ye;ye=gs(ye))ie++;for(;0<X-ie;)Le=gs(Le),X--;for(;0<ie-X;)te=gs(te),ie--;for(;X--;){if(Le===te||te!==null&&Le===te.alternate)break t;Le=gs(Le),te=gs(te)}Le=null}else Le=null;Re!==null&&U0(ge,fe,Re,Le,!1),Ne!==null&&jt!==null&&U0(ge,jt,Ne,Le,!0)}}e:{if(fe=oe?_s(oe):window,Re=fe.nodeName&&fe.nodeName.toLowerCase(),Re==="select"||Re==="input"&&fe.type==="file")var $e=UT;else if(S0(fe))if(T0)$e=qT;else{$e=YT;var Ue=WT}else(Re=fe.nodeName)&&Re.toLowerCase()==="input"&&(fe.type==="checkbox"||fe.type==="radio")&&($e=KT);if($e&&($e=$e(o,oe))){C0(ge,$e,p,he);break e}Ue&&Ue(o,fe,oe),o==="focusout"&&(Ue=fe._wrapperState)&&Ue.controlled&&fe.type==="number"&&dt(fe,"number",fe.value)}switch(Ue=oe?_s(oe):window,o){case"focusin":(S0(Ue)||Ue.contentEditable==="true")&&(ms=Ue,yh=oe,Rc=null);break;case"focusout":Rc=yh=ms=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,I0(ge,p,he);break;case"selectionchange":if(ZT)break;case"keydown":case"keyup":I0(ge,p,he)}var We;if(hh)e:{switch(o){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else hs?w0(o,p)&&(Qe="onCompositionEnd"):o==="keydown"&&p.keyCode===229&&(Qe="onCompositionStart");Qe&&(_0&&p.locale!=="ko"&&(hs||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&hs&&(We=h0()):(lo=he,ch="value"in lo?lo.value:lo.textContent,hs=!0)),Ue=Nu(oe,Qe),0<Ue.length&&(Qe=new g0(Qe,o,null,p,he),ge.push({event:Qe,listeners:Ue}),We?Qe.data=We:(We=b0(p),We!==null&&(Qe.data=We)))),(We=jT?zT(o,p):HT(o,p))&&(oe=Nu(oe,"onBeforeInput"),0<oe.length&&(he=new g0("onBeforeInput","beforeinput",null,p,he),ge.push({event:he,listeners:oe}),he.data=We))}V0(ge,s)})}function kc(o,s,p){return{instance:o,listener:s,currentTarget:p}}function Nu(o,s){for(var p=s+"Capture",h=[];o!==null;){var v=o,y=v.stateNode;v.tag===5&&y!==null&&(v=y,y=aa(o,p),y!=null&&h.unshift(kc(o,y,v)),y=aa(o,s),y!=null&&h.push(kc(o,y,v))),o=o.return}return h}function gs(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function U0(o,s,p,h,v){for(var y=s._reactName,P=[];p!==null&&p!==h;){var F=p,K=F.alternate,oe=F.stateNode;if(K!==null&&K===h)break;F.tag===5&&oe!==null&&(F=oe,v?(K=aa(p,y),K!=null&&P.unshift(kc(p,K,F))):v||(K=aa(p,y),K!=null&&P.push(kc(p,K,F)))),p=p.return}P.length!==0&&o.push({event:s,listeners:P})}var nP=/\r\n?/g,iP=/\u0000|\uFFFD/g;function W0(o){return(typeof o=="string"?o:""+o).replace(nP,`
`).replace(iP,"")}function Iu(o,s,p){if(s=W0(s),W0(o)!==s&&p)throw Error(n(425))}function Ou(){}var Ch=null,Th=null;function Ph(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rh=typeof setTimeout=="function"?setTimeout:void 0,rP=typeof clearTimeout=="function"?clearTimeout:void 0,Y0=typeof Promise=="function"?Promise:void 0,oP=typeof queueMicrotask=="function"?queueMicrotask:typeof Y0<"u"?function(o){return Y0.resolve(null).then(o).catch(aP)}:Rh;function aP(o){setTimeout(function(){throw o})}function Ah(o,s){var p=s,h=0;do{var v=p.nextSibling;if(o.removeChild(p),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(h===0){o.removeChild(v),xc(s);return}h--}else p!=="$"&&p!=="$?"&&p!=="$!"||h++;p=v}while(p);xc(s)}function po(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function K0(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var p=o.data;if(p==="$"||p==="$!"||p==="$?"){if(s===0)return o;s--}else p==="/$"&&s++}o=o.previousSibling}return null}var ys=Math.random().toString(36).slice(2),Qi="__reactFiber$"+ys,Mc="__reactProps$"+ys,gr="__reactContainer$"+ys,Dh="__reactEvents$"+ys,sP="__reactListeners$"+ys,cP="__reactHandles$"+ys;function pa(o){var s=o[Qi];if(s)return s;for(var p=o.parentNode;p;){if(s=p[gr]||p[Qi]){if(p=s.alternate,s.child!==null||p!==null&&p.child!==null)for(o=K0(o);o!==null;){if(p=o[Qi])return p;o=K0(o)}return s}o=p,p=o.parentNode}return null}function Nc(o){return o=o[Qi]||o[gr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function _s(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function Lu(o){return o[Mc]||null}var kh=[],Es=-1;function fo(o){return{current:o}}function wt(o){0>Es||(o.current=kh[Es],kh[Es]=null,Es--)}function Et(o,s){Es++,kh[Es]=o.current,o.current=s}var ho={},yn=fo(ho),Bn=fo(!1),fa=ho;function xs(o,s){var p=o.type.contextTypes;if(!p)return ho;var h=o.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var v={},y;for(y in p)v[y]=s[y];return h&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=v),v}function $n(o){return o=o.childContextTypes,o!=null}function Bu(){wt(Bn),wt(yn)}function q0(o,s,p){if(yn.current!==ho)throw Error(n(168));Et(yn,s),Et(Bn,p)}function X0(o,s,p){var h=o.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return p;h=h.getChildContext();for(var v in h)if(!(v in s))throw Error(n(108,B(o)||"Unknown",v));return E({},p,h)}function $u(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ho,fa=yn.current,Et(yn,o),Et(Bn,Bn.current),!0}function Q0(o,s,p){var h=o.stateNode;if(!h)throw Error(n(169));p?(o=X0(o,s,fa),h.__reactInternalMemoizedMergedChildContext=o,wt(Bn),wt(yn),Et(yn,o)):wt(Bn),Et(Bn,p)}var yr=null,Fu=!1,Mh=!1;function Z0(o){yr===null?yr=[o]:yr.push(o)}function lP(o){Fu=!0,Z0(o)}function mo(){if(!Mh&&yr!==null){Mh=!0;var o=0,s=k;try{var p=yr;for(k=1;o<p.length;o++){var h=p[o];do h=h(!0);while(h!==null)}yr=null,Fu=!1}catch(v){throw yr!==null&&(yr=yr.slice(o+1)),ca(qi,mo),v}finally{k=s,Mh=!1}}return null}var ws=[],bs=0,ju=null,zu=0,di=[],hi=0,da=null,_r=1,Er="";function ha(o,s){ws[bs++]=zu,ws[bs++]=ju,ju=o,zu=s}function J0(o,s,p){di[hi++]=_r,di[hi++]=Er,di[hi++]=da,da=o;var h=_r;o=Er;var v=32-gn(h)-1;h&=~(1<<v),p+=1;var y=32-gn(s)+v;if(30<y){var P=v-v%5;y=(h&(1<<P)-1).toString(32),h>>=P,v-=P,_r=1<<32-gn(s)+v|p<<v|h,Er=y+o}else _r=1<<y|p<<v|h,Er=o}function Nh(o){o.return!==null&&(ha(o,1),J0(o,1,0))}function Ih(o){for(;o===ju;)ju=ws[--bs],ws[bs]=null,zu=ws[--bs],ws[bs]=null;for(;o===da;)da=di[--hi],di[hi]=null,Er=di[--hi],di[hi]=null,_r=di[--hi],di[hi]=null}var Jn=null,ei=null,Pt=!1,ki=null;function e_(o,s){var p=yi(5,null,null,0);p.elementType="DELETED",p.stateNode=s,p.return=o,s=o.deletions,s===null?(o.deletions=[p],o.flags|=16):s.push(p)}function t_(o,s){switch(o.tag){case 5:var p=o.type;return s=s.nodeType!==1||p.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,Jn=o,ei=po(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,Jn=o,ei=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(p=da!==null?{id:_r,overflow:Er}:null,o.memoizedState={dehydrated:s,treeContext:p,retryLane:1073741824},p=yi(18,null,null,0),p.stateNode=s,p.return=o,o.child=p,Jn=o,ei=null,!0):!1;default:return!1}}function Oh(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Lh(o){if(Pt){var s=ei;if(s){var p=s;if(!t_(o,s)){if(Oh(o))throw Error(n(418));s=po(p.nextSibling);var h=Jn;s&&t_(o,s)?e_(h,p):(o.flags=o.flags&-4097|2,Pt=!1,Jn=o)}}else{if(Oh(o))throw Error(n(418));o.flags=o.flags&-4097|2,Pt=!1,Jn=o}}}function n_(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Jn=o}function Hu(o){if(o!==Jn)return!1;if(!Pt)return n_(o),Pt=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!Ph(o.type,o.memoizedProps)),s&&(s=ei)){if(Oh(o))throw i_(),Error(n(418));for(;s;)e_(o,s),s=po(s.nextSibling)}if(n_(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var p=o.data;if(p==="/$"){if(s===0){ei=po(o.nextSibling);break e}s--}else p!=="$"&&p!=="$!"&&p!=="$?"||s++}o=o.nextSibling}ei=null}}else ei=Jn?po(o.stateNode.nextSibling):null;return!0}function i_(){for(var o=ei;o;)o=po(o.nextSibling)}function Ss(){ei=Jn=null,Pt=!1}function Bh(o){ki===null?ki=[o]:ki.push(o)}var uP=A.ReactCurrentBatchConfig;function Ic(o,s,p){if(o=p.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(p._owner){if(p=p._owner,p){if(p.tag!==1)throw Error(n(309));var h=p.stateNode}if(!h)throw Error(n(147,o));var v=h,y=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(P){var F=v.refs;P===null?delete F[y]:F[y]=P},s._stringRef=y,s)}if(typeof o!="string")throw Error(n(284));if(!p._owner)throw Error(n(290,o))}return o}function Vu(o,s){throw o=Object.prototype.toString.call(s),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function r_(o){var s=o._init;return s(o._payload)}function o_(o){function s(te,X){if(o){var ie=te.deletions;ie===null?(te.deletions=[X],te.flags|=16):ie.push(X)}}function p(te,X){if(!o)return null;for(;X!==null;)s(te,X),X=X.sibling;return null}function h(te,X){for(te=new Map;X!==null;)X.key!==null?te.set(X.key,X):te.set(X.index,X),X=X.sibling;return te}function v(te,X){return te=bo(te,X),te.index=0,te.sibling=null,te}function y(te,X,ie){return te.index=ie,o?(ie=te.alternate,ie!==null?(ie=ie.index,ie<X?(te.flags|=2,X):ie):(te.flags|=2,X)):(te.flags|=1048576,X)}function P(te){return o&&te.alternate===null&&(te.flags|=2),te}function F(te,X,ie,ye){return X===null||X.tag!==6?(X=Rm(ie,te.mode,ye),X.return=te,X):(X=v(X,ie),X.return=te,X)}function K(te,X,ie,ye){var $e=ie.type;return $e===L?he(te,X,ie.props.children,ye,ie.key):X!==null&&(X.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===Me&&r_($e)===X.type)?(ye=v(X,ie.props),ye.ref=Ic(te,X,ie),ye.return=te,ye):(ye=dp(ie.type,ie.key,ie.props,null,te.mode,ye),ye.ref=Ic(te,X,ie),ye.return=te,ye)}function oe(te,X,ie,ye){return X===null||X.tag!==4||X.stateNode.containerInfo!==ie.containerInfo||X.stateNode.implementation!==ie.implementation?(X=Am(ie,te.mode,ye),X.return=te,X):(X=v(X,ie.children||[]),X.return=te,X)}function he(te,X,ie,ye,$e){return X===null||X.tag!==7?(X=wa(ie,te.mode,ye,$e),X.return=te,X):(X=v(X,ie),X.return=te,X)}function ge(te,X,ie){if(typeof X=="string"&&X!==""||typeof X=="number")return X=Rm(""+X,te.mode,ie),X.return=te,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case j:return ie=dp(X.type,X.key,X.props,null,te.mode,ie),ie.ref=Ic(te,null,X),ie.return=te,ie;case G:return X=Am(X,te.mode,ie),X.return=te,X;case Me:var ye=X._init;return ge(te,ye(X._payload),ie)}if(Ie(X)||N(X))return X=wa(X,te.mode,ie,null),X.return=te,X;Vu(te,X)}return null}function fe(te,X,ie,ye){var $e=X!==null?X.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return $e!==null?null:F(te,X,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case j:return ie.key===$e?K(te,X,ie,ye):null;case G:return ie.key===$e?oe(te,X,ie,ye):null;case Me:return $e=ie._init,fe(te,X,$e(ie._payload),ye)}if(Ie(ie)||N(ie))return $e!==null?null:he(te,X,ie,ye,null);Vu(te,ie)}return null}function Re(te,X,ie,ye,$e){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return te=te.get(ie)||null,F(X,te,""+ye,$e);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case j:return te=te.get(ye.key===null?ie:ye.key)||null,K(X,te,ye,$e);case G:return te=te.get(ye.key===null?ie:ye.key)||null,oe(X,te,ye,$e);case Me:var Ue=ye._init;return Re(te,X,ie,Ue(ye._payload),$e)}if(Ie(ye)||N(ye))return te=te.get(ie)||null,he(X,te,ye,$e,null);Vu(X,ye)}return null}function Ne(te,X,ie,ye){for(var $e=null,Ue=null,We=X,Qe=X=0,on=null;We!==null&&Qe<ie.length;Qe++){We.index>Qe?(on=We,We=null):on=We.sibling;var vt=fe(te,We,ie[Qe],ye);if(vt===null){We===null&&(We=on);break}o&&We&&vt.alternate===null&&s(te,We),X=y(vt,X,Qe),Ue===null?$e=vt:Ue.sibling=vt,Ue=vt,We=on}if(Qe===ie.length)return p(te,We),Pt&&ha(te,Qe),$e;if(We===null){for(;Qe<ie.length;Qe++)We=ge(te,ie[Qe],ye),We!==null&&(X=y(We,X,Qe),Ue===null?$e=We:Ue.sibling=We,Ue=We);return Pt&&ha(te,Qe),$e}for(We=h(te,We);Qe<ie.length;Qe++)on=Re(We,te,Qe,ie[Qe],ye),on!==null&&(o&&on.alternate!==null&&We.delete(on.key===null?Qe:on.key),X=y(on,X,Qe),Ue===null?$e=on:Ue.sibling=on,Ue=on);return o&&We.forEach(function(So){return s(te,So)}),Pt&&ha(te,Qe),$e}function Le(te,X,ie,ye){var $e=N(ie);if(typeof $e!="function")throw Error(n(150));if(ie=$e.call(ie),ie==null)throw Error(n(151));for(var Ue=$e=null,We=X,Qe=X=0,on=null,vt=ie.next();We!==null&&!vt.done;Qe++,vt=ie.next()){We.index>Qe?(on=We,We=null):on=We.sibling;var So=fe(te,We,vt.value,ye);if(So===null){We===null&&(We=on);break}o&&We&&So.alternate===null&&s(te,We),X=y(So,X,Qe),Ue===null?$e=So:Ue.sibling=So,Ue=So,We=on}if(vt.done)return p(te,We),Pt&&ha(te,Qe),$e;if(We===null){for(;!vt.done;Qe++,vt=ie.next())vt=ge(te,vt.value,ye),vt!==null&&(X=y(vt,X,Qe),Ue===null?$e=vt:Ue.sibling=vt,Ue=vt);return Pt&&ha(te,Qe),$e}for(We=h(te,We);!vt.done;Qe++,vt=ie.next())vt=Re(We,te,Qe,vt.value,ye),vt!==null&&(o&&vt.alternate!==null&&We.delete(vt.key===null?Qe:vt.key),X=y(vt,X,Qe),Ue===null?$e=vt:Ue.sibling=vt,Ue=vt);return o&&We.forEach(function(VP){return s(te,VP)}),Pt&&ha(te,Qe),$e}function jt(te,X,ie,ye){if(typeof ie=="object"&&ie!==null&&ie.type===L&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case j:e:{for(var $e=ie.key,Ue=X;Ue!==null;){if(Ue.key===$e){if($e=ie.type,$e===L){if(Ue.tag===7){p(te,Ue.sibling),X=v(Ue,ie.props.children),X.return=te,te=X;break e}}else if(Ue.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===Me&&r_($e)===Ue.type){p(te,Ue.sibling),X=v(Ue,ie.props),X.ref=Ic(te,Ue,ie),X.return=te,te=X;break e}p(te,Ue);break}else s(te,Ue);Ue=Ue.sibling}ie.type===L?(X=wa(ie.props.children,te.mode,ye,ie.key),X.return=te,te=X):(ye=dp(ie.type,ie.key,ie.props,null,te.mode,ye),ye.ref=Ic(te,X,ie),ye.return=te,te=ye)}return P(te);case G:e:{for(Ue=ie.key;X!==null;){if(X.key===Ue)if(X.tag===4&&X.stateNode.containerInfo===ie.containerInfo&&X.stateNode.implementation===ie.implementation){p(te,X.sibling),X=v(X,ie.children||[]),X.return=te,te=X;break e}else{p(te,X);break}else s(te,X);X=X.sibling}X=Am(ie,te.mode,ye),X.return=te,te=X}return P(te);case Me:return Ue=ie._init,jt(te,X,Ue(ie._payload),ye)}if(Ie(ie))return Ne(te,X,ie,ye);if(N(ie))return Le(te,X,ie,ye);Vu(te,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,X!==null&&X.tag===6?(p(te,X.sibling),X=v(X,ie),X.return=te,te=X):(p(te,X),X=Rm(ie,te.mode,ye),X.return=te,te=X),P(te)):p(te,X)}return jt}var Cs=o_(!0),a_=o_(!1),Gu=fo(null),Uu=null,Ts=null,$h=null;function Fh(){$h=Ts=Uu=null}function jh(o){var s=Gu.current;wt(Gu),o._currentValue=s}function zh(o,s,p){for(;o!==null;){var h=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),o===p)break;o=o.return}}function Ps(o,s){Uu=o,$h=Ts=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&s&&(Fn=!0),o.firstContext=null)}function mi(o){var s=o._currentValue;if($h!==o)if(o={context:o,memoizedValue:s,next:null},Ts===null){if(Uu===null)throw Error(n(308));Ts=o,Uu.dependencies={lanes:0,firstContext:o}}else Ts=Ts.next=o;return s}var ma=null;function Hh(o){ma===null?ma=[o]:ma.push(o)}function s_(o,s,p,h){var v=s.interleaved;return v===null?(p.next=p,Hh(s)):(p.next=v.next,v.next=p),s.interleaved=p,xr(o,h)}function xr(o,s){o.lanes|=s;var p=o.alternate;for(p!==null&&(p.lanes|=s),p=o,o=o.return;o!==null;)o.childLanes|=s,p=o.alternate,p!==null&&(p.childLanes|=s),p=o,o=o.return;return p.tag===3?p.stateNode:null}var vo=!1;function Vh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c_(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function wr(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function go(o,s,p){var h=o.updateQueue;if(h===null)return null;if(h=h.shared,ht&2){var v=h.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),h.pending=s,xr(o,p)}return v=h.interleaved,v===null?(s.next=s,Hh(h)):(s.next=v.next,v.next=s),h.interleaved=s,xr(o,p)}function Wu(o,s,p){if(s=s.updateQueue,s!==null&&(s=s.shared,(p&4194240)!==0)){var h=s.lanes;h&=o.pendingLanes,p|=h,s.lanes=p,R(o,p)}}function l_(o,s){var p=o.updateQueue,h=o.alternate;if(h!==null&&(h=h.updateQueue,p===h)){var v=null,y=null;if(p=p.firstBaseUpdate,p!==null){do{var P={eventTime:p.eventTime,lane:p.lane,tag:p.tag,payload:p.payload,callback:p.callback,next:null};y===null?v=y=P:y=y.next=P,p=p.next}while(p!==null);y===null?v=y=s:y=y.next=s}else v=y=s;p={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:y,shared:h.shared,effects:h.effects},o.updateQueue=p;return}o=p.lastBaseUpdate,o===null?p.firstBaseUpdate=s:o.next=s,p.lastBaseUpdate=s}function Yu(o,s,p,h){var v=o.updateQueue;vo=!1;var y=v.firstBaseUpdate,P=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var K=F,oe=K.next;K.next=null,P===null?y=oe:P.next=oe,P=K;var he=o.alternate;he!==null&&(he=he.updateQueue,F=he.lastBaseUpdate,F!==P&&(F===null?he.firstBaseUpdate=oe:F.next=oe,he.lastBaseUpdate=K))}if(y!==null){var ge=v.baseState;P=0,he=oe=K=null,F=y;do{var fe=F.lane,Re=F.eventTime;if((h&fe)===fe){he!==null&&(he=he.next={eventTime:Re,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Ne=o,Le=F;switch(fe=s,Re=p,Le.tag){case 1:if(Ne=Le.payload,typeof Ne=="function"){ge=Ne.call(Re,ge,fe);break e}ge=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Le.payload,fe=typeof Ne=="function"?Ne.call(Re,ge,fe):Ne,fe==null)break e;ge=E({},ge,fe);break e;case 2:vo=!0}}F.callback!==null&&F.lane!==0&&(o.flags|=64,fe=v.effects,fe===null?v.effects=[F]:fe.push(F))}else Re={eventTime:Re,lane:fe,tag:F.tag,payload:F.payload,callback:F.callback,next:null},he===null?(oe=he=Re,K=ge):he=he.next=Re,P|=fe;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;fe=F,F=fe.next,fe.next=null,v.lastBaseUpdate=fe,v.shared.pending=null}}while(!0);if(he===null&&(K=ge),v.baseState=K,v.firstBaseUpdate=oe,v.lastBaseUpdate=he,s=v.shared.interleaved,s!==null){v=s;do P|=v.lane,v=v.next;while(v!==s)}else y===null&&(v.shared.lanes=0);ya|=P,o.lanes=P,o.memoizedState=ge}}function u_(o,s,p){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var h=o[s],v=h.callback;if(v!==null){if(h.callback=null,h=p,typeof v!="function")throw Error(n(191,v));v.call(h)}}}var Oc={},Zi=fo(Oc),Lc=fo(Oc),Bc=fo(Oc);function va(o){if(o===Oc)throw Error(n(174));return o}function Gh(o,s){switch(Et(Bc,s),Et(Lc,o),Et(Zi,Oc),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Yr(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=Yr(s,o)}wt(Zi),Et(Zi,s)}function Rs(){wt(Zi),wt(Lc),wt(Bc)}function p_(o){va(Bc.current);var s=va(Zi.current),p=Yr(s,o.type);s!==p&&(Et(Lc,o),Et(Zi,p))}function Uh(o){Lc.current===o&&(wt(Zi),wt(Lc))}var Rt=fo(0);function Ku(o){for(var s=o;s!==null;){if(s.tag===13){var p=s.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||p.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wh=[];function Yh(){for(var o=0;o<Wh.length;o++)Wh[o]._workInProgressVersionPrimary=null;Wh.length=0}var qu=A.ReactCurrentDispatcher,Kh=A.ReactCurrentBatchConfig,ga=0,At=null,Kt=null,nn=null,Xu=!1,$c=!1,Fc=0,pP=0;function _n(){throw Error(n(321))}function qh(o,s){if(s===null)return!1;for(var p=0;p<s.length&&p<o.length;p++)if(!Di(o[p],s[p]))return!1;return!0}function Xh(o,s,p,h,v,y){if(ga=y,At=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,qu.current=o===null||o.memoizedState===null?mP:vP,o=p(h,v),$c){y=0;do{if($c=!1,Fc=0,25<=y)throw Error(n(301));y+=1,nn=Kt=null,s.updateQueue=null,qu.current=gP,o=p(h,v)}while($c)}if(qu.current=Ju,s=Kt!==null&&Kt.next!==null,ga=0,nn=Kt=At=null,Xu=!1,s)throw Error(n(300));return o}function Qh(){var o=Fc!==0;return Fc=0,o}function Ji(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?At.memoizedState=nn=o:nn=nn.next=o,nn}function vi(){if(Kt===null){var o=At.alternate;o=o!==null?o.memoizedState:null}else o=Kt.next;var s=nn===null?At.memoizedState:nn.next;if(s!==null)nn=s,Kt=o;else{if(o===null)throw Error(n(310));Kt=o,o={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},nn===null?At.memoizedState=nn=o:nn=nn.next=o}return nn}function jc(o,s){return typeof s=="function"?s(o):s}function Zh(o){var s=vi(),p=s.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var h=Kt,v=h.baseQueue,y=p.pending;if(y!==null){if(v!==null){var P=v.next;v.next=y.next,y.next=P}h.baseQueue=v=y,p.pending=null}if(v!==null){y=v.next,h=h.baseState;var F=P=null,K=null,oe=y;do{var he=oe.lane;if((ga&he)===he)K!==null&&(K=K.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),h=oe.hasEagerState?oe.eagerState:o(h,oe.action);else{var ge={lane:he,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};K===null?(F=K=ge,P=h):K=K.next=ge,At.lanes|=he,ya|=he}oe=oe.next}while(oe!==null&&oe!==y);K===null?P=h:K.next=F,Di(h,s.memoizedState)||(Fn=!0),s.memoizedState=h,s.baseState=P,s.baseQueue=K,p.lastRenderedState=h}if(o=p.interleaved,o!==null){v=o;do y=v.lane,At.lanes|=y,ya|=y,v=v.next;while(v!==o)}else v===null&&(p.lanes=0);return[s.memoizedState,p.dispatch]}function Jh(o){var s=vi(),p=s.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=o;var h=p.dispatch,v=p.pending,y=s.memoizedState;if(v!==null){p.pending=null;var P=v=v.next;do y=o(y,P.action),P=P.next;while(P!==v);Di(y,s.memoizedState)||(Fn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),p.lastRenderedState=y}return[y,h]}function f_(){}function d_(o,s){var p=At,h=vi(),v=s(),y=!Di(h.memoizedState,v);if(y&&(h.memoizedState=v,Fn=!0),h=h.queue,em(v_.bind(null,p,h,o),[o]),h.getSnapshot!==s||y||nn!==null&&nn.memoizedState.tag&1){if(p.flags|=2048,zc(9,m_.bind(null,p,h,v,s),void 0,null),rn===null)throw Error(n(349));ga&30||h_(p,s,v)}return v}function h_(o,s,p){o.flags|=16384,o={getSnapshot:s,value:p},s=At.updateQueue,s===null?(s={lastEffect:null,stores:null},At.updateQueue=s,s.stores=[o]):(p=s.stores,p===null?s.stores=[o]:p.push(o))}function m_(o,s,p,h){s.value=p,s.getSnapshot=h,g_(s)&&y_(o)}function v_(o,s,p){return p(function(){g_(s)&&y_(o)})}function g_(o){var s=o.getSnapshot;o=o.value;try{var p=s();return!Di(o,p)}catch{return!0}}function y_(o){var s=xr(o,1);s!==null&&Oi(s,o,1,-1)}function __(o){var s=Ji();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jc,lastRenderedState:o},s.queue=o,o=o.dispatch=hP.bind(null,At,o),[s.memoizedState,o]}function zc(o,s,p,h){return o={tag:o,create:s,destroy:p,deps:h,next:null},s=At.updateQueue,s===null?(s={lastEffect:null,stores:null},At.updateQueue=s,s.lastEffect=o.next=o):(p=s.lastEffect,p===null?s.lastEffect=o.next=o:(h=p.next,p.next=o,o.next=h,s.lastEffect=o)),o}function E_(){return vi().memoizedState}function Qu(o,s,p,h){var v=Ji();At.flags|=o,v.memoizedState=zc(1|s,p,void 0,h===void 0?null:h)}function Zu(o,s,p,h){var v=vi();h=h===void 0?null:h;var y=void 0;if(Kt!==null){var P=Kt.memoizedState;if(y=P.destroy,h!==null&&qh(h,P.deps)){v.memoizedState=zc(s,p,y,h);return}}At.flags|=o,v.memoizedState=zc(1|s,p,y,h)}function x_(o,s){return Qu(8390656,8,o,s)}function em(o,s){return Zu(2048,8,o,s)}function w_(o,s){return Zu(4,2,o,s)}function b_(o,s){return Zu(4,4,o,s)}function S_(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function C_(o,s,p){return p=p!=null?p.concat([o]):null,Zu(4,4,S_.bind(null,s,o),p)}function tm(){}function T_(o,s){var p=vi();s=s===void 0?null:s;var h=p.memoizedState;return h!==null&&s!==null&&qh(s,h[1])?h[0]:(p.memoizedState=[o,s],o)}function P_(o,s){var p=vi();s=s===void 0?null:s;var h=p.memoizedState;return h!==null&&s!==null&&qh(s,h[1])?h[0]:(o=o(),p.memoizedState=[o,s],o)}function R_(o,s,p){return ga&21?(Di(p,s)||(p=us(),At.lanes|=p,ya|=p,o.baseState=!0),s):(o.baseState&&(o.baseState=!1,Fn=!0),o.memoizedState=p)}function fP(o,s){var p=k;k=p!==0&&4>p?p:4,o(!0);var h=Kh.transition;Kh.transition={};try{o(!1),s()}finally{k=p,Kh.transition=h}}function A_(){return vi().memoizedState}function dP(o,s,p){var h=xo(o);if(p={lane:h,action:p,hasEagerState:!1,eagerState:null,next:null},D_(o))k_(s,p);else if(p=s_(o,s,p,h),p!==null){var v=Rn();Oi(p,o,h,v),M_(p,s,h)}}function hP(o,s,p){var h=xo(o),v={lane:h,action:p,hasEagerState:!1,eagerState:null,next:null};if(D_(o))k_(s,v);else{var y=o.alternate;if(o.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var P=s.lastRenderedState,F=y(P,p);if(v.hasEagerState=!0,v.eagerState=F,Di(F,P)){var K=s.interleaved;K===null?(v.next=v,Hh(s)):(v.next=K.next,K.next=v),s.interleaved=v;return}}catch{}finally{}p=s_(o,s,v,h),p!==null&&(v=Rn(),Oi(p,o,h,v),M_(p,s,h))}}function D_(o){var s=o.alternate;return o===At||s!==null&&s===At}function k_(o,s){$c=Xu=!0;var p=o.pending;p===null?s.next=s:(s.next=p.next,p.next=s),o.pending=s}function M_(o,s,p){if(p&4194240){var h=s.lanes;h&=o.pendingLanes,p|=h,s.lanes=p,R(o,p)}}var Ju={readContext:mi,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},mP={readContext:mi,useCallback:function(o,s){return Ji().memoizedState=[o,s===void 0?null:s],o},useContext:mi,useEffect:x_,useImperativeHandle:function(o,s,p){return p=p!=null?p.concat([o]):null,Qu(4194308,4,S_.bind(null,s,o),p)},useLayoutEffect:function(o,s){return Qu(4194308,4,o,s)},useInsertionEffect:function(o,s){return Qu(4,2,o,s)},useMemo:function(o,s){var p=Ji();return s=s===void 0?null:s,o=o(),p.memoizedState=[o,s],o},useReducer:function(o,s,p){var h=Ji();return s=p!==void 0?p(s):s,h.memoizedState=h.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},h.queue=o,o=o.dispatch=dP.bind(null,At,o),[h.memoizedState,o]},useRef:function(o){var s=Ji();return o={current:o},s.memoizedState=o},useState:__,useDebugValue:tm,useDeferredValue:function(o){return Ji().memoizedState=o},useTransition:function(){var o=__(!1),s=o[0];return o=fP.bind(null,o[1]),Ji().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,p){var h=At,v=Ji();if(Pt){if(p===void 0)throw Error(n(407));p=p()}else{if(p=s(),rn===null)throw Error(n(349));ga&30||h_(h,s,p)}v.memoizedState=p;var y={value:p,getSnapshot:s};return v.queue=y,x_(v_.bind(null,h,y,o),[o]),h.flags|=2048,zc(9,m_.bind(null,h,y,p,s),void 0,null),p},useId:function(){var o=Ji(),s=rn.identifierPrefix;if(Pt){var p=Er,h=_r;p=(h&~(1<<32-gn(h)-1)).toString(32)+p,s=":"+s+"R"+p,p=Fc++,0<p&&(s+="H"+p.toString(32)),s+=":"}else p=pP++,s=":"+s+"r"+p.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},vP={readContext:mi,useCallback:T_,useContext:mi,useEffect:em,useImperativeHandle:C_,useInsertionEffect:w_,useLayoutEffect:b_,useMemo:P_,useReducer:Zh,useRef:E_,useState:function(){return Zh(jc)},useDebugValue:tm,useDeferredValue:function(o){var s=vi();return R_(s,Kt.memoizedState,o)},useTransition:function(){var o=Zh(jc)[0],s=vi().memoizedState;return[o,s]},useMutableSource:f_,useSyncExternalStore:d_,useId:A_,unstable_isNewReconciler:!1},gP={readContext:mi,useCallback:T_,useContext:mi,useEffect:em,useImperativeHandle:C_,useInsertionEffect:w_,useLayoutEffect:b_,useMemo:P_,useReducer:Jh,useRef:E_,useState:function(){return Jh(jc)},useDebugValue:tm,useDeferredValue:function(o){var s=vi();return Kt===null?s.memoizedState=o:R_(s,Kt.memoizedState,o)},useTransition:function(){var o=Jh(jc)[0],s=vi().memoizedState;return[o,s]},useMutableSource:f_,useSyncExternalStore:d_,useId:A_,unstable_isNewReconciler:!1};function Mi(o,s){if(o&&o.defaultProps){s=E({},s),o=o.defaultProps;for(var p in o)s[p]===void 0&&(s[p]=o[p]);return s}return s}function nm(o,s,p,h){s=o.memoizedState,p=p(h,s),p=p==null?s:E({},s,p),o.memoizedState=p,o.lanes===0&&(o.updateQueue.baseState=p)}var ep={isMounted:function(o){return(o=o._reactInternals)?Ki(o)===o:!1},enqueueSetState:function(o,s,p){o=o._reactInternals;var h=Rn(),v=xo(o),y=wr(h,v);y.payload=s,p!=null&&(y.callback=p),s=go(o,y,v),s!==null&&(Oi(s,o,v,h),Wu(s,o,v))},enqueueReplaceState:function(o,s,p){o=o._reactInternals;var h=Rn(),v=xo(o),y=wr(h,v);y.tag=1,y.payload=s,p!=null&&(y.callback=p),s=go(o,y,v),s!==null&&(Oi(s,o,v,h),Wu(s,o,v))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var p=Rn(),h=xo(o),v=wr(p,h);v.tag=2,s!=null&&(v.callback=s),s=go(o,v,h),s!==null&&(Oi(s,o,h,p),Wu(s,o,h))}};function N_(o,s,p,h,v,y,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(h,y,P):s.prototype&&s.prototype.isPureReactComponent?!Pc(p,h)||!Pc(v,y):!0}function I_(o,s,p){var h=!1,v=ho,y=s.contextType;return typeof y=="object"&&y!==null?y=mi(y):(v=$n(s)?fa:yn.current,h=s.contextTypes,y=(h=h!=null)?xs(o,v):ho),s=new s(p,y),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ep,o.stateNode=s,s._reactInternals=o,h&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=v,o.__reactInternalMemoizedMaskedChildContext=y),s}function O_(o,s,p,h){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(p,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(p,h),s.state!==o&&ep.enqueueReplaceState(s,s.state,null)}function im(o,s,p,h){var v=o.stateNode;v.props=p,v.state=o.memoizedState,v.refs={},Vh(o);var y=s.contextType;typeof y=="object"&&y!==null?v.context=mi(y):(y=$n(s)?fa:yn.current,v.context=xs(o,y)),v.state=o.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(nm(o,s,y,p),v.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(s=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),s!==v.state&&ep.enqueueReplaceState(v,v.state,null),Yu(o,p,v,h),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308)}function As(o,s){try{var p="",h=s;do p+=V(h),h=h.return;while(h);var v=p}catch(y){v=`
Error generating stack: `+y.message+`
`+y.stack}return{value:o,source:s,stack:v,digest:null}}function rm(o,s,p){return{value:o,source:null,stack:p??null,digest:s??null}}function om(o,s){try{console.error(s.value)}catch(p){setTimeout(function(){throw p})}}var yP=typeof WeakMap=="function"?WeakMap:Map;function L_(o,s,p){p=wr(-1,p),p.tag=3,p.payload={element:null};var h=s.value;return p.callback=function(){sp||(sp=!0,Em=h),om(o,s)},p}function B_(o,s,p){p=wr(-1,p),p.tag=3;var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var v=s.value;p.payload=function(){return h(v)},p.callback=function(){om(o,s)}}var y=o.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(p.callback=function(){om(o,s),typeof h!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var P=s.stack;this.componentDidCatch(s.value,{componentStack:P!==null?P:""})}),p}function $_(o,s,p){var h=o.pingCache;if(h===null){h=o.pingCache=new yP;var v=new Set;h.set(s,v)}else v=h.get(s),v===void 0&&(v=new Set,h.set(s,v));v.has(p)||(v.add(p),o=MP.bind(null,o,s,p),s.then(o,o))}function F_(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function j_(o,s,p,h,v){return o.mode&1?(o.flags|=65536,o.lanes=v,o):(o===s?o.flags|=65536:(o.flags|=128,p.flags|=131072,p.flags&=-52805,p.tag===1&&(p.alternate===null?p.tag=17:(s=wr(-1,1),s.tag=2,go(p,s,1))),p.lanes|=1),o)}var _P=A.ReactCurrentOwner,Fn=!1;function Pn(o,s,p,h){s.child=o===null?a_(s,null,p,h):Cs(s,o.child,p,h)}function z_(o,s,p,h,v){p=p.render;var y=s.ref;return Ps(s,v),h=Xh(o,s,p,h,y,v),p=Qh(),o!==null&&!Fn?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~v,br(o,s,v)):(Pt&&p&&Nh(s),s.flags|=1,Pn(o,s,h,v),s.child)}function H_(o,s,p,h,v){if(o===null){var y=p.type;return typeof y=="function"&&!Pm(y)&&y.defaultProps===void 0&&p.compare===null&&p.defaultProps===void 0?(s.tag=15,s.type=y,V_(o,s,y,h,v)):(o=dp(p.type,null,h,s,s.mode,v),o.ref=s.ref,o.return=s,s.child=o)}if(y=o.child,!(o.lanes&v)){var P=y.memoizedProps;if(p=p.compare,p=p!==null?p:Pc,p(P,h)&&o.ref===s.ref)return br(o,s,v)}return s.flags|=1,o=bo(y,h),o.ref=s.ref,o.return=s,s.child=o}function V_(o,s,p,h,v){if(o!==null){var y=o.memoizedProps;if(Pc(y,h)&&o.ref===s.ref)if(Fn=!1,s.pendingProps=h=y,(o.lanes&v)!==0)o.flags&131072&&(Fn=!0);else return s.lanes=o.lanes,br(o,s,v)}return am(o,s,p,h,v)}function G_(o,s,p){var h=s.pendingProps,v=h.children,y=o!==null?o.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ks,ti),ti|=p;else{if(!(p&1073741824))return o=y!==null?y.baseLanes|p:p,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,Et(ks,ti),ti|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:p,Et(ks,ti),ti|=h}else y!==null?(h=y.baseLanes|p,s.memoizedState=null):h=p,Et(ks,ti),ti|=h;return Pn(o,s,v,p),s.child}function U_(o,s){var p=s.ref;(o===null&&p!==null||o!==null&&o.ref!==p)&&(s.flags|=512,s.flags|=2097152)}function am(o,s,p,h,v){var y=$n(p)?fa:yn.current;return y=xs(s,y),Ps(s,v),p=Xh(o,s,p,h,y,v),h=Qh(),o!==null&&!Fn?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~v,br(o,s,v)):(Pt&&h&&Nh(s),s.flags|=1,Pn(o,s,p,v),s.child)}function W_(o,s,p,h,v){if($n(p)){var y=!0;$u(s)}else y=!1;if(Ps(s,v),s.stateNode===null)np(o,s),I_(s,p,h),im(s,p,h,v),h=!0;else if(o===null){var P=s.stateNode,F=s.memoizedProps;P.props=F;var K=P.context,oe=p.contextType;typeof oe=="object"&&oe!==null?oe=mi(oe):(oe=$n(p)?fa:yn.current,oe=xs(s,oe));var he=p.getDerivedStateFromProps,ge=typeof he=="function"||typeof P.getSnapshotBeforeUpdate=="function";ge||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(F!==h||K!==oe)&&O_(s,P,h,oe),vo=!1;var fe=s.memoizedState;P.state=fe,Yu(s,h,P,v),K=s.memoizedState,F!==h||fe!==K||Bn.current||vo?(typeof he=="function"&&(nm(s,p,he,h),K=s.memoizedState),(F=vo||N_(s,p,F,h,fe,K,oe))?(ge||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(s.flags|=4194308)):(typeof P.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=K),P.props=h,P.state=K,P.context=oe,h=F):(typeof P.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{P=s.stateNode,c_(o,s),F=s.memoizedProps,oe=s.type===s.elementType?F:Mi(s.type,F),P.props=oe,ge=s.pendingProps,fe=P.context,K=p.contextType,typeof K=="object"&&K!==null?K=mi(K):(K=$n(p)?fa:yn.current,K=xs(s,K));var Re=p.getDerivedStateFromProps;(he=typeof Re=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(F!==ge||fe!==K)&&O_(s,P,h,K),vo=!1,fe=s.memoizedState,P.state=fe,Yu(s,h,P,v);var Ne=s.memoizedState;F!==ge||fe!==Ne||Bn.current||vo?(typeof Re=="function"&&(nm(s,p,Re,h),Ne=s.memoizedState),(oe=vo||N_(s,p,oe,h,fe,Ne,K)||!1)?(he||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(h,Ne,K),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(h,Ne,K)),typeof P.componentDidUpdate=="function"&&(s.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof P.componentDidUpdate!="function"||F===o.memoizedProps&&fe===o.memoizedState||(s.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&fe===o.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=Ne),P.props=h,P.state=Ne,P.context=K,h=oe):(typeof P.componentDidUpdate!="function"||F===o.memoizedProps&&fe===o.memoizedState||(s.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&fe===o.memoizedState||(s.flags|=1024),h=!1)}return sm(o,s,p,h,y,v)}function sm(o,s,p,h,v,y){U_(o,s);var P=(s.flags&128)!==0;if(!h&&!P)return v&&Q0(s,p,!1),br(o,s,y);h=s.stateNode,_P.current=s;var F=P&&typeof p.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,o!==null&&P?(s.child=Cs(s,o.child,null,y),s.child=Cs(s,null,F,y)):Pn(o,s,F,y),s.memoizedState=h.state,v&&Q0(s,p,!0),s.child}function Y_(o){var s=o.stateNode;s.pendingContext?q0(o,s.pendingContext,s.pendingContext!==s.context):s.context&&q0(o,s.context,!1),Gh(o,s.containerInfo)}function K_(o,s,p,h,v){return Ss(),Bh(v),s.flags|=256,Pn(o,s,p,h),s.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function lm(o){return{baseLanes:o,cachePool:null,transitions:null}}function q_(o,s,p){var h=s.pendingProps,v=Rt.current,y=!1,P=(s.flags&128)!==0,F;if((F=P)||(F=o!==null&&o.memoizedState===null?!1:(v&2)!==0),F?(y=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(v|=1),Et(Rt,v&1),o===null)return Lh(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(s.mode&1?o.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(P=h.children,o=h.fallback,y?(h=s.mode,y=s.child,P={mode:"hidden",children:P},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=P):y=hp(P,h,0,null),o=wa(o,h,p,null),y.return=s,o.return=s,y.sibling=o,s.child=y,s.child.memoizedState=lm(p),s.memoizedState=cm,o):um(s,P));if(v=o.memoizedState,v!==null&&(F=v.dehydrated,F!==null))return EP(o,s,P,h,F,v,p);if(y){y=h.fallback,P=s.mode,v=o.child,F=v.sibling;var K={mode:"hidden",children:h.children};return!(P&1)&&s.child!==v?(h=s.child,h.childLanes=0,h.pendingProps=K,s.deletions=null):(h=bo(v,K),h.subtreeFlags=v.subtreeFlags&14680064),F!==null?y=bo(F,y):(y=wa(y,P,p,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,P=o.child.memoizedState,P=P===null?lm(p):{baseLanes:P.baseLanes|p,cachePool:null,transitions:P.transitions},y.memoizedState=P,y.childLanes=o.childLanes&~p,s.memoizedState=cm,h}return y=o.child,o=y.sibling,h=bo(y,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=p),h.return=s,h.sibling=null,o!==null&&(p=s.deletions,p===null?(s.deletions=[o],s.flags|=16):p.push(o)),s.child=h,s.memoizedState=null,h}function um(o,s){return s=hp({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function tp(o,s,p,h){return h!==null&&Bh(h),Cs(s,o.child,null,p),o=um(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function EP(o,s,p,h,v,y,P){if(p)return s.flags&256?(s.flags&=-257,h=rm(Error(n(422))),tp(o,s,P,h)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(y=h.fallback,v=s.mode,h=hp({mode:"visible",children:h.children},v,0,null),y=wa(y,v,P,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,s.mode&1&&Cs(s,o.child,null,P),s.child.memoizedState=lm(P),s.memoizedState=cm,y);if(!(s.mode&1))return tp(o,s,P,null);if(v.data==="$!"){if(h=v.nextSibling&&v.nextSibling.dataset,h)var F=h.dgst;return h=F,y=Error(n(419)),h=rm(y,h,void 0),tp(o,s,P,h)}if(F=(P&o.childLanes)!==0,Fn||F){if(h=rn,h!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=v&(h.suspendedLanes|P)?0:v,v!==0&&v!==y.retryLane&&(y.retryLane=v,xr(o,v),Oi(h,o,v,-1))}return Tm(),h=rm(Error(n(421))),tp(o,s,P,h)}return v.data==="$?"?(s.flags|=128,s.child=o.child,s=NP.bind(null,o),v._reactRetry=s,null):(o=y.treeContext,ei=po(v.nextSibling),Jn=s,Pt=!0,ki=null,o!==null&&(di[hi++]=_r,di[hi++]=Er,di[hi++]=da,_r=o.id,Er=o.overflow,da=s),s=um(s,h.children),s.flags|=4096,s)}function X_(o,s,p){o.lanes|=s;var h=o.alternate;h!==null&&(h.lanes|=s),zh(o.return,s,p)}function pm(o,s,p,h,v){var y=o.memoizedState;y===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:p,tailMode:v}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=p,y.tailMode=v)}function Q_(o,s,p){var h=s.pendingProps,v=h.revealOrder,y=h.tail;if(Pn(o,s,h.children,p),h=Rt.current,h&2)h=h&1|2,s.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&X_(o,p,s);else if(o.tag===19)X_(o,p,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}h&=1}if(Et(Rt,h),!(s.mode&1))s.memoizedState=null;else switch(v){case"forwards":for(p=s.child,v=null;p!==null;)o=p.alternate,o!==null&&Ku(o)===null&&(v=p),p=p.sibling;p=v,p===null?(v=s.child,s.child=null):(v=p.sibling,p.sibling=null),pm(s,!1,v,p,y);break;case"backwards":for(p=null,v=s.child,s.child=null;v!==null;){if(o=v.alternate,o!==null&&Ku(o)===null){s.child=v;break}o=v.sibling,v.sibling=p,p=v,v=o}pm(s,!0,p,null,y);break;case"together":pm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function np(o,s){!(s.mode&1)&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function br(o,s,p){if(o!==null&&(s.dependencies=o.dependencies),ya|=s.lanes,!(p&s.childLanes))return null;if(o!==null&&s.child!==o.child)throw Error(n(153));if(s.child!==null){for(o=s.child,p=bo(o,o.pendingProps),s.child=p,p.return=s;o.sibling!==null;)o=o.sibling,p=p.sibling=bo(o,o.pendingProps),p.return=s;p.sibling=null}return s.child}function xP(o,s,p){switch(s.tag){case 3:Y_(s),Ss();break;case 5:p_(s);break;case 1:$n(s.type)&&$u(s);break;case 4:Gh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,v=s.memoizedProps.value;Et(Gu,h._currentValue),h._currentValue=v;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Et(Rt,Rt.current&1),s.flags|=128,null):p&s.child.childLanes?q_(o,s,p):(Et(Rt,Rt.current&1),o=br(o,s,p),o!==null?o.sibling:null);Et(Rt,Rt.current&1);break;case 19:if(h=(p&s.childLanes)!==0,o.flags&128){if(h)return Q_(o,s,p);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Et(Rt,Rt.current),h)break;return null;case 22:case 23:return s.lanes=0,G_(o,s,p)}return br(o,s,p)}var Z_,fm,J_,eE;Z_=function(o,s){for(var p=s.child;p!==null;){if(p.tag===5||p.tag===6)o.appendChild(p.stateNode);else if(p.tag!==4&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break;for(;p.sibling===null;){if(p.return===null||p.return===s)return;p=p.return}p.sibling.return=p.return,p=p.sibling}},fm=function(){},J_=function(o,s,p,h){var v=o.memoizedProps;if(v!==h){o=s.stateNode,va(Zi.current);var y=null;switch(p){case"input":v=se(o,v),h=se(o,h),y=[];break;case"select":v=E({},v,{value:void 0}),h=E({},h,{value:void 0}),y=[];break;case"textarea":v=it(o,v),h=it(o,h),y=[];break;default:typeof v.onClick!="function"&&typeof h.onClick=="function"&&(o.onclick=Ou)}Kr(p,h);var P;p=null;for(oe in v)if(!h.hasOwnProperty(oe)&&v.hasOwnProperty(oe)&&v[oe]!=null)if(oe==="style"){var F=v[oe];for(P in F)F.hasOwnProperty(P)&&(p||(p={}),p[P]="")}else oe!=="dangerouslySetInnerHTML"&&oe!=="children"&&oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&oe!=="autoFocus"&&(r.hasOwnProperty(oe)?y||(y=[]):(y=y||[]).push(oe,null));for(oe in h){var K=h[oe];if(F=v!=null?v[oe]:void 0,h.hasOwnProperty(oe)&&K!==F&&(K!=null||F!=null))if(oe==="style")if(F){for(P in F)!F.hasOwnProperty(P)||K&&K.hasOwnProperty(P)||(p||(p={}),p[P]="");for(P in K)K.hasOwnProperty(P)&&F[P]!==K[P]&&(p||(p={}),p[P]=K[P])}else p||(y||(y=[]),y.push(oe,p)),p=K;else oe==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,F=F?F.__html:void 0,K!=null&&F!==K&&(y=y||[]).push(oe,K)):oe==="children"?typeof K!="string"&&typeof K!="number"||(y=y||[]).push(oe,""+K):oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&(r.hasOwnProperty(oe)?(K!=null&&oe==="onScroll"&&xt("scroll",o),y||F===K||(y=[])):(y=y||[]).push(oe,K))}p&&(y=y||[]).push("style",p);var oe=y;(s.updateQueue=oe)&&(s.flags|=4)}},eE=function(o,s,p,h){p!==h&&(s.flags|=4)};function Hc(o,s){if(!Pt)switch(o.tailMode){case"hidden":s=o.tail;for(var p=null;s!==null;)s.alternate!==null&&(p=s),s=s.sibling;p===null?o.tail=null:p.sibling=null;break;case"collapsed":p=o.tail;for(var h=null;p!==null;)p.alternate!==null&&(h=p),p=p.sibling;h===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:h.sibling=null}}function En(o){var s=o.alternate!==null&&o.alternate.child===o.child,p=0,h=0;if(s)for(var v=o.child;v!==null;)p|=v.lanes|v.childLanes,h|=v.subtreeFlags&14680064,h|=v.flags&14680064,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)p|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=h,o.childLanes=p,s}function wP(o,s,p){var h=s.pendingProps;switch(Ih(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(s),null;case 1:return $n(s.type)&&Bu(),En(s),null;case 3:return h=s.stateNode,Rs(),wt(Bn),wt(yn),Yh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Hu(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ki!==null&&(bm(ki),ki=null))),fm(o,s),En(s),null;case 5:Uh(s);var v=va(Bc.current);if(p=s.type,o!==null&&s.stateNode!=null)J_(o,s,p,h,v),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(n(166));return En(s),null}if(o=va(Zi.current),Hu(s)){h=s.stateNode,p=s.type;var y=s.memoizedProps;switch(h[Qi]=s,h[Mc]=y,o=(s.mode&1)!==0,p){case"dialog":xt("cancel",h),xt("close",h);break;case"iframe":case"object":case"embed":xt("load",h);break;case"video":case"audio":for(v=0;v<Ac.length;v++)xt(Ac[v],h);break;case"source":xt("error",h);break;case"img":case"image":case"link":xt("error",h),xt("load",h);break;case"details":xt("toggle",h);break;case"input":ue(h,y),xt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},xt("invalid",h);break;case"textarea":mt(h,y),xt("invalid",h)}Kr(p,y),v=null;for(var P in y)if(y.hasOwnProperty(P)){var F=y[P];P==="children"?typeof F=="string"?h.textContent!==F&&(y.suppressHydrationWarning!==!0&&Iu(h.textContent,F,o),v=["children",F]):typeof F=="number"&&h.textContent!==""+F&&(y.suppressHydrationWarning!==!0&&Iu(h.textContent,F,o),v=["children",""+F]):r.hasOwnProperty(P)&&F!=null&&P==="onScroll"&&xt("scroll",h)}switch(p){case"input":le(h),Ce(h,y,!0);break;case"textarea":le(h),Oe(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Ou)}h=v,s.updateQueue=h,h!==null&&(s.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ui(p)),o==="http://www.w3.org/1999/xhtml"?p==="script"?(o=P.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof h.is=="string"?o=P.createElement(p,{is:h.is}):(o=P.createElement(p),p==="select"&&(P=o,h.multiple?P.multiple=!0:h.size&&(P.size=h.size))):o=P.createElementNS(o,p),o[Qi]=s,o[Mc]=h,Z_(o,s,!1,!1),s.stateNode=o;e:{switch(P=qr(p,h),p){case"dialog":xt("cancel",o),xt("close",o),v=h;break;case"iframe":case"object":case"embed":xt("load",o),v=h;break;case"video":case"audio":for(v=0;v<Ac.length;v++)xt(Ac[v],o);v=h;break;case"source":xt("error",o),v=h;break;case"img":case"image":case"link":xt("error",o),xt("load",o),v=h;break;case"details":xt("toggle",o),v=h;break;case"input":ue(o,h),v=se(o,h),xt("invalid",o);break;case"option":v=h;break;case"select":o._wrapperState={wasMultiple:!!h.multiple},v=E({},h,{value:void 0}),xt("invalid",o);break;case"textarea":mt(o,h),v=it(o,h),xt("invalid",o);break;default:v=h}Kr(p,v),F=v;for(y in F)if(F.hasOwnProperty(y)){var K=F[y];y==="style"?ta(o,K):y==="dangerouslySetInnerHTML"?(K=K?K.__html:void 0,K!=null&&Jo(o,K)):y==="children"?typeof K=="string"?(p!=="textarea"||K!=="")&&Yi(o,K):typeof K=="number"&&Yi(o,""+K):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(r.hasOwnProperty(y)?K!=null&&y==="onScroll"&&xt("scroll",o):K!=null&&M(o,y,K,P))}switch(p){case"input":le(o),Ce(o,h,!1);break;case"textarea":le(o),Oe(o);break;case"option":h.value!=null&&o.setAttribute("value",""+Q(h.value));break;case"select":o.multiple=!!h.multiple,y=h.value,y!=null?Xe(o,!!h.multiple,y,!1):h.defaultValue!=null&&Xe(o,!!h.multiple,h.defaultValue,!0);break;default:typeof v.onClick=="function"&&(o.onclick=Ou)}switch(p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return En(s),null;case 6:if(o&&s.stateNode!=null)eE(o,s,o.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(n(166));if(p=va(Bc.current),va(Zi.current),Hu(s)){if(h=s.stateNode,p=s.memoizedProps,h[Qi]=s,(y=h.nodeValue!==p)&&(o=Jn,o!==null))switch(o.tag){case 3:Iu(h.nodeValue,p,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Iu(h.nodeValue,p,(o.mode&1)!==0)}y&&(s.flags|=4)}else h=(p.nodeType===9?p:p.ownerDocument).createTextNode(h),h[Qi]=s,s.stateNode=h}return En(s),null;case 13:if(wt(Rt),h=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Pt&&ei!==null&&s.mode&1&&!(s.flags&128))i_(),Ss(),s.flags|=98560,y=!1;else if(y=Hu(s),h!==null&&h.dehydrated!==null){if(o===null){if(!y)throw Error(n(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Qi]=s}else Ss(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;En(s),y=!1}else ki!==null&&(bm(ki),ki=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=p,s):(h=h!==null,h!==(o!==null&&o.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(o===null||Rt.current&1?qt===0&&(qt=3):Tm())),s.updateQueue!==null&&(s.flags|=4),En(s),null);case 4:return Rs(),fm(o,s),o===null&&Dc(s.stateNode.containerInfo),En(s),null;case 10:return jh(s.type._context),En(s),null;case 17:return $n(s.type)&&Bu(),En(s),null;case 19:if(wt(Rt),y=s.memoizedState,y===null)return En(s),null;if(h=(s.flags&128)!==0,P=y.rendering,P===null)if(h)Hc(y,!1);else{if(qt!==0||o!==null&&o.flags&128)for(o=s.child;o!==null;){if(P=Ku(o),P!==null){for(s.flags|=128,Hc(y,!1),h=P.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=p,p=s.child;p!==null;)y=p,o=h,y.flags&=14680066,P=y.alternate,P===null?(y.childLanes=0,y.lanes=o,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=P.childLanes,y.lanes=P.lanes,y.child=P.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=P.memoizedProps,y.memoizedState=P.memoizedState,y.updateQueue=P.updateQueue,y.type=P.type,o=P.dependencies,y.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),p=p.sibling;return Et(Rt,Rt.current&1|2),s.child}o=o.sibling}y.tail!==null&&_t()>Ms&&(s.flags|=128,h=!0,Hc(y,!1),s.lanes=4194304)}else{if(!h)if(o=Ku(P),o!==null){if(s.flags|=128,h=!0,p=o.updateQueue,p!==null&&(s.updateQueue=p,s.flags|=4),Hc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!P.alternate&&!Pt)return En(s),null}else 2*_t()-y.renderingStartTime>Ms&&p!==1073741824&&(s.flags|=128,h=!0,Hc(y,!1),s.lanes=4194304);y.isBackwards?(P.sibling=s.child,s.child=P):(p=y.last,p!==null?p.sibling=P:s.child=P,y.last=P)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=_t(),s.sibling=null,p=Rt.current,Et(Rt,h?p&1|2:p&1),s):(En(s),null);case 22:case 23:return Cm(),h=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?ti&1073741824&&(En(s),s.subtreeFlags&6&&(s.flags|=8192)):En(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function bP(o,s){switch(Ih(s),s.tag){case 1:return $n(s.type)&&Bu(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Rs(),wt(Bn),wt(yn),Yh(),o=s.flags,o&65536&&!(o&128)?(s.flags=o&-65537|128,s):null;case 5:return Uh(s),null;case 13:if(wt(Rt),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Ss()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return wt(Rt),null;case 4:return Rs(),null;case 10:return jh(s.type._context),null;case 22:case 23:return Cm(),null;case 24:return null;default:return null}}var ip=!1,xn=!1,SP=typeof WeakSet=="function"?WeakSet:Set,De=null;function Ds(o,s){var p=o.ref;if(p!==null)if(typeof p=="function")try{p(null)}catch(h){Mt(o,s,h)}else p.current=null}function dm(o,s,p){try{p()}catch(h){Mt(o,s,h)}}var tE=!1;function CP(o,s){if(Ch=bu,o=N0(),gh(o)){if("selectionStart"in o)var p={start:o.selectionStart,end:o.selectionEnd};else e:{p=(p=o.ownerDocument)&&p.defaultView||window;var h=p.getSelection&&p.getSelection();if(h&&h.rangeCount!==0){p=h.anchorNode;var v=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{p.nodeType,y.nodeType}catch{p=null;break e}var P=0,F=-1,K=-1,oe=0,he=0,ge=o,fe=null;t:for(;;){for(var Re;ge!==p||v!==0&&ge.nodeType!==3||(F=P+v),ge!==y||h!==0&&ge.nodeType!==3||(K=P+h),ge.nodeType===3&&(P+=ge.nodeValue.length),(Re=ge.firstChild)!==null;)fe=ge,ge=Re;for(;;){if(ge===o)break t;if(fe===p&&++oe===v&&(F=P),fe===y&&++he===h&&(K=P),(Re=ge.nextSibling)!==null)break;ge=fe,fe=ge.parentNode}ge=Re}p=F===-1||K===-1?null:{start:F,end:K}}else p=null}p=p||{start:0,end:0}}else p=null;for(Th={focusedElem:o,selectionRange:p},bu=!1,De=s;De!==null;)if(s=De,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,De=o;else for(;De!==null;){s=De;try{var Ne=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ne!==null){var Le=Ne.memoizedProps,jt=Ne.memoizedState,te=s.stateNode,X=te.getSnapshotBeforeUpdate(s.elementType===s.type?Le:Mi(s.type,Le),jt);te.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var ie=s.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ye){Mt(s,s.return,ye)}if(o=s.sibling,o!==null){o.return=s.return,De=o;break}De=s.return}return Ne=tE,tE=!1,Ne}function Vc(o,s,p){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var v=h=h.next;do{if((v.tag&o)===o){var y=v.destroy;v.destroy=void 0,y!==void 0&&dm(s,p,y)}v=v.next}while(v!==h)}}function rp(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var p=s=s.next;do{if((p.tag&o)===o){var h=p.create;p.destroy=h()}p=p.next}while(p!==s)}}function hm(o){var s=o.ref;if(s!==null){var p=o.stateNode;switch(o.tag){case 5:o=p;break;default:o=p}typeof s=="function"?s(o):s.current=o}}function nE(o){var s=o.alternate;s!==null&&(o.alternate=null,nE(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[Qi],delete s[Mc],delete s[Dh],delete s[sP],delete s[cP])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function iE(o){return o.tag===5||o.tag===3||o.tag===4}function rE(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||iE(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function mm(o,s,p){var h=o.tag;if(h===5||h===6)o=o.stateNode,s?p.nodeType===8?p.parentNode.insertBefore(o,s):p.insertBefore(o,s):(p.nodeType===8?(s=p.parentNode,s.insertBefore(o,p)):(s=p,s.appendChild(o)),p=p._reactRootContainer,p!=null||s.onclick!==null||(s.onclick=Ou));else if(h!==4&&(o=o.child,o!==null))for(mm(o,s,p),o=o.sibling;o!==null;)mm(o,s,p),o=o.sibling}function vm(o,s,p){var h=o.tag;if(h===5||h===6)o=o.stateNode,s?p.insertBefore(o,s):p.appendChild(o);else if(h!==4&&(o=o.child,o!==null))for(vm(o,s,p),o=o.sibling;o!==null;)vm(o,s,p),o=o.sibling}var un=null,Ni=!1;function yo(o,s,p){for(p=p.child;p!==null;)oE(o,s,p),p=p.sibling}function oE(o,s,p){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(Ln,p)}catch{}switch(p.tag){case 5:xn||Ds(p,s);case 6:var h=un,v=Ni;un=null,yo(o,s,p),un=h,Ni=v,un!==null&&(Ni?(o=un,p=p.stateNode,o.nodeType===8?o.parentNode.removeChild(p):o.removeChild(p)):un.removeChild(p.stateNode));break;case 18:un!==null&&(Ni?(o=un,p=p.stateNode,o.nodeType===8?Ah(o.parentNode,p):o.nodeType===1&&Ah(o,p),xc(o)):Ah(un,p.stateNode));break;case 4:h=un,v=Ni,un=p.stateNode.containerInfo,Ni=!0,yo(o,s,p),un=h,Ni=v;break;case 0:case 11:case 14:case 15:if(!xn&&(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){v=h=h.next;do{var y=v,P=y.destroy;y=y.tag,P!==void 0&&(y&2||y&4)&&dm(p,s,P),v=v.next}while(v!==h)}yo(o,s,p);break;case 1:if(!xn&&(Ds(p,s),h=p.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch(F){Mt(p,s,F)}yo(o,s,p);break;case 21:yo(o,s,p);break;case 22:p.mode&1?(xn=(h=xn)||p.memoizedState!==null,yo(o,s,p),xn=h):yo(o,s,p);break;default:yo(o,s,p)}}function aE(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var p=o.stateNode;p===null&&(p=o.stateNode=new SP),s.forEach(function(h){var v=IP.bind(null,o,h);p.has(h)||(p.add(h),h.then(v,v))})}}function Ii(o,s){var p=s.deletions;if(p!==null)for(var h=0;h<p.length;h++){var v=p[h];try{var y=o,P=s,F=P;e:for(;F!==null;){switch(F.tag){case 5:un=F.stateNode,Ni=!1;break e;case 3:un=F.stateNode.containerInfo,Ni=!0;break e;case 4:un=F.stateNode.containerInfo,Ni=!0;break e}F=F.return}if(un===null)throw Error(n(160));oE(y,P,v),un=null,Ni=!1;var K=v.alternate;K!==null&&(K.return=null),v.return=null}catch(oe){Mt(v,s,oe)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)sE(s,o),s=s.sibling}function sE(o,s){var p=o.alternate,h=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ii(s,o),er(o),h&4){try{Vc(3,o,o.return),rp(3,o)}catch(Le){Mt(o,o.return,Le)}try{Vc(5,o,o.return)}catch(Le){Mt(o,o.return,Le)}}break;case 1:Ii(s,o),er(o),h&512&&p!==null&&Ds(p,p.return);break;case 5:if(Ii(s,o),er(o),h&512&&p!==null&&Ds(p,p.return),o.flags&32){var v=o.stateNode;try{Yi(v,"")}catch(Le){Mt(o,o.return,Le)}}if(h&4&&(v=o.stateNode,v!=null)){var y=o.memoizedProps,P=p!==null?p.memoizedProps:y,F=o.type,K=o.updateQueue;if(o.updateQueue=null,K!==null)try{F==="input"&&y.type==="radio"&&y.name!=null&&je(v,y),qr(F,P);var oe=qr(F,y);for(P=0;P<K.length;P+=2){var he=K[P],ge=K[P+1];he==="style"?ta(v,ge):he==="dangerouslySetInnerHTML"?Jo(v,ge):he==="children"?Yi(v,ge):M(v,he,ge,oe)}switch(F){case"input":ze(v,y);break;case"textarea":we(v,y);break;case"select":var fe=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!y.multiple;var Re=y.value;Re!=null?Xe(v,!!y.multiple,Re,!1):fe!==!!y.multiple&&(y.defaultValue!=null?Xe(v,!!y.multiple,y.defaultValue,!0):Xe(v,!!y.multiple,y.multiple?[]:"",!1))}v[Mc]=y}catch(Le){Mt(o,o.return,Le)}}break;case 6:if(Ii(s,o),er(o),h&4){if(o.stateNode===null)throw Error(n(162));v=o.stateNode,y=o.memoizedProps;try{v.nodeValue=y}catch(Le){Mt(o,o.return,Le)}}break;case 3:if(Ii(s,o),er(o),h&4&&p!==null&&p.memoizedState.isDehydrated)try{xc(s.containerInfo)}catch(Le){Mt(o,o.return,Le)}break;case 4:Ii(s,o),er(o);break;case 13:Ii(s,o),er(o),v=o.child,v.flags&8192&&(y=v.memoizedState!==null,v.stateNode.isHidden=y,!y||v.alternate!==null&&v.alternate.memoizedState!==null||(_m=_t())),h&4&&aE(o);break;case 22:if(he=p!==null&&p.memoizedState!==null,o.mode&1?(xn=(oe=xn)||he,Ii(s,o),xn=oe):Ii(s,o),er(o),h&8192){if(oe=o.memoizedState!==null,(o.stateNode.isHidden=oe)&&!he&&o.mode&1)for(De=o,he=o.child;he!==null;){for(ge=De=he;De!==null;){switch(fe=De,Re=fe.child,fe.tag){case 0:case 11:case 14:case 15:Vc(4,fe,fe.return);break;case 1:Ds(fe,fe.return);var Ne=fe.stateNode;if(typeof Ne.componentWillUnmount=="function"){h=fe,p=fe.return;try{s=h,Ne.props=s.memoizedProps,Ne.state=s.memoizedState,Ne.componentWillUnmount()}catch(Le){Mt(h,p,Le)}}break;case 5:Ds(fe,fe.return);break;case 22:if(fe.memoizedState!==null){uE(ge);continue}}Re!==null?(Re.return=fe,De=Re):uE(ge)}he=he.sibling}e:for(he=null,ge=o;;){if(ge.tag===5){if(he===null){he=ge;try{v=ge.stateNode,oe?(y=v.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(F=ge.stateNode,K=ge.memoizedProps.style,P=K!=null&&K.hasOwnProperty("display")?K.display:null,F.style.display=ns("display",P))}catch(Le){Mt(o,o.return,Le)}}}else if(ge.tag===6){if(he===null)try{ge.stateNode.nodeValue=oe?"":ge.memoizedProps}catch(Le){Mt(o,o.return,Le)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===o)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===o)break e;for(;ge.sibling===null;){if(ge.return===null||ge.return===o)break e;he===ge&&(he=null),ge=ge.return}he===ge&&(he=null),ge.sibling.return=ge.return,ge=ge.sibling}}break;case 19:Ii(s,o),er(o),h&4&&aE(o);break;case 21:break;default:Ii(s,o),er(o)}}function er(o){var s=o.flags;if(s&2){try{e:{for(var p=o.return;p!==null;){if(iE(p)){var h=p;break e}p=p.return}throw Error(n(160))}switch(h.tag){case 5:var v=h.stateNode;h.flags&32&&(Yi(v,""),h.flags&=-33);var y=rE(o);vm(o,y,v);break;case 3:case 4:var P=h.stateNode.containerInfo,F=rE(o);mm(o,F,P);break;default:throw Error(n(161))}}catch(K){Mt(o,o.return,K)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function TP(o,s,p){De=o,cE(o)}function cE(o,s,p){for(var h=(o.mode&1)!==0;De!==null;){var v=De,y=v.child;if(v.tag===22&&h){var P=v.memoizedState!==null||ip;if(!P){var F=v.alternate,K=F!==null&&F.memoizedState!==null||xn;F=ip;var oe=xn;if(ip=P,(xn=K)&&!oe)for(De=v;De!==null;)P=De,K=P.child,P.tag===22&&P.memoizedState!==null?pE(v):K!==null?(K.return=P,De=K):pE(v);for(;y!==null;)De=y,cE(y),y=y.sibling;De=v,ip=F,xn=oe}lE(o)}else v.subtreeFlags&8772&&y!==null?(y.return=v,De=y):lE(o)}}function lE(o){for(;De!==null;){var s=De;if(s.flags&8772){var p=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:xn||rp(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!xn)if(p===null)h.componentDidMount();else{var v=s.elementType===s.type?p.memoizedProps:Mi(s.type,p.memoizedProps);h.componentDidUpdate(v,p.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&u_(s,y,h);break;case 3:var P=s.updateQueue;if(P!==null){if(p=null,s.child!==null)switch(s.child.tag){case 5:p=s.child.stateNode;break;case 1:p=s.child.stateNode}u_(s,P,p)}break;case 5:var F=s.stateNode;if(p===null&&s.flags&4){p=F;var K=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":K.autoFocus&&p.focus();break;case"img":K.src&&(p.src=K.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var oe=s.alternate;if(oe!==null){var he=oe.memoizedState;if(he!==null){var ge=he.dehydrated;ge!==null&&xc(ge)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xn||s.flags&512&&hm(s)}catch(fe){Mt(s,s.return,fe)}}if(s===o){De=null;break}if(p=s.sibling,p!==null){p.return=s.return,De=p;break}De=s.return}}function uE(o){for(;De!==null;){var s=De;if(s===o){De=null;break}var p=s.sibling;if(p!==null){p.return=s.return,De=p;break}De=s.return}}function pE(o){for(;De!==null;){var s=De;try{switch(s.tag){case 0:case 11:case 15:var p=s.return;try{rp(4,s)}catch(K){Mt(s,p,K)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var v=s.return;try{h.componentDidMount()}catch(K){Mt(s,v,K)}}var y=s.return;try{hm(s)}catch(K){Mt(s,y,K)}break;case 5:var P=s.return;try{hm(s)}catch(K){Mt(s,P,K)}}}catch(K){Mt(s,s.return,K)}if(s===o){De=null;break}var F=s.sibling;if(F!==null){F.return=s.return,De=F;break}De=s.return}}var PP=Math.ceil,op=A.ReactCurrentDispatcher,gm=A.ReactCurrentOwner,gi=A.ReactCurrentBatchConfig,ht=0,rn=null,Wt=null,pn=0,ti=0,ks=fo(0),qt=0,Gc=null,ya=0,ap=0,ym=0,Uc=null,jn=null,_m=0,Ms=1/0,Sr=null,sp=!1,Em=null,_o=null,cp=!1,Eo=null,lp=0,Wc=0,xm=null,up=-1,pp=0;function Rn(){return ht&6?_t():up!==-1?up:up=_t()}function xo(o){return o.mode&1?ht&2&&pn!==0?pn&-pn:uP.transition!==null?(pp===0&&(pp=us()),pp):(o=k,o!==0||(o=window.event,o=o===void 0?16:d0(o.type)),o):1}function Oi(o,s,p,h){if(50<Wc)throw Wc=0,xm=null,Error(n(185));ua(o,p,h),(!(ht&2)||o!==rn)&&(o===rn&&(!(ht&2)&&(ap|=p),qt===4&&wo(o,pn)),zn(o,h),p===1&&ht===0&&!(s.mode&1)&&(Ms=_t()+500,Fu&&mo()))}function zn(o,s){var p=o.callbackNode;rh(o,s);var h=vr(o,o===rn?pn:0);if(h===0)p!==null&&ss(p),o.callbackNode=null,o.callbackPriority=0;else if(s=h&-h,o.callbackPriority!==s){if(p!=null&&ss(p),s===1)o.tag===0?lP(dE.bind(null,o)):Z0(dE.bind(null,o)),oP(function(){!(ht&6)&&mo()}),p=null;else{switch(U(h)){case 1:p=qi;break;case 4:p=Ai;break;case 16:p=On;break;case 536870912:p=qn;break;default:p=On}p=xE(p,fE.bind(null,o))}o.callbackPriority=s,o.callbackNode=p}}function fE(o,s){if(up=-1,pp=0,ht&6)throw Error(n(327));var p=o.callbackNode;if(Ns()&&o.callbackNode!==p)return null;var h=vr(o,o===rn?pn:0);if(h===0)return null;if(h&30||h&o.expiredLanes||s)s=fp(o,h);else{s=h;var v=ht;ht|=2;var y=mE();(rn!==o||pn!==s)&&(Sr=null,Ms=_t()+500,Ea(o,s));do try{DP();break}catch(F){hE(o,F)}while(!0);Fh(),op.current=y,ht=v,Wt!==null?s=0:(rn=null,pn=0,s=qt)}if(s!==0){if(s===2&&(v=ls(o),v!==0&&(h=v,s=wm(o,v))),s===1)throw p=Gc,Ea(o,0),wo(o,h),zn(o,_t()),p;if(s===6)wo(o,h);else{if(v=o.current.alternate,!(h&30)&&!RP(v)&&(s=fp(o,h),s===2&&(y=ls(o),y!==0&&(h=y,s=wm(o,y))),s===1))throw p=Gc,Ea(o,0),wo(o,h),zn(o,_t()),p;switch(o.finishedWork=v,o.finishedLanes=h,s){case 0:case 1:throw Error(n(345));case 2:xa(o,jn,Sr);break;case 3:if(wo(o,h),(h&130023424)===h&&(s=_m+500-_t(),10<s)){if(vr(o,0)!==0)break;if(v=o.suspendedLanes,(v&h)!==h){Rn(),o.pingedLanes|=o.suspendedLanes&v;break}o.timeoutHandle=Rh(xa.bind(null,o,jn,Sr),s);break}xa(o,jn,Sr);break;case 4:if(wo(o,h),(h&4194240)===h)break;for(s=o.eventTimes,v=-1;0<h;){var P=31-gn(h);y=1<<P,P=s[P],P>v&&(v=P),h&=~y}if(h=v,h=_t()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*PP(h/1960))-h,10<h){o.timeoutHandle=Rh(xa.bind(null,o,jn,Sr),h);break}xa(o,jn,Sr);break;case 5:xa(o,jn,Sr);break;default:throw Error(n(329))}}}return zn(o,_t()),o.callbackNode===p?fE.bind(null,o):null}function wm(o,s){var p=Uc;return o.current.memoizedState.isDehydrated&&(Ea(o,s).flags|=256),o=fp(o,s),o!==2&&(s=jn,jn=p,s!==null&&bm(s)),o}function bm(o){jn===null?jn=o:jn.push.apply(jn,o)}function RP(o){for(var s=o;;){if(s.flags&16384){var p=s.updateQueue;if(p!==null&&(p=p.stores,p!==null))for(var h=0;h<p.length;h++){var v=p[h],y=v.getSnapshot;v=v.value;try{if(!Di(y(),v))return!1}catch{return!1}}}if(p=s.child,s.subtreeFlags&16384&&p!==null)p.return=s,s=p;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function wo(o,s){for(s&=~ym,s&=~ap,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var p=31-gn(s),h=1<<p;o[p]=-1,s&=~h}}function dE(o){if(ht&6)throw Error(n(327));Ns();var s=vr(o,0);if(!(s&1))return zn(o,_t()),null;var p=fp(o,s);if(o.tag!==0&&p===2){var h=ls(o);h!==0&&(s=h,p=wm(o,h))}if(p===1)throw p=Gc,Ea(o,0),wo(o,s),zn(o,_t()),p;if(p===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,xa(o,jn,Sr),zn(o,_t()),null}function Sm(o,s){var p=ht;ht|=1;try{return o(s)}finally{ht=p,ht===0&&(Ms=_t()+500,Fu&&mo())}}function _a(o){Eo!==null&&Eo.tag===0&&!(ht&6)&&Ns();var s=ht;ht|=1;var p=gi.transition,h=k;try{if(gi.transition=null,k=1,o)return o()}finally{k=h,gi.transition=p,ht=s,!(ht&6)&&mo()}}function Cm(){ti=ks.current,wt(ks)}function Ea(o,s){o.finishedWork=null,o.finishedLanes=0;var p=o.timeoutHandle;if(p!==-1&&(o.timeoutHandle=-1,rP(p)),Wt!==null)for(p=Wt.return;p!==null;){var h=p;switch(Ih(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Bu();break;case 3:Rs(),wt(Bn),wt(yn),Yh();break;case 5:Uh(h);break;case 4:Rs();break;case 13:wt(Rt);break;case 19:wt(Rt);break;case 10:jh(h.type._context);break;case 22:case 23:Cm()}p=p.return}if(rn=o,Wt=o=bo(o.current,null),pn=ti=s,qt=0,Gc=null,ym=ap=ya=0,jn=Uc=null,ma!==null){for(s=0;s<ma.length;s++)if(p=ma[s],h=p.interleaved,h!==null){p.interleaved=null;var v=h.next,y=p.pending;if(y!==null){var P=y.next;y.next=v,h.next=P}p.pending=h}ma=null}return o}function hE(o,s){do{var p=Wt;try{if(Fh(),qu.current=Ju,Xu){for(var h=At.memoizedState;h!==null;){var v=h.queue;v!==null&&(v.pending=null),h=h.next}Xu=!1}if(ga=0,nn=Kt=At=null,$c=!1,Fc=0,gm.current=null,p===null||p.return===null){qt=1,Gc=s,Wt=null;break}e:{var y=o,P=p.return,F=p,K=s;if(s=pn,F.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var oe=K,he=F,ge=he.tag;if(!(he.mode&1)&&(ge===0||ge===11||ge===15)){var fe=he.alternate;fe?(he.updateQueue=fe.updateQueue,he.memoizedState=fe.memoizedState,he.lanes=fe.lanes):(he.updateQueue=null,he.memoizedState=null)}var Re=F_(P);if(Re!==null){Re.flags&=-257,j_(Re,P,F,y,s),Re.mode&1&&$_(y,oe,s),s=Re,K=oe;var Ne=s.updateQueue;if(Ne===null){var Le=new Set;Le.add(K),s.updateQueue=Le}else Ne.add(K);break e}else{if(!(s&1)){$_(y,oe,s),Tm();break e}K=Error(n(426))}}else if(Pt&&F.mode&1){var jt=F_(P);if(jt!==null){!(jt.flags&65536)&&(jt.flags|=256),j_(jt,P,F,y,s),Bh(As(K,F));break e}}y=K=As(K,F),qt!==4&&(qt=2),Uc===null?Uc=[y]:Uc.push(y),y=P;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var te=L_(y,K,s);l_(y,te);break e;case 1:F=K;var X=y.type,ie=y.stateNode;if(!(y.flags&128)&&(typeof X.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(_o===null||!_o.has(ie)))){y.flags|=65536,s&=-s,y.lanes|=s;var ye=B_(y,F,s);l_(y,ye);break e}}y=y.return}while(y!==null)}gE(p)}catch($e){s=$e,Wt===p&&p!==null&&(Wt=p=p.return);continue}break}while(!0)}function mE(){var o=op.current;return op.current=Ju,o===null?Ju:o}function Tm(){(qt===0||qt===3||qt===2)&&(qt=4),rn===null||!(ya&268435455)&&!(ap&268435455)||wo(rn,pn)}function fp(o,s){var p=ht;ht|=2;var h=mE();(rn!==o||pn!==s)&&(Sr=null,Ea(o,s));do try{AP();break}catch(v){hE(o,v)}while(!0);if(Fh(),ht=p,op.current=h,Wt!==null)throw Error(n(261));return rn=null,pn=0,qt}function AP(){for(;Wt!==null;)vE(Wt)}function DP(){for(;Wt!==null&&!nh();)vE(Wt)}function vE(o){var s=EE(o.alternate,o,ti);o.memoizedProps=o.pendingProps,s===null?gE(o):Wt=s,gm.current=null}function gE(o){var s=o;do{var p=s.alternate;if(o=s.return,s.flags&32768){if(p=bP(p,s),p!==null){p.flags&=32767,Wt=p;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{qt=6,Wt=null;return}}else if(p=wP(p,s,ti),p!==null){Wt=p;return}if(s=s.sibling,s!==null){Wt=s;return}Wt=s=o}while(s!==null);qt===0&&(qt=5)}function xa(o,s,p){var h=k,v=gi.transition;try{gi.transition=null,k=1,kP(o,s,p,h)}finally{gi.transition=v,k=h}return null}function kP(o,s,p,h){do Ns();while(Eo!==null);if(ht&6)throw Error(n(327));p=o.finishedWork;var v=o.finishedLanes;if(p===null)return null;if(o.finishedWork=null,o.finishedLanes=0,p===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var y=p.lanes|p.childLanes;if(oh(o,y),o===rn&&(Wt=rn=null,pn=0),!(p.subtreeFlags&2064)&&!(p.flags&2064)||cp||(cp=!0,xE(On,function(){return Ns(),null})),y=(p.flags&15990)!==0,p.subtreeFlags&15990||y){y=gi.transition,gi.transition=null;var P=k;k=1;var F=ht;ht|=4,gm.current=null,CP(o,p),sE(p,o),QT(Th),bu=!!Ch,Th=Ch=null,o.current=p,TP(p),ih(),ht=F,k=P,gi.transition=y}else o.current=p;if(cp&&(cp=!1,Eo=o,lp=v),y=o.pendingLanes,y===0&&(_o=null),xu(p.stateNode),zn(o,_t()),s!==null)for(h=o.onRecoverableError,p=0;p<s.length;p++)v=s[p],h(v.value,{componentStack:v.stack,digest:v.digest});if(sp)throw sp=!1,o=Em,Em=null,o;return lp&1&&o.tag!==0&&Ns(),y=o.pendingLanes,y&1?o===xm?Wc++:(Wc=0,xm=o):Wc=0,mo(),null}function Ns(){if(Eo!==null){var o=U(lp),s=gi.transition,p=k;try{if(gi.transition=null,k=16>o?16:o,Eo===null)var h=!1;else{if(o=Eo,Eo=null,lp=0,ht&6)throw Error(n(331));var v=ht;for(ht|=4,De=o.current;De!==null;){var y=De,P=y.child;if(De.flags&16){var F=y.deletions;if(F!==null){for(var K=0;K<F.length;K++){var oe=F[K];for(De=oe;De!==null;){var he=De;switch(he.tag){case 0:case 11:case 15:Vc(8,he,y)}var ge=he.child;if(ge!==null)ge.return=he,De=ge;else for(;De!==null;){he=De;var fe=he.sibling,Re=he.return;if(nE(he),he===oe){De=null;break}if(fe!==null){fe.return=Re,De=fe;break}De=Re}}}var Ne=y.alternate;if(Ne!==null){var Le=Ne.child;if(Le!==null){Ne.child=null;do{var jt=Le.sibling;Le.sibling=null,Le=jt}while(Le!==null)}}De=y}}if(y.subtreeFlags&2064&&P!==null)P.return=y,De=P;else e:for(;De!==null;){if(y=De,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Vc(9,y,y.return)}var te=y.sibling;if(te!==null){te.return=y.return,De=te;break e}De=y.return}}var X=o.current;for(De=X;De!==null;){P=De;var ie=P.child;if(P.subtreeFlags&2064&&ie!==null)ie.return=P,De=ie;else e:for(P=X;De!==null;){if(F=De,F.flags&2048)try{switch(F.tag){case 0:case 11:case 15:rp(9,F)}}catch($e){Mt(F,F.return,$e)}if(F===P){De=null;break e}var ye=F.sibling;if(ye!==null){ye.return=F.return,De=ye;break e}De=F.return}}if(ht=v,mo(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(Ln,o)}catch{}h=!0}return h}finally{k=p,gi.transition=s}}return!1}function yE(o,s,p){s=As(p,s),s=L_(o,s,1),o=go(o,s,1),s=Rn(),o!==null&&(ua(o,1,s),zn(o,s))}function Mt(o,s,p){if(o.tag===3)yE(o,o,p);else for(;s!==null;){if(s.tag===3){yE(s,o,p);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(_o===null||!_o.has(h))){o=As(p,o),o=B_(s,o,1),s=go(s,o,1),o=Rn(),s!==null&&(ua(s,1,o),zn(s,o));break}}s=s.return}}function MP(o,s,p){var h=o.pingCache;h!==null&&h.delete(s),s=Rn(),o.pingedLanes|=o.suspendedLanes&p,rn===o&&(pn&p)===p&&(qt===4||qt===3&&(pn&130023424)===pn&&500>_t()-_m?Ea(o,0):ym|=p),zn(o,s)}function _E(o,s){s===0&&(o.mode&1?(s=oo,oo<<=1,!(oo&130023424)&&(oo=4194304)):s=1);var p=Rn();o=xr(o,s),o!==null&&(ua(o,s,p),zn(o,p))}function NP(o){var s=o.memoizedState,p=0;s!==null&&(p=s.retryLane),_E(o,p)}function IP(o,s){var p=0;switch(o.tag){case 13:var h=o.stateNode,v=o.memoizedState;v!==null&&(p=v.retryLane);break;case 19:h=o.stateNode;break;default:throw Error(n(314))}h!==null&&h.delete(s),_E(o,p)}var EE;EE=function(o,s,p){if(o!==null)if(o.memoizedProps!==s.pendingProps||Bn.current)Fn=!0;else{if(!(o.lanes&p)&&!(s.flags&128))return Fn=!1,xP(o,s,p);Fn=!!(o.flags&131072)}else Fn=!1,Pt&&s.flags&1048576&&J0(s,zu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;np(o,s),o=s.pendingProps;var v=xs(s,yn.current);Ps(s,p),v=Xh(null,s,h,o,v,p);var y=Qh();return s.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,$n(h)?(y=!0,$u(s)):y=!1,s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Vh(s),v.updater=ep,s.stateNode=v,v._reactInternals=s,im(s,h,o,p),s=sm(null,s,h,!0,y,p)):(s.tag=0,Pt&&y&&Nh(s),Pn(null,s,v,p),s=s.child),s;case 16:h=s.elementType;e:{switch(np(o,s),o=s.pendingProps,v=h._init,h=v(h._payload),s.type=h,v=s.tag=LP(h),o=Mi(h,o),v){case 0:s=am(null,s,h,o,p);break e;case 1:s=W_(null,s,h,o,p);break e;case 11:s=z_(null,s,h,o,p);break e;case 14:s=H_(null,s,h,Mi(h.type,o),p);break e}throw Error(n(306,h,""))}return s;case 0:return h=s.type,v=s.pendingProps,v=s.elementType===h?v:Mi(h,v),am(o,s,h,v,p);case 1:return h=s.type,v=s.pendingProps,v=s.elementType===h?v:Mi(h,v),W_(o,s,h,v,p);case 3:e:{if(Y_(s),o===null)throw Error(n(387));h=s.pendingProps,y=s.memoizedState,v=y.element,c_(o,s),Yu(s,h,null,p);var P=s.memoizedState;if(h=P.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){v=As(Error(n(423)),s),s=K_(o,s,h,p,v);break e}else if(h!==v){v=As(Error(n(424)),s),s=K_(o,s,h,p,v);break e}else for(ei=po(s.stateNode.containerInfo.firstChild),Jn=s,Pt=!0,ki=null,p=a_(s,null,h,p),s.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Ss(),h===v){s=br(o,s,p);break e}Pn(o,s,h,p)}s=s.child}return s;case 5:return p_(s),o===null&&Lh(s),h=s.type,v=s.pendingProps,y=o!==null?o.memoizedProps:null,P=v.children,Ph(h,v)?P=null:y!==null&&Ph(h,y)&&(s.flags|=32),U_(o,s),Pn(o,s,P,p),s.child;case 6:return o===null&&Lh(s),null;case 13:return q_(o,s,p);case 4:return Gh(s,s.stateNode.containerInfo),h=s.pendingProps,o===null?s.child=Cs(s,null,h,p):Pn(o,s,h,p),s.child;case 11:return h=s.type,v=s.pendingProps,v=s.elementType===h?v:Mi(h,v),z_(o,s,h,v,p);case 7:return Pn(o,s,s.pendingProps,p),s.child;case 8:return Pn(o,s,s.pendingProps.children,p),s.child;case 12:return Pn(o,s,s.pendingProps.children,p),s.child;case 10:e:{if(h=s.type._context,v=s.pendingProps,y=s.memoizedProps,P=v.value,Et(Gu,h._currentValue),h._currentValue=P,y!==null)if(Di(y.value,P)){if(y.children===v.children&&!Bn.current){s=br(o,s,p);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var F=y.dependencies;if(F!==null){P=y.child;for(var K=F.firstContext;K!==null;){if(K.context===h){if(y.tag===1){K=wr(-1,p&-p),K.tag=2;var oe=y.updateQueue;if(oe!==null){oe=oe.shared;var he=oe.pending;he===null?K.next=K:(K.next=he.next,he.next=K),oe.pending=K}}y.lanes|=p,K=y.alternate,K!==null&&(K.lanes|=p),zh(y.return,p,s),F.lanes|=p;break}K=K.next}}else if(y.tag===10)P=y.type===s.type?null:y.child;else if(y.tag===18){if(P=y.return,P===null)throw Error(n(341));P.lanes|=p,F=P.alternate,F!==null&&(F.lanes|=p),zh(P,p,s),P=y.sibling}else P=y.child;if(P!==null)P.return=y;else for(P=y;P!==null;){if(P===s){P=null;break}if(y=P.sibling,y!==null){y.return=P.return,P=y;break}P=P.return}y=P}Pn(o,s,v.children,p),s=s.child}return s;case 9:return v=s.type,h=s.pendingProps.children,Ps(s,p),v=mi(v),h=h(v),s.flags|=1,Pn(o,s,h,p),s.child;case 14:return h=s.type,v=Mi(h,s.pendingProps),v=Mi(h.type,v),H_(o,s,h,v,p);case 15:return V_(o,s,s.type,s.pendingProps,p);case 17:return h=s.type,v=s.pendingProps,v=s.elementType===h?v:Mi(h,v),np(o,s),s.tag=1,$n(h)?(o=!0,$u(s)):o=!1,Ps(s,p),I_(s,h,v),im(s,h,v,p),sm(null,s,h,!0,o,p);case 19:return Q_(o,s,p);case 22:return G_(o,s,p)}throw Error(n(156,s.tag))};function xE(o,s){return ca(o,s)}function OP(o,s,p,h){this.tag=o,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yi(o,s,p,h){return new OP(o,s,p,h)}function Pm(o){return o=o.prototype,!(!o||!o.isReactComponent)}function LP(o){if(typeof o=="function")return Pm(o)?1:0;if(o!=null){if(o=o.$$typeof,o===ae)return 11;if(o===nt)return 14}return 2}function bo(o,s){var p=o.alternate;return p===null?(p=yi(o.tag,s,o.key,o.mode),p.elementType=o.elementType,p.type=o.type,p.stateNode=o.stateNode,p.alternate=o,o.alternate=p):(p.pendingProps=s,p.type=o.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=o.flags&14680064,p.childLanes=o.childLanes,p.lanes=o.lanes,p.child=o.child,p.memoizedProps=o.memoizedProps,p.memoizedState=o.memoizedState,p.updateQueue=o.updateQueue,s=o.dependencies,p.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},p.sibling=o.sibling,p.index=o.index,p.ref=o.ref,p}function dp(o,s,p,h,v,y){var P=2;if(h=o,typeof o=="function")Pm(o)&&(P=1);else if(typeof o=="string")P=5;else e:switch(o){case L:return wa(p.children,v,y,s);case $:P=8,v|=8;break;case O:return o=yi(12,p,s,v|2),o.elementType=O,o.lanes=y,o;case ce:return o=yi(13,p,s,v),o.elementType=ce,o.lanes=y,o;case Ae:return o=yi(19,p,s,v),o.elementType=Ae,o.lanes=y,o;case Ee:return hp(p,v,y,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Y:P=10;break e;case q:P=9;break e;case ae:P=11;break e;case nt:P=14;break e;case Me:P=16,h=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return s=yi(P,p,s,v),s.elementType=o,s.type=h,s.lanes=y,s}function wa(o,s,p,h){return o=yi(7,o,h,s),o.lanes=p,o}function hp(o,s,p,h){return o=yi(22,o,h,s),o.elementType=Ee,o.lanes=p,o.stateNode={isHidden:!1},o}function Rm(o,s,p){return o=yi(6,o,null,s),o.lanes=p,o}function Am(o,s,p){return s=yi(4,o.children!==null?o.children:[],o.key,s),s.lanes=p,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function BP(o,s,p,h,v){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ps(0),this.expirationTimes=ps(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ps(0),this.identifierPrefix=h,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Dm(o,s,p,h,v,y,P,F,K){return o=new BP(o,s,p,F,K),s===1?(s=1,y===!0&&(s|=8)):s=0,y=yi(3,null,null,s),o.current=y,y.stateNode=o,y.memoizedState={element:h,isDehydrated:p,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vh(y),o}function $P(o,s,p){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:h==null?null:""+h,children:o,containerInfo:s,implementation:p}}function wE(o){if(!o)return ho;o=o._reactInternals;e:{if(Ki(o)!==o||o.tag!==1)throw Error(n(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if($n(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(o.tag===1){var p=o.type;if($n(p))return X0(o,p,s)}return s}function bE(o,s,p,h,v,y,P,F,K){return o=Dm(p,h,!0,o,v,y,P,F,K),o.context=wE(null),p=o.current,h=Rn(),v=xo(p),y=wr(h,v),y.callback=s??null,go(p,y,v),o.current.lanes=v,ua(o,v,h),zn(o,h),o}function mp(o,s,p,h){var v=s.current,y=Rn(),P=xo(v);return p=wE(p),s.context===null?s.context=p:s.pendingContext=p,s=wr(y,P),s.payload={element:o},h=h===void 0?null:h,h!==null&&(s.callback=h),o=go(v,s,P),o!==null&&(Oi(o,v,P,y),Wu(o,v,P)),P}function vp(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function SE(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var p=o.retryLane;o.retryLane=p!==0&&p<s?p:s}}function km(o,s){SE(o,s),(o=o.alternate)&&SE(o,s)}function FP(){return null}var CE=typeof reportError=="function"?reportError:function(o){console.error(o)};function Mm(o){this._internalRoot=o}gp.prototype.render=Mm.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(n(409));mp(o,s,null,null)},gp.prototype.unmount=Mm.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;_a(function(){mp(null,o,null,null)}),s[gr]=null}};function gp(o){this._internalRoot=o}gp.prototype.unstable_scheduleHydration=function(o){if(o){var s=rt();o={blockedOn:null,target:o,priority:s};for(var p=0;p<co.length&&s!==0&&s<co[p].priority;p++);co.splice(p,0,o),p===0&&p0(o)}};function Nm(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function yp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function TE(){}function jP(o,s,p,h,v){if(v){if(typeof h=="function"){var y=h;h=function(){var oe=vp(P);y.call(oe)}}var P=bE(s,h,o,0,null,!1,!1,"",TE);return o._reactRootContainer=P,o[gr]=P.current,Dc(o.nodeType===8?o.parentNode:o),_a(),P}for(;v=o.lastChild;)o.removeChild(v);if(typeof h=="function"){var F=h;h=function(){var oe=vp(K);F.call(oe)}}var K=Dm(o,0,!1,null,null,!1,!1,"",TE);return o._reactRootContainer=K,o[gr]=K.current,Dc(o.nodeType===8?o.parentNode:o),_a(function(){mp(s,K,p,h)}),K}function _p(o,s,p,h,v){var y=p._reactRootContainer;if(y){var P=y;if(typeof v=="function"){var F=v;v=function(){var K=vp(P);F.call(K)}}mp(s,P,o,v)}else P=jP(p,s,o,v,h);return vp(P)}re=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var p=mr(s.pendingLanes);p!==0&&(R(s,p|1),zn(s,_t()),!(ht&6)&&(Ms=_t()+500,mo()))}break;case 13:_a(function(){var h=xr(o,1);if(h!==null){var v=Rn();Oi(h,o,1,v)}}),km(o,1)}},de=function(o){if(o.tag===13){var s=xr(o,134217728);if(s!==null){var p=Rn();Oi(s,o,134217728,p)}km(o,134217728)}},Pe=function(o){if(o.tag===13){var s=xo(o),p=xr(o,s);if(p!==null){var h=Rn();Oi(p,o,s,h)}km(o,s)}},rt=function(){return k},$t=function(o,s){var p=k;try{return k=o,s()}finally{k=p}},Qr=function(o,s,p){switch(s){case"input":if(ze(o,p),s=p.name,p.type==="radio"&&s!=null){for(p=o;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<p.length;s++){var h=p[s];if(h!==o&&h.form===o.form){var v=Lu(h);if(!v)throw Error(n(90));pe(h),ze(h,v)}}}break;case"textarea":we(o,p);break;case"select":s=p.value,s!=null&&Xe(o,!!p.multiple,s,!1)}},dr=Sm,ra=_a;var zP={usingClientEntryPoint:!1,Events:[Nc,_s,Lu,na,ia,Sm]},Yc={findFiberByHostInstance:pa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HP={bundleType:Yc.bundleType,version:Yc.version,rendererPackageName:Yc.rendererPackageName,rendererConfig:Yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=no(o),o===null?null:o.stateNode},findFiberByHostInstance:Yc.findFiberByHostInstance||FP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ep=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ep.isDisabled&&Ep.supportsFiber)try{Ln=Ep.inject(HP),Xn=Ep}catch{}}return Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zP,Hn.createPortal=function(o,s){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nm(s))throw Error(n(200));return $P(o,s,null,p)},Hn.createRoot=function(o,s){if(!Nm(o))throw Error(n(299));var p=!1,h="",v=CE;return s!=null&&(s.unstable_strictMode===!0&&(p=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=Dm(o,1,!1,null,null,p,!1,h,v),o[gr]=s.current,Dc(o.nodeType===8?o.parentNode:o),new Mm(s)},Hn.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=no(s),o=o===null?null:o.stateNode,o},Hn.flushSync=function(o){return _a(o)},Hn.hydrate=function(o,s,p){if(!yp(s))throw Error(n(200));return _p(null,o,s,!0,p)},Hn.hydrateRoot=function(o,s,p){if(!Nm(o))throw Error(n(405));var h=p!=null&&p.hydratedSources||null,v=!1,y="",P=CE;if(p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(y=p.identifierPrefix),p.onRecoverableError!==void 0&&(P=p.onRecoverableError)),s=bE(s,null,o,1,p??null,v,!1,y,P),o[gr]=s.current,Dc(o),h)for(o=0;o<h.length;o++)p=h[o],v=p._getVersion,v=v(p._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[p,v]:s.mutableSourceEagerHydrationData.push(p,v);return new gp(s)},Hn.render=function(o,s,p){if(!yp(s))throw Error(n(200));return _p(null,o,s,!1,p)},Hn.unmountComponentAtNode=function(o){if(!yp(o))throw Error(n(40));return o._reactRootContainer?(_a(function(){_p(null,null,o,!1,function(){o._reactRootContainer=null,o[gr]=null})}),!0):!1},Hn.unstable_batchedUpdates=Sm,Hn.unstable_renderSubtreeIntoContainer=function(o,s,p,h){if(!yp(p))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return _p(o,s,p,!1,h)},Hn.version="18.3.1-next-f1338f8080-20240426",Hn}var IE;function XP(){if(IE)return Lm.exports;IE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lm.exports=qP(),Lm.exports}var OE;function QP(){if(OE)return xp;OE=1;var e=XP();return xp.createRoot=e.createRoot,xp.hydrateRoot=e.hydrateRoot,xp}var ZP=QP();function Te(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function JP(e,t){return t={exports:{}},e(t,t.exports),t.exports}var eR=JP(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),a=2;r===1/0;a*=2)r=Math.log(Math.pow(2,n/a))/Math.log(i)*a;for(var c=r-Math.floor(r),l="",a=0;a<Math.floor(r);a++){var u=Math.floor(Math.random()*i).toString(i);l=u+l}if(c){var f=Math.pow(i,c),u=Math.floor(Math.random()*f).toString(i);l=u+l}var d=parseInt(l,i);return d!==1/0&&d>=Math.pow(2,n)?t(n,i):l};t.rack=function(n,i,r){var a=function(l){var u=0;do{if(u++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var f=t(n,i)}while(Object.hasOwnProperty.call(c,f));return c[f]=l,f},c=a.hats={};return a.get=function(l){return a.hats[l]},a.set=function(l,u){return a.hats[l]=u,a},a.bits=n||128,a.base=i||16,a}});function Fi(e){if(!(this instanceof Fi))return new Fi(e);e=e||[128,36,1],this._seed=e.length?eR.rack(e[0],e[1],e[2]):e}Fi.prototype.next=function(e){return this._seed(e||!0)};Fi.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};Fi.prototype.claim=function(e,t){this._seed.set(e,t||!0)};Fi.prototype.assigned=function(e){return this._seed.get(e)||!1};Fi.prototype.unclaim=function(e){delete this._seed.hats[e]};Fi.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};function hf(e){return Array.prototype.concat.apply([],e)}const Tl=Object.prototype.toString,tR=Object.prototype.hasOwnProperty;function kr(e){return e===void 0}function Vt(e){return e!==void 0}function mf(e){return e==null}function Je(e){return Tl.call(e)==="[object Array]"}function dn(e){return Tl.call(e)==="[object Object]"}function Ve(e){return Tl.call(e)==="[object Number]"}function sn(e){const t=Tl.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function ri(e){return Tl.call(e)==="[object String]"}function nR(e){if(!Je(e))throw new Error("must supply array")}function ir(e,t){return!mf(e)&&tR.call(e,t)}function at(e,t){const n=Lf(t);let i;return W(e,function(r,a){if(n(r,a))return i=r,!1}),i}function jw(e,t){const n=Lf(t);let i=Je(e)?-1:void 0;return W(e,function(r,a){if(n(r,a))return i=a,!1}),i}function Ze(e,t){const n=Lf(t);let i=[];return W(e,function(r,a){n(r,a)&&i.push(r)}),i}function W(e,t){let n,i;if(kr(e))return;const r=Je(e)?sR:aR;for(let a in e)if(ir(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function iR(e,t){if(kr(e))return[];nR(e);const n=Lf(t);return e.filter(function(i,r){return!n(i,r)})}function Un(e,t,n){return W(e,function(i,r){n=t(n,i,r)}),n}function Ba(e,t){return!!Un(e,function(n,i,r){return n&&t(i,r)},!0)}function sr(e,t){return!!at(e,t)}function Zt(e,t){let n=[];return W(e,function(i,r){n.push(t(i,r))}),n}function vf(e){return e&&Object.keys(e)||[]}function rR(e){return vf(e).length}function ag(e){return Zt(e,t=>t)}function qs(e,t,n={}){return t=sg(t),W(e,function(i){let r=t(i)||"_",a=n[r];a||(a=n[r]=[]),a.push(i)}),n}function zw(e,...t){e=sg(e);let n={};return W(t,r=>qs(r,e,n)),Zt(n,function(r,a){return r[0]})}const oR=zw;function ji(e,t){t=sg(t);let n=[];return W(e,function(i,r){let a=t(i,r),c={d:a,v:i};for(var l=0;l<n.length;l++){let{d:u}=n[l];if(a<u){n.splice(l,0,c);return}}n.push(c)}),Zt(n,i=>i.v)}function Bi(e){return function(t){return Ba(e,function(n,i){return t[i]===n})}}function sg(e){return sn(e)?e:t=>t[e]}function Lf(e){return sn(e)?e:t=>t===e}function aR(e){return e}function sR(e){return Number(e)}function Hw(e,t){let n,i,r,a;function c(m){let g=Date.now(),_=m?0:a+t-g;if(_>0)return l(_);e.apply(r,i),u()}function l(m){n=setTimeout(c,m)}function u(){n&&clearTimeout(n),n=a=i=r=void 0}function f(){n&&c(!0),u()}function d(...m){a=Date.now(),i=m,r=this,n||l(t)}return d.flush=f,d.cancel=u,d}function Dn(e,t){return e.bind(t)}function J(e,...t){return Object.assign(e,...t)}function cR(e,t,n){let i=e;return W(t,function(r,a){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let c=t[a+1],l=i[r];Vt(c)&&mf(l)&&(l=i[r]=isNaN(+c)?{}:[]),kr(c)?kr(n)?delete i[r]:i[r]=n:i=l}),e}function zi(e,t){let n={},i=Object(e);return W(t,function(r){r in i&&(n[r]=e[r])}),n}function Nr(e,t){let n={},i=Object(e);return W(i,function(r,a){t.indexOf(a)===-1&&(n[a]=r)}),n}function lR(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const uR=Object.prototype.toString,pR=Object.prototype.hasOwnProperty;function fR(e){return e===void 0}function dR(e){return uR.call(e)==="[object Array]"}function hR(e,t){return pR.call(e,t)}function LE(e,t){let n,i;if(fR(e))return;const r=dR(e)?vR:mR;for(let a in e)if(hR(e,a)&&(n=e[a],i=t(n,r(a)),i===!1))return n}function mR(e){return e}function vR(e){return Number(e)}function an(e,...t){const n=e.style;return LE(t,function(i){i&&LE(i,function(r,a){n[a]=r})}),e}function bn(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const gR=Object.prototype.toString;function He(e){return new Do(e)}function Do(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Do.prototype.add=function(e){return this.list.add(e),this};Do.prototype.remove=function(e){return gR.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Do.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Do.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Do.prototype.array=function(){return Array.from(this.list)};Do.prototype.has=Do.prototype.contains=function(e){return this.list.contains(e)};function Pl(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Ir(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var gf={},yf,_v,cg;function Vw(){yf=window.addEventListener?"addEventListener":"attachEvent",_v=window.removeEventListener?"removeEventListener":"detachEvent",cg=yf!=="addEventListener"?"on":""}var yR=gf.bind=function(e,t,n,i){return yf||Vw(),e[yf](cg+t,n,i||!1),n},_R=gf.unbind=function(e,t,n,i){return _v||Vw(),e[_v](cg+t,n,i||!1),n},ke=lR({__proto__:null,bind:yR,unbind:_R,default:gf},[gf]),Gw=["focus","blur"];function ER(e,t,n,i,r){return Gw.indexOf(n)!==-1&&(r=!0),ke.bind(e,n,function(a){var c=a.target||a.srcElement;a.delegateTarget=Ir(c,t,!0),a.delegateTarget&&i.call(e,a)},r)}function xR(e,t,n,i){return Gw.indexOf(t)!==-1&&(i=!0),ke.unbind(e,t,n,i)}var Vn={bind:ER,unbind:xR},wR=bR,Uw=!1,wp;typeof document<"u"&&(wp=document.createElement("div"),wp.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Uw=!wp.getElementsByTagName("link").length,wp=void 0);var Ht={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Uw?[1,"X<div>","</div>"]:[0,"",""]};Ht.td=Ht.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Ht.option=Ht.optgroup=[1,'<select multiple="multiple">',"</select>"];Ht.thead=Ht.tbody=Ht.colgroup=Ht.caption=Ht.tfoot=[1,"<table>","</table>"];Ht.polyline=Ht.ellipse=Ht.polygon=Ht.circle=Ht.text=Ht.line=Ht.path=Ht.rect=Ht.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function bR(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var u=t.createElement("html");return u.innerHTML=e,u.removeChild(u.lastChild)}var r=Object.prototype.hasOwnProperty.call(Ht,i)?Ht[i]:Ht._default,a=r[0],c=r[1],l=r[2],u=t.createElement("div");for(u.innerHTML=c+e+l;a--;)u=u.lastChild;if(u.firstChild==u.lastChild)return u.removeChild(u.firstChild);for(var f=t.createDocumentFragment();u.firstChild;)f.appendChild(u.removeChild(u.firstChild));return f}var et=wR;function lg(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function ft(e,t){return t=t||document,t.querySelector(e)}function Mr(e,t){return t=t||document,t.querySelectorAll(e)}function ar(e){e.parentNode&&e.parentNode.removeChild(e)}function SR(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function ug(e,t){return t.appendChild(SR(e,t))}function Ge(e,t){return ug(t,e),e}var Ev=2,Ww={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Ev,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Ev,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function CR(e,t){return Ww[t]?e.style[t]:e.getAttributeNS(null,t)}function Yw(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Ww[i];r?(r===Ev&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function TR(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)Yw(e,r,t[r])}function Se(e,t,n){if(typeof t=="string")if(n!==void 0)Yw(e,t,n);else return CR(e,t);else TR(e,t);return e}const PR=Object.prototype.toString;function ot(e){return new ko(e)}function ko(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}ko.prototype.add=function(e){return this.list.add(e),this};ko.prototype.remove=function(e){return PR.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};ko.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};ko.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};ko.prototype.array=function(){return Array.from(this.list)};ko.prototype.has=ko.prototype.contains=function(e){return this.list.contains(e)};function pg(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Kw(e){return e.cloneNode(!0)}var fg={svg:"http://www.w3.org/2000/svg"},BE='<svg xmlns="'+fg.svg+'"';function RR(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(fg.svg)===-1&&(e=BE+e.substring(4)):(e=BE+">"+e+"</svg>",t=!0);var n=AR(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function AR(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Be(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=RR(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(fg.svg,e),t&&Se(n,t),n}var Fm=null;function qw(){return Fm===null&&(Fm=Be("svg")),Fm}function $E(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function DR(e,t,n,i,r,a){var c=qw().createSVGMatrix();switch(arguments.length){case 0:return c;case 1:return $E(c,e);case 6:return $E(c,{a:e,b:t,c:n,d:i,e:r,f:a})}}function cl(e){return qw().createSVGTransform()}var FE=/([&<>]{1})/g,kR=/([&<>\n\r"]{1})/g,MR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function jm(e,t){function n(i,r){return MR[r]||r}return e.replace(t,n)}function Xw(e,t){var n,i,r,a,c;switch(e.nodeType){case 3:t.push(jm(e.textContent,FE));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)a=r.item(n),t.push(" ",a.name,'="',jm(a.value,kR),'"');if(e.hasChildNodes()){for(t.push(">"),c=e.childNodes,n=0,i=c.length;n<i;++n)Xw(c.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",jm(e.nodeValue,FE),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function NR(e){for(var t=e.firstChild,n=[];t;)Xw(t,n),t=t.nextSibling;return n.join("")}function jE(e,t){return NR(e)}function Dt(e){var t=e.parentNode;return t&&t.removeChild(e),e}function IR(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function OR(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(IR(e,i))}function vl(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),OR(n,t)),n.consolidate()}const LR=/^class[ {]/;function BR(e){return LR.test(e.toString())}function dg(e){return Array.isArray(e)}function zm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Jp(...e){e.length===1&&dg(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const $R=/constructor\s*[^(]*\(\s*([^)]*)\)/m,FR=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,jR=/\/\*([^*]*)\*\//m;function zR(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(BR(e)?$R:FR);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(jR);return(r&&r[1]||i).trim()})||[]}function Qw(e,t){t=t||{get:function(D,M){if(n.push(D),M===!1)return null;throw c(`No provider for "${D}"!`)}};const n=[],i=this._providers=Object.create(t._providers||null),r=this._instances=Object.create(null),a=r.injector=this,c=function(D){const M=n.join(" -> ");return n.length=0,new Error(M?`${D} (Resolving: ${M})`:D)};function l(D,M){if(!i[D]&&D.indexOf(".")!==-1){const A=D.split(".");let j=l(A.shift());for(;A.length;)j=j[A.shift()];return j}if(zm(r,D))return r[D];if(zm(i,D)){if(n.indexOf(D)!==-1)throw n.push(D),c("Cannot resolve circular dependency!");return n.push(D),r[D]=i[D][0](i[D][1]),n.pop(),r[D]}return t.get(D,M)}function u(D,M){if(typeof M>"u"&&(M={}),typeof D!="function")if(dg(D))D=Jp(D.slice());else throw c(`Cannot invoke "${D}". Expected a function!`);const j=(D.$inject||zR(D)).map(G=>zm(M,G)?M[G]:l(G));return{fn:D,dependencies:j}}function f(D){const{fn:M,dependencies:A}=u(D),j=Function.prototype.bind.apply(M,[null].concat(A));return new j}function d(D,M,A){const{fn:j,dependencies:G}=u(D,A);return j.apply(M,G)}function m(D){return Jp(M=>D.get(M))}function g(D,M){if(M&&M.length){const A=Object.create(null),j=Object.create(null),G=[],L=[],$=[];let O,Y,q,ae;for(let ce in i)O=i[ce],M.indexOf(ce)!==-1&&(O[2]==="private"?(Y=G.indexOf(O[3]),Y===-1?(q=O[3].createChild([],M),ae=m(q),G.push(O[3]),L.push(q),$.push(ae),A[ce]=[ae,ce,"private",q]):A[ce]=[$[Y],ce,"private",L[Y]]):A[ce]=[O[2],O[1]],j[ce]=!0),(O[2]==="factory"||O[2]==="type")&&O[1].$scope&&M.forEach(Ae=>{O[1].$scope.indexOf(Ae)!==-1&&(A[ce]=[O[2],O[1]],j[Ae]=!0)});M.forEach(ce=>{if(!j[ce])throw new Error('No provider for "'+ce+'". Cannot use provider from the parent!')}),D.unshift(A)}return new Qw(D,a)}const _={factory:d,type:f,value:function(D){return D}};function x(D,M){const A=D.__init__||[];return function(){A.forEach(j=>{typeof j=="string"?M.get(j):M.invoke(j)})}}function S(D){const M=D.__exports__;if(M){const A=D.__modules__,j=Object.keys(D).reduce((Y,q)=>(q!=="__exports__"&&q!=="__modules__"&&q!=="__init__"&&q!=="__depends__"&&(Y[q]=D[q]),Y),Object.create(null)),G=(A||[]).concat(j),L=g(G),$=Jp(function(Y){return L.get(Y)});M.forEach(function(Y){i[Y]=[$,Y,"private",L]});const O=(D.__init__||[]).slice();return O.unshift(function(){L.init()}),D=Object.assign({},D,{__init__:O}),x(D,L)}return Object.keys(D).forEach(function(A){if(A==="__init__"||A==="__depends__")return;if(D[A][2]==="private"){i[A]=D[A];return}const j=D[A][0],G=D[A][1];i[A]=[_[j],HR(j,G),j]}),x(D,a)}function C(D,M){return D.indexOf(M)!==-1||(D=(M.__depends__||[]).reduce(C,D),D.indexOf(M)!==-1)?D:D.concat(M)}function z(D){const M=D.reduce(C,[]).map(S);let A=!1;return function(){A||(A=!0,M.forEach(j=>j()))}}this.get=l,this.invoke=d,this.instantiate=f,this.createChild=g,this.init=z(e)}function HR(e,t){return e!=="value"&&dg(t)&&(t=Jp(t.slice())),t}var VR=1e3;function Or(e,t){var n=this;t=t||VR,e.on(["render.shape","render.connection"],t,function(i,r){var a=i.type,c=r.element,l=r.gfx,u=r.attrs;if(n.canRender(c))return a==="render.shape"?n.drawShape(l,c,u):n.drawConnection(l,c,u)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Or.prototype.canRender=function(e){};Or.prototype.drawShape=function(e,t){};Or.prototype.drawConnection=function(e,t){};Or.prototype.getShapePath=function(e){};Or.prototype.getConnectionPath=function(e){};function $a(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function GR(e){return["M",e.x,e.y]}function Hm(e){return["L",e.x,e.y]}function UR(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function WR(e,t){const n=e.length,i=[GR(e[0])];for(let r=1;r<n;r++){const a=e[r-1],c=e[r],l=e[r+1];if(!l||!t){i.push(Hm(c));continue}const u=Math.min(t,xv(c.x-a.x,c.y-a.y),xv(l.x-c.x,l.y-c.y));if(!u){i.push(Hm(c));continue}const f=bp(c,a,u),d=bp(c,a,u*.5),m=bp(c,l,u),g=bp(c,l,u*.5);i.push(Hm(f)),i.push(UR(d,g,m))}return i}function bp(e,t,n){const i=t.x-e.x,r=t.y-e.y,a=xv(i,r),c=n/a;return{x:e.x+i*c,y:e.y+r*c}}function xv(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Bf(e,t,n){Ve(t)&&(n=t,t=null),t||(t={});const i=Be("path",t);return Ve(n)&&(i.dataset.cornerRadius=String(n)),Zw(i,e)}function Zw(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return Se(e,{d:$a(WR(t,n))}),e}function $f(e){return Ze(e,function(t){return!at(e,function(n){return n!==t&&Jw(t,n)})})}function Jw(e,t){if(t){if(e===t)return t;if(e.parent)return Jw(e.parent,t)}}function zE(e,t,n){var i=!n||e.indexOf(t)===-1;return i&&e.push(t),i}function Fa(e,t,n){n=n||0,Je(e)||(e=[e]),W(e,function(i,r){var a=t(i,r,n);Je(a)&&a.length&&Fa(a,t,n+1)})}function YR(e,t,n){var i=[],r=[];return Fa(e,function(a,c,l){zE(i,a,t);var u=a.children;if(u&&zE(r,u,t))return u}),i}function Rl(e,t){return YR(e,!t)}function KR(e,t,n){kr(t)&&(t=!0),dn(t)&&(n=t,t=!0),n=n||{};var i=qc(n.allShapes),r=qc(n.allConnections),a=qc(n.enclosedElements),c=qc(n.enclosedConnections),l=qc(n.topLevel,t&&qs(e,function(d){return d.id}));function u(d){l[d.source.id]&&l[d.target.id]&&(l[d.id]=[d]),i[d.source.id]&&i[d.target.id]&&(c[d.id]=a[d.id]=d),r[d.id]=d}function f(d){if(a[d.id]=d,d.waypoints)c[d.id]=r[d.id]=d;else return i[d.id]=d,W(d.incoming,u),W(d.outgoing,u),d.children}return Fa(e,f),{allShapes:i,allConnections:r,topLevel:l,enclosedConnections:c,enclosedElements:a}}function Ot(e,t){t=!!t,Je(e)||(e=[e]);var n,i,r,a;return W(e,function(c){var l=c;c.waypoints&&!t&&(l=Ot(c.waypoints,!0));var u=l.x,f=l.y,d=l.height||0,m=l.width||0;(u<n||n===void 0)&&(n=u),(f<i||i===void 0)&&(i=f),(u+m>r||r===void 0)&&(r=u+m),(f+d>a||a===void 0)&&(a=f+d)}),{x:n,y:i,height:a-i,width:r-n}}function qR(e,t){var n={};return W(e,function(i){var r=i;r.waypoints&&(r=Ot(r)),!Ve(t.y)&&r.x>t.x&&(n[i.id]=i),!Ve(t.x)&&r.y>t.y&&(n[i.id]=i),r.x>t.x&&r.y>t.y&&(Ve(t.width)&&Ve(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!Ve(t.width)||!Ve(t.height))&&(n[i.id]=i)}),n}function eb(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function tb(e){return!!(e&&e.isFrame)}function qc(e,t){return J({},e||{},t||{})}var XR=1;function Oo(e,t){Or.call(this,e,XR),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}Te(Oo,Or);Oo.prototype.canRender=function(){return!0};Oo.prototype.drawShape=function(t,n,i){var r=Be("rect");return Se(r,{x:0,y:0,width:n.width||0,height:n.height||0}),tb(n)?Se(r,J({},this.FRAME_STYLE,i||{})):Se(r,J({},this.SHAPE_STYLE,i||{})),Ge(t,r),r};Oo.prototype.drawConnection=function(t,n,i){var r=Bf(n.waypoints,J({},this.CONNECTION_STYLE,i||{}));return Ge(t,r),r};Oo.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,a=t.height,c=[["M",n,i],["l",r,0],["l",0,a],["l",-r,0],["z"]];return $a(c)};Oo.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,a=[];for(i=0;r=n[i];i++)r=r.original||r,a.push([i===0?"M":"L",r.x,r.y]);return $a(a)};Oo.$inject=["eventBus","styles"];function QR(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var a=this.style(i,r);return J(a,{class:n})},this.style=function(n,i){!Je(n)&&!i&&(i=n,n=[]);var r=Un(n,function(a,c){return J(a,e[c]||{})},{});return i?J(r,i):r},this.computeStyle=function(n,i,r){return Je(i)||(r=i,i=[]),t.style(i||[],J({},r,n||{}))}}const ZR={__init__:["defaultRenderer"],defaultRenderer:["type",Oo],styles:["type",QR]};function Lt(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Gt(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function hg(e,t){return!e||!t?-1:e.indexOf(t)}function Al(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function mg(e,t,n,i){if(typeof i>"u"&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),a=Al(e,t);return Math.abs(r/a)<=i}var JR=2;function Pr(e,t){var n=Array.from(arguments).flat();const i={x:"v",y:"h"};for(const[r,a]of Object.entries(i))if(eA(r,n))return a;return!1}function eA(e,t){const n=t[0];return Ba(t,function(i){return Math.abs(n[e]-i[e])<=JR})}function HE(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function wv(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var Vm,VE;function tA(){if(VE)return Vm;VE=1;var e=/,?([a-z]),?/gi,t=parseFloat,n=Math,i=n.PI,r=n.min,a=n.max,c=n.pow,l=n.abs,u=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,f=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,d=Array.isArray||function(w){return w instanceof Array};function m(w,T){return Object.prototype.hasOwnProperty.call(w,T)}function g(w){if(typeof w=="function"||Object(w)!==w)return w;var T=new w.constructor;for(var H in w)m(w,H)&&(T[H]=g(w[H]));return T}function _(w,T){for(var H=0,I=w.length;H<I;H++)if(w[H]===T)return w.push(w.splice(H,1)[0])}function x(w){function T(){var H=Array.prototype.slice.call(arguments,0),I=H.join(""),V=T.cache=T.cache||{},ne=T.count=T.count||[];return m(V,I)?(_(ne,I),V[I]):(ne.length>=1e3&&delete V[ne.shift()],ne.push(I),V[I]=w.apply(0,H),V[I])}return T}function S(w){if(!w)return null;var T=C(w);if(T.arr)return g(T.arr);var H={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},I=[];return d(w)&&d(w[0])&&(I=g(w)),I.length||String(w).replace(u,function(V,ne,B){var Q=[],Z=ne.toLowerCase();for(B.replace(f,function(ee,le){le&&Q.push(+le)}),Z=="m"&&Q.length>2&&(I.push([ne].concat(Q.splice(0,2))),Z="l",ne=ne=="m"?"l":"L");Q.length>=H[Z]&&(I.push([ne].concat(Q.splice(0,H[Z]))),!!H[Z]););}),I.toString=C.toString,T.arr=g(I),I}function C(w){var T=C.ps=C.ps||{};return T[w]?T[w].sleep=100:T[w]={sleep:100},setTimeout(function(){for(var H in T)m(T,H)&&H!=w&&(T[H].sleep--,!T[H].sleep&&delete T[H])}),T[w]}function z(w,T,H,I){return arguments.length===1&&(T=w.y,H=w.width,I=w.height,w=w.x),{x:w,y:T,width:H,height:I,x2:w+H,y2:T+I}}function D(){return this.join(",").replace(e,"$1")}function M(w){var T=g(w);return T.toString=D,T}function A(w,T,H,I,V,ne,B,Q,Z){var ee=1-Z,le=c(ee,3),pe=c(ee,2),ve=Z*Z,se=ve*Z,ue=le*w+pe*3*Z*H+ee*3*Z*Z*V+se*B,je=le*T+pe*3*Z*I+ee*3*Z*Z*ne+se*Q;return{x:q(ue),y:q(je)}}function j(w){var T=N.apply(null,w);return z(T.x0,T.y0,T.x1-T.x0,T.y1-T.y0)}function G(w,T,H){return T>=w.x&&T<=w.x+w.width&&H>=w.y&&H<=w.y+w.height}function L(w,T){return w=z(w),T=z(T),G(T,w.x,w.y)||G(T,w.x2,w.y)||G(T,w.x,w.y2)||G(T,w.x2,w.y2)||G(w,T.x,T.y)||G(w,T.x2,T.y)||G(w,T.x,T.y2)||G(w,T.x2,T.y2)||(w.x<T.x2&&w.x>T.x||T.x<w.x2&&T.x>w.x)&&(w.y<T.y2&&w.y>T.y||T.y<w.y2&&T.y>w.y)}function $(w,T,H,I,V){var ne=-3*T+9*H-9*I+3*V,B=w*ne+6*T-12*H+6*I;return w*B-3*T+3*H}function O(w,T,H,I,V,ne,B,Q,Z){Z==null&&(Z=1),Z=Z>1?1:Z<0?0:Z;for(var ee=Z/2,le=12,pe=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],ve=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],se=0,ue=0;ue<le;ue++){var je=ee*pe[ue]+ee,ze=$(je,w,H,V,B),Ce=$(je,T,I,ne,Q),dt=ze*ze+Ce*Ce;se+=ve[ue]*n.sqrt(dt)}return ee*se}function Y(w,T,H,I,V,ne,B,Q){if(!(a(w,H)<r(V,B)||r(w,H)>a(V,B)||a(T,I)<r(ne,Q)||r(T,I)>a(ne,Q))){var Z=(w*I-T*H)*(V-B)-(w-H)*(V*Q-ne*B),ee=(w*I-T*H)*(ne-Q)-(T-I)*(V*Q-ne*B),le=(w-H)*(ne-Q)-(T-I)*(V-B);if(le){var pe=q(Z/le),ve=q(ee/le),se=+pe.toFixed(2),ue=+ve.toFixed(2);if(!(se<+r(w,H).toFixed(2)||se>+a(w,H).toFixed(2)||se<+r(V,B).toFixed(2)||se>+a(V,B).toFixed(2)||ue<+r(T,I).toFixed(2)||ue>+a(T,I).toFixed(2)||ue<+r(ne,Q).toFixed(2)||ue>+a(ne,Q).toFixed(2)))return{x:pe,y:ve}}}}function q(w){return Math.round(w*1e11)/1e11}function ae(w,T,H){var I=j(w),V=j(T);if(!L(I,V))return H?0:[];for(var ne=O.apply(0,w),B=O.apply(0,T),Q=nt(w)?1:~~(ne/5)||1,Z=nt(T)?1:~~(B/5)||1,ee=[],le=[],pe={},ve=H?0:[],se=0;se<Q+1;se++){var ue=A.apply(0,w.concat(se/Q));ee.push({x:ue.x,y:ue.y,t:se/Q})}for(se=0;se<Z+1;se++)ue=A.apply(0,T.concat(se/Z)),le.push({x:ue.x,y:ue.y,t:se/Z});for(se=0;se<Q;se++)for(var je=0;je<Z;je++){var ze=ee[se],Ce=ee[se+1],dt=le[je],Ie=le[je+1],Xe=l(Ce.x-ze.x)<.01?"y":"x",it=l(Ie.x-dt.x)<.01?"y":"x",mt=Y(ze.x,ze.y,Ce.x,Ce.y,dt.x,dt.y,Ie.x,Ie.y),we;if(mt){if(we=mt.x.toFixed(9)+"#"+mt.y.toFixed(9),pe[we])continue;pe[we]=!0;var Oe=ze.t+l((mt[Xe]-ze[Xe])/(Ce[Xe]-ze[Xe]))*(Ce.t-ze.t),ui=dt.t+l((mt[it]-dt[it])/(Ie[it]-dt[it]))*(Ie.t-dt.t);Oe>=0&&Oe<=1&&ui>=0&&ui<=1&&(H?ve++:ve.push({x:mt.x,y:mt.y,t1:Oe,t2:ui}))}}return ve}function ce(w,T,H){w=E(w),T=E(T);for(var I,V,ne,B,Q,Z,ee,le,pe,ve,se=H?0:[],ue=0,je=w.length;ue<je;ue++){var ze=w[ue];if(ze[0]=="M")I=Q=ze[1],V=Z=ze[2];else{ze[0]=="C"?(pe=[I,V].concat(ze.slice(1)),I=pe[6],V=pe[7]):(pe=[I,V,I,V,Q,Z,Q,Z],I=Q,V=Z);for(var Ce=0,dt=T.length;Ce<dt;Ce++){var Ie=T[Ce];if(Ie[0]=="M")ne=ee=Ie[1],B=le=Ie[2];else{Ie[0]=="C"?(ve=[ne,B].concat(Ie.slice(1)),ne=ve[6],B=ve[7]):(ve=[ne,B,ne,B,ee,le,ee,le],ne=ee,B=le);var Xe=ae(pe,ve,H);if(H)se+=Xe;else{for(var it=0,mt=Xe.length;it<mt;it++)Xe[it].segment1=ue,Xe[it].segment2=Ce,Xe[it].bez1=pe,Xe[it].bez2=ve;se=se.concat(Xe)}}}}}return se}function Ae(w){var T=C(w);if(T.abs)return M(T.abs);if((!d(w)||!d(w&&w[0]))&&(w=S(w)),!w||!w.length)return[["M",0,0]];var H=[],I=0,V=0,ne=0,B=0,Q=0,Z;w[0][0]=="M"&&(I=+w[0][1],V=+w[0][2],ne=I,B=V,Q++,H[0]=["M",I,V]);for(var ee,le,pe=Q,ve=w.length;pe<ve;pe++){if(H.push(ee=[]),le=w[pe],Z=le[0],Z!=Z.toUpperCase())switch(ee[0]=Z.toUpperCase(),ee[0]){case"A":ee[1]=le[1],ee[2]=le[2],ee[3]=le[3],ee[4]=le[4],ee[5]=le[5],ee[6]=+le[6]+I,ee[7]=+le[7]+V;break;case"V":ee[1]=+le[1]+V;break;case"H":ee[1]=+le[1]+I;break;case"M":ne=+le[1]+I,B=+le[2]+V;default:for(var se=1,ue=le.length;se<ue;se++)ee[se]=+le[se]+(se%2?I:V)}else for(var je=0,ze=le.length;je<ze;je++)ee[je]=le[je];switch(Z=Z.toUpperCase(),ee[0]){case"Z":I=+ne,V=+B;break;case"H":I=ee[1];break;case"V":V=ee[1];break;case"M":ne=ee[ee.length-2],B=ee[ee.length-1];default:I=ee[ee.length-2],V=ee[ee.length-1]}}return H.toString=D,T.abs=M(H),H}function nt(w){return w[0]===w[2]&&w[1]===w[3]&&w[4]===w[6]&&w[5]===w[7]}function Me(w,T,H,I){return[w,T,H,I,H,I]}function Ee(w,T,H,I,V,ne){var B=.3333333333333333,Q=2/3;return[B*w+Q*H,B*T+Q*I,B*V+Q*H,B*ne+Q*I,V,ne]}function me(w,T,H,I,V,ne,B,Q,Z,ee){var le=i*120/180,pe=i/180*(+V||0),ve=[],se,ue=x(function(na,ia,dr){var ra=na*n.cos(dr)-ia*n.sin(dr),oa=na*n.sin(dr)+ia*n.cos(dr);return{x:ra,y:oa}});if(ee)we=ee[0],Oe=ee[1],it=ee[2],mt=ee[3];else{se=ue(w,T,-pe),w=se.x,T=se.y,se=ue(Q,Z,-pe),Q=se.x,Z=se.y;var je=(w-Q)/2,ze=(T-Z)/2,Ce=je*je/(H*H)+ze*ze/(I*I);Ce>1&&(Ce=n.sqrt(Ce),H=Ce*H,I=Ce*I);var dt=H*H,Ie=I*I,Xe=(ne==B?-1:1)*n.sqrt(l((dt*Ie-dt*ze*ze-Ie*je*je)/(dt*ze*ze+Ie*je*je))),it=Xe*H*ze/I+(w+Q)/2,mt=Xe*-I*je/H+(T+Z)/2,we=n.asin(((T-mt)/I).toFixed(9)),Oe=n.asin(((Z-mt)/I).toFixed(9));we=w<it?i-we:we,Oe=Q<it?i-Oe:Oe,we<0&&(we=i*2+we),Oe<0&&(Oe=i*2+Oe),B&&we>Oe&&(we=we-i*2),!B&&Oe>we&&(Oe=Oe-i*2)}var ui=Oe-we;if(l(ui)>le){var Yr=Oe,fr=Q,Jo=Z;Oe=we+le*(B&&Oe>we?1:-1),Q=it+H*n.cos(Oe),Z=mt+I*n.sin(Oe),ve=me(Q,Z,H,I,V,0,B,fr,Jo,[Oe,Yr,it,mt])}ui=Oe-we;var Yi=n.cos(we),pi=n.sin(we),ea=n.cos(Oe),ns=n.sin(Oe),ta=n.tan(ui/4),is=4/3*H*ta,Kr=4/3*I*ta,qr=[w,T],Tn=[w+is*pi,T-Kr*Yi],Xr=[Q+is*ns,Z-Kr*ea],Qr=[Q,Z];if(Tn[0]=2*qr[0]-Tn[0],Tn[1]=2*qr[1]-Tn[1],ee)return[Tn,Xr,Qr].concat(ve);ve=[Tn,Xr,Qr].concat(ve).join().split(",");for(var fi=[],tn=0,Zr=ve.length;tn<Zr;tn++)fi[tn]=tn%2?ue(ve[tn-1],ve[tn],pe).y:ue(ve[tn],ve[tn+1],pe).x;return fi}function N(w,T,H,I,V,ne,B,Q){for(var Z=[],ee=[[],[]],le,pe,ve,se,ue,je,ze,Ce,dt=0;dt<2;++dt){if(dt==0?(pe=6*w-12*H+6*V,le=-3*w+9*H-9*V+3*B,ve=3*H-3*w):(pe=6*T-12*I+6*ne,le=-3*T+9*I-9*ne+3*Q,ve=3*I-3*T),l(le)<1e-12){if(l(pe)<1e-12)continue;se=-ve/pe,0<se&&se<1&&Z.push(se);continue}ze=pe*pe-4*ve*le,Ce=n.sqrt(ze),!(ze<0)&&(ue=(-pe+Ce)/(2*le),0<ue&&ue<1&&Z.push(ue),je=(-pe-Ce)/(2*le),0<je&&je<1&&Z.push(je))}for(var Ie=Z.length,Xe=Ie,it;Ie--;)se=Z[Ie],it=1-se,ee[0][Ie]=it*it*it*w+3*it*it*se*H+3*it*se*se*V+se*se*se*B,ee[1][Ie]=it*it*it*T+3*it*it*se*I+3*it*se*se*ne+se*se*se*Q;return ee[0][Xe]=w,ee[1][Xe]=T,ee[0][Xe+1]=B,ee[1][Xe+1]=Q,ee[0].length=ee[1].length=Xe+2,{x0:r.apply(0,ee[0]),y0:r.apply(0,ee[1]),x1:a.apply(0,ee[0]),y1:a.apply(0,ee[1])}}function E(w){var T=C(w);if(T.curve)return M(T.curve);for(var H=Ae(w),I={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},V=function(se,ue,je){var ze,Ce;if(!se)return["C",ue.x,ue.y,ue.x,ue.y,ue.x,ue.y];switch(!(se[0]in{T:1,Q:1})&&(ue.qx=ue.qy=null),se[0]){case"M":ue.X=se[1],ue.Y=se[2];break;case"A":se=["C"].concat(me.apply(0,[ue.x,ue.y].concat(se.slice(1))));break;case"S":je=="C"||je=="S"?(ze=ue.x*2-ue.bx,Ce=ue.y*2-ue.by):(ze=ue.x,Ce=ue.y),se=["C",ze,Ce].concat(se.slice(1));break;case"T":je=="Q"||je=="T"?(ue.qx=ue.x*2-ue.qx,ue.qy=ue.y*2-ue.qy):(ue.qx=ue.x,ue.qy=ue.y),se=["C"].concat(Ee(ue.x,ue.y,ue.qx,ue.qy,se[1],se[2]));break;case"Q":ue.qx=se[1],ue.qy=se[2],se=["C"].concat(Ee(ue.x,ue.y,se[1],se[2],se[3],se[4]));break;case"L":se=["C"].concat(Me(ue.x,ue.y,se[1],se[2]));break;case"H":se=["C"].concat(Me(ue.x,ue.y,se[1],ue.y));break;case"V":se=["C"].concat(Me(ue.x,ue.y,ue.x,se[1]));break;case"Z":se=["C"].concat(Me(ue.x,ue.y,ue.X,ue.Y));break}return se},ne=function(se,ue){if(se[ue].length>7){se[ue].shift();for(var je=se[ue];je.length;)B[ue]="A",se.splice(ue++,0,["C"].concat(je.splice(0,6)));se.splice(ue,1),le=H.length}},B=[],Q="",Z="",ee=0,le=H.length;ee<le;ee++){H[ee]&&(Q=H[ee][0]),Q!="C"&&(B[ee]=Q,ee&&(Z=B[ee-1])),H[ee]=V(H[ee],I,Z),B[ee]!="A"&&Q=="C"&&(B[ee]="C"),ne(H,ee);var pe=H[ee],ve=pe.length;I.x=pe[ve-2],I.y=pe[ve-1],I.bx=t(pe[ve-4])||I.x,I.by=t(pe[ve-3])||I.y}return T.curve=M(H),H}return Vm=ce,Vm}var nA=tA();const nb=Of(nA);function ib(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Rr(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Fe(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Ff(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function iA(e){return Rr({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function rA(e){for(var t=e.waypoints,n=t.reduce(function(f,d,m){var g=t[m-1];if(g){var _=f[f.length-1],x=_&&_.endLength||0,S=sA(g,d);f.push({start:g,end:d,startLength:x,endLength:x+S,length:S})}return f},[]),i=n.reduce(function(f,d){return f+d.length},0),r=i/2,a=0,c=n[a];c.endLength<r;)c=n[++a];var l=(r-c.startLength)/c.length,u={x:c.start.x+(c.end.x-c.start.x)*l,y:c.start.y+(c.end.y-c.start.y)*l};return u}function Ke(e){return cA(e)?rA(e):iA(e)}function hn(e,t,n){n=n||0,dn(n)||(n={x:n,y:n});var i=Fe(e),r=Fe(t),a=i.bottom+n.y<=r.top,c=i.left-n.x>=r.right,l=i.top-n.y>=r.bottom,u=i.right+n.x<=r.left,f=a?"top":l?"bottom":null,d=u?"left":c?"right":null;return d&&f?f+"-"+d:d||f||"intersect"}function bv(e,t,n){var i=oA(e,t);return i.length===1||i.length===2&&Al(i[0],i[1])<1?Rr(i[0]):i.length>1?(i=ji(i,function(r){var a=Math.floor(r.t2*100)||1;return a=100-a,a=(a<10?"0":"")+a,r.segment2+"#"+a}),Rr(i[n?0:i.length-1])):null}function oA(e,t){return nb(e,t)}function aA(e){e=e.slice();for(var t=0,n,i,r;e[t];)n=e[t],i=e[t-1],r=e[t+1],Al(n,r)===0||mg(i,r,n)?e.splice(t,1):t++;return e}function sA(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cA(e){return!!e.waypoints}function ef(e,t){return Math.round(e*t)/t}function GE(e){return Ve(e)?e+"px":e}function lA(e){for(;e.parent;)e=e.parent;return e}function uA(e){e=J({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),an(n,{position:"relative",overflow:"hidden",width:GE(e.width),height:GE(e.height)}),t.appendChild(n),n}function rb(e,t,n){const i=Be("g");ot(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const pA="base",ob=0,fA=1,dA={shape:["x","y","width","height"],connection:["waypoints"]};function qe(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}qe.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];qe.prototype._init=function(e){const t=this._eventBus,n=this._container=uA(e),i=this._svg=Be("svg");Se(i,{width:"100%",height:"100%"}),Ge(n,i);const r=this._viewport=rb(i,"viewport");e.deferUpdate!==!1&&(this._viewboxChanged=Hw(Dn(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};qe.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};qe.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=eb(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};qe.prototype.getDefaultLayer=function(){return this.getLayer(pA,ob)};qe.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};qe.prototype._getChildIndex=function(e){return Un(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};qe.prototype._createLayer=function(e,t){typeof t>"u"&&(t=fA);const n=this._getChildIndex(t);return{group:rb(this._viewport,"layer-"+e,n),index:t,visible:!0}};qe.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const a=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[a]||null),t.visible=!0,i};qe.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(Dt(n),t.visible=!1),n};qe.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],Dt(t.group))};qe.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};qe.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(lA(e))||{}).rootElement:void 0};qe.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};qe.prototype._findPlaneForRoot=function(e){return at(this._planes,function(t){return t.rootElement===e})};qe.prototype.getContainer=function(){return this._container};qe.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),i=this._elementRegistry._elements[e.id],i&&(W([i.gfx,i.secondaryGfx],function(r){r&&(n?ot(r).add(t):ot(r).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};qe.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};qe.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};qe.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));const n=this.getGraphics(e);return ot(n).has(t)};qe.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};qe.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};qe.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,ob);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};qe.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};qe.prototype.setRootElement=function(e,t){if(Vt(t))throw new Error("override not supported");if(e===this._rootElement)return;let n;if(!e)throw new Error("rootElement required");return n=this._findPlaneForRoot(e),n||(e=this.addRootElement(e)),this._setRoot(e),e};qe.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};qe.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};qe.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};qe.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=dA[e];if(!Ba(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};qe.prototype._setParent=function(e,t,n){Gt(t.children,e,n),e.parent=t};qe.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,a=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const c=a.create(e,t,i);return this._elementRegistry.add(t,c),a.update(e,t,c),r.fire(e+".added",{element:t,gfx:c}),t};qe.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};qe.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};qe.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),Lt(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};qe.prototype.removeShape=function(e){return this._removeElement(e,"shape")};qe.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};qe.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};qe.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};qe.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};qe.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return this._cachedViewbox;const t=this._viewport,n=this.getSize();let i,r,a,c,l,u,f;if(e)this._changeViewbox(function(){l=Math.min(n.width/e.width,n.height/e.height);const d=this._svg.createSVGMatrix().scale(l).translate(-e.x,-e.y);vl(t,d)});else return a=this._rootElement?this.getActiveLayer():null,i=a&&a.getBBox()||{},c=vl(t),r=c?c.matrix:DR(),l=ef(r.a,1e3),u=ef(-r.e||0,1e3),f=ef(-r.f||0,1e3),e=this._cachedViewbox={x:u?u/l:0,y:f?f/l:0,width:n.width/l,height:n.height/l,scale:l,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};qe.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=J({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),ab(t,n)}),{x:n.e,y:n.f}};qe.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);i!==this.getRootElement()&&this.setRootElement(i),t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=Ot(e),a=Fe(r),c=this.viewbox(),l=this.zoom();let u,f;c.y+=t.top/l,c.x+=t.left/l,c.width-=(t.right+t.left)/l,c.height-=(t.bottom+t.top)/l;const d=Fe(c);if(!(r.width<c.width&&r.height<c.height))u=r.x-c.x,f=r.y-c.y;else{const g=Math.max(0,a.right-d.right),_=Math.min(0,a.left-d.left),x=Math.max(0,a.bottom-d.bottom),S=Math.min(0,a.top-d.top);u=g||_,f=x||S}this.scroll({dx:-u*l,dy:-f*l})};qe.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),ef(i.a,1e3)};function ab(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}qe.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,a;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?a={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),a={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(a),this.viewbox(!1).scale};qe.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),a=n.createSVGPoint();let c,l,u,f,d;u=i.getCTM();const m=u.a;return t?(c=J(a,t),l=c.matrixTransform(u.inverse()),f=r.translate(l.x,l.y).scale(1/m*e).translate(-l.x,-l.y),d=u.multiply(f)):d=r.scale(e),ab(this._viewport,d),d};qe.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};qe.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,a=n.width*t.scale,c=n.height*t.scale;return{x:i,y:r,width:a,height:c}};qe.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Hs="data-element-id";function oi(e){this._elements={},this._eventBus=e}oi.$inject=["eventBus"];oi.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),Se(t,Hs,i),n&&Se(n,Hs,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};oi.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(Se(i.gfx,Hs,""),i.secondaryGfx&&Se(i.secondaryGfx,Hs,""),delete t[n])};oi.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};oi.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&Se(t,Hs,i),t};oi.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&Se(e,Hs);var n=this._elements[t];return n&&n.element};oi.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};oi.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],a=t[r],c=a.element,l=a.gfx;if(e(c,l))return c}};oi.prototype.getAll=function(){return this.filter(function(e){return e})};oi.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,a=i.gfx;return e(r,a)})};oi.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};oi.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};var Sp={exports:{}},Cp={},UE;function sb(){if(UE)return Cp;UE=1;function e(n,i,r,a){var c=r.inverse;return Object.defineProperty(n,"remove",{value:function(l){var u=this.indexOf(l);return u!==-1&&(this.splice(u,1),i.unset(l,c,a)),l}}),Object.defineProperty(n,"contains",{value:function(l){return this.indexOf(l)!==-1}}),Object.defineProperty(n,"add",{value:function(l,u){var f=this.indexOf(l);if(typeof u>"u"){if(f!==-1)return;u=this.length}f!==-1&&this.splice(f,1),this.splice(u,0,l),f===-1&&i.set(l,c,a)}}),Object.defineProperty(n,"__refs_collection",{value:!0}),n}function t(n){return n.__refs_collection===!0}return Cp.extend=e,Cp.isExtended=t,Cp}var Gm,WE;function hA(){if(WE)return Gm;WE=1;var e=sb();function t(a,c){return Object.prototype.hasOwnProperty.call(a,c.name||c)}function n(a,c,l){var u=e.extend(l[c.name]||[],a,c,l);Object.defineProperty(l,c.name,{enumerable:c.enumerable,value:u}),u.length&&u.forEach(function(f){a.set(f,c.inverse,l)})}function i(a,c,l){var u=c.inverse,f=l[c.name];Object.defineProperty(l,c.name,{configurable:c.configurable,enumerable:c.enumerable,get:function(){return f},set:function(d){if(d!==f){var m=f;f=null,m&&a.unset(m,u,l),f=d,a.set(f,u,l)}}})}function r(a,c){if(!(this instanceof r))return new r(a,c);a.inverse=c,c.inverse=a,this.props={},this.props[a.name]=a,this.props[c.name]=c}return r.prototype.bind=function(a,c){if(typeof c=="string"){if(!this.props[c])throw new Error("no property <"+c+"> in ref");c=this.props[c]}c.collection?n(this,c,a):i(this,c,a)},r.prototype.ensureRefsCollection=function(a,c){var l=a[c.name];return e.isExtended(l)||n(this,c,a),l},r.prototype.ensureBound=function(a,c){t(a,c)||this.bind(a,c)},r.prototype.unset=function(a,c,l){a&&(this.ensureBound(a,c),c.collection?this.ensureRefsCollection(a,c).remove(l):a[c.name]=void 0)},r.prototype.set=function(a,c,l){a&&(this.ensureBound(a,c),c.collection?this.ensureRefsCollection(a,c).add(l):a[c.name]=l)},Gm=r,Gm}var YE;function mA(){return YE||(YE=1,Sp.exports=hA(),Sp.exports.Collection=sb()),Sp.exports}var vA=mA();const Dl=Of(vA);var cb=new Dl({name:"children",enumerable:!0,collection:!0},{name:"parent"}),lb=new Dl({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),KE=new Dl({name:"attachers",collection:!0},{name:"host"}),ub=new Dl({name:"outgoing",collection:!0},{name:"source"}),pb=new Dl({name:"incoming",collection:!0},{name:"target"});function kl(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),cb.bind(this,"parent"),lb.bind(this,"labels"),ub.bind(this,"outgoing"),pb.bind(this,"incoming")}function Xs(){kl.call(this),cb.bind(this,"children"),KE.bind(this,"host"),KE.bind(this,"attachers")}Te(Xs,kl);function fb(){Xs.call(this)}Te(fb,Xs);function jf(){Xs.call(this),lb.bind(this,"labelTarget")}Te(jf,Xs);function db(){kl.call(this),ub.bind(this,"source"),pb.bind(this,"target")}Te(db,kl);var gA={connection:db,shape:Xs,label:jf,root:fb};function yA(e,t){var n=gA[e];if(!n)throw new Error("unknown type: <"+e+">");return J(new n,t)}function Lr(){this._uid=12}Lr.prototype.createRoot=function(e){return this.create("root",e)};Lr.prototype.createLabel=function(e){return this.create("label",e)};Lr.prototype.createShape=function(e){return this.create("shape",e)};Lr.prototype.createConnection=function(e){return this.create("connection",e)};Lr.prototype.create=function(e,t){return t=J({},t||{}),t.id||(t.id=e+"_"+this._uid++),yA(e,t)};var _f="__fn",hb=1e3,_A=Array.prototype.slice;function Wn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Wn.prototype.on=function(e,t,n,i){if(e=Je(e)?e:[e],sn(t)&&(i=n,n=t,t=hb),!Ve(t))throw new Error("priority must be a number");var r=n;i&&(r=Dn(n,i),r[_f]=n[_f]||n);var a=this;e.forEach(function(c){a._addListener(c,{priority:t,callback:r,next:null})})};Wn.prototype.once=function(e,t,n,i){var r=this;if(sn(t)&&(i=n,n=t,t=hb),!Ve(t))throw new Error("priority must be a number");function a(){a.__isTomb=!0;var c=n.apply(i,arguments);return r.off(e,a),c}a[_f]=n,this.on(e,t,a)};Wn.prototype.off=function(e,t){e=Je(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};Wn.prototype.createEvent=function(e){var t=new Ml;return t.init(e),t};Wn.prototype.fire=function(e,t){var n,i,r,a;if(a=_A.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof Ml?n=t:n=this.createEvent(t),a[0]=n;var c=n.type;e!==c&&(n.type=e);try{r=this._invokeListeners(n,a,i)}finally{e!==c&&(n.type=c)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};Wn.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};Wn.prototype._destroy=function(){this._listeners={}};Wn.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};Wn.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=EA(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};Wn.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};Wn.prototype._getListeners=function(e){return this._listeners[e]};Wn.prototype._setListeners=function(e,t){this._listeners[e]=t};Wn.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,a;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,a=n.callback,(a===t||a[_f]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function Ml(){}Ml.prototype.stopPropagation=function(){this.cancelBubble=!0};Ml.prototype.preventDefault=function(){this.defaultPrevented=!0};Ml.prototype.init=function(e){J(this,e||{})};function EA(e,t){return e.apply(null,t)}function Ef(e){return e.childNodes[0]}function xA(e){return e.parentNode.childNodes[1]}function Sv(e,t,n,i,r){var a=cl();a.setTranslate(t,n);var c=cl();c.setRotate(i||0,0,0);var l=cl();l.setScale(1,1),vl(e,[a,c,l])}function Gn(e,t,n){var i=cl();i.setTranslate(t,n),vl(e,i)}function mb(e,t){var n=cl();n.setRotate(t,0,0),vl(e,n)}function ai(e,t){this._eventBus=e,this._elementRegistry=t}ai.$inject=["eventBus","elementRegistry"];ai.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=xA(t),n||(n=Be("g"),ot(n).add("djs-children"),Ge(t.parentNode,n))):n=t,n};ai.prototype._clear=function(e){var t=Ef(e);return Pl(t),t};ai.prototype._createContainer=function(e,t,n,i){var r=Be("g");ot(r).add("djs-group"),typeof n<"u"?vb(r,t,t.childNodes[n]):Ge(t,r);var a=Be("g");ot(a).add("djs-element"),ot(a).add("djs-"+e),i&&ot(a).add("djs-frame"),Ge(r,a);var c=Be("g");return ot(c).add("djs-visual"),Ge(a,c),a};ai.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,tb(t))};ai.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=Un(e,function(r,a){return a.parent&&(r[a.parent.id]=a.parent),r},{}),W(i,function(r){var a=r.children;if(a){var c=t._getChildrenContainer(r);W(a.slice().reverse(),function(l){var u=n.getGraphics(l);vb(u.parentNode,c)})}})};ai.prototype.drawShape=function(e,t){var n=this._eventBus;return n.fire("render.shape",{gfx:e,element:t})};ai.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};ai.prototype.drawConnection=function(e,t){var n=this._eventBus;return n.fire("render.connection",{gfx:e,element:t})};ai.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};ai.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),Gn(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?Se(n,"display","none"):Se(n,"display","block")}};ai.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Dt(t.parentNode)};function vb(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const wA={__depends__:[ZR],__init__:["canvas"],canvas:["type",qe],elementRegistry:["type",oi],elementFactory:["type",Lr],eventBus:["type",Wn],graphicsFactory:["type",ai]};function bA(e){var t=new Qw(e);return t.init(),t}function SA(e){e=e||{};var t={config:["value",e]},n=[t,wA].concat(e.modules||[]);return bA(n)}function Qs(e,t){this.injector=t=t||SA(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}Qs.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Qs.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function vg(){}vg.prototype.get=function(e){return this.$model.properties.get(this,e)};vg.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function gb(e,t){this.model=e,this.properties=t}gb.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(vg.prototype);W(e.properties,function(c){!c.isMany&&c.default!==void 0&&(i[c.name]=c.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function a(c){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),W(c,Dn(function(l,u){this.set(u,l)},this))}return a.prototype=i,a.hasType=i.$instanceOf=this.model.hasType,n.defineModel(a,t),n.defineDescriptor(a,e),a};var CA={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},yb={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function gg(e,t){var n=yb[e];return n?n(t):t}function Cv(e){return!!CA[e]}function _b(e){return!!yb[e]}function Sn(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function si(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}si.prototype.build=function(){return zi(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};si.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};si.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,a=this.propertiesByName,c=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var l=r.indexOf(e);if(l===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(l,1),this.addProperty(t,n?void 0:l,c),a[i.name]=a[i.localName]=t};si.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),a=Sn(r[0],i),c=Sn(r[1],a.prefix).name,l=this.propertiesByName[c];if(l)this.replaceProperty(l,e,n);else throw new Error("refined property <"+c+"> not found");delete e.redefines};si.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};si.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};si.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};si.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};si.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};si.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};si.prototype.hasProperty=function(e){return this.propertiesByName[e]};si.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(W(e.properties,Dn(function(a){a=J({},a,{name:a.ns.localName,inherited:t}),Object.defineProperty(a,"definedBy",{value:e});var c=a.replaces,l=a.redefines;c||l?this.redefineProperty(a,c||l,c):(a.isBody&&this.setBodyProperty(a),a.isId&&this.setIdProperty(a),this.addProperty(a))},this)),i.push(e),n[r]=e)};function Lo(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,W(e,Dn(this.registerPackage,this))}Lo.prototype.getPackage=function(e){return this.packageMap[e]};Lo.prototype.getPackages=function(){return this.packages};Lo.prototype.registerPackage=function(e){e=J({},e);var t=this.packageMap;qE(t,e,"prefix"),qE(t,e,"uri"),W(e.types,Dn(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};Lo.prototype.registerType=function(e,t){e=J({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:J(e.meta||{})});var n=Sn(e.name,t.prefix),i=n.name,r={};W(e.properties,Dn(function(a){var c=Sn(a.name,n.prefix),l=c.name;Cv(a.type)||(a.type=Sn(a.type,c.prefix).name),J(a,{ns:c,name:l}),r[l]=a},this)),J(e,{ns:n,name:i,propertiesByName:r}),W(e.extends,Dn(function(a){var c=Sn(a,n.prefix),l=this.typeMap[c.name];l.traits=l.traits||[],l.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};Lo.prototype.mapTypes=function(e,t,n){var i=Cv(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function a(u,f){var d=Sn(u,Cv(u)?"":e.prefix);r.mapTypes(d,t,f)}function c(u){return a(u,!0)}function l(u){return a(u,!1)}if(!i)throw new Error("unknown type <"+e.name+">");W(i.superClass,n?c:l),t(i,!n),W(i.traits,c)};Lo.prototype.getEffectiveDescriptor=function(e){var t=Sn(e),n=new si(t);this.mapTypes(t,function(r,a){n.addTrait(r,a)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};Lo.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function qE(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function ja(e){this.model=e}ja.prototype.set=function(e,t,n){if(!ri(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;TA(n)?i?delete e[r]:delete e.$attrs[Tv(t)]:i?r in e?e[r]=n:Eb(e,i,n):e.$attrs[Tv(t)]=n};ja.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[Tv(t)];var i=n.name;return!e[i]&&n.isMany&&Eb(e,n,[]),e[i]};ja.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=J({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};ja.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};ja.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};ja.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const a=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw a;typeof console<"u"&&console.warn(a)}return null};function TA(e){return typeof e>"u"}function Eb(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Tv(e){return e.replace(/^:/,"")}function xi(e,t={}){this.properties=new ja(this),this.factory=new gb(this,this.properties),this.registry=new Lo(e,this.properties),this.typeCache={},this.config=t}xi.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};xi.prototype.getType=function(e){var t=this.typeCache,n=ri(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};xi.prototype.createAny=function(e,t,n){var i=Sn(e),r={$type:e,$instanceOf:function(c){return c===this.$type},get:function(c){return this[c]},set:function(c,l){cR(this,[c],l)}},a={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,a),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),W(n,function(c,l){dn(c)&&c.value!==void 0?r[c.name]=c.value:r[l]=c}),r};xi.prototype.getPackage=function(e){return this.registry.getPackage(e)};xi.prototype.getPackages=function(){return this.registry.getPackages()};xi.prototype.getElementDescriptor=function(e){return e.$descriptor};xi.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};xi.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};xi.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var XE=String.fromCharCode,PA=Object.prototype.hasOwnProperty,RA=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,ll={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(ll).forEach(function(e){ll[e.toUpperCase()]=ll[e]});function AA(e,t,n,i){return i?PA.call(ll,i)?ll[i]:"&"+i+";":XE(t||parseInt(n,16))}function ba(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(RA,AA):e}var DA="http://www.w3.org/2001/XMLSchema-instance",kA="xsi",QE="xsi:type",ZE="non-whitespace outside of root node";function Is(e){return new Error(e)}function JE(e){return"missing namespace for prefix <"+e+">"}function Tp(e){return{get:e,enumerable:!0}}function MA(e){var t={},n;for(n in e)t[n]=e[n];return t}function Pv(e){return e+"$uri"}function NA(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Pv(i)]=n;return t}function e1(){return{line:0,column:0}}function IA(e){throw e}function xb(e){if(!this)return new xb(e);var t=e&&e.proxy,n,i,r,a,c=IA,l,u,f,d,m=e1,g=!1,_=!1,x=null,S=!1,C;function z(A){A instanceof Error||(A=Is(A)),x=A,c(A,m)}function D(A){l&&(A instanceof Error||(A=Is(A)),l(A,m))}this.on=function(A,j){if(typeof j!="function")throw Is("required args <name, cb>");switch(A){case"openTag":i=j;break;case"text":n=j;break;case"closeTag":r=j;break;case"error":c=j;break;case"warn":l=j;break;case"cdata":a=j;break;case"attention":d=j;break;case"question":f=j;break;case"comment":u=j;break;default:throw Is("unsupported event: "+A)}return this},this.ns=function(A){if(typeof A>"u"&&(A={}),typeof A!="object")throw Is("required args <nsMap={}>");var j={},G;for(G in A)j[G]=A[G];return j[DA]=kA,_=!0,C=j,this},this.parse=function(A){if(typeof A!="string")throw Is("required args <xml=string>");return x=null,M(A),m=e1,S=!1,x},this.stop=function(){S=!0};function M(A){var j=_?[]:null,G=_?NA(C):null,L,$=[],O=0,Y=!1,q=!1,ae=0,ce=0,Ae,nt,Me,Ee,me,N,E,w,T,H="",I=0,V;function ne(){if(V!==null)return V;var Q,Z,ee,le=_&&G.xmlns,pe=_&&g?[]:null,ve=I,se=H,ue=se.length,je,ze,Ce,dt,Ie,Xe={},it={},mt,we,Oe;e:for(;ve<ue;ve++)if(mt=!1,we=se.charCodeAt(ve),!(we===32||we<14&&we>8)){for((we<65||we>122||we>90&&we<97)&&we!==95&&we!==58&&(D("illegal first char attribute name"),mt=!0),Oe=ve+1;Oe<ue;Oe++)if(we=se.charCodeAt(Oe),!(we>96&&we<123||we>64&&we<91||we>47&&we<59||we===46||we===45||we===95)){if(we===32||we<14&&we>8){D("missing attribute value"),ve=Oe;continue e}if(we===61)break;D("illegal attribute name char"),mt=!0}if(Ie=se.substring(ve,Oe),Ie==="xmlns:xmlns"&&(D("illegal declaration of xmlns"),mt=!0),we=se.charCodeAt(Oe+1),we===34)Oe=se.indexOf('"',ve=Oe+2),Oe===-1&&(Oe=se.indexOf("'",ve),Oe!==-1&&(D("attribute value quote missmatch"),mt=!0));else if(we===39)Oe=se.indexOf("'",ve=Oe+2),Oe===-1&&(Oe=se.indexOf('"',ve),Oe!==-1&&(D("attribute value quote missmatch"),mt=!0));else for(D("missing attribute value quotes"),mt=!0,Oe=Oe+1;Oe<ue&&(we=se.charCodeAt(Oe+1),!(we===32||we<14&&we>8));Oe++);for(Oe===-1&&(D("missing closing quotes"),Oe=ue,mt=!0),mt||(Ce=se.substring(ve,Oe)),ve=Oe;Oe+1<ue&&(we=se.charCodeAt(Oe+1),!(we===32||we<14&&we>8));Oe++)ve===Oe&&(D("illegal character after attribute end"),mt=!0);if(ve=Oe+1,mt)continue e;if(Ie in it){D("attribute <"+Ie+"> already defined");continue}if(it[Ie]=!0,!_){Xe[Ie]=Ce;continue}if(g){if(ze=Ie==="xmlns"?"xmlns":Ie.charCodeAt(0)===120&&Ie.substr(0,6)==="xmlns:"?Ie.substr(6):null,ze!==null){if(Q=ba(Ce),Z=Pv(ze),dt=C[Q],!dt){if(ze==="xmlns"||Z in G&&G[Z]!==Q)do dt="ns"+O++;while(typeof G[dt]<"u");else dt=ze;C[Q]=dt}G[ze]!==dt&&(je||(G=MA(G),je=!0),G[ze]=dt,ze==="xmlns"&&(G[Pv(dt)]=Q,le=dt),G[Z]=Q),Xe[Ie]=Ce;continue}pe.push(Ie,Ce);continue}if(we=Ie.indexOf(":"),we===-1){Xe[Ie]=Ce;continue}if(!(ee=G[Ie.substring(0,we)])){D(JE(Ie.substring(0,we)));continue}Ie=le===ee?Ie.substr(we+1):ee+Ie.substr(we),Ie===QE&&(we=Ce.indexOf(":"),we!==-1?(ee=Ce.substring(0,we),ee=G[ee]||ee,Ce=ee+Ce.substring(we)):Ce=le+":"+Ce),Xe[Ie]=Ce}if(g)for(ve=0,ue=pe.length;ve<ue;ve++){if(Ie=pe[ve++],Ce=pe[ve],we=Ie.indexOf(":"),we!==-1){if(!(ee=G[Ie.substring(0,we)])){D(JE(Ie.substring(0,we)));continue}Ie=le===ee?Ie.substr(we+1):ee+Ie.substr(we),Ie===QE&&(we=Ce.indexOf(":"),we!==-1?(ee=Ce.substring(0,we),ee=G[ee]||ee,Ce=ee+Ce.substring(we)):Ce=le+":"+Ce)}Xe[Ie]=Ce}return V=Xe}function B(){for(var Q=/(\r\n|\r|\n)/g,Z=0,ee=0,le=0,pe=ce,ve,se;ae>=le&&(ve=Q.exec(A),!(!ve||(pe=ve[0].length+ve.index,pe>ae)));)Z+=1,le=pe;return ae==-1?(ee=pe,se=A.substring(ce)):ce===0?se=A.substring(ce,ae):(ee=ae-le,se=ce==-1?A.substring(ae):A.substring(ae,ce+1)),{data:se,line:Z,column:ee}}for(m=B,t&&(T=Object.create({},{name:Tp(function(){return E}),originalName:Tp(function(){return w}),attrs:Tp(ne),ns:Tp(function(){return G})}));ce!==-1;){if(A.charCodeAt(ce)===60?ae=ce:ae=A.indexOf("<",ce),ae===-1){if($.length)return z("unexpected end of file");if(ce===0)return z("missing start tag");ce<A.length&&A.substring(ce).trim()&&D(ZE);return}if(ce!==ae){if($.length){if(n&&(n(A.substring(ce,ae),ba,m),S))return}else if(A.substring(ce,ae).trim()&&(D(ZE),S))return}if(Ee=A.charCodeAt(ae+1),Ee===33){if(Me=A.charCodeAt(ae+2),Me===91&&A.substr(ae+3,6)==="CDATA["){if(ce=A.indexOf("]]>",ae),ce===-1)return z("unclosed cdata");if(a&&(a(A.substring(ae+9,ce),m),S))return;ce+=3;continue}if(Me===45&&A.charCodeAt(ae+3)===45){if(ce=A.indexOf("-->",ae),ce===-1)return z("unclosed comment");if(u&&(u(A.substring(ae+4,ce),ba,m),S))return;ce+=3;continue}}if(Ee===63){if(ce=A.indexOf("?>",ae),ce===-1)return z("unclosed question");if(f&&(f(A.substring(ae,ce+2),m),S))return;ce+=2;continue}for(Ae=ae+1;;Ae++){if(me=A.charCodeAt(Ae),isNaN(me))return ce=-1,z("unclosed tag");if(me===34)Me=A.indexOf('"',Ae+1),Ae=Me!==-1?Me:Ae;else if(me===39)Me=A.indexOf("'",Ae+1),Ae=Me!==-1?Me:Ae;else if(me===62){ce=Ae;break}}if(Ee===33){if(d&&(d(A.substring(ae,ce+1),ba,m),S))return;ce+=1;continue}if(V={},Ee===47){if(Y=!1,q=!0,!$.length)return z("missing open tag");if(Ae=E=$.pop(),Me=ae+2+Ae.length,A.substring(ae+2,Me)!==Ae)return z("closing tag mismatch");for(;Me<ce;Me++)if(Ee=A.charCodeAt(Me),!(Ee===32||Ee>8&&Ee<14))return z("close tag")}else{if(A.charCodeAt(ce-1)===47?(Ae=E=A.substring(ae+1,ce-1),Y=!0,q=!0):(Ae=E=A.substring(ae+1,ce),Y=!0,q=!1),!(Ee>96&&Ee<123||Ee>64&&Ee<91||Ee===95||Ee===58))return z("illegal first char nodeName");for(Me=1,nt=Ae.length;Me<nt;Me++)if(Ee=Ae.charCodeAt(Me),!(Ee>96&&Ee<123||Ee>64&&Ee<91||Ee>47&&Ee<59||Ee===45||Ee===95||Ee==46)){if(Ee===32||Ee<14&&Ee>8){E=Ae.substring(0,Me),V=null;break}return z("invalid nodeName")}q||$.push(E)}if(_){if(L=G,Y&&(q||j.push(L),V===null&&(g=Ae.indexOf("xmlns",Me)!==-1)&&(I=Me,H=Ae,ne(),g=!1)),w=E,Ee=E.indexOf(":"),Ee!==-1){if(N=G[E.substring(0,Ee)],!N)return z("missing namespace on <"+w+">");E=E.substr(Ee+1)}else N=G.xmlns;N&&(E=N+":"+E)}if(Y&&(I=Me,H=Ae,i&&(t?i(T,ba,q,m):i(E,ne,ba,q,m),S)))return;if(q){if(r&&(r(t?T:E,ba,Y,m),S))return;_&&(Y?G=L:G=j.pop())}ce+=1}}}function wb(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var OA={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},zf="xsi:type";function bb(e){return e.xml&&e.xml.serialize}function Sb(e){return bb(e)===zf}function LA(e){return bb(e)==="property"}function BA(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Cb(e,t){return wb(t)?e.prefix+":"+BA(e.localName):e.name}function $A(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function FA(e,t){var n=Sn(e),i=t.getPackage(n.prefix);return $A(n,i)}function Mo(e){return new Error(e)}function Ar(e){return e.$descriptor}function jA(e){J(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw Mo("expected element");var n=this.elementsById,i=Ar(t),r=i.idProperty,a;if(r&&(a=t.get(r.name),a)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(n[a])throw Mo("duplicate ID <"+a+">");n[a]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Nl(){}Nl.prototype.handleEnd=function(){};Nl.prototype.handleText=function(){};Nl.prototype.handleNode=function(){};function yg(){}yg.prototype=Object.create(Nl.prototype);yg.prototype.handleNode=function(){return this};function Zs(){}Zs.prototype=Object.create(Nl.prototype);Zs.prototype.handleText=function(e){this.body=(this.body||"")+e};function Il(e,t){this.property=e,this.context=t}Il.prototype=Object.create(Zs.prototype);Il.prototype.handleNode=function(e){if(this.element)throw Mo("expected no sub nodes");return this.element=this.createReference(e),this};Il.prototype.handleEnd=function(){this.element.id=this.body};Il.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function _g(e,t){this.element=t,this.propertyDesc=e}_g.prototype=Object.create(Zs.prototype);_g.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=gg(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function Hf(){}Hf.prototype=Object.create(Zs.prototype);Hf.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function Cn(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}Cn.prototype=Object.create(Hf.prototype);Cn.prototype.addReference=function(e){this.context.addReference(e)};Cn.prototype.handleText=function(e){var t=this.element,n=Ar(t),i=n.bodyProperty;if(!i)throw Mo("unexpected body text <"+e+">");Zs.prototype.handleText.call(this,e)};Cn.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Ar(t),i=n.bodyProperty;i&&e!==void 0&&(e=gg(i.type,e),t.set(i.name,e))};Cn.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=Ar(n),r=this.context,a=new n({}),c=this.model,l;return W(t,function(u,f){var d=i.propertiesByName[f],m;d&&d.isReference?d.isMany?(m=u.split(" "),W(m,function(g){r.addReference({element:a,property:d.ns.name,id:g})})):r.addReference({element:a,property:d.ns.name,id:u}):(d?u=gg(d.type,u):f!=="xmlns"&&(l=Sn(f,i.ns.prefix),c.getPackage(l.prefix)&&r.addWarning({message:"unknown attribute <"+f+">",element:a,property:f,value:u})),a.set(f,u))}),a};Cn.prototype.getPropertyForNode=function(e){var t=e.name,n=Sn(t),i=this.type,r=this.model,a=Ar(i),c=n.name,l=a.propertiesByName[c],u,f;if(l&&!l.isAttr)return Sb(l)&&(u=e.attributes[zf],u)?(u=FA(u,r),f=r.getType(u),J({},l,{effectiveType:Ar(f).name})):l;var d=r.getPackage(n.prefix);if(d){if(u=Cb(n,d),f=r.getType(u),l=at(a.properties,function(m){return!m.isVirtual&&!m.isReference&&!m.isAttribute&&f.hasType(m.type)}),l)return J({},l,{effectiveType:Ar(f).name})}else if(l=at(a.properties,function(m){return!m.isReference&&!m.isAttribute&&m.type==="Element"}),l)return l;throw Mo("unrecognized element <"+n.name+">")};Cn.prototype.toString=function(){return"ElementDescriptor["+Ar(this.type).name+"]"};Cn.prototype.valueHandler=function(e,t){return new _g(e,t)};Cn.prototype.referenceHandler=function(e){return new Il(e,this.context)};Cn.prototype.handler=function(e){return e==="Element"?new Vs(this.model,e,this.context):new Cn(this.model,e,this.context)};Cn.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,_b(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var a=r.element;return a!==void 0&&(t.isMany?i.get(t.name).push(a):i.set(t.name,a),t.isReference?(J(a,{element:i}),this.context.addReference(a)):a.$parent=i),r};function Eg(e,t,n){Cn.call(this,e,t,n)}Eg.prototype=Object.create(Cn.prototype);Eg.prototype.createElement=function(e){var t=e.name,n=Sn(t),i=this.model,r=this.type,a=i.getPackage(n.prefix),c=a&&Cb(n,a)||t;if(!r.hasType(c))throw Mo("unexpected element <"+e.originalName+">");return Cn.prototype.createElement.call(this,e)};function Vs(e,t,n){this.model=e,this.context=n}Vs.prototype=Object.create(Hf.prototype);Vs.prototype.createElement=function(e){var t=e.name,n=Sn(t),i=n.prefix,r=e.ns[i+"$uri"],a=e.attributes;return this.model.createAny(t,r,a)};Vs.prototype.handleChild=function(e){var t=new Vs(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};Vs.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function xg(e){e instanceof xi&&(e={model:e}),J(this,{lax:!1},e)}xg.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof Cn?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,a=this.lax,c=new jA(J({},t,{rootHandler:i})),l=new xb({proxy:!0}),u=zA();i.context=c,u.push(i);function f(j,G,L){var $=G(),O=$.line,Y=$.column,q=$.data;q.charAt(0)==="<"&&q.indexOf(" ")!==-1&&(q=q.slice(0,q.indexOf(" "))+">");var ae="unparsable content "+(q?q+" ":"")+`detected
	line: `+O+`
	column: `+Y+`
	nested error: `+j.message;if(L)return c.addWarning({message:ae,error:j}),!0;throw Mo(ae)}function d(j,G){return f(j,G,!0)}function m(){var j=c.elementsById,G=c.references,L,$;for(L=0;$=G[L];L++){var O=$.element,Y=j[$.id],q=Ar(O).propertiesByName[$.property];if(Y||c.addWarning({message:"unresolved reference <"+$.id+">",element:$.element,property:$.property,value:$.id}),q.isMany){var ae=O.get(q.name),ce=ae.indexOf($);ce===-1&&(ce=ae.length),Y?ae[ce]=Y:ae.splice(ce,1)}else O.set(q.name,Y)}}function g(){u.pop().handleEnd()}var _=/^<\?xml /i,x=/ encoding="([^"]+)"/i,S=/^utf-8$/i;function C(j){if(_.test(j)){var G=x.exec(j),L=G&&G[1];!L||S.test(L)||c.addWarning({message:"unsupported document encoding <"+L+">, falling back to UTF-8"})}}function z(j,G){var L=u.peek();try{u.push(L.handleNode(j))}catch($){f($,G,a)&&u.push(new yg)}}function D(j,G){try{u.peek().handleText(j)}catch(L){d(L,G)}}function M(j,G){j.trim()&&D(j,G)}var A=r.getPackages().reduce(function(j,G){return j[G.uri]=G.prefix,j},{"http://www.w3.org/XML/1998/namespace":"xml"});return l.ns(A).on("openTag",function(j,G,L,$){var O=j.attrs||{},Y=Object.keys(O).reduce(function(ae,ce){var Ae=G(O[ce]);return ae[ce]=Ae,ae},{}),q={name:j.name,originalName:j.originalName,attributes:Y,ns:j.ns};z(q,$)}).on("question",C).on("closeTag",g).on("cdata",D).on("text",function(j,G,L){M(G(j),L)}).on("error",f).on("warn",d),new Promise(function(j,G){var L;try{l.parse(e),m()}catch(ae){L=ae}var $=i.element;!L&&!$&&(L=Mo("failed to parse document as <"+i.type.$descriptor.name+">"));var O=c.warnings,Y=c.references,q=c.elementsById;return L?(L.warnings=O,G(L)):j({rootElement:$,elementsById:q,references:Y,warnings:O})})};xg.prototype.handler=function(e){return new Eg(this.model,e)};function zA(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var HA=`<?xml version="1.0" encoding="UTF-8"?>
`,VA=/<|>|'|"|&|\n\r|\n/g,Tb=/<|>|&/g;function GA(e){var t={},n={},i={},r=[],a=[];this.byUri=function(c){return n[c]||e&&e.byUri(c)},this.add=function(c,l){n[c.uri]=c,l?r.push(c):a.push(c),this.mapPrefix(c.prefix,c.uri)},this.uriByPrefix=function(c){return t[c||"xmlns"]},this.mapPrefix=function(c,l){t[c||"xmlns"]=l},this.getNSKey=function(c){return c.prefix!==void 0?c.uri+"|"+c.prefix:c.uri},this.logUsed=function(c){var l=c.uri,u=this.getNSKey(c);i[u]=this.byUri(l),e&&e.logUsed(c)},this.getUsed=function(c){function l(d){var m=u.getNSKey(d);return i[m]}var u=this,f=[].concat(r,a);return f.filter(l)}}function UA(e){return e.charAt(0).toLowerCase()+e.slice(1)}function WA(e,t){return wb(t)?UA(e):e}function Pb(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Rb(e){return ri(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function YA(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function KA(e,t){return t.isGeneric?J({localName:t.ns.localName},e):J({localName:WA(t.ns.localName,t.$pkg)},e)}function qA(e,t){return J({localName:t.ns.localName},e)}function XA(e){var t=e.$descriptor;return Ze(t.properties,function(n){var i=n.name;if(n.isVirtual||!ir(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var QA={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},ZA={"<":"lt",">":"gt","&":"amp"};function Ab(e,t,n){return e=ri(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function JA(e){return Ab(e,VA,QA)}function e3(e){return Ab(e,Tb,ZA)}function t3(e){return Ze(e,function(t){return t.isAttr})}function n3(e){return Ze(e,function(t){return!t.isAttr})}function wg(e){this.tagName=e}wg.prototype.build=function(e){return this.element=e,this};wg.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Oa(){}Oa.prototype.serializeValue=Oa.prototype.serializeTo=function(e){e.append(this.escape?e3(this.value):this.value)};Oa.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Tb)!==-1&&(this.escape=!0),this};function bg(e){this.tagName=e}Pb(bg,Oa);bg.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function St(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}St.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,a=t.isGeneric;return a?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),a||(r=XA(e),this.parseAttributes(t3(r)),this.parseContainments(n3(r))),this.parseGenericAttributes(e,i),this};St.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return KA(t,e)};St.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return qA(t,e)};St.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};St.prototype.nsAttributeName=function(e){var t;if(ri(e)?t=Sn(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:J({localName:t.localName},n)};St.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return W(e,function(r,a){var c;a==="$body"?n.push(new Oa().build({type:"String"},r)):a==="$children"?W(r,function(l){n.push(new St(t).build(l))}):a.indexOf("$")!==0&&(c=t.parseNsAttribute(e,a,r),c&&i.push({name:a,value:r}))}),i};St.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=Sn(t),a;if(r.prefix==="xmlns"&&(a={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(a={uri:n}),!a)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(a,!0,!0);else{var c=this.logNamespaceUsed(a,!0);this.getNamespaces().logUsed(c)}};St.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return W(i,function(a,c){var l=n.parseNsAttribute(e,c,a);l&&r.push(l)}),r};St.prototype.parseGenericAttributes=function(e,t){var n=this;W(t,function(i){if(i.name!==zf)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};St.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;W(e,function(r){var a=i.get(r.name),c=r.isReference,l=r.isMany;if(l||(a=[a]),r.isBody)n.push(new Oa().build(r,a[0]));else if(_b(r.type))W(a,function(d){n.push(new bg(t.addTagName(t.nsPropertyTagName(r))).build(r,d))});else if(c)W(a,function(d){n.push(new wg(t.addTagName(t.nsPropertyTagName(r))).build(d))});else{var u=Sb(r),f=LA(r);W(a,function(d){var m;u?m=new Vf(t,r):f?m=new St(t,r):m=new St(t),n.push(m.build(d))})}})};St.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new GA(i):t=i),t};St.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,a=e.prefix,c=i.byUri(r);return(!c||n)&&i.add(e,t),i.mapPrefix(a,r),e};St.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),a=e.prefix,c=e.uri,l,u,f;if(!a&&!c)return{localName:e.localName};if(f=OA[a]||i&&(i.getPackage(a)||{}).uri,c=c||f||r.uriByPrefix(a),!c)throw new Error("no namespace uri given for prefix <"+a+">");if(e=r.byUri(c),!e){for(l=a,u=1;r.uriByPrefix(l);)l=a+"_"+u++;e=this.logNamespace({prefix:l,uri:c},f===c)}return a&&r.mapPrefix(a,c),e};St.prototype.parseAttributes=function(e){var t=this,n=this.element;W(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var a=[];W(r,function(c){a.push(c.id)}),r=a.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};St.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Rb(e)};St.prototype.addAttribute=function(e,t){var n=this.attrs;ri(t)&&(t=JA(t));var i=jw(n,function(a){return a.name.localName===e.localName&&a.name.uri===e.uri&&a.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};St.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=YA(n).concat(t)),W(t,function(i){e.append(" ").append(Rb(i.name)).append('="').append(i.value).append('"')})};St.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Oa;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),W(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function Vf(e,t){St.call(this,e,t)}Pb(Vf,St);Vf.prototype.parseNsAttributes=function(e){var t=St.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),a=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(zf),(i.prefix?i.prefix+":":"")+a+n.ns.localName),t};Vf.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function i3(){this.value="",this.write=function(e){this.value+=e}}function r3(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function o3(e){e=J({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new i3,a=new r3(r,e.format);if(e.preamble&&a.append(HA),new St().build(n).serializeTo(a),!i)return r.value}return{toXML:t}}function Gf(e,t){xi.call(this,e,t)}Gf.prototype=Object.create(xi.prototype);Gf.prototype.fromXML=function(e,t,n){ri(t)||(n=t,t="bpmn:Definitions");var i=new xg(J({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};Gf.prototype.toXML=function(e,t){var n=new o3(t);return new Promise(function(i,r){try{var a=n.toXML(e);return i({xml:a})}catch(c){return r(c)}})};var a3="BPMN20",s3="http://www.omg.org/spec/BPMN/20100524/MODEL",c3="bpmn",l3=[],u3=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],p3=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],f3={tagAlias:"lowerCase",typePrefix:"t"},d3={name:a3,uri:s3,prefix:c3,associations:l3,types:u3,enumerations:p3,xml:f3},h3="BPMNDI",m3="http://www.omg.org/spec/BPMN/20100524/DI",v3="bpmndi",g3=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],y3=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],_3=[],E3={name:h3,uri:m3,prefix:v3,types:g3,enumerations:y3,associations:_3},x3="DC",w3="http://www.omg.org/spec/DD/20100524/DC",b3="dc",S3=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],C3=[],T3={name:x3,uri:w3,prefix:b3,types:S3,associations:C3},P3="DI",R3="http://www.omg.org/spec/DD/20100524/DI",A3="di",D3=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],k3=[],M3={tagAlias:"lowerCase"},N3={name:P3,uri:R3,prefix:A3,types:D3,associations:k3,xml:M3},I3="bpmn.io colors for BPMN",O3="http://bpmn.io/schema/bpmn/biocolor/1.0",L3="bioc",B3=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],$3=[],F3=[],j3={name:I3,uri:O3,prefix:L3,types:B3,enumerations:$3,associations:F3},z3="BPMN in Color",H3="http://www.omg.org/spec/BPMN/non-normative/color/1.0",V3="color",G3=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],U3=[],W3=[],Y3={name:z3,uri:H3,prefix:V3,types:G3,enumerations:U3,associations:W3},K3={bpmn:d3,bpmndi:E3,dc:T3,di:N3,bioc:j3,color:Y3};function q3(e,t){var n=J({},K3,e);return new Gf(n,t)}function fn(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}function Js(e){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var t=arguments.length;if(t>=1&&sn(arguments[t-1])){var n=arguments[t-1];console.warn(new Error("Passing callbacks to "+e.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var i=Array.prototype.slice.call(arguments,0,-1);e.apply(this,i).then(function(r){var a=Object.keys(r)[0];return n(null,r[a])},function(r){return n(r,r.warnings)})}else return e.apply(this,arguments)}}var X3="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Db(e){ir(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(X3)}})}function An(e,t){return e.$instanceOf(t)}function Q3(e){return at(e.rootElements,function(t){return An(t,"bpmn:Process")||An(t,"bpmn:Collaboration")})}function Z3(e,t){var n={},i=[],r={};function a(I,V){return function(ne){I(ne,V)}}function c(I){n[I.id]=I}function l(I){return n[I.id]}function u(I,V){var ne=I.gfx;if(ne)throw new Error(t("already rendered {element}",{element:fn(I)}));return e.element(I,r[I.id],V)}function f(I,V){return e.root(I,r[I.id],V)}function d(I,V){try{var ne=r[I.id]&&u(I,V);return c(I),ne}catch(B){m(B.message,{element:I,error:B}),console.error(t("failed to import {element}",{element:fn(I)})),console.error(B)}}function m(I,V){e.error(I,V)}function g(I){var V=I.bpmnElement;V?r[V.id]?m(t("multiple DI elements defined for {element}",{element:fn(V)}),{element:V}):(r[V.id]=I,Db(V)):m(t("no bpmnElement referenced in {element}",{element:fn(I)}),{element:I})}function _(I){x(I.plane)}function x(I){g(I),W(I.planeElement,S)}function S(I){g(I)}function C(I,V){var ne=I.diagrams;if(V&&ne.indexOf(V)===-1)throw new Error(t("diagram not part of bpmn:Definitions"));if(!V&&ne&&ne.length&&(V=ne[0]),!V)throw new Error(t("no diagram to display"));r={},_(V);var B=V.plane;if(!B)throw new Error(t("no plane for {element}",{element:fn(V)}));var Q=B.bpmnElement;if(!Q)if(Q=Q3(I),Q)m(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:fn(B),rootElement:fn(Q)})),B.bpmnElement=Q,g(B);else throw new Error(t("no process or collaboration to display"));var Z=f(Q,B);if(An(Q,"bpmn:Process")||An(Q,"bpmn:SubProcess"))D(Q,Z);else if(An(Q,"bpmn:Collaboration"))T(Q,Z),M(I.rootElements,Z);else throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:fn(B),rootElement:fn(Q)}));z()}function z(){for(var I;i.length;)I=i.shift(),I()}function D(I,V){N(I,V),q(I.ioSpecification,V),Y(I.artifacts,V),c(I)}function M(I,V){var ne=Ze(I,function(B){return!l(B)&&An(B,"bpmn:Process")&&B.laneSets});ne.forEach(a(D,V))}function A(I,V){d(I,V)}function j(I,V){W(I,a(A,V))}function G(I,V){d(I,V)}function L(I,V){d(I,V)}function $(I,V){d(I,V)}function O(I,V){d(I,V)}function Y(I,V){W(I,function(ne){An(ne,"bpmn:Association")?i.push(function(){O(ne,V)}):O(ne,V)})}function q(I,V){I&&(W(I.dataInputs,a(L,V)),W(I.dataOutputs,a($,V)))}function ae(I,V){N(I,V),Y(I.artifacts,V)}function ce(I,V){var ne=d(I,V);An(I,"bpmn:SubProcess")&&ae(I,ne||V),An(I,"bpmn:Activity")&&q(I.ioSpecification,V),i.push(function(){W(I.dataInputAssociations,a(G,V)),W(I.dataOutputAssociations,a(G,V))})}function Ae(I,V){d(I,V)}function nt(I,V){d(I,V)}function Me(I,V){i.push(function(){var ne=d(I,V);I.childLaneSet&&Ee(I.childLaneSet,ne||V),H(I)})}function Ee(I,V){W(I.lanes,a(Me,V))}function me(I,V){W(I,a(Ee,V))}function N(I,V){E(I.flowElements,V),I.laneSets&&me(I.laneSets,V)}function E(I,V){W(I,function(ne){An(ne,"bpmn:SequenceFlow")?i.push(function(){Ae(ne,V)}):An(ne,"bpmn:BoundaryEvent")?i.unshift(function(){ce(ne,V)}):An(ne,"bpmn:FlowNode")?ce(ne,V):An(ne,"bpmn:DataObject")||(An(ne,"bpmn:DataStoreReference")||An(ne,"bpmn:DataObjectReference")?nt(ne,V):m(t("unrecognized flowElement {element} in context {context}",{element:fn(ne),context:V?fn(V.businessObject):"null"}),{element:ne,context:V}))})}function w(I,V){var ne=d(I,V),B=I.processRef;B&&D(B,ne||V)}function T(I,V){W(I.participants,a(w,V)),Y(I.artifacts,V),i.push(function(){j(I.messageFlows,V)})}function H(I){W(I.flowNodeRef,function(V){var ne=V.get("lanes");ne&&ne.push(I)})}return{handleDeferred:z,handleDefinitions:C,handleSubProcess:ae,registerDi:g}}function b(e,t){var n=xe(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function tt(e,t){return sr(t,function(n){return b(e,n)})}function xe(e){return e&&e.businessObject||e}function ct(e){return e&&e.di}function J3(e,t,n){var i,r,a,c,l,u=[];function f(d,m){var g={root:function(C,z){return i.add(C,z)},element:function(C,z,D){return i.add(C,z,D)},error:function(C,z){u.push({message:C,context:z})}},_=new Z3(g,a);m=m||d.diagrams&&d.diagrams[0];var x=eD(d,m);if(!x)throw new Error(a("no diagram to display"));W(x,function(C){_.handleDefinitions(d,C)});var S=m.plane.bpmnElement.id;c.setRootElement(c.findRoot(S+"_plane")||c.findRoot(S))}return new Promise(function(d,m){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),a=e.get("translate"),c=e.get("canvas"),r.fire("import.render.start",{definitions:t}),f(t,n),r.fire("import.render.complete",{error:l,warnings:u}),d({warnings:u})}catch(g){return g.warnings=u,m(g)}})}function eD(e,t){if(t){var n=t.plane.bpmnElement,i=n;!b(n,"bpmn:Process")&&!b(n,"bpmn:Collaboration")&&(i=tD(n));var r;b(i,"bpmn:Collaboration")?r=i:r=at(e.rootElements,function(f){if(b(f,"bpmn:Collaboration"))return at(f.participants,function(d){return d.processRef===i})});var a=[i];r&&(a=Zt(r.participants,function(f){return f.processRef}),a.push(r));var c=kb(a),l=[t],u=[n];return W(e.diagrams,function(f){var d=f.plane.bpmnElement;c.indexOf(d)!==-1&&u.indexOf(d)===-1&&(l.push(f),u.push(d))}),l}}function kb(e){var t=[];return W(e,function(n){n&&(t.push(n),t=t.concat(kb(n.flowElements)))}),t}function tD(e){for(var t=e;t;){if(b(t,"bpmn:Process"))return t;t=t.$parent}}var nD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',Mb=nD,Nb={verticalAlign:"middle"},Ib={color:"#404040"},iD={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},rD={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},oD={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},aD='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+Mb+'</a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',nr;function sD(){nr=et(aD),an(nr,iD),an(ft("svg",nr),Nb),an(ft(".backdrop",nr),rD),an(ft(".notice",nr),oD),an(ft(".link",nr),Ib,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function cD(){nr||(sD(),Vn.bind(nr,".backdrop","click",function(e){document.body.removeChild(nr)})),document.body.appendChild(nr)}function Ct(e){e=J({},uD,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),fD(this._container),this._init(this._container,this._moddle,e)}Te(Ct,Qs);Ct.prototype.importXML=Js(async function(t,n){const i=this;function r(c){const l=i.get("eventBus").createEvent(c);return Object.defineProperty(l,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:c.warnings,references:c.references,elementsById:c.elementsById}}}),l}let a=[];try{t=this._emit("import.parse.start",{xml:t})||t;let c;try{c=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(g){throw this._emit("import.parse.complete",{error:g}),g}let l=c.rootElement;const u=c.references,f=c.warnings,d=c.elementsById;a=a.concat(f),l=this._emit("import.parse.complete",r({error:null,definitions:l,elementsById:d,references:u,warnings:a}))||l;const m=await this.importDefinitions(l,n);return a=a.concat(m.warnings),this._emit("import.done",{error:null,warnings:a}),{warnings:a}}catch(c){let l=c;throw a=a.concat(l.warnings||[]),tf(l,a),l=lD(l),this._emit("import.done",{error:l,warnings:l.warnings}),l}});Ct.prototype.importDefinitions=Js(async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}});Ct.prototype.open=Js(async function(t){const n=this._definitions;let i=t;if(!n){const a=new Error("no XML imported");throw tf(a,[]),a}if(typeof t=="string"&&(i=pD(n,t),!i)){const a=new Error("BPMNDiagram <"+t+"> not found");throw tf(a,[]),a}try{this.clear()}catch(a){throw tf(a,[]),a}const{warnings:r}=await J3(this,n,i);return{warnings:r}});Ct.prototype.saveXML=Js(async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(c){i=c}const a=i?{error:i}:{xml:r};if(this._emit("saveXML.done",a),i)throw i;return a});Ct.prototype.saveSVG=Js(async function(t={}){this._emit("saveSVG.start");let n,i;try{const r=this.get("canvas"),a=r.getActiveLayer(),c=ft("defs",r._svg),l=jE(a),u=c?"<defs>"+jE(c)+"</defs>":"",f=a.getBBox();n=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+f.width+'" height="'+f.height+'" viewBox="'+f.x+" "+f.y+" "+f.width+" "+f.height+'" version="1.1">'+u+l+"</svg>"}catch(r){i=r}if(this._emit("saveSVG.done",{error:i,svg:n}),i)throw i;return{svg:n}});Ct.prototype._setDefinitions=function(e){this._definitions=e};Ct.prototype.getModules=function(e){return this._modules};Ct.prototype.clear=function(){this.getDefinitions()&&Qs.prototype.clear.call(this)};Ct.prototype.destroy=function(){Qs.prototype.destroy.call(this),ar(this._container)};Ct.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};Ct.prototype.off=function(e,t){this.get("eventBus").off(e,t)};Ct.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=ft(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};Ct.prototype.getDefinitions=function(){return this._definitions};Ct.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};Ct.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],a=[{bpmnjs:["value",this],moddle:["value",t]}],c=[].concat(a,i,r),l=J(Nr(n,["additionalModules"]),{canvas:J({},n.canvas,{container:e}),modules:c});Qs.call(this,l),n&&n.container&&this.attachTo(n.container)};Ct.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};Ct.prototype._createContainer=function(e){const t=et('<div class="bjs-container"></div>');return an(t,{width:t1(e.width),height:t1(e.height),position:e.position}),t};Ct.prototype._createModdle=function(e){const t=J({},this._moddleExtensions,e.moddleExtensions);return new q3(t)};Ct.prototype._modules=[];function tf(e,t){return e.warnings=t,e}function lD(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const uD={width:"100%",height:"100%",position:"relative"};function t1(e){return e+(Ve(e)?"px":"")}function pD(e,t){return t&&at(e.diagrams,function(n){return n.id===t})||null}function fD(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+Mb+"</a>",i=et(n);an(ft("svg",i),Nb),an(i,Ib,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),ke.bind(i,"click",function(r){cD(),r.preventDefault()})}function Ol(e){Ct.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}Te(Ol,Ct);Ol.prototype._createModdle=function(e){var t=Ct.prototype._createModdle.call(this,e);return t.ids=new Fi([32,36,1]),t};Ol.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,r;i.clear();for(r in t)i.claim(r,t[r])};function ut(e,t){return b(e,"bpmn:CallActivity")?!1:b(e,"bpmn:SubProcess")?(t=t||ct(e),t&&b(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):b(e,"bpmn:Participant")?!!xe(e).processRef:!0}function dD(e){return e&&xe(e).isInterrupting!==!1}function ni(e){return e&&!!xe(e).triggeredByEvent}function Uf(e,t){var n=xe(e),i=!1;return n.eventDefinitions&&W(n.eventDefinitions,function(r){b(r,t)&&(i=!0)}),i}function hD(e){return Uf(e,"bpmn:ErrorEventDefinition")}function mD(e){return Uf(e,"bpmn:EscalationEventDefinition")}function vD(e){return Uf(e,"bpmn:CompensateEventDefinition")}function Ob(e){if(b(e,"bpmn:FlowElement")||b(e,"bpmn:Participant")||b(e,"bpmn:Lane")||b(e,"bpmn:SequenceFlow")||b(e,"bpmn:MessageFlow")||b(e,"bpmn:DataInput")||b(e,"bpmn:DataOutput"))return"name";if(b(e,"bpmn:TextAnnotation"))return"text";if(b(e,"bpmn:Group"))return"categoryValueRef"}function gD(e){var t=e.categoryValueRef;return t&&t.value||""}function Hi(e){var t=e.businessObject,n=Ob(t);if(n)return n==="categoryValueRef"?gD(t):t[n]||""}function yD(e,t,n){var i=e.businessObject,r=Ob(i);return r&&(r==="categoryValueRef"?i.categoryValueRef.value=t:i[r]=t),e}var rl="hsl(225, 10%, 15%)";function tr(e,t,n){function i(r,a){return Ba(a,function(c,l){return r[l]==c})}return sr(e.eventDefinitions,function(r){return r.$type===t&&i(e,n)})}function _D(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function ED(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function wn(e){return e.businessObject}function st(e,t){var n=ct(e);return n.get("color:background-color")||n.get("bioc:fill")||t||"white"}function be(e,t){var n=ct(e);return n.get("color:border-color")||n.get("bioc:stroke")||t||rl}function Xc(e,t,n){var i=ct(e),r=i.get("label");return r&&r.get("color:color")||t||be(e,n)}function xD(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return $a(r)}function wD(e,t){var n=e.x,i=e.y,r=e.width,a=e.height,c=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,a-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-a],["a",t,t,0,0,1,t,-t],["z"]];return $a(c)}function bD(e){var t=e.width,n=e.height,i=e.x,r=e.y,a=t/2,c=n/2,l=[["M",i+a,r],["l",a,c],["l",-a,c],["l",-a,-c],["z"]];return $a(l)}function SD(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return $a(a)}var CD=new Fi,nf=10,Um=3,Os=.95,TD=.35,PD=10;function za(e,t,n,i,r,a,c){Or.call(this,t,c);var l=e&&e.defaultFillColor,u=e&&e.defaultStrokeColor,f=e&&e.defaultLabelColor,d=CD.next(),m={};function g(N){return n.computeStyle(N,{strokeLinecap:"round",strokeLinejoin:"round",stroke:rl,strokeWidth:2,fill:"white"})}function _(N){return n.computeStyle(N,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:rl,strokeWidth:2})}function x(N,E){var{ref:w={x:0,y:0},scale:T=1,element:H}=E,I=Be("marker",{id:N,viewBox:"0 0 20 20",refX:w.x,refY:w.y,markerWidth:20*T,markerHeight:20*T,orient:"auto"});Ge(I,H);var V=ft("defs",r._svg);V||(V=Be("defs"),Ge(r._svg,V)),Ge(V,I),m[N]=I}function S(N){return N.replace(/[^0-9a-zA-z]+/g,"_")}function C(N,E,w){var T=N+"-"+S(E)+"-"+S(w)+"-"+d;return m[T]||z(T,N,E,w),"url(#"+T+")"}function z(N,E,w,T){if(E==="sequenceflow-end"){var H=Be("path",{d:"M 1 5 L 11 10 L 1 15 Z",...g({fill:T,stroke:T,strokeWidth:1})});x(N,{element:H,ref:{x:11,y:10},scale:.5})}if(E==="messageflow-start"){var I=Be("circle",{cx:6,cy:6,r:3.5,...g({fill:w,stroke:T,strokeWidth:1,strokeDasharray:[1e4,1]})});x(N,{element:I,ref:{x:6,y:6}})}if(E==="messageflow-end"){var V=Be("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...g({fill:w,stroke:T,strokeWidth:1,strokeDasharray:[1e4,1]})});x(N,{element:V,ref:{x:8.5,y:5}})}if(E==="association-start"){var ne=Be("path",{d:"M 11 5 L 1 10 L 11 15",..._({fill:"none",stroke:T,strokeWidth:1.5,strokeDasharray:[1e4,1]})});x(N,{element:ne,ref:{x:1,y:10},scale:.5})}if(E==="association-end"){var B=Be("path",{d:"M 1 5 L 11 10 L 1 15",..._({fill:"none",stroke:T,strokeWidth:1.5,strokeDasharray:[1e4,1]})});x(N,{element:B,ref:{x:11,y:10},scale:.5})}if(E==="conditional-flow-marker"){var Q=Be("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...g({fill:w,stroke:T})});x(N,{element:Q,ref:{x:-1,y:10},scale:.5})}if(E==="conditional-default-flow-marker"){var Z=Be("path",{d:"M 6 4 L 10 16",...g({stroke:T})});x(N,{element:Z,ref:{x:0,y:10},scale:.5})}}function D(N,E,w,T,H){dn(T)&&(H=T,T=0),T=T||0,H=g(H),H.fill==="none"&&delete H.fillOpacity;var I=E/2,V=w/2,ne=Be("circle",{cx:I,cy:V,r:Math.round((E+w)/4-T),...H});return Ge(N,ne),ne}function M(N,E,w,T,H,I){dn(H)&&(I=H,H=0),H=H||0,I=g(I);var V=Be("rect",{x:H,y:H,width:E-H*2,height:w-H*2,rx:T,ry:T,...I});return Ge(N,V),V}function A(N,E,w,T){var H=E/2,I=w/2,V=[{x:H,y:0},{x:E,y:I},{x:H,y:w},{x:0,y:I}],ne=V.map(function(Q){return Q.x+","+Q.y}).join(" ");T=g(T);var B=Be("polygon",{...T,points:ne});return Ge(N,B),B}function j(N,E,w,T){w=_(w);var H=Bf(E,w,T);return Ge(N,H),H}function G(N,E,w){return j(N,E,w,5)}function L(N,E,w){w=_(w);var T=Be("path",{...w,d:E});return Ge(N,T),T}function $(N,E,w,T){return L(E,w,J({"data-marker":N},T))}function O(N){return Me[N]}function Y(N){return function(E,w){return O(N)(E,w)}}function q(N,E){var w=wn(N),T=_D(w);return w.eventDefinitions&&w.eventDefinitions.length>1?w.parallelMultiple?O("bpmn:ParallelMultipleEventDefinition")(E,N,T):O("bpmn:MultipleEventDefinition")(E,N,T):tr(w,"bpmn:MessageEventDefinition")?O("bpmn:MessageEventDefinition")(E,N,T):tr(w,"bpmn:TimerEventDefinition")?O("bpmn:TimerEventDefinition")(E,N,T):tr(w,"bpmn:ConditionalEventDefinition")?O("bpmn:ConditionalEventDefinition")(E,N):tr(w,"bpmn:SignalEventDefinition")?O("bpmn:SignalEventDefinition")(E,N,T):tr(w,"bpmn:EscalationEventDefinition")?O("bpmn:EscalationEventDefinition")(E,N,T):tr(w,"bpmn:LinkEventDefinition")?O("bpmn:LinkEventDefinition")(E,N,T):tr(w,"bpmn:ErrorEventDefinition")?O("bpmn:ErrorEventDefinition")(E,N,T):tr(w,"bpmn:CancelEventDefinition")?O("bpmn:CancelEventDefinition")(E,N,T):tr(w,"bpmn:CompensateEventDefinition")?O("bpmn:CompensateEventDefinition")(E,N,T):tr(w,"bpmn:TerminateEventDefinition")?O("bpmn:TerminateEventDefinition")(E,N,T):null}function ae(N,E,w){w=J({size:{width:100}},w);var T=a.createText(E||"",w);return ot(T).add("djs-label"),Ge(N,T),T}function ce(N,E,w){var T=wn(E);return ae(N,T.name,{box:E,align:w,padding:7,style:{fill:Xc(E,f,u)}})}function Ae(N,E){var w={width:90,height:30,x:E.width/2+E.x,y:E.height/2+E.y};return ae(N,Hi(E),{box:w,fitBox:!0,style:J({},a.getExternalStyle(),{fill:Xc(E,f,u)})})}function nt(N,E,w){var T=ae(N,E,{box:{height:30,width:w.height},align:"center-middle",style:{fill:Xc(w,f,u)}}),H=-1*w.height;Sv(T,0,-H,270)}var Me=this.handlers={"bpmn:Event":function(N,E,w){return"fillOpacity"in w||(w.fillOpacity=Os),D(N,E.width,E.height,w)},"bpmn:StartEvent":function(N,E){var w={fill:st(E,l),stroke:be(E,u)},T=wn(E);T.isInterrupting||(w={strokeDasharray:"6",fill:st(E,l),stroke:be(E,u)});var H=O("bpmn:Event")(N,E,w);return q(E,N),H},"bpmn:MessageEventDefinition":function(N,E,w){var T=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:E.width,containerHeight:E.height,position:{mx:.235,my:.315}}),H=w?be(E,u):st(E,l),I=w?st(E,l):be(E,u),V=L(N,T,{strokeWidth:1,fill:H,stroke:I});return V},"bpmn:TimerEventDefinition":function(N,E){var w=D(N,E.width,E.height,.2*E.height,{strokeWidth:2,fill:st(E,l),stroke:be(E,u)}),T=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.5}});L(N,T,{strokeWidth:2,stroke:be(E,u)});for(var H=0;H<12;H++){var I=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.5}}),V=E.width/2,ne=E.height/2;L(N,I,{strokeWidth:1,transform:"rotate("+H*30+","+ne+","+V+")",stroke:be(E,u)})}return w},"bpmn:EscalationEventDefinition":function(N,E,w){var T=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.2}}),H=w?be(E,u):"none";return L(N,T,{strokeWidth:1,fill:H,stroke:be(E,u)})},"bpmn:ConditionalEventDefinition":function(N,E){var w=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.222}});return L(N,w,{strokeWidth:1,stroke:be(E,u)})},"bpmn:LinkEventDefinition":function(N,E,w){var T=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.57,my:.263}}),H=w?be(E,u):"none";return L(N,T,{strokeWidth:1,fill:H,stroke:be(E,u)})},"bpmn:ErrorEventDefinition":function(N,E,w){var T=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:E.width,containerHeight:E.height,position:{mx:.2,my:.722}}),H=w?be(E,u):"none";return L(N,T,{strokeWidth:1,fill:H,stroke:be(E,u)})},"bpmn:CancelEventDefinition":function(N,E,w){var T=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.638,my:-.055}}),H=w?be(E,u):"none",I=L(N,T,{strokeWidth:1,fill:H,stroke:be(E,u)});return mb(I,45),I},"bpmn:CompensateEventDefinition":function(N,E,w){var T=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.22,my:.5}}),H=w?be(E,u):"none";return L(N,T,{strokeWidth:1,fill:H,stroke:be(E,u)})},"bpmn:SignalEventDefinition":function(N,E,w){var T=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:E.width,containerHeight:E.height,position:{mx:.5,my:.2}}),H=w?be(E,u):"none";return L(N,T,{strokeWidth:1,fill:H,stroke:be(E,u)})},"bpmn:MultipleEventDefinition":function(N,E,w){var T=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:E.width,containerHeight:E.height,position:{mx:.222,my:.36}}),H=w?be(E,u):"none";return L(N,T,{strokeWidth:1,fill:H})},"bpmn:ParallelMultipleEventDefinition":function(N,E){var w=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:E.width,containerHeight:E.height,position:{mx:.458,my:.194}});return L(N,w,{strokeWidth:1,fill:be(E,u),stroke:be(E,u)})},"bpmn:EndEvent":function(N,E){var w=O("bpmn:Event")(N,E,{strokeWidth:4,fill:st(E,l),stroke:be(E,u)});return q(E,N),w},"bpmn:TerminateEventDefinition":function(N,E){var w=D(N,E.width,E.height,8,{strokeWidth:4,fill:be(E,u),stroke:be(E,u)});return w},"bpmn:IntermediateEvent":function(N,E){var w=O("bpmn:Event")(N,E,{strokeWidth:1.5,fill:st(E,l),stroke:be(E,u)});return D(N,E.width,E.height,Um,{strokeWidth:1.5,fill:st(E,"none"),stroke:be(E,u)}),q(E,N),w},"bpmn:IntermediateCatchEvent":Y("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":Y("bpmn:IntermediateEvent"),"bpmn:Activity":function(N,E,w){return w=w||{},"fillOpacity"in w||(w.fillOpacity=Os),M(N,E.width,E.height,nf,w)},"bpmn:Task":function(N,E){var w={fill:st(E,l),stroke:be(E,u)},T=O("bpmn:Activity")(N,E,w);return ce(N,E,"center-middle"),Ee(N,E),T},"bpmn:ServiceTask":function(N,E){var w=O("bpmn:Task")(N,E),T=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});L(N,T,{strokeWidth:1,fill:st(E,l),stroke:be(E,u)});var H=i.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}});L(N,H,{strokeWidth:0,fill:st(E,l)});var I=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return L(N,I,{strokeWidth:1,fill:st(E,l),stroke:be(E,u)}),w},"bpmn:UserTask":function(N,E){var w=O("bpmn:Task")(N,E),T=15,H=12,I=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:T,y:H}});L(N,I,{strokeWidth:.5,fill:st(E,l),stroke:be(E,u)});var V=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:T,y:H}});L(N,V,{strokeWidth:.5,fill:st(E,l),stroke:be(E,u)});var ne=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:T,y:H}});return L(N,ne,{strokeWidth:.5,fill:be(E,u),stroke:be(E,u)}),w},"bpmn:ManualTask":function(N,E){var w=O("bpmn:Task")(N,E),T=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return L(N,T,{strokeWidth:.5,fill:st(E,l),stroke:be(E,u)}),w},"bpmn:SendTask":function(N,E){var w=O("bpmn:Task")(N,E),T=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return L(N,T,{strokeWidth:1,fill:be(E,u),stroke:st(E,l)}),w},"bpmn:ReceiveTask":function(N,E){var w=wn(E),T=O("bpmn:Task")(N,E),H;return w.instantiate?(D(N,28,28,20*.22,{strokeWidth:1}),H=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):H=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),L(N,H,{strokeWidth:1,fill:st(E,l),stroke:be(E,u)}),T},"bpmn:ScriptTask":function(N,E){var w=O("bpmn:Task")(N,E),T=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return L(N,T,{strokeWidth:1,stroke:be(E,u)}),w},"bpmn:BusinessRuleTask":function(N,E){var w=O("bpmn:Task")(N,E),T=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),H=L(N,T);Se(H,{strokeWidth:1,fill:st(E,"#aaaaaa"),stroke:be(E,u)});var I=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),V=L(N,I);return Se(V,{strokeWidth:1,stroke:be(E,u)}),w},"bpmn:SubProcess":function(N,E,w){w={fill:st(E,l),stroke:be(E,u),...w};var T=O("bpmn:Activity")(N,E,w),H=ut(E);return ni(E)&&Se(T,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),ce(N,E,H?"center-top":"center-middle"),H?Ee(N,E):Ee(N,E,["SubProcessMarker"]),T},"bpmn:AdHocSubProcess":function(N,E){return O("bpmn:SubProcess")(N,E)},"bpmn:Transaction":function(N,E){var w=O("bpmn:SubProcess")(N,E,{strokeWidth:1.5}),T=n.style(["no-fill","no-events"],{stroke:be(E,u),strokeWidth:1.5});return M(N,E.width,E.height,nf-3,Um,T),w},"bpmn:CallActivity":function(N,E){return O("bpmn:SubProcess")(N,E,{strokeWidth:5})},"bpmn:Participant":function(N,E){var w=1.5,T={fillOpacity:Os,fill:st(E,l),stroke:be(E,u),strokeWidth:w},H=O("bpmn:Lane")(N,E,T),I=ut(E);if(I){j(N,[{x:30,y:0},{x:30,y:E.height}],{stroke:be(E,u),strokeWidth:w});var V=wn(E).name;nt(N,V,E)}else{var ne=wn(E).name;ae(N,ne,{box:E,align:"center-middle",style:{fill:Xc(E,f,u)}})}var B=!!wn(E).participantMultiplicity;return B&&O("ParticipantMultiplicityMarker")(N,E),H},"bpmn:Lane":function(N,E,w){var T=M(N,E.width,E.height,0,{fill:st(E,l),fillOpacity:TD,stroke:be(E,u),strokeWidth:1.5,...w}),H=wn(E);if(H.$type==="bpmn:Lane"){var I=H.name;nt(N,I,E)}return T},"bpmn:InclusiveGateway":function(N,E){var w=O("bpmn:Gateway")(N,E);return D(N,E.width,E.height,E.height*.24,{strokeWidth:2.5,fill:st(E,l),stroke:be(E,u)}),w},"bpmn:ExclusiveGateway":function(N,E){var w=O("bpmn:Gateway")(N,E),T=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:E.width,containerHeight:E.height,position:{mx:.32,my:.3}});return ct(E).isMarkerVisible&&L(N,T,{strokeWidth:1,fill:be(E,u),stroke:be(E,u)}),w},"bpmn:ComplexGateway":function(N,E){var w=O("bpmn:Gateway")(N,E),T=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:E.width,containerHeight:E.height,position:{mx:.46,my:.26}});return L(N,T,{strokeWidth:1,fill:be(E,u),stroke:be(E,u)}),w},"bpmn:ParallelGateway":function(N,E){var w=O("bpmn:Gateway")(N,E),T=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:E.width,containerHeight:E.height,position:{mx:.46,my:.2}});return L(N,T,{strokeWidth:1,fill:be(E,u),stroke:be(E,u)}),w},"bpmn:EventBasedGateway":function(N,E){var w=wn(E),T=O("bpmn:Gateway")(N,E);D(N,E.width,E.height,E.height*.2,{strokeWidth:1,fill:"none",stroke:be(E,u)});var H=w.eventGatewayType,I=!!w.instantiate;function V(){var B=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:E.width,containerHeight:E.height,position:{mx:.36,my:.44}});L(N,B,{strokeWidth:2,fill:st(E,"none"),stroke:be(E,u)})}if(H==="Parallel"){var ne=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:E.width,containerHeight:E.height,position:{mx:.474,my:.296}});L(N,ne,{strokeWidth:1,fill:"none"})}else H==="Exclusive"&&(I||D(N,E.width,E.height,E.height*.26,{strokeWidth:1,fill:"none",stroke:be(E,u)}),V());return T},"bpmn:Gateway":function(N,E){return A(N,E.width,E.height,{fill:st(E,l),fillOpacity:Os,stroke:be(E,u)})},"bpmn:SequenceFlow":function(N,E){var w=st(E,l),T=be(E,u),H=G(N,E.waypoints,{markerEnd:C("sequenceflow-end",w,T),stroke:be(E,u)}),I=wn(E),V;return E.source&&(V=E.source.businessObject,I.conditionExpression&&V.$instanceOf("bpmn:Activity")&&Se(H,{markerStart:C("conditional-flow-marker",w,T)}),V.default&&(V.$instanceOf("bpmn:Gateway")||V.$instanceOf("bpmn:Activity"))&&V.default===I&&Se(H,{markerStart:C("conditional-default-flow-marker",w,T)})),H},"bpmn:Association":function(N,E,w){var T=wn(E),H=st(E,l),I=be(E,u);return w={strokeDasharray:"0, 5",stroke:be(E,u),...w},(T.associationDirection==="One"||T.associationDirection==="Both")&&(w.markerEnd=C("association-end",H,I)),T.associationDirection==="Both"&&(w.markerStart=C("association-start",H,I)),G(N,E.waypoints,w)},"bpmn:DataInputAssociation":function(N,E){var w=st(E,l),T=be(E,u);return O("bpmn:Association")(N,E,{markerEnd:C("association-end",w,T)})},"bpmn:DataOutputAssociation":function(N,E){var w=st(E,l),T=be(E,u);return O("bpmn:Association")(N,E,{markerEnd:C("association-end",w,T)})},"bpmn:MessageFlow":function(N,E){var w=wn(E),T=ct(E),H=st(E,l),I=be(E,u),V=G(N,E.waypoints,{markerEnd:C("messageflow-end",H,I),markerStart:C("messageflow-start",H,I),strokeDasharray:"10, 11",strokeWidth:1.5,stroke:be(E,u)});if(w.messageRef){var ne=V.getPointAtLength(V.getTotalLength()/2),B=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:ne.x,y:ne.y}}),Q={strokeWidth:1};T.messageVisibleKind==="initiating"?(Q.fill="white",Q.stroke=rl):(Q.fill="#888",Q.stroke="white");var Z=L(N,B,Q),ee=w.messageRef.name,le=ae(N,ee,{align:"center-top",fitBox:!0,style:{fill:be(E,f)}}),pe=Z.getBBox(),ve=le.getBBox(),se=ne.x-ve.width/2,ue=ne.y+pe.height/2+PD;Sv(le,se,ue,0)}return V},"bpmn:DataObject":function(N,E){var w=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.474,my:.296}}),T=L(N,w,{fill:st(E,l),fillOpacity:Os,stroke:be(E,u)}),H=wn(E);return ED(H)&&me(N,E),T},"bpmn:DataObjectReference":Y("bpmn:DataObject"),"bpmn:DataInput":function(N,E){var w=i.getRawPath("DATA_ARROW"),T=O("bpmn:DataObject")(N,E);return L(N,w,{strokeWidth:1}),T},"bpmn:DataOutput":function(N,E){var w=i.getRawPath("DATA_ARROW"),T=O("bpmn:DataObject")(N,E);return L(N,w,{strokeWidth:1,fill:rl}),T},"bpmn:DataStoreReference":function(N,E){var w=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:0,my:.133}}),T=L(N,w,{strokeWidth:2,fill:st(E,l),fillOpacity:Os,stroke:be(E,u)});return T},"bpmn:BoundaryEvent":function(N,E){var w=wn(E),T=w.cancelActivity,H={strokeWidth:1.5,fill:st(E,l),stroke:be(E,u)};T||(H.strokeDasharray="6");var I={...H,fillOpacity:1},V={...H,fill:"none"},ne=O("bpmn:Event")(N,E,I);return D(N,E.width,E.height,Um,V),q(E,N),ne},"bpmn:Group":function(N,E){return M(N,E.width,E.height,nf,{stroke:be(E,u),strokeWidth:1.5,strokeDasharray:"10,6,0,6",fill:"none",pointerEvents:"none"})},label:function(N,E){return Ae(N,E)},"bpmn:TextAnnotation":function(N,E){var w=M(N,E.width,E.height,0,0,{fill:"none",stroke:"none"}),T=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:0,my:0}});L(N,T,{stroke:be(E,u)});var H=wn(E).text||"";return ae(N,H,{box:E,align:"left-top",padding:7,style:{fill:Xc(E,f,u)}}),w},ParticipantMultiplicityMarker:function(N,E){var w=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:E.width/2/E.width,my:(E.height-15)/E.height}});$("participant-multiplicity",N,w,{strokeWidth:2,fill:st(E,l),stroke:be(E,u)})},SubProcessMarker:function(N,E){var w=M(N,14,14,0,{strokeWidth:1,fill:st(E,l),stroke:be(E,u)});Gn(w,E.width/2-7.5,E.height-20);var T=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2-7.5)/E.width,my:(E.height-20)/E.height}});$("sub-process",N,T,{fill:st(E,l),stroke:be(E,u)})},ParallelMarker:function(N,E,w){var T=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2+w.parallel)/E.width,my:(E.height-20)/E.height}});$("parallel",N,T,{fill:st(E,l),stroke:be(E,u)})},SequentialMarker:function(N,E,w){var T=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2+w.seq)/E.width,my:(E.height-19)/E.height}});$("sequential",N,T,{fill:st(E,l),stroke:be(E,u)})},CompensationMarker:function(N,E,w){var T=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2+w.compensation)/E.width,my:(E.height-13)/E.height}});$("compensation",N,T,{strokeWidth:1,fill:st(E,l),stroke:be(E,u)})},LoopMarker:function(N,E,w){var T=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2+w.loop)/E.width,my:(E.height-7)/E.height}});$("loop",N,T,{strokeWidth:1.5,fill:st(E,l),stroke:be(E,u),strokeMiterlimit:.5})},AdhocMarker:function(N,E,w){var T=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:(E.width/2+w.adhoc)/E.width,my:(E.height-15)/E.height}});$("adhoc",N,T,{strokeWidth:1,fill:be(E,u),stroke:be(E,u)})}};function Ee(N,E,w){var T=wn(E),H=w&&w.indexOf("SubProcessMarker")!==-1,I;H?I={seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:I={seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},W(w,function(B){O(B)(N,E,I)}),T.isForCompensation&&O("CompensationMarker")(N,E,I),T.$type==="bpmn:AdHocSubProcess"&&O("AdhocMarker")(N,E,I);var V=T.loopCharacteristics,ne=V&&V.isSequential;V&&(ne===void 0&&O("LoopMarker")(N,E,I),ne===!1&&O("ParallelMarker")(N,E,I),ne===!0&&O("SequentialMarker")(N,E,I))}function me(N,E){var w=(E.height-18)/E.height,T=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:E.width,containerHeight:E.height,position:{mx:.33,my:w}});L(N,T,{strokeWidth:2})}this._drawPath=L,this._renderer=O}Te(za,Or);za.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];za.prototype.canRender=function(e){return b(e,"bpmn:BaseElement")};za.prototype.drawShape=function(e,t){var n=t.type,i=this._renderer(n);return i(e,t)};za.prototype.drawConnection=function(e,t){var n=t.type,i=this._renderer(n);return i(e,t)};za.prototype.getShapePath=function(e){return b(e,"bpmn:Event")?xD(e):b(e,"bpmn:Activity")?wD(e,nf):b(e,"bpmn:Gateway")?bD(e):SD(e)};var RD=0,AD={width:150,height:50};function DD(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function kD(e){return dn(e)?J({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function MD(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch{return{width:0,height:0}}}function ND(e,t,n){for(var i=e.shift(),r=i,a;;){if(a=MD(r,n),a.width=r?a.width:0,r===" "||r===""||a.width<Math.round(t)||r.length<2)return ID(e,r,i,a);r=LD(r,a.width,t)}}function ID(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var n1="";function OD(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],a=0;if(n.length>1)for(;i=n.shift();)if(i.length+a<t)r.push(i),a+=i.length;else{(i==="-"||i===n1)&&r.pop();break}var c=r[r.length-1];return c&&c===n1&&(r[r.length-1]="-"),r.join("")}function LD(e,t,n){var i=Math.max(e.length*(n/t),1),r=OD(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function BD(){var e=document.getElementById("helper-svg");return e||(e=Be("svg"),Se(e,{id:"helper-svg"}),an(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function Wf(e){this._config=J({},{size:AD,padding:RD,style:{},align:"center-top"},e||{})}Wf.prototype.createText=function(e,t){return this.layoutText(e,t).element};Wf.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};Wf.prototype.layoutText=function(e,t){var n=J({},this._config.size,t.box),i=J({},this._config.style,t.style),r=DD(t.align||this._config.align),a=kD(t.padding!==void 0?t.padding:this._config.padding),c=t.fitBox||!1,l=$D(i),u=e.split(/\u00AD?\r?\n/),f=[],d=n.width-a.left-a.right,m=Be("text");Se(m,{x:0,y:0}),Se(m,i);var g=BD();for(Ge(g,m);u.length;)f.push(ND(u,d,m));r.vertical==="middle"&&(a.top=a.bottom=0);var _=Un(f,function(D,M,A){return D+(l||M.height)},0)+a.top+a.bottom,x=Un(f,function(D,M,A){return M.width>D?M.width:D},0),S=a.top;r.vertical==="middle"&&(S+=(n.height-_)/2),S-=(l||f[0].height)/4;var C=Be("text");Se(C,i),W(f,function(D){var M;switch(S+=l||D.height,r.horizontal){case"left":M=a.left;break;case"right":M=(c?x:d)-a.right-D.width;break;default:M=Math.max(((c?x:d)-D.width)/2+a.left,0)}var A=Be("tspan");Se(A,{x:M,y:S}),A.textContent=D.text,Ge(C,A)}),Dt(m);var z={width:x,height:_};return{dimensions:z,element:C}};function $D(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var FD=12,jD=1.2,zD=30;function Lb(e){var t=J({fontFamily:"Arial, sans-serif",fontSize:FD,fontWeight:"normal",lineHeight:jD},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=J({},t,{fontSize:n},e&&e.externalStyle||{}),r=new Wf({style:t});this.getExternalLabelBounds=function(a,c){var l=r.getDimensions(c,{box:{width:90,height:30,x:a.width/2+a.x,y:a.height/2+a.y},style:i});return{x:Math.round(a.x+a.width/2-l.width/2),y:Math.round(a.y),width:Math.ceil(l.width),height:Math.ceil(l.height)}},this.getTextAnnotationBounds=function(a,c){var l=r.getDimensions(c,{box:a,style:t,align:"left-top",padding:5});return{x:a.x,y:a.y,width:a.width,height:Math.max(zD,Math.round(l.height))}},this.createText=function(a,c){return r.createText(a,c||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Lb.$inject=["config.textRenderer"];function HD(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,a;n.abspos?(r=n.abspos.x,a=n.abspos.y):(r=n.containerWidth*n.position.mx,a=n.containerHeight*n.position.my);var c={};if(n.position){for(var l=n.containerHeight/i.height*n.yScaleFactor,u=n.containerWidth/i.width*n.xScaleFactor,f=0;f<i.heightElements.length;f++)c["y"+f]=i.heightElements[f]*l;for(var d=0;d<i.widthElements.length;d++)c["x"+d]=i.widthElements[d]*u}var m=WD(i.d,{mx:r,my:a,e:c});return m}}var VD=/\{([^{}]+)\}/g,GD=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function UD(e,t,n){var i=n;return t.replace(GD,function(r,a,c,l,u){a=a||l,i&&(a in i&&(i=i[a]),typeof i=="function"&&u&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function WD(e,t){return String(e).replace(VD,function(n,i){return UD(n,i,t)})}const YD={__init__:["bpmnRenderer"],bpmnRenderer:["type",za],textRenderer:["type",Lb],pathMap:["type",HD]};function KD(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const Yf={translate:["value",KD]};var gl={width:90,height:20},i1=15;function La(e){return b(e,"bpmn:Event")||b(e,"bpmn:Gateway")||b(e,"bpmn:DataStoreReference")||b(e,"bpmn:DataObjectReference")||b(e,"bpmn:DataInput")||b(e,"bpmn:DataOutput")||b(e,"bpmn:SequenceFlow")||b(e,"bpmn:MessageFlow")||b(e,"bpmn:Group")}function Kf(e){return Jt(e.label)}function qD(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=XD(e),a=Math.atan((i.y-n.y)/(i.x-n.x)),c=r.x,l=r.y;return Math.abs(a)<Math.PI/2?l-=i1:c+=i1,{x:c,y:l}}function XD(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function qf(e){return e.waypoints?qD(e.waypoints):b(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+gl.height/2}:{x:e.x+e.width/2,y:e.y+e.height+gl.height/2}}function QD(e,t){var n,i,r,a=e.label;return a&&a.bounds?(r=a.bounds,i={width:Math.max(gl.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=qf(t),i=gl),J({x:n.x-i.width/2,y:n.y-i.height/2},i)}function Jt(e){return e&&!!e.labelTarget}function rf(e,t,n){return J({id:e.id,type:e.$type,businessObject:e,di:t},n)}function ZD(e,t,n){var i=e.waypoint;return!i||i.length<2?[Ke(t),Ke(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function Bb(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:fn(n),referenced:fn(t),property:i}))}function Br(e,t,n,i,r,a){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=a}Br.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"];Br.prototype.add=function(e,t,n){var i,r=this._translate,a,c;if(b(t,"bpmndi:BPMNPlane")){var l=b(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(rf(e,t,l)),this._canvas.addRootElement(i)}else if(b(t,"bpmndi:BPMNShape")){var u=!ut(e,t),f=ek(e);a=n&&(n.hidden||n.collapsed);var d=t.bounds;i=this._elementFactory.createShape(rf(e,t,{collapsed:u,hidden:a,x:Math.round(d.x),y:Math.round(d.y),width:Math.round(d.width),height:Math.round(d.height),isFrame:f})),b(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),b(e,"bpmn:Lane")&&(c=0),b(e,"bpmn:DataStoreReference")&&(JD(n,Ke(d))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,c)}else if(b(t,"bpmndi:BPMNEdge")){var m=this._getSource(e),g=this._getTarget(e);a=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(rf(e,t,{hidden:a,source:m,target:g,waypoints:ZD(t,m,g)})),b(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,c)}else throw new Error(r("unknown di {di} for element {semantic}",{di:fn(t),semantic:fn(e)}));return La(e)&&Hi(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};Br.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:fn(e)}));var r=this._elementRegistry.get(i.id),a=r&&r.attachers;if(!r)throw Bb(n,e,i,"attachedToRef");t.host=r,a||(r.attachers=a=[]),a.indexOf(t)===-1&&a.push(t)};Br.prototype.addLabel=function(e,t,n){var i,r,a;return i=QD(t,n),r=Hi(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),a=this._elementFactory.createLabel(rf(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Hi(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(a,n.parent)};Br.prototype._getEnd=function(e,t){var n,i,r=e.$type,a=this._translate;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?Bb(a,e,i,t+"Ref"):new Error(a("{semantic}#{side} Ref not specified",{semantic:fn(e),side:t}))};Br.prototype._getSource=function(e){return this._getEnd(e,"source")};Br.prototype._getTarget=function(e){return this._getEnd(e,"target")};Br.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function JD(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function ek(e){return b(e,"bpmn:Group")}const tk={__depends__:[Yf],bpmnImporter:["type",Br]},nk={__depends__:[YD,tk]};function r1(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function ec(e){return e.originalEvent||e.srcEvent}function Wm(e,t){r1(e),r1(ec(e))}function No(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function ik(){return/mac/i.test(navigator.platform)}function $b(e,t){return(ec(e)||e).button===t}function Bo(e){return $b(e,0)}function rk(e){return $b(e,1)}function Gs(e){var t=ec(e)||e;return Bo(e)?ik()?t.metaKey:t.ctrlKey:!1}function Fb(e){var t=ec(e)||e;return Bo(e)&&t.shiftKey}function ok(e){return!0}function Pp(e){return Bo(e)||rk(e)}var o1=500;function jb(e,t,n){var i=this;function r($,O,Y){if(!l($,O)){var q,ae,ce;Y?ae=t.getGraphics(Y):(q=O.delegateTarget||O.target,q&&(ae=q,Y=t.get(ae))),!(!ae||!Y)&&(ce=e.fire($,{element:Y,gfx:ae,originalEvent:O}),ce===!1&&(O.stopPropagation(),O.preventDefault()))}}var a={};function c($){return a[$]}function l($,O){var Y=f[$]||Bo;return!Y(O)}var u={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},f={"element.contextmenu":ok,"element.mousedown":Pp,"element.mouseup":Pp,"element.click":Pp,"element.dblclick":Pp};function d($,O,Y){var q=u[$];if(!q)throw new Error("unmapped DOM event name <"+$+">");return r(q,O,Y)}var m="svg, .djs-element";function g($,O,Y,q){var ae=a[Y]=function(ce){r(Y,ce)};q&&(f[Y]=q),ae.$delegate=Vn.bind($,m,O,ae)}function _($,O,Y){var q=c(Y);q&&Vn.unbind($,O,q.$delegate)}function x($){W(u,function(O,Y){g($,Y,O)})}function S($){W(u,function(O,Y){_($,Y,O)})}e.on("canvas.destroy",function($){S($.svg)}),e.on("canvas.init",function($){x($.svg)}),e.on(["shape.added","connection.added"],function($){var O=$.element,Y=$.gfx;e.fire("interactionEvents.createHit",{element:O,gfx:Y})}),e.on(["shape.changed","connection.changed"],o1,function($){var O=$.element,Y=$.gfx;e.fire("interactionEvents.updateHit",{element:O,gfx:Y})}),e.on("interactionEvents.createHit",o1,function($){var O=$.element,Y=$.gfx;i.createDefaultHit(O,Y)}),e.on("interactionEvents.updateHit",function($){var O=$.element,Y=$.gfx;i.updateDefaultHit(O,Y)});var C=j("djs-hit djs-hit-stroke"),z=j("djs-hit djs-hit-click-stroke"),D=j("djs-hit djs-hit-all"),M=j("djs-hit djs-hit-no-move"),A={all:D,"click-stroke":z,stroke:C,"no-move":M};function j($,O){return O=J({stroke:"white",strokeWidth:15},O||{}),n.cls($,["no-fill","no-border"],O)}function G($,O){var Y=A[O];if(!Y)throw new Error("invalid hit type <"+O+">");return Se($,Y),$}function L($,O){Ge($,O)}this.removeHits=function($){var O=Mr(".djs-hit",$);W(O,Dt)},this.createDefaultHit=function($,O){var Y=$.waypoints,q=$.isFrame,ae;return Y?this.createWaypointsHit(O,Y):(ae=q?"stroke":"all",this.createBoxHit(O,ae,{width:$.width,height:$.height}))},this.createWaypointsHit=function($,O){var Y=Bf(O);return G(Y,"stroke"),L($,Y),Y},this.createBoxHit=function($,O,Y){Y=J({x:0,y:0},Y);var q=Be("rect");return G(q,O),Se(q,Y),L($,q),q},this.updateDefaultHit=function($,O){var Y=ft(".djs-hit",O);if(Y)return $.waypoints?Zw(Y,$.waypoints):Se(Y,{width:$.width,height:$.height}),Y},this.fire=r,this.triggerMouseEvent=d,this.mouseHandler=c,this.registerEvent=g,this.unregisterEvent=_}jb.$inject=["eventBus","elementRegistry","styles"];const Ll={__init__:["interactionEvents"],interactionEvents:["type",jb]};var ak=500;function Xf(e,t){this.offset=6;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(a,c){var l=Be("rect");return Se(l,J({x:10,y:10,rx:4,width:100,height:100},n)),Ge(a,l),l}e.on(["shape.added","shape.changed"],ak,function(a){var c=a.element,l=a.gfx,u=ft(".djs-outline",l);u||(u=r(l)),i.updateShapeOutline(u,c)}),e.on(["connection.added","connection.changed"],function(a){var c=a.element,l=a.gfx,u=ft(".djs-outline",l);u||(u=r(l)),i.updateConnectionOutline(u,c)})}Xf.prototype.updateShapeOutline=function(e,t){Se(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};Xf.prototype.updateConnectionOutline=function(e,t){var n=Ot(t);Se(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};Xf.$inject=["eventBus","styles","elementRegistry"];const zb={__init__:["outline"],outline:["type",Xf]};function tc(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}tc.$inject=["eventBus","canvas"];tc.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};tc.prototype.get=function(){return this._selectedElements};tc.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};tc.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();Je(e)||(e=e?[e]:[]);var r=this._canvas,a=r.getRootElement();e=e.filter(function(c){var l=r.findRoot(c);return a===l}),t?W(e,function(c){n.indexOf(c)===-1&&n.push(c)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var a1="hover",s1="selected",Rp=6;function Sg(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(c,l){e.addMarker(c,l)}function a(c,l){e.removeMarker(c,l)}t.on("element.hover",function(c){r(c.element,a1)}),t.on("element.out",function(c){a(c.element,a1)}),t.on("selection.changed",function(c){function l(m){a(m,s1)}function u(m){r(m,s1)}var f=c.oldSelection,d=c.newSelection;W(f,function(m){d.indexOf(m)===-1&&l(m)}),W(d,function(m){f.indexOf(m)===-1&&u(m)}),i._updateSelectionOutline(d)}),t.on("element.changed",function(c){n.isSelected(c.element)&&i._updateSelectionOutline(n.get())})}Sg.$inject=["canvas","eventBus","selection"];Sg.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");pg(t);var n=e.length>1,i=this._canvas.getContainer();if(ot(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=sk(Ot(e)),a=Be("rect");Se(a,J({rx:3},r)),ot(a).add("djs-selection-outline"),Ge(t,a)}};function sk(e){return{x:e.x-Rp,y:e.y-Rp,width:e.width+Rp*2,height:e.height+Rp*2}}function Hb(e,t,n,i){e.on("create.end",500,function(r){var a=r.context,c=a.canExecute,l=a.elements,u=a.hints||{},f=u.autoSelect;if(c){if(f===!1)return;Je(f)?t.select(f):t.select(l.filter(ck))}}),e.on("connect.end",500,function(r){var a=r.context,c=a.connection;c&&t.select(c)}),e.on("shape.move.end",500,function(r){var a=r.previousSelection||[],c=i.get(r.context.shape.id),l=at(a,function(u){return c.id===u.id});l||t.select(c)}),e.on("element.click",function(r){if(Bo(r)){var a=r.element;a===n.getRootElement()&&(a=null);var c=t.isSelected(a),l=t.get().length>1,u=Gs(r)||Fb(r);if(c&&l)return u?t.deselect(a):t.select(a);c?t.deselect(a):t.select(a,u)}})}Hb.$inject=["eventBus","selection","canvas","elementRegistry"];function ck(e){return!e.hidden}const cr={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Ll,zb],selection:["type",tc],selectionVisuals:["type",Sg],selectionBehavior:["type",Hb]};function Cg(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Cg.prototype.next=function(){return this._prefix+ ++this._counter};var lk=new Cg("ov"),uk=500;function en(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=lk,this._overlayDefaults=J({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=pk(n.getContainer()),this._init()}en.$inject=["config.overlays","eventBus","canvas","elementRegistry"];en.prototype.get=function(e){if(ri(e)&&(e={id:e}),ri(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Ze(t.overlays,Bi({type:e.type})):t.overlays.slice():[]}else return e.type?Ze(this._overlays,Bi({type:e.type})):e.id?this._overlays[e.id]:null};en.prototype.add=function(e,t,n){if(dn(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=J({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};en.prototype.remove=function(e){var t=this.get(e)||[];Je(t)||(t=[t]);var n=this;W(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(ar(i.html),ar(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var a=r.overlays.indexOf(i);a!==-1&&r.overlays.splice(a,1)}})};en.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};en.prototype.show=function(){Qf(this._overlayRoot)};en.prototype.hide=function(){Qf(this._overlayRoot,!1)};en.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Pl(this._overlayRoot)};en.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var a=Ot(t);i=a.x,r=a.y}Vb(n,i,r),bn(e.html,"data-container-id",t.id)};en.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,a=t.top;if(t.right!==void 0){var c;i.waypoints?c=Ot(i).width:c=i.width,r=t.right*-1+c}if(t.bottom!==void 0){var l;i.waypoints?l=Ot(i).height:l=i.height,a=t.bottom*-1+l}Vb(n,r||0,a||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};en.prototype._createOverlayContainer=function(e){var t=et('<div class="djs-overlays" />');an(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};en.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";Gb(this._overlayRoot,n)};en.prototype._getOverlayContainer=function(e,t){var n=at(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};en.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,a;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),ri(i)&&(i=et(i)),a=this._getOverlayContainer(n),r=et('<div class="djs-overlay" data-overlay-id="'+t+'">'),an(r,{position:"absolute"}),r.appendChild(i),e.type&&He(r).add("djs-overlay-"+e.type);var c=this._canvas.findRoot(n),l=this._canvas.getRootElement();Qf(r,c===l),e.htmlContainer=r,a.overlays.push(e),a.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};en.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,a=n&&n.maxZoom,c=e.htmlContainer,l=this._canvas.getRootElement(),u=!0;(i!==l||n&&(Vt(r)&&r>t.scale||Vt(a)&&a<t.scale))&&(u=!1),Qf(c,u),this._updateOverlayScale(e,t)};en.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,a=e.htmlContainer,c,l="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Vt(i)&&t.scale<i&&(c=(1/t.scale||1)*i),Vt(r)&&t.scale>r&&(c=(1/t.scale||1)*r)),Vt(c)&&(l="scale("+c+","+c+")"),Gb(a,l)};en.prototype._updateOverlaysVisibilty=function(e){var t=this;W(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};en.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,a=t.get({element:r});W(a,function(u){t.remove(u.id)});var c=t._getOverlayContainer(r);if(c){ar(c.html);var l=t._overlayContainers.indexOf(c);l!==-1&&t._overlayContainers.splice(l,1)}}),e.on("element.changed",uk,function(i){var r=i.element,a=t._getOverlayContainer(r,!0);a&&(W(a.overlays,function(c){t._updateOverlay(c)}),t._updateOverlayContainer(a))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&He(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function pk(e){var t=et('<div class="djs-overlay-container" />');return an(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function Vb(e,t,n){an(e,{left:t+"px",top:n+"px"})}function Qf(e,t){e.style.display=t===!1?"none":""}function Gb(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const Zf={__init__:["overlays"],overlays:["type",en]};function Ub(e,t,n,i){e.on("element.changed",function(r){var a=r.element;(a.parent||a===t.getRootElement())&&(r.gfx=n.getGraphics(a)),r.gfx&&e.fire(eb(a)+".changed",r)}),e.on("elements.changed",function(r){var a=r.elements;a.forEach(function(c){e.fire("element.changed",{element:c})}),i.updateContainments(a)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}Ub.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const Tg={__init__:["changeSupport"],changeSupport:["type",Ub]};var fk=1e3;function _e(e){this._eventBus=e}_e.$inject=["eventBus"];function dk(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}_e.prototype.on=function(e,t,n,i,r,a){if((sn(t)||Ve(t))&&(a=r,r=i,i=n,n=t,t=null),sn(n)&&(a=r,r=i,i=n,n=fk),dn(r)&&(a=r,r=!1),!sn(i))throw new Error("handlerFn must be a function");Je(e)||(e=[e]);var c=this._eventBus;W(e,function(l){var u=["commandStack",l,t].filter(function(f){return f}).join(".");c.on(u,n,r?dk(i,a):i,a)})};var hk=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];W(hk,function(e){_e.prototype[e]=function(t,n,i,r,a){(sn(t)||Ve(t))&&(a=r,r=i,i=n,n=t,t=null),this.on(t,e,n,i,r,a)}});function Pg(e,t){t.invoke(_e,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}Te(Pg,_e);Pg.$inject=["canvas","injector"];const mk={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",Pg]};function yl(e){return CSS.escape(e)}var vk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function xf(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return vk[t]})}var Wb="_plane";function c1(e){var t=e.id;return gk(t)}function Tr(e){var t=e.id;return b(e,"bpmn:SubProcess")?Yb(t):t}function Sa(e){return Yb(e)}function Ym(e){var t=ct(e);return b(t,"bpmndi:BPMNPlane")}function Yb(e){return e+Wb}function gk(e){return e.replace(new RegExp(Wb+"$"),"")}var yk="bjs-breadcrumbs-shown";function Kb(e,t,n,i){var r=et('<ul class="bjs-breadcrumbs"></ul>'),a=i.getContainer(),c=He(a);a.appendChild(r);var l=[];e.on("element.changed",function(f){var d=f.element,m=xe(d),g=at(l,function(_){return _===m});g&&u()});function u(f){f&&(l=_k(f));var d=l.map(function(g){var _=xf(g.name||g.id),x=et('<li><span class="bjs-crumb"><a title="'+_+'">'+_+"</a></span></li>"),S=i.findRoot(Tr(g))||i.findRoot(g.id);if(!S&&b(g,"bpmn:Process")){var C=t.find(function(z){var D=xe(z);return D&&D.processRef&&D.processRef===g});S=i.findRoot(C.id)}return x.addEventListener("click",function(){i.setRootElement(S)}),x});r.innerHTML="";var m=d.length>1;c.toggle(yk,m),d.forEach(function(g){r.appendChild(g)})}e.on("root.set",function(f){u(f.element)})}Kb.$inject=["eventBus","elementRegistry","overlays","canvas"];function _k(e){for(var t=xe(e),n=[],i=t;i;i=i.$parent)(b(i,"bpmn:SubProcess")||b(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function qb(e,t){var n=null,i=new Ek;e.on("root.set",function(r){var a=r.element,c=t.viewbox(),l=i.get(a);if(i.set(n,{x:c.x,y:c.y,zoom:c.scale}),n=a,!(b(a,"bpmn:Collaboration")&&!l)){l=l||{x:0,y:0,zoom:1};var u=(c.x-l.x)*c.scale,f=(c.y-l.y)*c.scale;(u!==0||f!==0)&&t.scroll({dx:u,dy:f}),l.zoom!==c.scale&&t.zoom(l.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}qb.$inject=["eventBus","canvas"];function Ek(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var l1={x:180,y:160};function Ha(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n.handleImport(r.definitions)})}Ha.prototype.handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=[];e.diagrams.forEach(function(i){var r=t.createNewDiagrams(i.plane);Array.prototype.push.apply(n,r)}),n.forEach(function(i){t.movePlaneElementsToOrigin(i.plane)})}};Ha.prototype.createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(a){var c=a.bpmnElement;if(c){var l=c.$parent;b(c,"bpmn:SubProcess")&&!a.isExpanded&&n.push(c),wk(c,e)&&i.push({diElement:a,parent:l})}});var r=[];return n.forEach(function(a){if(!t._processToDiagramMap[a.id]){var c=t.createDiagram(a);t._processToDiagramMap[a.id]=c,r.push(c)}}),i.forEach(function(a){for(var c=a.diElement,l=a.parent;l&&n.indexOf(l)===-1;)l=l.$parent;if(l){var u=t._processToDiagramMap[l.id];t.moveToDiPlane(c,u.plane)}}),r};Ha.prototype.movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=xk(e),i={x:n.x-l1.x,y:n.y-l1.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(a){a.x=a.x-i.x,a.y=a.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};Ha.prototype.moveToDiPlane=function(e,t){var n=Xb(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};Ha.prototype.createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Ha.$inject=["eventBus","moddle"];function Xb(e){return b(e,"bpmndi:BPMNDiagram")?e:Xb(e.$parent)}function xk(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=Fe(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),Ff(t)}function wk(e,t){var n=e.$parent;return!(!b(n,"bpmn:SubProcess")||n===t.bpmnElement||tt(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Ap=250,bk='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',Sk="bjs-drilldown-empty";function $o(e,t,n,i){_e.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i;var r=this;this.executed("shape.toggleCollapse",Ap,function(a){var c=a.shape;r.canDrillDown(c)?r.addOverlay(c):r.removeOverlay(c)},!0),this.reverted("shape.toggleCollapse",Ap,function(a){var c=a.shape;r.canDrillDown(c)?r.addOverlay(c):r.removeOverlay(c)},!0),this.executed(["shape.create","shape.move","shape.delete"],Ap,function(a){var c=a.oldParent,l=a.newParent||a.parent,u=a.shape;r.canDrillDown(u)&&r.addOverlay(u),r.updateDrilldownOverlay(c),r.updateDrilldownOverlay(l),r.updateDrilldownOverlay(u)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Ap,function(a){var c=a.oldParent,l=a.newParent||a.parent,u=a.shape;r.canDrillDown(u)&&r.addOverlay(u),r.updateDrilldownOverlay(c),r.updateDrilldownOverlay(l),r.updateDrilldownOverlay(u)},!0),t.on("import.render.complete",function(){n.filter(function(a){return r.canDrillDown(a)}).map(function(a){r.addOverlay(a)})})}Te($o,_e);$o.prototype.updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this.updateOverlayVisibility(n)}};$o.prototype.canDrillDown=function(e){var t=this._canvas;return b(e,"bpmn:SubProcess")&&t.findRoot(Tr(e))};$o.prototype.updateOverlayVisibility=function(e){var t=this._overlays,n=e.businessObject,i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.flowElements&&n.flowElements.length;He(i.html).toggle(Sk,!r)}};$o.prototype.addOverlay=function(e){var t=this._canvas,n=this._overlays,i=n.get({element:e,type:"drilldown"});i.length&&this.removeOverlay(e);var r=et('<button class="bjs-drilldown">'+bk+"</button>");r.addEventListener("click",function(){t.setRootElement(t.findRoot(Tr(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:r}),this.updateOverlayVisibility(e)};$o.prototype.removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};$o.$inject=["canvas","eventBus","elementRegistry","overlays"];const Ck={__depends__:[Zf,Tg,mk],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",Kb],drilldownCentering:["type",qb],drilldownOverlayBehavior:["type",$o],subprocessCompatibility:["type",Ha]};function Fo(e){Ct.call(this,e)}Te(Fo,Ct);Fo.prototype._modules=[nk,Yf,cr,Zf,Ck];Fo.prototype._moddleExtensions={};var Tk=["c","C"],Pk=["v","V"],Rk=["y","Y"],Qb=["z","Z"];function Ak(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function ii(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function Qt(e,t){return e=Je(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function Rg(e){return e.shiftKey}function Dk(e){return ii(e)&&Qt(Tk,e)}function kk(e){return ii(e)&&Qt(Pk,e)}function Mk(e){return ii(e)&&!Rg(e)&&Qt(Qb,e)}function Nk(e){return ii(e)&&(Qt(Rk,e)||Qt(Qb,e)&&Rg(e))}var Jf="keyboard.keydown",Ik="keyboard.keyup",u1="input-handle-modified-keys",Ok=1e3;function cn(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}cn.$inject=["config.keyboard","eventBus"];cn.prototype._keydownHandler=function(e){this._keyHandler(e,Jf)};cn.prototype._keyupHandler=function(e){this._keyHandler(e,Ik)};cn.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||Jf,i),n&&e.preventDefault()}};cn.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:Lk(e.target)&&this._isModifiedKeyIgnored(e)};cn.prototype._isModifiedKeyIgnored=function(e){if(!ii(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};cn.prototype._getAllowedModifiers=function(e){var t=Ir(e,"["+u1+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(u1).split(",")};cn.prototype.bind=function(e){this.unbind(),this._node=e,ke.bind(e,"keydown",this._keydownHandler),ke.bind(e,"keyup",this._keyupHandler),this._fire("bind")};cn.prototype.getBinding=function(){return this._node};cn.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),ke.unbind(e,"keydown",this._keydownHandler),ke.unbind(e,"keyup",this._keyupHandler)),this._node=null};cn.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};cn.prototype.addListener=function(e,t,n){sn(e)&&(n=t,t=e,e=Ok),this._eventBus.on(n||Jf,e,t)};cn.prototype.removeListener=function(e,t){this._eventBus.off(t||Jf,e)};cn.prototype.hasModifier=Ak;cn.prototype.isCmd=ii;cn.prototype.isShift=Rg;cn.prototype.isKey=Qt;function Lk(e){return e&&(lg(e,"input, textarea")||e.contentEditable==="true")}var Bk=500;function $r(e,t){var n=this;e.on("editorActions.init",Bk,function(i){var r=i.editorActions;n.registerBindings(t,r)})}$r.$inject=["eventBus","keyboard"];$r.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(Mk(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(Nk(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(Dk(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(kk(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Qt(["+","Add","="],r)&&ii(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Qt(["-","Subtract"],r)&&ii(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(Qt("0",r)&&ii(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(Qt(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};const Ag={__init__:["keyboard","keyboardBindings"],keyboard:["type",cn],keyboardBindings:["type",$r]};var $k={moveSpeed:50,moveSpeedAccelerated:200};function Zb(e,t,n){var i=this;this._config=J({},$k,e||{}),t.addListener(r);function r(a){var c=a.keyEvent,l=i._config;if(t.isCmd(c)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],c)){var u=t.isShift(c)?l.moveSpeedAccelerated:l.moveSpeed,f;switch(c.key){case"ArrowLeft":case"Left":f="left";break;case"ArrowUp":case"Up":f="up";break;case"ArrowRight":case"Right":f="right";break;case"ArrowDown":case"Down":f="down";break}return i.moveCanvas({speed:u,direction:f}),!0}}this.moveCanvas=function(a){var c=0,l=0,u=a.speed,f=u/Math.min(Math.sqrt(n.viewbox().scale),1);switch(a.direction){case"left":c=f;break;case"up":l=f;break;case"right":c=-f;break;case"down":l=-f;break}n.scroll({dx:c,dy:l})}}Zb.$inject=["config.keyboardMove","keyboard","canvas"];const Jb={__depends__:[Ag],__init__:["keyboardMove"],keyboardMove:["type",Zb]};var Fk=/^djs-cursor-.*$/;function ed(e){var t=He(document.body);t.removeMatching(Fk),e&&t.add("djs-cursor-"+e)}function e2(){ed(null)}var jk=5e3;function t2(e,t){t=t||"element.click";function n(){return!1}return e.once(t,jk,n),function(){e.off(t,n)}}function ul(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function $i(e,t){return{x:e.x-t.x,y:e.y-t.y}}var zk=15;function n2(e,t){var n;e.on("element.mousedown",500,function(c){return a(c.originalEvent)});function i(c){var l=n.start,u=n.button,f=No(c),d=$i(f,l);if(!n.dragging&&Hk(d)>zk&&(n.dragging=!0,u===0&&t2(e),ed("grab")),n.dragging){var m=n.last||n.start;d=$i(f,m),t.scroll({dx:d.x,dy:d.y}),n.last=f}c.preventDefault()}function r(c){ke.unbind(document,"mousemove",i),ke.unbind(document,"mouseup",r),n=null,e2()}function a(c){if(!Ir(c.target,".djs-draggable")){var l=c.button;if(!(l>=2||c.ctrlKey||c.shiftKey||c.altKey))return n={button:l,start:No(c)},ke.bind(document,"mousemove",i),ke.bind(document,"mouseup",r),!0}}this.isActive=function(){return!!n}}n2.$inject=["eventBus","canvas"];function Hk(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const i2={__init__:["moveCanvas"],moveCanvas:["type",n2]};function Rv(e){return Math.log(e)/Math.log(10)}function r2(e,t){var n=Rv(e.min),i=Rv(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function Vk(e,t){return Math.max(e.min,Math.min(e.max,t))}var Gk=Math.sign||function(e){return e>=0?1:-1},Dg={min:.2,max:4},o2=10,Uk=.1,Wk=.75;function lr(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=Dn(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||Wk;var i=this;t.on("canvas.init",function(r){i._init(e.enabled!==!1)})}lr.$inject=["config.zoomScroll","eventBus","canvas"];lr.prototype.scroll=function(t){this._canvas.scroll(t)};lr.prototype.reset=function(){this._canvas.zoom("fit-viewport")};lr.prototype.zoom=function(t,n){var i=r2(Dg,o2*2);this._totalDelta+=t,Math.abs(this._totalDelta)>Uk&&(this._zoom(t,n,i),this._totalDelta=0)};lr.prototype._handleWheel=function(t){if(!Ir(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var i=t.ctrlKey,r=t.shiftKey,a=-1*this._scale,c;if(i?a*=t.deltaMode===0?.02:.32:a*=t.deltaMode===0?1:16,i){var l=n.getBoundingClientRect(),u={x:t.clientX-l.left,y:t.clientY-l.top};c=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*Gk(t.deltaY)*a,this.zoom(c,u)}else r?c={dx:a*t.deltaY,dy:0}:c={dx:a*t.deltaX,dy:a*t.deltaY},this.scroll(c)}};lr.prototype.stepZoom=function(t,n){var i=r2(Dg,o2);this._zoom(t,n,i)};lr.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,a=Rv(i.zoom()),c=Math.round(a/n)*n;c+=n*r;var l=Math.pow(10,c);i.zoom(Vk(Dg,l),t)};lr.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t>"u"&&(t=!r),r!==t&&ke[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};lr.prototype._init=function(e){this.toggle(e)};const a2={__init__:["zoomScroll"],zoomScroll:["type",lr]};function _l(e){Fo.call(this,e)}Te(_l,Fo);_l.prototype._navigationModules=[Jb,i2,a2];_l.prototype._modules=[].concat(Fo.prototype._modules,_l.prototype._navigationModules);var Km={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var p1;function Yk(){return p1||(p1=1,function(e){(function(t,n,i,r){var a=["","webkit","Moz","MS","ms","o"],c=n.createElement("div"),l="function",u=Math.round,f=Math.abs,d=Date.now;function m(R,k,U){return setTimeout(M(R,U),k)}function g(R,k,U){return Array.isArray(R)?(_(R,U[k],U),!0):!1}function _(R,k,U){var re;if(R)if(R.forEach)R.forEach(k,U);else if(R.length!==r)for(re=0;re<R.length;)k.call(U,R[re],re,R),re++;else for(re in R)R.hasOwnProperty(re)&&k.call(U,R[re],re,R)}function x(R,k,U){var re="DEPRECATED METHOD: "+k+`
`+U+` AT 
`;return function(){var de=new Error("get-stack-trace"),Pe=de&&de.stack?de.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",rt=t.console&&(t.console.warn||t.console.log);return rt&&rt.call(t.console,re,Pe),R.apply(this,arguments)}}var S;typeof Object.assign!="function"?S=function(k){if(k===r||k===null)throw new TypeError("Cannot convert undefined or null to object");for(var U=Object(k),re=1;re<arguments.length;re++){var de=arguments[re];if(de!==r&&de!==null)for(var Pe in de)de.hasOwnProperty(Pe)&&(U[Pe]=de[Pe])}return U}:S=Object.assign;var C=x(function(k,U,re){for(var de=Object.keys(U),Pe=0;Pe<de.length;)(!re||re&&k[de[Pe]]===r)&&(k[de[Pe]]=U[de[Pe]]),Pe++;return k},"extend","Use `assign`."),z=x(function(k,U){return C(k,U,!0)},"merge","Use `assign`.");function D(R,k,U){var re=k.prototype,de;de=R.prototype=Object.create(re),de.constructor=R,de._super=re,U&&S(de,U)}function M(R,k){return function(){return R.apply(k,arguments)}}function A(R,k){return typeof R==l?R.apply(k&&k[0]||r,k):R}function j(R,k){return R===r?k:R}function G(R,k,U){_(Y(k),function(re){R.addEventListener(re,U,!1)})}function L(R,k,U){_(Y(k),function(re){R.removeEventListener(re,U,!1)})}function $(R,k){for(;R;){if(R==k)return!0;R=R.parentNode}return!1}function O(R,k){return R.indexOf(k)>-1}function Y(R){return R.trim().split(/\s+/g)}function q(R,k,U){if(R.indexOf&&!U)return R.indexOf(k);for(var re=0;re<R.length;){if(U&&R[re][U]==k||!U&&R[re]===k)return re;re++}return-1}function ae(R){return Array.prototype.slice.call(R,0)}function ce(R,k,U){for(var re=[],de=[],Pe=0;Pe<R.length;){var rt=R[Pe][k];q(de,rt)<0&&re.push(R[Pe]),de[Pe]=rt,Pe++}return re=re.sort(function(Ft,Ut){return Ft[k]>Ut[k]}),re}function Ae(R,k){for(var U,re,de=k[0].toUpperCase()+k.slice(1),Pe=0;Pe<a.length;){if(U=a[Pe],re=U?U+de:k,re in R)return re;Pe++}return r}var nt=1;function Me(){return nt++}function Ee(R){var k=R.ownerDocument||R;return k.defaultView||k.parentWindow||t}var me=/mobile|tablet|ip(ad|hone|od)|android/i,N="ontouchstart"in t,E=Ae(t,"PointerEvent")!==r,w=N&&me.test(navigator.userAgent),T="touch",H="pen",I="mouse",V="kinect",ne=25,B=1,Q=2,Z=4,ee=8,le=1,pe=2,ve=4,se=8,ue=16,je=pe|ve,ze=se|ue,Ce=je|ze,dt=["x","y"],Ie=["clientX","clientY"];function Xe(R,k){var U=this;this.manager=R,this.callback=k,this.element=R.element,this.target=R.options.inputTarget,this.domHandler=function(re){A(R.options.enable,[R])&&U.handler(re)},this.init()}Xe.prototype={handler:function(){},init:function(){this.evEl&&G(this.element,this.evEl,this.domHandler),this.evTarget&&G(this.target,this.evTarget,this.domHandler),this.evWin&&G(Ee(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&L(this.element,this.evEl,this.domHandler),this.evTarget&&L(this.target,this.evTarget,this.domHandler),this.evWin&&L(Ee(this.element),this.evWin,this.domHandler)}};function it(R){var k,U=R.options.inputClass;return U?k=U:E?k=Zr:w?k=Jr:N?k=to:k=Tn,new k(R,mt)}function mt(R,k,U){var re=U.pointers.length,de=U.changedPointers.length,Pe=k&B&&re-de===0,rt=k&(Z|ee)&&re-de===0;U.isFirst=!!Pe,U.isFinal=!!rt,Pe&&(R.session={}),U.eventType=k,we(R,U),R.emit("hammer.input",U),R.recognize(U),R.session.prevInput=U}function we(R,k){var U=R.session,re=k.pointers,de=re.length;U.firstInput||(U.firstInput=Yr(k)),de>1&&!U.firstMultiple?U.firstMultiple=Yr(k):de===1&&(U.firstMultiple=!1);var Pe=U.firstInput,rt=U.firstMultiple,$t=rt?rt.center:Pe.center,Ft=k.center=fr(re);k.timeStamp=d(),k.deltaTime=k.timeStamp-Pe.timeStamp,k.angle=ea($t,Ft),k.distance=pi($t,Ft),Oe(U,k),k.offsetDirection=Yi(k.deltaX,k.deltaY);var Ut=Jo(k.deltaTime,k.deltaX,k.deltaY);k.overallVelocityX=Ut.x,k.overallVelocityY=Ut.y,k.overallVelocity=f(Ut.x)>f(Ut.y)?Ut.x:Ut.y,k.scale=rt?ta(rt.pointers,re):1,k.rotation=rt?ns(rt.pointers,re):0,k.maxPointers=U.prevInput?k.pointers.length>U.prevInput.maxPointers?k.pointers.length:U.prevInput.maxPointers:k.pointers.length,ui(U,k);var Yt=R.element;$(k.srcEvent.target,Yt)&&(Yt=k.srcEvent.target),k.target=Yt}function Oe(R,k){var U=k.center,re=R.offsetDelta||{},de=R.prevDelta||{},Pe=R.prevInput||{};(k.eventType===B||Pe.eventType===Z)&&(de=R.prevDelta={x:Pe.deltaX||0,y:Pe.deltaY||0},re=R.offsetDelta={x:U.x,y:U.y}),k.deltaX=de.x+(U.x-re.x),k.deltaY=de.y+(U.y-re.y)}function ui(R,k){var U=R.lastInterval||k,re=k.timeStamp-U.timeStamp,de,Pe,rt,$t;if(k.eventType!=ee&&(re>ne||U.velocity===r)){var Ft=k.deltaX-U.deltaX,Ut=k.deltaY-U.deltaY,Yt=Jo(re,Ft,Ut);Pe=Yt.x,rt=Yt.y,de=f(Yt.x)>f(Yt.y)?Yt.x:Yt.y,$t=Yi(Ft,Ut),R.lastInterval=k}else de=U.velocity,Pe=U.velocityX,rt=U.velocityY,$t=U.direction;k.velocity=de,k.velocityX=Pe,k.velocityY=rt,k.direction=$t}function Yr(R){for(var k=[],U=0;U<R.pointers.length;)k[U]={clientX:u(R.pointers[U].clientX),clientY:u(R.pointers[U].clientY)},U++;return{timeStamp:d(),pointers:k,center:fr(k),deltaX:R.deltaX,deltaY:R.deltaY}}function fr(R){var k=R.length;if(k===1)return{x:u(R[0].clientX),y:u(R[0].clientY)};for(var U=0,re=0,de=0;de<k;)U+=R[de].clientX,re+=R[de].clientY,de++;return{x:u(U/k),y:u(re/k)}}function Jo(R,k,U){return{x:k/R||0,y:U/R||0}}function Yi(R,k){return R===k?le:f(R)>=f(k)?R<0?pe:ve:k<0?se:ue}function pi(R,k,U){U||(U=dt);var re=k[U[0]]-R[U[0]],de=k[U[1]]-R[U[1]];return Math.sqrt(re*re+de*de)}function ea(R,k,U){U||(U=dt);var re=k[U[0]]-R[U[0]],de=k[U[1]]-R[U[1]];return Math.atan2(de,re)*180/Math.PI}function ns(R,k){return ea(k[1],k[0],Ie)+ea(R[1],R[0],Ie)}function ta(R,k){return pi(k[0],k[1],Ie)/pi(R[0],R[1],Ie)}var is={mousedown:B,mousemove:Q,mouseup:Z},Kr="mousedown",qr="mousemove mouseup";function Tn(){this.evEl=Kr,this.evWin=qr,this.pressed=!1,Xe.apply(this,arguments)}D(Tn,Xe,{handler:function(k){var U=is[k.type];U&B&&k.button===0&&(this.pressed=!0),U&Q&&k.which!==1&&(U=Z),this.pressed&&(U&Z&&(this.pressed=!1),this.callback(this.manager,U,{pointers:[k],changedPointers:[k],pointerType:I,srcEvent:k}))}});var Xr={pointerdown:B,pointermove:Q,pointerup:Z,pointercancel:ee,pointerout:ee},Qr={2:T,3:H,4:I,5:V},fi="pointerdown",tn="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(fi="MSPointerDown",tn="MSPointerMove MSPointerUp MSPointerCancel");function Zr(){this.evEl=fi,this.evWin=tn,Xe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}D(Zr,Xe,{handler:function(k){var U=this.store,re=!1,de=k.type.toLowerCase().replace("ms",""),Pe=Xr[de],rt=Qr[k.pointerType]||k.pointerType,$t=rt==T,Ft=q(U,k.pointerId,"pointerId");Pe&B&&(k.button===0||$t)?Ft<0&&(U.push(k),Ft=U.length-1):Pe&(Z|ee)&&(re=!0),!(Ft<0)&&(U[Ft]=k,this.callback(this.manager,Pe,{pointers:U,changedPointers:[k],pointerType:rt,srcEvent:k}),re&&U.splice(Ft,1))}});var na={touchstart:B,touchmove:Q,touchend:Z,touchcancel:ee},ia="touchstart",dr="touchstart touchmove touchend touchcancel";function ra(){this.evTarget=ia,this.evWin=dr,this.started=!1,Xe.apply(this,arguments)}D(ra,Xe,{handler:function(k){var U=na[k.type];if(U===B&&(this.started=!0),!!this.started){var re=oa.call(this,k,U);U&(Z|ee)&&re[0].length-re[1].length===0&&(this.started=!1),this.callback(this.manager,U,{pointers:re[0],changedPointers:re[1],pointerType:T,srcEvent:k})}}});function oa(R,k){var U=ae(R.touches),re=ae(R.changedTouches);return k&(Z|ee)&&(U=ce(U.concat(re),"identifier")),[U,re]}var yu={touchstart:B,touchmove:Q,touchend:Z,touchcancel:ee},aa="touchstart touchmove touchend touchcancel";function Jr(){this.evTarget=aa,this.targetIds={},Xe.apply(this,arguments)}D(Jr,Xe,{handler:function(k){var U=yu[k.type],re=sa.call(this,k,U);re&&this.callback(this.manager,U,{pointers:re[0],changedPointers:re[1],pointerType:T,srcEvent:k})}});function sa(R,k){var U=ae(R.touches),re=this.targetIds;if(k&(B|Q)&&U.length===1)return re[U[0].identifier]=!0,[U,U];var de,Pe,rt=ae(R.changedTouches),$t=[],Ft=this.target;if(Pe=U.filter(function(Ut){return $(Ut.target,Ft)}),k===B)for(de=0;de<Pe.length;)re[Pe[de].identifier]=!0,de++;for(de=0;de<rt.length;)re[rt[de].identifier]&&$t.push(rt[de]),k&(Z|ee)&&delete re[rt[de].identifier],de++;if($t.length)return[ce(Pe.concat($t),"identifier"),$t]}var eh=2500,eo=25;function to(){Xe.apply(this,arguments);var R=M(this.handler,this);this.touch=new Jr(this.manager,R),this.mouse=new Tn(this.manager,R),this.primaryTouch=null,this.lastTouches=[]}D(to,Xe,{handler:function(k,U,re){var de=re.pointerType==T,Pe=re.pointerType==I;if(!(Pe&&re.sourceCapabilities&&re.sourceCapabilities.firesTouchEvents)){if(de)rs.call(this,U,re);else if(Pe&&th.call(this,re))return;this.callback(k,U,re)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function rs(R,k){R&B?(this.primaryTouch=k.changedPointers[0].identifier,os.call(this,k)):R&(Z|ee)&&os.call(this,k)}function os(R){var k=R.changedPointers[0];if(k.identifier===this.primaryTouch){var U={x:k.clientX,y:k.clientY};this.lastTouches.push(U);var re=this.lastTouches,de=function(){var Pe=re.indexOf(U);Pe>-1&&re.splice(Pe,1)};setTimeout(de,eh)}}function th(R){for(var k=R.srcEvent.clientX,U=R.srcEvent.clientY,re=0;re<this.lastTouches.length;re++){var de=this.lastTouches[re],Pe=Math.abs(k-de.x),rt=Math.abs(U-de.y);if(Pe<=eo&&rt<=eo)return!0}return!1}var _u=Ae(c.style,"touchAction"),Eu=_u!==r,Ki="compute",mc="auto",as="manipulation",hr="none",no="pan-x",io="pan-y",ca=ih();function ss(R,k){this.manager=R,this.set(k)}ss.prototype={set:function(R){R==Ki&&(R=this.compute()),Eu&&this.manager.element.style&&ca[R]&&(this.manager.element.style[_u]=R),this.actions=R.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var R=[];return _(this.manager.recognizers,function(k){A(k.options.enable,[k])&&(R=R.concat(k.getTouchAction()))}),nh(R.join(" "))},preventDefaults:function(R){var k=R.srcEvent,U=R.offsetDirection;if(this.manager.session.prevented){k.preventDefault();return}var re=this.actions,de=O(re,hr)&&!ca[hr],Pe=O(re,io)&&!ca[io],rt=O(re,no)&&!ca[no];if(de){var $t=R.pointers.length===1,Ft=R.distance<2,Ut=R.deltaTime<250;if($t&&Ft&&Ut)return}if(!(rt&&Pe)&&(de||Pe&&U&je||rt&&U&ze))return this.preventSrc(k)},preventSrc:function(R){this.manager.session.prevented=!0,R.preventDefault()}};function nh(R){if(O(R,hr))return hr;var k=O(R,no),U=O(R,io);return k&&U?hr:k||U?k?no:io:O(R,as)?as:mc}function ih(){if(!Eu)return!1;var R={},k=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(U){R[U]=k?t.CSS.supports("touch-action",U):!0}),R}var _t=1,In=2,qi=4,Ai=8,On=Ai,la=16,qn=32;function Ln(R){this.options=S({},this.defaults,R||{}),this.id=Me(),this.manager=null,this.options.enable=j(this.options.enable,!0),this.state=_t,this.simultaneous={},this.requireFail=[]}Ln.prototype={defaults:{},set:function(R){return S(this.options,R),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(R){if(g(R,"recognizeWith",this))return this;var k=this.simultaneous;return R=gn(R,this),k[R.id]||(k[R.id]=R,R.recognizeWith(this)),this},dropRecognizeWith:function(R){return g(R,"dropRecognizeWith",this)?this:(R=gn(R,this),delete this.simultaneous[R.id],this)},requireFailure:function(R){if(g(R,"requireFailure",this))return this;var k=this.requireFail;return R=gn(R,this),q(k,R)===-1&&(k.push(R),R.requireFailure(this)),this},dropRequireFailure:function(R){if(g(R,"dropRequireFailure",this))return this;R=gn(R,this);var k=q(this.requireFail,R);return k>-1&&this.requireFail.splice(k,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(R){return!!this.simultaneous[R.id]},emit:function(R){var k=this,U=this.state;function re(de){k.manager.emit(de,R)}U<Ai&&re(k.options.event+Xn(U)),re(k.options.event),R.additionalEvent&&re(R.additionalEvent),U>=Ai&&re(k.options.event+Xn(U))},tryEmit:function(R){if(this.canEmit())return this.emit(R);this.state=qn},canEmit:function(){for(var R=0;R<this.requireFail.length;){if(!(this.requireFail[R].state&(qn|_t)))return!1;R++}return!0},recognize:function(R){var k=S({},R);if(!A(this.options.enable,[this,k])){this.reset(),this.state=qn;return}this.state&(On|la|qn)&&(this.state=_t),this.state=this.process(k),this.state&(In|qi|Ai|la)&&this.tryEmit(k)},process:function(R){},getTouchAction:function(){},reset:function(){}};function Xn(R){return R&la?"cancel":R&Ai?"end":R&qi?"move":R&In?"start":""}function xu(R){return R==ue?"down":R==se?"up":R==pe?"left":R==ve?"right":""}function gn(R,k){var U=k.manager;return U?U.get(R):R}function Qn(){Ln.apply(this,arguments)}D(Qn,Ln,{defaults:{pointers:1},attrTest:function(R){var k=this.options.pointers;return k===0||R.pointers.length===k},process:function(R){var k=this.state,U=R.eventType,re=k&(In|qi),de=this.attrTest(R);return re&&(U&ee||!de)?k|la:re||de?U&Z?k|Ai:k&In?k|qi:In:qn}});function cs(){Qn.apply(this,arguments),this.pX=null,this.pY=null}D(cs,Qn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ce},getTouchAction:function(){var R=this.options.direction,k=[];return R&je&&k.push(io),R&ze&&k.push(no),k},directionTest:function(R){var k=this.options,U=!0,re=R.distance,de=R.direction,Pe=R.deltaX,rt=R.deltaY;return de&k.direction||(k.direction&je?(de=Pe===0?le:Pe<0?pe:ve,U=Pe!=this.pX,re=Math.abs(R.deltaX)):(de=rt===0?le:rt<0?se:ue,U=rt!=this.pY,re=Math.abs(R.deltaY))),R.direction=de,U&&re>k.threshold&&de&k.direction},attrTest:function(R){return Qn.prototype.attrTest.call(this,R)&&(this.state&In||!(this.state&In)&&this.directionTest(R))},emit:function(R){this.pX=R.deltaX,this.pY=R.deltaY;var k=xu(R.direction);k&&(R.additionalEvent=this.options.event+k),this._super.emit.call(this,R)}});function vc(){Qn.apply(this,arguments)}D(vc,Qn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[hr]},attrTest:function(R){return this._super.attrTest.call(this,R)&&(Math.abs(R.scale-1)>this.options.threshold||this.state&In)},emit:function(R){if(R.scale!==1){var k=R.scale<1?"in":"out";R.additionalEvent=this.options.event+k}this._super.emit.call(this,R)}});function ro(){Ln.apply(this,arguments),this._timer=null,this._input=null}D(ro,Ln,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[mc]},process:function(R){var k=this.options,U=R.pointers.length===k.pointers,re=R.distance<k.threshold,de=R.deltaTime>k.time;if(this._input=R,!re||!U||R.eventType&(Z|ee)&&!de)this.reset();else if(R.eventType&B)this.reset(),this._timer=m(function(){this.state=On,this.tryEmit()},k.time,this);else if(R.eventType&Z)return On;return qn},reset:function(){clearTimeout(this._timer)},emit:function(R){this.state===On&&(R&&R.eventType&Z?this.manager.emit(this.options.event+"up",R):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}});function oo(){Qn.apply(this,arguments)}D(oo,Qn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[hr]},attrTest:function(R){return this._super.attrTest.call(this,R)&&(Math.abs(R.rotation)>this.options.threshold||this.state&In)}});function mr(){Qn.apply(this,arguments)}D(mr,Qn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:je|ze,pointers:1},getTouchAction:function(){return cs.prototype.getTouchAction.call(this)},attrTest:function(R){var k=this.options.direction,U;return k&(je|ze)?U=R.overallVelocity:k&je?U=R.overallVelocityX:k&ze&&(U=R.overallVelocityY),this._super.attrTest.call(this,R)&&k&R.offsetDirection&&R.distance>this.options.threshold&&R.maxPointers==this.options.pointers&&f(U)>this.options.velocity&&R.eventType&Z},emit:function(R){var k=xu(R.offsetDirection);k&&this.manager.emit(this.options.event+k,R),this.manager.emit(this.options.event,R)}});function vr(){Ln.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}D(vr,Ln,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[as]},process:function(R){var k=this.options,U=R.pointers.length===k.pointers,re=R.distance<k.threshold,de=R.deltaTime<k.time;if(this.reset(),R.eventType&B&&this.count===0)return this.failTimeout();if(re&&de&&U){if(R.eventType!=Z)return this.failTimeout();var Pe=this.pTime?R.timeStamp-this.pTime<k.interval:!0,rt=!this.pCenter||pi(this.pCenter,R.center)<k.posThreshold;this.pTime=R.timeStamp,this.pCenter=R.center,!rt||!Pe?this.count=1:this.count+=1,this._input=R;var $t=this.count%k.taps;if($t===0)return this.hasRequireFailures()?(this._timer=m(function(){this.state=On,this.tryEmit()},k.interval,this),In):On}return qn},failTimeout:function(){return this._timer=m(function(){this.state=qn},this.options.interval,this),qn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==On&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Xi(R,k){return k=k||{},k.recognizers=j(k.recognizers,Xi.defaults.preset),new us(R,k)}Xi.VERSION="2.0.7",Xi.defaults={domEvents:!1,touchAction:Ki,enable:!0,inputTarget:null,inputClass:null,preset:[[oo,{enable:!1}],[vc,{enable:!1},["rotate"]],[mr,{direction:je}],[cs,{direction:je},["swipe"]],[vr],[vr,{event:"doubletap",taps:2},["tap"]],[ro]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var rh=1,ls=2;function us(R,k){this.options=S({},Xi.defaults,k||{}),this.options.inputTarget=this.options.inputTarget||R,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=R,this.input=it(this),this.touchAction=new ss(this,this.options.touchAction),ps(this,!0),_(this.options.recognizers,function(U){var re=this.add(new U[0](U[1]));U[2]&&re.recognizeWith(U[2]),U[3]&&re.requireFailure(U[3])},this)}us.prototype={set:function(R){return S(this.options,R),R.touchAction&&this.touchAction.update(),R.inputTarget&&(this.input.destroy(),this.input.target=R.inputTarget,this.input.init()),this},stop:function(R){this.session.stopped=R?ls:rh},recognize:function(R){var k=this.session;if(!k.stopped){this.touchAction.preventDefaults(R);var U,re=this.recognizers,de=k.curRecognizer;(!de||de&&de.state&On)&&(de=k.curRecognizer=null);for(var Pe=0;Pe<re.length;)U=re[Pe],k.stopped!==ls&&(!de||U==de||U.canRecognizeWith(de))?U.recognize(R):U.reset(),!de&&U.state&(In|qi|Ai)&&(de=k.curRecognizer=U),Pe++}},get:function(R){if(R instanceof Ln)return R;for(var k=this.recognizers,U=0;U<k.length;U++)if(k[U].options.event==R)return k[U];return null},add:function(R){if(g(R,"add",this))return this;var k=this.get(R.options.event);return k&&this.remove(k),this.recognizers.push(R),R.manager=this,this.touchAction.update(),R},remove:function(R){if(g(R,"remove",this))return this;if(R=this.get(R),R){var k=this.recognizers,U=q(k,R);U!==-1&&(k.splice(U,1),this.touchAction.update())}return this},on:function(R,k){if(R!==r&&k!==r){var U=this.handlers;return _(Y(R),function(re){U[re]=U[re]||[],U[re].push(k)}),this}},off:function(R,k){if(R!==r){var U=this.handlers;return _(Y(R),function(re){k?U[re]&&U[re].splice(q(U[re],k),1):delete U[re]}),this}},emit:function(R,k){this.options.domEvents&&ua(R,k);var U=this.handlers[R]&&this.handlers[R].slice();if(!(!U||!U.length)){k.type=R,k.preventDefault=function(){k.srcEvent.preventDefault()};for(var re=0;re<U.length;)U[re](k),re++}},destroy:function(){this.element&&ps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ps(R,k){var U=R.element;if(U.style){var re;_(R.options.cssProps,function(de,Pe){re=Ae(U.style,Pe),k?(R.oldCssProps[re]=U.style[re],U.style[re]=de):U.style[re]=R.oldCssProps[re]||""}),k||(R.oldCssProps={})}}function ua(R,k){var U=n.createEvent("Event");U.initEvent(R,!0,!0),U.gesture=k,k.target.dispatchEvent(U)}S(Xi,{INPUT_START:B,INPUT_MOVE:Q,INPUT_END:Z,INPUT_CANCEL:ee,STATE_POSSIBLE:_t,STATE_BEGAN:In,STATE_CHANGED:qi,STATE_ENDED:Ai,STATE_RECOGNIZED:On,STATE_CANCELLED:la,STATE_FAILED:qn,DIRECTION_NONE:le,DIRECTION_LEFT:pe,DIRECTION_RIGHT:ve,DIRECTION_UP:se,DIRECTION_DOWN:ue,DIRECTION_HORIZONTAL:je,DIRECTION_VERTICAL:ze,DIRECTION_ALL:Ce,Manager:us,Input:Xe,TouchAction:ss,TouchInput:Jr,MouseInput:Tn,PointerEventInput:Zr,TouchMouseInput:to,SingleTouchInput:ra,Recognizer:Ln,AttrRecognizer:Qn,Tap:vr,Pan:cs,Swipe:mr,Pinch:vc,Rotate:oo,Press:ro,on:G,off:L,each:_,merge:z,extend:C,assign:S,inherit:D,bindFn:M,prefixed:Ae});var oh=typeof t<"u"?t:typeof self<"u"?self:{};oh.Hammer=Xi,e.exports?e.exports=Xi:t[i]=Xi})(window,document,"Hammer")}(Km)),Km.exports}var Kk=Yk();const Ca=Of(Kk);var qk=.2,Xk=4,f1=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function Dp(e,t){return t.get(e,!1)}function Av(e){e.preventDefault(),typeof e.stopPropagation=="function"?e.stopPropagation():e.srcEvent&&typeof e.srcEvent.stopPropagation=="function"&&e.srcEvent.stopPropagation(),typeof e.stopImmediatePropagation=="function"&&e.stopImmediatePropagation()}function qm(e){function t(f){W(f1,function(d){ke.bind(e,d,Av,!0)})}function n(f){setTimeout(function(){W(f1,function(d){ke.unbind(e,d,Av,!0)})},500)}ke.bind(e,"touchstart",t,!0),ke.bind(e,"touchend",n,!0),ke.bind(e,"touchcancel",n,!0);var i=new Ca.Manager(e,{inputClass:Ca.TouchInput,recognizers:[],domEvents:!0}),r=new Ca.Tap,a=new Ca.Pan({threshold:10}),c=new Ca.Press,l=new Ca.Pinch,u=new Ca.Tap({event:"doubletap",taps:2});return l.requireFailure(a),l.requireFailure(c),i.add([a,c,l,u,r]),i.reset=function(f){var d=this.recognizers,m=this.session;m.stopped||(i.stop(f),setTimeout(function(){var g,_;for(g=0;_=d[g];g++)_.reset(),_.state=8;m.curRecognizer=null},0))},i.on("hammer.input",function(f){f.srcEvent.defaultPrevented&&i.reset(!0)}),i}function s2(e,t,n,i,r){var a=Dp("dragging",e),c=Dp("move",e),l=Dp("contextPad",e),u=Dp("palette",e),f;function d(_,x){return function(S){var C=m(S.target),z=C&&i.get(C);return x&&(S.srcEvent.button=x),r.fire(_,S,z)}}function m(_){var x=Ir(_,"svg, .djs-element",!0);return x}function g(_){f=qm(_);function x(z){var D=0,M=0;function A(G){var L=G.deltaX-D,$=G.deltaY-M;t.scroll({dx:L,dy:$}),D=G.deltaX,M=G.deltaY}function j(G){f.off("panmove",A),f.off("panend",j),f.off("pancancel",j)}f.on("panmove",A),f.on("panend",j),f.on("pancancel",j)}function S(z){var D=m(z.target),M=D&&i.get(D);if(c&&t.getRootElement()!==M)return c.start(z,M,!0);x()}function C(z){var D=t.zoom(),M=z.center;function A(G){var L=1-(1-G.scale)/1.5,$=Math.max(qk,Math.min(Xk,L*D));t.zoom($,M),Av(G)}function j(G){f.off("pinchmove",A),f.off("pinchend",j),f.off("pinchcancel",j),f.reset(!0)}f.on("pinchmove",A),f.on("pinchend",j),f.on("pinchcancel",j)}f.on("tap",d("element.click")),f.on("doubletap",d("element.dblclick",1)),f.on("panstart",S),f.on("press",S),f.on("pinchstart",C)}a&&n.on("drag.move",function(_){var x=_.originalEvent;if(!(!x||x instanceof MouseEvent)){var S=No(x),C=document.elementFromPoint(S.x,S.y),z=m(C),D=z&&i.get(z);D!==_.hover&&(_.hover&&a.out(_),D&&(a.hover({element:D,gfx:z}),_.hover=D,_.hoverGfx=z))}}),l&&n.on("contextPad.create",function(_){var x=_.pad.html,S=qm(x);S.on("panstart",function(C){l.trigger("dragstart",C,!0)}),S.on("press",function(C){l.trigger("dragstart",C,!0)}),S.on("tap",function(C){l.trigger("click",C)})}),u&&n.on("palette.create",function(_){var x=_.container,S=qm(x);S.on("panstart",function(C){u.trigger("dragstart",C,!0)}),S.on("press",function(C){u.trigger("dragstart",C,!0)}),S.on("tap",function(C){u.trigger("click",C)})}),n.on("canvas.init",function(_){g(_.svg)})}s2.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];function kg(e){var t=this;e.on("canvas.init",function(n){t.addBBoxMarker(n.svg)})}kg.$inject=["eventBus"];kg.prototype.addBBoxMarker=function(e){var t={fill:"none",class:"outer-bound-marker"},n=Be("rect");Se(n,{x:-1e4,y:1e4,width:10,height:10}),Se(n,t),Ge(e,n);var i=Be("rect");Se(i,{x:1e4,y:1e4,width:10,height:10}),Se(i,t),Ge(e,i)};const Qk={__depends__:[Ll],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",s2],touchFix:["type",kg]},Zk={__depends__:[Qk]};function Xm(e){return e&&e[e.length-1]}function d1(e){return e.y}function h1(e){return e.x}var Jk={left:h1,center:h1,right:function(e){return e.x+e.width},top:d1,middle:d1,bottom:function(e){return e.y+e.height}};function nc(e,t){this._modeling=e,this._rules=t}nc.$inject=["modeling","rules"];nc.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}};nc.prototype._isType=function(e,t){return t.indexOf(e)!==-1};nc.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,r=n.dimension,a={},c={},l=!1,u,f,d;function m(g,_){return Math.round((g[i]+_[i]+_[r])/2)}if(this._isType(e,["left","top"]))a[e]=t[0][i];else if(this._isType(e,["right","bottom"]))d=Xm(t),a[e]=d[i]+d[r];else if(this._isType(e,["center","middle"])){if(W(t,function(g){var _=g[i]+Math.round(g[r]/2);c[_]?c[_].elements.push(g):c[_]={elements:[g],center:_}}),u=ji(c,function(g){return g.elements.length>1&&(l=!0),g.elements.length}),l)return a[e]=Xm(u).center,a;f=t[0],t=ji(t,function(g){return g[i]+g[r]}),d=Xm(t),a[e]=m(f,d)}return a};nc.prototype.trigger=function(e,t){var n=this._modeling,i,r=Ze(e,function(u){return!(u.waypoints||u.host||u.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:r}),Je(i)&&(r=i),!(r.length<2||!i)){var a=Jk[t],c=ji(r,a),l=this._alignmentPosition(t,c);n.alignElements(c,l)}};const eM={__init__:["alignElements"],alignElements:["type",nc]};var m1=".entry",tM=1e3,v1=12;function kn(e,t,n,i){this._canvas=e,this._eventBus=n,this._overlays=i;var r=Vt(t&&t.scale)?t.scale:{min:1,max:1.5};this._overlaysConfig={scale:r},this._current=null,this._init()}kn.$inject=["canvas","config.contextPad","eventBus","overlays"];kn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,i=n.length?n.length===1?n[0]:n:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,i=e._current;if(i){var r=i.target,a=sr(Je(r)?r:[r],function(c){return c2(n,c)});a&&e.open(r,!0)}})};kn.prototype.registerProvider=function(e,t){t||(t=e,e=tM),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};kn.prototype.getEntries=function(e){var t=this._getProviders(),n=Je(e)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return W(t,function(r){if(sn(r[n])){var a=r[n](e);sn(a)?i=a(i):W(a,function(c,l){i[l]=c})}}),i};kn.prototype.trigger=function(e,t,n){var i,r,a=t.delegateTarget||t.target;return a?(i=bn(a,"data-action"),r=t.originalEvent||t,this.triggerEntry(i,e,r,n)):t.preventDefault()};kn.prototype.triggerEntry=function(e,t,n,i){if(this.isShown()){var r=this._current.target,a=this._current.entries,c=a[e];if(c){var l=c.action;if(this._eventBus.fire("contextPad.trigger",{entry:c,event:n})!==!1){if(sn(l)){if(t==="click")return l(n,r,i)}else if(l[t])return l[t](n,r,i);n.preventDefault()}}}};kn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};kn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};kn.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),i=n.html,r;W(t,function(a,c){var l=a.group||"default",u=et(a.html||'<div class="entry" draggable="true"></div>'),f;bn(u,"data-action",c),f=ft("[data-group="+yl(l)+"]",i),f||(f=et('<div class="group"></div>'),bn(f,"data-group",l),i.appendChild(f)),f.appendChild(u),a.className&&nM(u,a.className),a.title&&bn(u,"title",a.title),a.imageUrl&&(r=et("<img>"),bn(r,"src",a.imageUrl),r.style.width="100%",r.style.height="100%",u.appendChild(r))}),He(i).add("open"),this._current={target:e,entries:t,pad:n},this._eventBus.fire("contextPad.open",{current:this._current})};kn.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=et('<div class="djs-context-pad"></div>'),r=this._getPosition(e),a=J({html:i},this._overlaysConfig,r);Vn.bind(i,m1,"click",function(u){t.trigger("click",u)}),Vn.bind(i,m1,"dragstart",function(u){t.trigger("dragstart",u)}),ke.bind(i,"mousedown",function(u){u.stopPropagation()});var c=this._canvas.getRootElement();this._overlayId=n.add(c,"context-pad",a);var l=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{target:e,pad:l}),l};kn.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};kn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return Je(e)!==Je(n)?!1:Je(e)?e.length===n.length&&Ba(e,function(i){return c2(n,i)}):n===e};kn.prototype.isShown=function(){return this.isOpen()&&this._overlays.isShown()};kn.prototype._getPosition=function(e){var t=Je(e)?e:[e],n=Ot(t);return{position:{left:n.x+n.width+v1,top:n.y-v1/2}}};function nM(e,t){var n=He(e);t=Je(t)?t:t.split(/\s+/g),t.forEach(function(i){n.add(i)})}function c2(e,t){return e.indexOf(t)!==-1}const Mg={__depends__:[Ll,Zf],contextPad:["type",kn]};var td,bt,l2,Ma,g1,u2,Dv,p2,Ng,kv,Mv,El={},f2=[],iM=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ig=Array.isArray;function Po(e,t){for(var n in t)e[n]=t[n];return e}function Og(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function d2(e,t,n){var i,r,a,c={};for(a in t)a=="key"?i=t[a]:a=="ref"?r=t[a]:c[a]=t[a];if(arguments.length>2&&(c.children=arguments.length>3?td.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)c[a]===void 0&&(c[a]=e.defaultProps[a]);return of(e,c,i,r,null)}function of(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++l2,__i:-1,__u:0};return r==null&&bt.vnode!=null&&bt.vnode(a),a}function nd(e){return e.children}function af(e,t){this.props=e,this.context=t}function Us(e,t){if(t==null)return e.__?Us(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Us(e):null}function h2(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return h2(e)}}function y1(e){(!e.__d&&(e.__d=!0)&&Ma.push(e)&&!wf.__r++||g1!==bt.debounceRendering)&&((g1=bt.debounceRendering)||u2)(wf)}function wf(){var e,t,n,i,r,a,c,l;for(Ma.sort(Dv);e=Ma.shift();)e.__d&&(t=Ma.length,i=void 0,a=(r=(n=e).__v).__e,c=[],l=[],n.__P&&((i=Po({},r)).__v=r.__v+1,bt.vnode&&bt.vnode(i),Lg(n.__P,i,r,n.__n,n.__P.namespaceURI,32&r.__u?[a]:null,c,a??Us(r),!!(32&r.__u),l),i.__v=r.__v,i.__.__k[i.__i]=i,g2(c,i,l),i.__e!=a&&h2(i)),Ma.length>t&&Ma.sort(Dv));wf.__r=0}function m2(e,t,n,i,r,a,c,l,u,f,d){var m,g,_,x,S,C,z=i&&i.__k||f2,D=t.length;for(u=rM(n,t,z,u,D),m=0;m<D;m++)(_=n.__k[m])!=null&&(g=_.__i===-1?El:z[_.__i]||El,_.__i=m,C=Lg(e,_,g,r,a,c,l,u,f,d),x=_.__e,_.ref&&g.ref!=_.ref&&(g.ref&&Bg(g.ref,null,_),d.push(_.ref,_.__c||x,_)),S==null&&x!=null&&(S=x),4&_.__u||g.__k===_.__k?u=v2(_,u,e):typeof _.type=="function"&&C!==void 0?u=C:x&&(u=x.nextSibling),_.__u&=-7);return n.__e=S,u}function rM(e,t,n,i,r){var a,c,l,u,f,d=n.length,m=d,g=0;for(e.__k=new Array(r),a=0;a<r;a++)(c=t[a])!=null&&typeof c!="boolean"&&typeof c!="function"?(u=a+g,(c=e.__k[a]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?of(null,c,null,null,null):Ig(c)?of(nd,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?of(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,l=null,(f=c.__i=oM(c,n,u,m))!==-1&&(m--,(l=n[f])&&(l.__u|=2)),l==null||l.__v===null?(f==-1&&g--,typeof c.type!="function"&&(c.__u|=4)):f!=u&&(f==u-1?g--:f==u+1?g++:(f>u?g--:g++,c.__u|=4))):e.__k[a]=null;if(m)for(a=0;a<d;a++)(l=n[a])!=null&&!(2&l.__u)&&(l.__e==i&&(i=Us(l)),y2(l,l));return i}function v2(e,t,n){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=v2(i[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Us(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function oM(e,t,n,i){var r,a,c=e.key,l=e.type,u=t[n];if(u===null||u&&c==u.key&&l===u.type&&!(2&u.__u))return n;if(i>(u!=null&&!(2&u.__u)?1:0))for(r=n-1,a=n+1;r>=0||a<t.length;){if(r>=0){if((u=t[r])&&!(2&u.__u)&&c==u.key&&l===u.type)return r;r--}if(a<t.length){if((u=t[a])&&!(2&u.__u)&&c==u.key&&l===u.type)return a;a++}}return-1}function _1(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||iM.test(t)?n:n+"px"}function kp(e,t,n,i,r){var a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||_1(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||_1(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(p2,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.u=i.u:(n.u=Ng,e.addEventListener(t,a?Mv:kv,a)):e.removeEventListener(t,a?Mv:kv,a);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function E1(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Ng++;else if(t.t<n.u)return;return n(bt.event?bt.event(t):t)}}}function Lg(e,t,n,i,r,a,c,l,u,f){var d,m,g,_,x,S,C,z,D,M,A,j,G,L,$,O,Y,q=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),a=[l=t.__e=n.__e]),(d=bt.__b)&&d(t);e:if(typeof q=="function")try{if(z=t.props,D="prototype"in q&&q.prototype.render,M=(d=q.contextType)&&i[d.__c],A=d?M?M.props.value:d.__:i,n.__c?C=(m=t.__c=n.__c).__=m.__E:(D?t.__c=m=new q(z,A):(t.__c=m=new af(z,A),m.constructor=q,m.render=sM),M&&M.sub(m),m.props=z,m.state||(m.state={}),m.context=A,m.__n=i,g=m.__d=!0,m.__h=[],m._sb=[]),D&&m.__s==null&&(m.__s=m.state),D&&q.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=Po({},m.__s)),Po(m.__s,q.getDerivedStateFromProps(z,m.__s))),_=m.props,x=m.state,m.__v=t,g)D&&q.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),D&&m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(D&&q.getDerivedStateFromProps==null&&z!==_&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(z,A),!m.__e&&(m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(z,m.__s,A)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(m.props=z,m.state=m.__s,m.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(ae){ae&&(ae.__=t)}),j=0;j<m._sb.length;j++)m.__h.push(m._sb[j]);m._sb=[],m.__h.length&&c.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(z,m.__s,A),D&&m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(_,x,S)})}if(m.context=A,m.props=z,m.__P=e,m.__e=!1,G=bt.__r,L=0,D){for(m.state=m.__s,m.__d=!1,G&&G(t),d=m.render(m.props,m.state,m.context),$=0;$<m._sb.length;$++)m.__h.push(m._sb[$]);m._sb=[]}else do m.__d=!1,G&&G(t),d=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++L<25);m.state=m.__s,m.getChildContext!=null&&(i=Po(Po({},i),m.getChildContext())),D&&!g&&m.getSnapshotBeforeUpdate!=null&&(S=m.getSnapshotBeforeUpdate(_,x)),l=m2(e,Ig(O=d!=null&&d.type===nd&&d.key==null?d.props.children:d)?O:[O],t,n,i,r,a,c,l,u,f),m.base=t.__e,t.__u&=-161,m.__h.length&&c.push(m),C&&(m.__E=m.__=null)}catch(ae){if(t.__v=null,u||a!=null)if(ae.then){for(t.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,t.__e=l}else for(Y=a.length;Y--;)Og(a[Y]);else t.__e=n.__e,t.__k=n.__k;bt.__e(ae,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=aM(n.__e,t,n,i,r,a,c,u,f);return(d=bt.diffed)&&d(t),128&t.__u?void 0:l}function g2(e,t,n){for(var i=0;i<n.length;i++)Bg(n[i],n[++i],n[++i]);bt.__c&&bt.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(a){a.call(r)})}catch(a){bt.__e(a,r.__v)}})}function aM(e,t,n,i,r,a,c,l,u){var f,d,m,g,_,x,S,C=n.props,z=t.props,D=t.type;if(D=="svg"?r="http://www.w3.org/2000/svg":D=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),a!=null){for(f=0;f<a.length;f++)if((_=a[f])&&"setAttribute"in _==!!D&&(D?_.localName==D:_.nodeType==3)){e=_,a[f]=null;break}}if(e==null){if(D==null)return document.createTextNode(z);e=document.createElementNS(r,D,z.is&&z),l&&(bt.__m&&bt.__m(t,a),l=!1),a=null}if(D===null)C===z||l&&e.data===z||(e.data=z);else{if(a=a&&td.call(e.childNodes),C=n.props||El,!l&&a!=null)for(C={},f=0;f<e.attributes.length;f++)C[(_=e.attributes[f]).name]=_.value;for(f in C)if(_=C[f],f!="children"){if(f=="dangerouslySetInnerHTML")m=_;else if(!(f in z)){if(f=="value"&&"defaultValue"in z||f=="checked"&&"defaultChecked"in z)continue;kp(e,f,null,_,r)}}for(f in z)_=z[f],f=="children"?g=_:f=="dangerouslySetInnerHTML"?d=_:f=="value"?x=_:f=="checked"?S=_:l&&typeof _!="function"||C[f]===_||kp(e,f,_,C[f],r);if(d)l||m&&(d.__html===m.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(m&&(e.innerHTML=""),m2(e,Ig(g)?g:[g],t,n,i,D=="foreignObject"?"http://www.w3.org/1999/xhtml":r,a,c,a?a[0]:n.__k&&Us(n,0),l,u),a!=null)for(f=a.length;f--;)Og(a[f]);l||(f="value",D=="progress"&&x==null?e.removeAttribute("value"):x!==void 0&&(x!==e[f]||D=="progress"&&!x||D=="option"&&x!==C[f])&&kp(e,f,x,C[f],r),f="checked",S!==void 0&&S!==e[f]&&kp(e,f,S,C[f],r))}return e}function Bg(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){bt.__e(r,n)}}function y2(e,t,n){var i,r;if(bt.unmount&&bt.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||Bg(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){bt.__e(a,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&y2(i[r],t,n||typeof e.type!="function");n||Og(e.__e),e.__c=e.__=e.__e=void 0}function sM(e,t,n){return this.constructor(e,n)}function _2(e,t,n){var i,r,a,c;t==document&&(t=document.documentElement),bt.__&&bt.__(e,t),r=(i=typeof n=="function")?null:t.__k,a=[],c=[],Lg(t,e=(!i&&n||t).__k=d2(nd,null,[e]),r||El,El,t.namespaceURI,!i&&n?[n]:r?null:t.firstChild?td.call(t.childNodes):null,a,!i&&n?n:r?r.__e:t.firstChild,i,c),g2(a,e,c)}td=f2.slice,bt={__e:function(e,t,n,i){for(var r,a,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),c=r.__d),c)return r.__E=r}catch(l){e=l}throw e}},l2=0,af.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Po({},this.state),typeof e=="function"&&(e=e(Po({},n),this.props)),e&&Po(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),y1(this))},af.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),y1(this))},af.prototype.render=nd,Ma=[],u2=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Dv=function(e,t){return e.__v.__b-t.__v.__b},wf.__r=0,p2=/(PointerCapture)$|Capture$/i,Ng=0,kv=E1(!1),Mv=E1(!0);var E2=function(e,t,n,i){var r;t[0]=0;for(var a=1;a<t.length;a++){var c=t[a++],l=t[a]?(t[0]|=c?1:2,n[t[a++]]):t[++a];c===3?i[0]=l:c===4?i[1]=Object.assign(i[1]||{},l):c===5?(i[1]=i[1]||{})[t[++a]]=l:c===6?i[1][t[++a]]+=l+"":c?(r=e.apply(l,E2(e,l,n,["",null])),i.push(r),l[0]?t[0]|=2:(t[a-2]=0,t[a]=r)):i.push(l)}return i},x1=new Map;function cM(e){var t=x1.get(this);return t||(t=new Map,x1.set(this,t)),(t=E2(this,t.get(e)||(t.set(e,t=function(n){for(var i,r,a=1,c="",l="",u=[0],f=function(g){a===1&&(g||(c=c.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?u.push(0,g,c):a===3&&(g||c)?(u.push(3,g,c),a=2):a===2&&c==="..."&&g?u.push(4,g,0):a===2&&c&&!g?u.push(5,0,!0,c):a>=5&&((c||!g&&a===5)&&(u.push(a,0,c,r),a=6),g&&(u.push(a,g,0,r),a=6)),c=""},d=0;d<n.length;d++){d&&(a===1&&f(),f(d));for(var m=0;m<n[d].length;m++)i=n[d][m],a===1?i==="<"?(f(),u=[u],a=3):c+=i:a===4?c==="--"&&i===">"?(a=1,c=""):c=i+c[0]:l?i===l?l="":c+=i:i==='"'||i==="'"?l=i:i===">"?(f(),a=1):a&&(i==="="?(a=5,r=c,c=""):i==="/"&&(a<5||n[d][m+1]===">")?(f(),a===3&&(u=u[0]),a=u,(u=u[0]).push(2,0,a),a=0):i===" "||i==="	"||i===`
`||i==="\r"?(f(),a=2):c+=i),a===3&&c==="!--"&&(a=4,u=u[0])}return f(),u}(e)),t),arguments,[])).length>1?t:t[0]}var Xt=cM.bind(d2),Ws,Nt,Qm,w1,xl=0,x2=[],zt=bt,b1=zt.__b,S1=zt.__r,C1=zt.diffed,T1=zt.__c,P1=zt.unmount,R1=zt.__;function id(e,t){zt.__h&&zt.__h(Nt,e,xl||t),xl=0;var n=Nt.__H||(Nt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function Zm(e){return xl=1,lM(w2,e)}function lM(e,t,n){var i=id(Ws++,2);if(i.t=e,!i.__c&&(i.__=[w2(void 0,t),function(l){var u=i.__N?i.__N[0]:i.__[0],f=i.t(u,l);u!==f&&(i.__N=[f,i.__[1]],i.__c.setState({}))}],i.__c=Nt,!Nt.u)){var r=function(l,u,f){if(!i.__c.__H)return!0;var d=i.__c.__H.__.filter(function(g){return!!g.__c});if(d.every(function(g){return!g.__N}))return!a||a.call(this,l,u,f);var m=i.__c.props!==l;return d.forEach(function(g){if(g.__N){var _=g.__[0];g.__=g.__N,g.__N=void 0,_!==g.__[0]&&(m=!0)}}),a&&a.call(this,l,u,f)||m};Nt.u=!0;var a=Nt.shouldComponentUpdate,c=Nt.componentWillUpdate;Nt.componentWillUpdate=function(l,u,f){if(this.__e){var d=a;a=void 0,r(l,u,f),a=d}c&&c.call(this,l,u,f)},Nt.shouldComponentUpdate=r}return i.__N||i.__}function Jm(e,t){var n=id(Ws++,3);!zt.__s&&Fg(n.__H,t)&&(n.__=e,n.i=t,Nt.__H.__h.push(n))}function bf(e,t){var n=id(Ws++,4);!zt.__s&&Fg(n.__H,t)&&(n.__=e,n.i=t,Nt.__h.push(n))}function $g(e){return xl=5,wl(function(){return{current:e}},[])}function wl(e,t){var n=id(Ws++,7);return Fg(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Fs(e,t){return xl=8,wl(function(){return e},t)}function uM(){for(var e;e=x2.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(sf),e.__H.__h.forEach(Nv),e.__H.__h=[]}catch(t){e.__H.__h=[],zt.__e(t,e.__v)}}zt.__b=function(e){Nt=null,b1&&b1(e)},zt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),R1&&R1(e,t)},zt.__r=function(e){S1&&S1(e),Ws=0;var t=(Nt=e.__c).__H;t&&(Qm===Nt?(t.__h=[],Nt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(sf),t.__h.forEach(Nv),t.__h=[],Ws=0)),Qm=Nt},zt.diffed=function(e){C1&&C1(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(x2.push(t)!==1&&w1===zt.requestAnimationFrame||((w1=zt.requestAnimationFrame)||pM)(uM)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Qm=Nt=null},zt.__c=function(e,t){t.some(function(n){try{n.__h.forEach(sf),n.__h=n.__h.filter(function(i){return!i.__||Nv(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],zt.__e(i,n.__v)}}),T1&&T1(e,t)},zt.unmount=function(e){P1&&P1(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{sf(i)}catch(r){t=r}}),n.__H=void 0,t&&zt.__e(t,n.__v))};var A1=typeof requestAnimationFrame=="function";function pM(e){var t,n=function(){clearTimeout(i),A1&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);A1&&(t=requestAnimationFrame(n))}function sf(e){var t=Nt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Nt=t}function Nv(e){var t=Nt;e.__c=e.__(),Nt=t}function Fg(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function w2(e,t){return typeof t=="function"?t(e):t}function b2(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=b2(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function Sf(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=b2(e))&&(i&&(i+=" "),i+=t);return i}function fM(e){const{entry:t,selected:n,onMouseEnter:i,onMouseLeave:r,onAction:a}=e;return Xt`
    <li
      class=${Sf("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      onClick=${a}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${c=>a(c,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Sf("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl?Xt`
            <img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />
          `:null}

          ${t.label?Xt`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&Xt`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&Xt`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${c=>c.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function dM(e){const{selectedEntry:t,setSelectedEntry:n,entries:i,...r}=e,a=$g(),c=wl(()=>hM(i),[i]);return bf(()=>{const l=a.current;if(!l)return;const u=l.querySelector(".selected");u&&mM(u)},[t]),Xt`
    <div class="djs-popup-results" ref=${a}>
      ${c.map(l=>Xt`
        ${l.name&&Xt`
          <div key=${l.id} class="entry-header" title=${l.name}>
            ${l.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${l.id}>
          ${l.entries.map(u=>Xt`
            <${fM}
              key=${u.id}
              entry=${u}
              selected=${u===t}
              onMouseEnter=${()=>n(u)}
              onMouseLeave=${()=>n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function hM(e){const t=[],n=a=>t.find(c=>a.id===c.id),i=a=>!!n(a),r=a=>typeof a=="string"?{id:a}:a;return e.forEach(a=>{const c=a.group?r(a.group):{id:"default"};i(c)?n(c).entries.push(a):t.push({...c,entries:[a]})}),t}function mM(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function vM(e){const{onClose:t,onSelect:n,className:i,headerEntries:r,position:a,title:c,width:l,scale:u,search:f,entries:d,onOpened:m,onClosed:g}=e,_=wl(()=>Vt(f)?d.length>5:!1,[f,d]),x=$g(),[S,C]=Zm(""),z=Fs((q,ae)=>{if(!_)return q;const ce=Ae=>{if(!ae)return(Ae.rank||0)>=0;const nt=[Ae.description||"",Ae.label||"",Ae.search||""].join("---").toLowerCase();return ae.toLowerCase().split(/\s/g).every(Me=>nt.includes(Me))};return q.filter(ce)},[_]),[D,M]=Zm(z(d,S)),[A,j]=Zm(D[0]),G=Fs(q=>{(!A||!q.includes(A))&&j(q[0]),M(q)},[A,M,j]);Jm(()=>{G(z(d,S))},[S,d]),Jm(()=>{const q=ae=>{if(ae.key==="Escape")return ae.preventDefault(),t()};return document.documentElement.addEventListener("keydown",q),()=>{document.documentElement.removeEventListener("keydown",q)}},[]),bf(()=>{x.current&&x.current.focus()},[]);const L=Fs(q=>{let ce=D.indexOf(A)+q;ce<0&&(ce=D.length-1),ce>=D.length&&(ce=0),j(D[ce])},[D,A,j]),$=Fs(q=>{if(q.key==="Enter"&&A)return n(q,A);if(q.key==="ArrowUp"||q.key==="Tab"&&q.shiftKey)return L(-1),q.preventDefault();if(q.key==="ArrowDown"||q.key==="Tab")return L(1),q.preventDefault()},[n,t,A,L]),O=Fs(q=>{lg(q.target,"input")&&C(()=>q.target.value)},[C]);Jm(()=>(m(),()=>{g()}),[]);const Y=wl(()=>c||r.length>0,[c,r]);return Xt`
    <${D1}
      onClose=${t}
      onKeyup=${O}
      onKeydown=${$}
      className=${i}
      position=${a}
      width=${l}
      scale=${u}
    >
      ${Y&&Xt`
        <div class="djs-popup-header">
          <h3 class="djs-popup-title" title=${c}>${c}</h3>
          ${r.map(q=>Xt`
            <span
              class=${yM(q,q===A)}
              onClick=${ae=>n(ae,q)}
              title=${q.title||q.label}
              data-id=${q.id}
              onMouseEnter=${()=>j(q)}
              onMouseLeave=${()=>j(null)}
            >
              ${q.imageUrl?Xt`
                <img class="djs-popup-entry-icon" src=${q.imageUrl} alt="" />
              `:null}

              ${q.label?Xt`
                <span class="djs-popup-label">${q.label}</span>
              `:null}
            </span>
          `)}
        </div>
      `}
      ${d.length>0&&Xt`
        <div class="djs-popup-body">

          ${_&&Xt`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input
                ref=${x}
                type="text"
              />
          </div>
          `}

          <${dM}
            entries=${D}
            selectedEntry=${A}
            setSelectedEntry=${j}
            onAction=${n}
          />
        </div>
        ${D.length===0&&Xt`
          <div class="djs-popup-no-results">No matching entries found.</div>
        `}
      `}
    </${D1}>
  `}function D1(e){const{onClose:t,onKeydown:n,onKeyup:i,className:r,children:a,position:c}=e,l=$g(),u=Fs(f=>{Ir(f.target,".djs-popup",!0)||t()},[t]);return bf(()=>{if(typeof c!="function")return;const f=l.current,d=c(f);f.style.left=`${d.x}px`,f.style.top=`${d.y}px`},[l.current,c]),bf(()=>{l.current&&l.current.focus()},[]),Xt`
    <div
      class="djs-popup-backdrop"
      onClick=${u}
    >
      <div
        class=${Sf("djs-popup",r)}
        style=${gM(e)}
        onKeydown=${n}
        onKeyup=${i}
        ref=${l}
        tabIndex="-1"
      >
        ${a}
      </div>
    </div>
  `}function gM(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`}}function yM(e,t){return Sf("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}var _M="data-id",S2=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],EM=1e3;function kt(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var i=Vt(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:i},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",r=>{const a=this.isOpen()&&this._current.element;r.element===a&&this._render()})}kt.$inject=["config.popupMenu","eventBus","canvas"];kt.prototype._render=function(){const{position:e,className:t,entries:n,headerEntries:i,options:r}=this._current,a=Object.entries(n).map(([m,g])=>({id:m,...g})),c=Object.entries(i).map(([m,g])=>({id:m,...g})),l=e&&(m=>this._ensureVisible(m,e)),u=this._updateScale(this._current.container);_2(Xt`
      <${vM}
        onClose=${m=>this.close(m)}
        onSelect=${(m,g,_)=>this.trigger(m,g,_)}
        position=${l}
        className=${t}
        entries=${a}
        headerEntries=${c}
        scale=${u}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...r}}
      />
    `,this._current.container)};kt.prototype.open=function(e,t,n,i){if(!e)throw new Error("Element is missing");if(!t)throw new Error("No registered providers for: "+t);if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:a}=this._getContext(e,t);this._current={position:n,className:t,element:e,entries:r,headerEntries:a,container:this._createContainer({provider:t}),options:i},this._emit("open"),this._bindAutoClose(),this._render()};kt.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("No registered providers for: "+t);const i=this._getEntries(e,n),r=this._getHeaderEntries(e,n);return{entries:i,headerEntries:r,empty:!(Object.keys(i).length||Object.keys(r).length)}};kt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};kt.prototype.reset=function(){const e=this._current.container;_2(null,e),ar(e)};kt.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};kt.prototype._onOpened=function(){this._emit("opened")};kt.prototype._onClosed=function(){this._emit("closed")};kt.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const i=et(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(i),i};kt.prototype._bindAutoClose=function(){this._eventBus.once(S2,this.close,this)};kt.prototype._unbindAutoClose=function(){this._eventBus.off(S2,this.close,this)};kt.prototype._updateScale=function(e){var t=this._canvas.zoom(),n=this._config.scale,i,r,a=t;return n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Vt(i)&&t<i&&(a=i),Vt(r)&&t>r&&(a=r)),a};kt.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect(),r={},a=t.x,c=t.y;return t.x+i.width>n.width&&(r.x=!0),t.y+i.height>n.height&&(r.y=!0),r.x&&r.y?(a=t.x-i.width,c=t.y-i.height):r.x?(a=t.x-i.width,c=t.y):r.y&&t.y<i.height?(a=t.x,c=10):r.y&&(a=t.x,c=t.y-i.height),{x:a,y:c}};kt.prototype.isEmpty=function(e,t){if(!e)throw new Error("element parameter is missing");if(!t)throw new Error("providerId parameter is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};kt.prototype.registerProvider=function(e,t,n){n||(n=t,t=EM),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})};kt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};kt.prototype._getEntries=function(e,t){var n={};return W(t,function(i){if(!i.getPopupMenuEntries){W(i.getEntries(e),function(a){var c=a.id;if(!c)throw new Error("every entry must have the id property set");n[c]=Nr(a,["id"])});return}var r=i.getPopupMenuEntries(e);sn(r)?n=r(n):W(r,function(a,c){n[c]=a})}),n};kt.prototype._getHeaderEntries=function(e,t){var n={};return W(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;W(i.getHeaderEntries(e),function(a){var c=a.id;if(!c)throw new Error("every entry must have the id property set");n[c]=Nr(a,["id"])});return}var r=i.getPopupMenuHeaderEntries(e);sn(r)?n=r(n):W(r,function(a,c){n[c]=a})}),n};kt.prototype.isOpen=function(){return!!this._current};kt.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let r=Ir(e.delegateTarget||e.target,".entry",!0),a=bn(r,_M);t=this._getEntry(a)}const i=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(sn(i)){if(n==="click")return i(e,t)}else if(i[n])return i[n](e,t)}};kt.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const rd={__init__:["popupMenu"],popupMenu:["type",kt]};var C2={align:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%202000%202000%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M200%20150v1700%22%2F%3E%3Crect%20x%3D%22500%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22700%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22500%22%20y%3D%221150%22%20width%3D%22700%22%20height%3D%22700%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",bottom:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M150%201650h1500%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22350%22%20width%3D%22600%22%20height%3D%221300%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22850%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",center:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M900%20150v1500%22%2F%3E%3Crect%20x%3D%22250%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22500%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",left:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M100%20150v1500%22%2F%3E%3Crect%20x%3D%22100%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22100%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",right:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M1650%20150v1500%22%2F%3E%3Crect%20x%3D%22350%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22850%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",top:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M150%20150h1500%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22150%22%20width%3D%22600%22%20height%3D%221300%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22150%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",middle:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M150%20900h1500%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22250%22%20width%3D%22600%22%20height%3D%221300%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22500%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E"},xM=900;function ic(e,t,n,i){e.registerProvider(xM,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}ic.$inject=["contextPad","popupMenu","translate","canvas"];ic.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&J(t,this._getEntries(e)),t};ic.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};ic.prototype._getEntries=function(e){var t=this;return{"align-elements":{group:"align-elements",title:t._translate("Align elements"),imageUrl:C2.align,action:{click:function(n,i){var r=t._getMenuPosition(i);J(r,{cursor:{x:n.x,y:n.y}}),t._popupMenu.open(i,"align-elements",r)}}}}};ic.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,i=n.getBoundingClientRect(),r={x:i.left,y:i.bottom+t};return r};var wM=["left","center","right","top","middle","bottom"];function Bl(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}Bl.$inject=["popupMenu","alignElements","translate","rules"];Bl.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&J(t,this._getEntries(e)),t};Bl.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Bl.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,r={};return W(wM,function(a){r["align-elements-"+a]={group:"align",title:n("Align elements "+a),className:"bjs-align-elements-menu-entry",imageUrl:C2[a],action:function(c,l){t.trigger(e,a),i.close()}}}),r};function Yn(e){_e.call(this,e),this.init()}Yn.$inject=["eventBus"];Te(Yn,_e);Yn.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(a,c,l){return n(a)},!0)})};Yn.prototype.init=function(){};function od(e){Yn.call(this,e)}od.$inject=["eventBus"];Te(od,Yn);od.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=Ze(t,function(i){return!(i.waypoints||i.host||i.labelTarget)});return n=$f(n),n.length<2?!1:n})};const bM={__depends__:[eM,Mg,rd],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",ic],alignElementsMenuProvider:["type",Bl],bpmnAlignElements:["type",od]};var SM=10,T2=50,CM=250;function jg(e,t,n,i){for(var r;r=TM(e,n,t);)n=i(t,n,r);return n}function zg(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(a){var c=e[a];if(c){var l=a==="x"?"width":"height",u=c.margin,f=c.minDistance;u<0?r[a]=Math.min(i[a]+u-t[l]/2,n[a]-f+u):r[a]=Math.max(i[a]+i[l]+u+t[l]/2,n[a]+f+u)}}),r}}function TM(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},r=RM(e);return at(r,function(a){if(a===n)return!1;var c=hn(a,i,SM);return c==="intersect"})}function PM(e,t){t||(t={});function n(x){return x.source===e?1:-1}var i=t.defaultDistance||T2,r=t.direction||"e",a=t.filter,c=t.getWeight||n,l=t.maxDistance||CM,u=t.reference||"start";a||(a=kM);function f(x,S){return r==="n"?u==="start"?Fe(x).top-Fe(S).bottom:u==="center"?Fe(x).top-Ke(S).y:Fe(x).top-Fe(S).top:r==="w"?u==="start"?Fe(x).left-Fe(S).right:u==="center"?Fe(x).left-Ke(S).x:Fe(x).left-Fe(S).left:r==="s"?u==="start"?Fe(S).top-Fe(x).bottom:u==="center"?Ke(S).y-Fe(x).bottom:Fe(S).bottom-Fe(x).bottom:u==="start"?Fe(S).left-Fe(x).right:u==="center"?Ke(S).x-Fe(x).right:Fe(S).right-Fe(x).right}var d=e.incoming.filter(a).map(function(x){var S=c(x),C=S<0?f(x.source,e):f(e,x.source);return{id:x.source.id,distance:C,weight:S}}),m=e.outgoing.filter(a).map(function(x){var S=c(x),C=S>0?f(e,x.target):f(x.target,e);return{id:x.target.id,distance:C,weight:S}}),g=d.concat(m).reduce(function(x,S){return x[S.id+"__weight_"+S.weight]=S,x},{}),_=Un(g,function(x,S){var C=S.distance,z=S.weight;return C<0||C>l||(x[String(C)]||(x[String(C)]=0),x[String(C)]+=1*z,(!x.distance||x[x.distance]<x[String(C)])&&(x.distance=C)),x},{});return _.distance||i}function RM(e){var t=ev(e);return e.host&&(t=t.concat(ev(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(ev(i))},[]))),t}function ev(e){return DM(e).concat(AM(e))}function AM(e){return e.incoming.map(function(t){return t.source})}function DM(e){return e.outgoing.map(function(t){return t.target})}function kM(){return!0}var MM=100;function P2(e,t,n){e.on("autoPlace",MM,function(i){var r=i.shape,a=i.source;return NM(a,r)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,a){e.fire("autoPlace.start",{source:i,shape:r});var c=e.fire("autoPlace",{source:i,shape:r}),l=t.appendShape(i,r,c,i.parent,a);return e.fire("autoPlace.end",{source:i,shape:l}),l}}P2.$inject=["eventBus","modeling","canvas"];function NM(e,t,n){n||(n={});var i=n.defaultDistance||T2,r=Ke(e),a=Fe(e);return{x:a.right+i+t.width/2,y:r.y}}function R2(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}R2.$inject=["eventBus","selection"];const A2={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",P2],autoPlaceSelectionBehavior:["type",R2]};function Cf(e,t){for(typeof t=="string"&&(t=[t]);e=e.parent;)if(tt(e,t))return e;return null}function D2(e,t){if(b(t,"bpmn:TextAnnotation"))return LM(e,t);if(tt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return BM(e,t);if(b(t,"bpmn:FlowNode"))return IM(e,t)}function IM(e,t){var n=Fe(e),i=Ke(e),r=PM(e,{filter:function(d){return b(d,"bpmn:SequenceFlow")}}),a=30,c=80,l="left";b(e,"bpmn:BoundaryEvent")&&(l=hn(e,e.host,-25),l.indexOf("top")!==-1&&(a*=-1));var u={x:n.right+r+t.width/2,y:i.y+OM(l,c)},f={y:{margin:a,minDistance:c}};return jg(e,t,u,zg(f))}function OM(e,t){return e.indexOf("top")!=-1?-1*t:e.indexOf("bottom")!=-1?t:0}function LM(e,t){var n=Fe(e),i={x:n.right+t.width/2,y:n.top-50-t.height/2};$M(e)&&(i=Ke(e),i.x+=100,i.y-=50);var r={y:{margin:-30,minDistance:20}};return jg(e,t,i,zg(r))}function BM(e,t){var n=Fe(e),i={x:n.right-10+t.width/2,y:n.bottom+40+t.width/2},r={x:{margin:30,minDistance:30}};return jg(e,t,i,zg(r))}function $M(e){return!!e.waypoints}function k2(e){e.on("autoPlace",function(t){var n=t.shape,i=t.source;return D2(i,n)})}k2.$inject=["eventBus"];const M2={__depends__:[A2],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",k2]};function Fr(e,t,n,i){_e.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(a){var c=a.context,l=c.hints||{},u=c.shape,f=c.parent||c.newParent;l.autoResize!==!1&&r._expand([u],f)}),this.postExecuted(["elements.move"],function(a){var c=a.context,l=hf(ag(c.closure.topLevel)),u=c.hints,f=u?u.autoResize:!0;if(f!==!1){var d=qs(l,function(m){return m.parent.id});W(d,function(m,g){Je(f)&&(m=m.filter(function(_){return at(f,Bi({id:_.id}))})),r._expand(m,g)})}}),this.postExecuted(["shape.toggleCollapse"],function(a){var c=a.context,l=c.hints,u=c.shape;l&&l.autoResize===!1||u.collapsed||r._expand(u.children||[],u)}),this.postExecuted(["shape.resize"],function(a){var c=a.context,l=c.hints,u=c.shape,f=u.parent;l&&l.autoResize===!1||f&&r._expand([u],f)})}Fr.$inject=["eventBus","elementRegistry","modeling","rules"];Te(Fr,_e);Fr.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=Fe(Ot(e)),a=Fe(t),c={};return r.top-a.top<i.top&&(c.top=r.top-n.top),r.left-a.left<i.left&&(c.left=r.left-n.left),a.right-r.right<i.right&&(c.right=r.right+n.right),a.bottom-r.bottom<i.bottom&&(c.bottom=r.bottom+n.bottom),Ff(J({},a,c))};Fr.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var i=this._getOptimalBounds(e,t);if(FM(i,t)){var r=jM(zi(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:r});var a=t.parent;a&&this._expand([t],a)}}};Fr.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};Fr.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};Fr.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function FM(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function jM(e,t){var n="";return e=Fe(e),t=Fe(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function ad(e){e.invoke(Fr,this)}ad.$inject=["injector"];Te(ad,Fr);ad.prototype.resize=function(e,t,n){b(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function $l(e){Yn.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}$l.$inject=["eventBus"];Te($l,Yn);$l.prototype.canResize=function(e,t){return!1};function sd(e,t){$l.call(this,e),this._modeling=t}Te(sd,$l);sd.$inject=["eventBus","modeling"];sd.prototype.canResize=function(e,t){if(b(t.di,"bpmndi:BPMNPlane")||!b(t,"bpmn:Participant")&&!b(t,"bpmn:Lane")&&!b(t,"bpmn:SubProcess"))return!1;var n=!0;return W(e,function(i){if(b(i,"bpmn:Lane")||i.labelTarget){n=!1;return}}),n};const zM={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",ad],bpmnAutoResizeProvider:["type",sd]};var k1=1500;function N2(e,t,n){var i=this,r=n.get("dragging",!1);function a(c){if(!c.hover){var l=c.originalEvent,u=i._findTargetGfx(l),f=u&&e.get(u);u&&f&&(c.stopPropagation(),r.hover({element:f,gfx:u}),r.move(l))}}r&&t.on("drag.start",function(c){t.once("drag.move",k1,function(l){a(l)})}),function(){var c,l;t.on("element.hover",function(u){c=u.gfx,l=u.element}),t.on("element.hover",k1,function(u){l&&t.fire("element.out",{element:l,gfx:c})}),t.on("element.out",function(){c=null,l=null})}(),this._findTargetGfx=function(c){var l,u;if(c instanceof MouseEvent)return l=No(c),u=document.elementFromPoint(l.x,l.y),HM(u)}}N2.$inject=["elementRegistry","eventBus","injector"];function HM(e){return Ir(e,"svg, .djs-element",!0)}const VM={__init__:["hoverFix"],hoverFix:["type",N2]};var Ls=Math.round,M1="djs-drag-active";function Ta(e){e.preventDefault()}function GM(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function UM(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function I2(e,t,n,i){var r={threshold:5,trapClick:!0},a;function c(M){var A=t.viewbox(),j=t._container.getBoundingClientRect();return{x:A.x+(M.x-j.left)/A.scale,y:A.y+(M.y-j.top)/A.scale}}function l(M,A){A=A||a;var j=e.createEvent(J({},A.payload,A.data,{isTouch:A.isTouch}));return e.fire("drag."+M,j)===!1?!1:e.fire(A.prefix+"."+M,j)}function u(M){var A=M.filter(function(j){return i.get(j.id)});A.length&&n.select(A)}function f(M,A){var j=a.payload,G=a.displacement,L=a.globalStart,$=No(M),O=$i($,L),Y=a.localStart,q=c($),ae=$i(q,Y);if(!a.active&&(A||UM(O)>a.threshold)){if(J(j,{x:Ls(Y.x+G.x),y:Ls(Y.y+G.y),dx:0,dy:0},{originalEvent:M}),l("start")===!1)return C();a.active=!0,a.keepSelection||(j.previousSelection=n.get(),n.select(null)),a.cursor&&ed(a.cursor),t.addMarker(t.getRootElement(),M1)}Wm(M),a.active&&(J(j,{x:Ls(q.x+G.x),y:Ls(q.y+G.y),dx:Ls(ae.x),dy:Ls(ae.y)},{originalEvent:M}),l("move"))}function d(M){var A,j=!0;a.active&&(M&&(a.payload.originalEvent=M,Wm(M)),j=l("end")),j===!1&&l("rejected"),A=z(j!==!0),l("ended",A)}function m(M){Qt("Escape",M)&&(Ta(M),C())}function g(M){var A;a.active&&(A=t2(e),setTimeout(A,400),Ta(M)),d(M)}function _(M){f(M)}function x(M){var A=a.payload;A.hoverGfx=M.gfx,A.hover=M.element,l("hover")}function S(M){l("out");var A=a.payload;A.hoverGfx=null,A.hover=null}function C(M){var A;if(a){var j=a.active;j&&l("cancel"),A=z(M),j&&l("canceled",A)}}function z(M){var A,j;l("cleanup"),e2(),a.trapClick?j=g:j=d,ke.unbind(document,"mousemove",f),ke.unbind(document,"dragstart",Ta),ke.unbind(document,"selectstart",Ta),ke.unbind(document,"mousedown",j,!0),ke.unbind(document,"mouseup",j,!0),ke.unbind(document,"keyup",m),ke.unbind(document,"touchstart",_,!0),ke.unbind(document,"touchcancel",C,!0),ke.unbind(document,"touchmove",f,!0),ke.unbind(document,"touchend",d,!0),e.off("element.hover",x),e.off("element.out",S),t.removeMarker(t.getRootElement(),M1);var G=a.payload.previousSelection;return M!==!1&&G&&!n.get().length&&u(G),A=a,a=null,A}function D(M,A,j,G){a&&C(!1),typeof A=="string"&&(G=j,j=A,A=null),G=J({},r,G||{});var L=G.data||{},$,O,Y,q,ae;G.trapClick?q=g:q=d,M?($=ec(M)||M,O=No(M),Wm(M),$.type==="dragstart"&&Ta($)):($=null,O={x:0,y:0}),Y=c(O),A||(A=Y),ae=GM($),a=J({prefix:j,data:L,payload:{},globalStart:O,displacement:$i(A,Y),localStart:Y,isTouch:ae},G),G.manual||(ae?(ke.bind(document,"touchstart",_,!0),ke.bind(document,"touchcancel",C,!0),ke.bind(document,"touchmove",f,!0),ke.bind(document,"touchend",d,!0)):(ke.bind(document,"mousemove",f),ke.bind(document,"dragstart",Ta),ke.bind(document,"selectstart",Ta),ke.bind(document,"mousedown",q,!0),ke.bind(document,"mouseup",q,!0)),ke.bind(document,"keyup",m),e.on("element.hover",x),e.on("element.out",S)),l("init"),G.autoActivate&&f(M,!0)}e.on("diagram.destroy",C),this.init=D,this.move=f,this.hover=x,this.out=S,this.end=d,this.cancel=C,this.context=function(){return a},this.setOptions=function(M){J(r,M)}}I2.$inject=["eventBus","canvas","selection","elementRegistry"];const jr={__depends__:[VM,cr],dragging:["type",I2]};function rc(e,t,n){this._canvas=n,this._opts=J({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(r){var a=i._toBorderPoint(r);i.startScroll(a)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}rc.$inject=["config.autoScroll","eventBus","canvas"];rc.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),a=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var c=0,l=0,u=0;u<4;u++)WM(a[u],n.scrollThresholdOut[u],n.scrollThresholdIn[u])&&(u===0?c=n.scrollStep:u==1?l=n.scrollStep:u==2?c=-n.scrollStep:u==3&&(l=-n.scrollStep));(c!==0||l!==0)&&(t.scroll({dx:c,dy:l}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function WM(e,t,n){return t<e&&e<n}rc.prototype.stopScroll=function(){clearTimeout(this._scrolling)};rc.prototype.setOptions=function(e){this._opts=J({},this._opts,e)};rc.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=No(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const YM={__depends__:[jr],__init__:["autoScroll"],autoScroll:["type",rc]};function Hg(e){this._commandStack=e.get("commandStack",!1)}Hg.$inject=["injector"];Hg.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};const ur={__init__:["rules"],rules:["type",Hg]};var Mp=Math.round,KM=Math.max;function qM(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function XM(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var O2=10;function QM(e,t){var n,i;for(n=0;i=e[n];n++)if(Al(i,t)<=O2)return{point:e[n],bendpoint:!0,index:n};return null}function ZM(e,t){var n=nb(qM(t,O2),XM(e)),i=n[0],r=n[n.length-1],a;return i?i!==r?i.segment2!==r.segment2?(a=KM(i.segment2,r.segment2)-1,{point:e[a],bendpoint:!0,index:a}):{point:{x:Mp(i.x+r.x)/2,y:Mp(i.y+r.y)/2},index:i.segment2}:{point:{x:Mp(i.x),y:Mp(i.y)},index:i.segment2}:null}function Iv(e,t){return QM(e,t)||ZM(e,t)}function L2(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function N1(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function JM(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function eN(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],r=i[0].n*t[0]+i[1].n*t[1],a=i[0].lambda*t[0]+i[1].lambda*t[1];return-r/a}function Vg(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},a=eN([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+a*r.x,y:n.y+a*r.y}}function B2(e,t){var n=Vg(e,t),i={x:n.x-e.x,y:n.y-e.y};return L2(i)}function Tf(e,t){return L2({x:e.x-t.x,y:e.y-t.y})}var $2="djs-bendpoint",F2="djs-segment-dragger";function tN(e,t){var n=No(t),i=e._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var a=e.viewbox();return{x:a.x+(n.x-r.x)/a.scale,y:a.y+(n.y-r.y)/a.scale}}function Ov(e,t,n){var i=tN(e,n),r=Iv(t,i);return r}function Lv(e,t){var n=Be("g");ot(n).add($2),Ge(e,n);var i=Be("circle");Se(i,{cx:0,cy:0,r:4}),ot(i).add("djs-visual"),Ge(n,i);var r=Be("circle");return Se(r,{cx:0,cy:0,r:10}),ot(r).add("djs-hit"),Ge(n,r),t&&ot(n).add(t),n}function nN(e,t,n,i){var r=Be("g");Ge(e,r);var a=18,c=6,l=11,u=rN(t,n,i),f=c+l,d=Be("rect");Se(d,{x:-a/2,y:-c/2,width:a,height:c}),ot(d).add("djs-visual"),Ge(r,d);var m=Be("rect");return Se(m,{x:-u/2,y:-f/2,width:u,height:f}),ot(m).add("djs-hit"),Ge(r,m),mb(r,i==="v"?90:0),r}function j2(e,t,n){var i=Be("g"),r=wv(t,n),a=Pr(t,n);return Ge(e,i),nN(i,t,n,a),ot(i).add(F2),ot(i).add(a==="h"?"horizontal":"vertical"),Gn(i,r.x,r.y),i}function Bv(e){return Math.abs(Math.round(e*2/3))}function iN(e,t){var n=oN(e,t);return Vg(e,n)}function rN(e,t,n){var i=t.x-e.x,r=t.y-e.y;return Bv(n==="h"?i:r)}function oN(e,t){for(var n=t.waypoints,i=1/0,r,a=0;a<n.length-1;a++){var c=n[a],l=n[a+1],u=B2(e,[c,l]);u<i&&(i=u,r=a)}return[n[r],n[r+1]]}function z2(e,t,n,i,r){function a(M,A,j){var G=M.index,L=M.point,$,O,Y,q,ae,ce;return G<=0||M.bendpoint?!1:($=A[G-1],O=A[G],Y=wv($,O),q=Pr($,O),ae=Math.abs(L.x-Y.x),ce=Math.abs(L.y-Y.y),q&&ae<=j&&ce<=j)}function c(M,A){var j=M.waypoints,G,L,$,O;return A.index<=0||A.bendpoint||(G={start:j[A.index-1],end:j[A.index]},L=Pr(G.start,G.end),!L)?null:(L==="h"?$=G.end.x-G.start.x:$=G.end.y-G.start.y,O=Bv($)/2,O)}function l(M,A){var j=A.waypoints,G=Ov(t,j,M),L;if(G)return L=c(A,G),a(G,j,L)?r.start(M,A,G.index):i.start(M,A,G.index,!G.bendpoint),!0}function u(M,A,j){ke.bind(M,A,function(G){n.triggerMouseEvent(A,G,j),G.stopPropagation()})}function f(M,A){var j=t.getLayer("overlays"),G=ft('.djs-bendpoints[data-element-id="'+yl(M.id)+'"]',j);return!G&&A&&(G=Be("g"),Se(G,{"data-element-id":M.id}),ot(G).add("djs-bendpoints"),Ge(j,G),u(G,"mousedown",M),u(G,"click",M),u(G,"dblclick",M)),G}function d(M,A){return ft('.djs-segment-dragger[data-segment-idx="'+M+'"]',A)}function m(M,A){A.waypoints.forEach(function(j,G){var L=Lv(M);Ge(M,L),Gn(L,j.x,j.y)}),Lv(M,"floating")}function g(M,A){for(var j=A.waypoints,G,L,$,O=1;O<j.length;O++)G=j[O-1],L=j[O],Pr(G,L)&&($=j2(M,G,L),Se($,{"data-segment-idx":O}),u($,"mousemove",A))}function _(M){W(Mr("."+$2,M),function(A){Dt(A)})}function x(M){W(Mr("."+F2,M),function(A){Dt(A)})}function S(M){var A=f(M);return A||(A=f(M,!0),m(A,M),g(A,M)),A}function C(M){var A=f(M);A&&(x(A),_(A),g(A,M),m(A,M))}function z(M,A){var j=ft(".floating",M),G=A.point;j&&Gn(j,G.x,G.y)}function D(M,A,j){var G=d(A.index,M),L=j[A.index-1],$=j[A.index],O=A.point,Y=wv(L,$),q=Pr(L,$),ae,ce;G&&(ae=aN(G),ce={x:O.x-Y.x,y:O.y-Y.y},q==="v"&&(ce={x:ce.y,y:ce.x}),Gn(ae,ce.x,ce.y))}e.on("connection.changed",function(M){C(M.element)}),e.on("connection.remove",function(M){var A=f(M.element);A&&Dt(A)}),e.on("element.marker.update",function(M){var A=M.element,j;A.waypoints&&(j=S(A),M.add?ot(j).add(M.marker):ot(j).remove(M.marker))}),e.on("element.mousemove",function(M){var A=M.element,j=A.waypoints,G,L;if(j){if(G=f(A,!0),L=Ov(t,j,M.originalEvent),!L)return;z(G,L),L.bendpoint||D(G,L,j)}}),e.on("element.mousedown",function(M){if(Bo(M)){var A=M.originalEvent,j=M.element;if(j.waypoints)return l(A,j)}}),e.on("selection.changed",function(M){var A=M.newSelection,j=A[0];j&&j.waypoints&&S(j)}),e.on("element.hover",function(M){var A=M.element;A.waypoints&&(S(A),n.registerEvent(M.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(M){n.unregisterEvent(M.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(M){var A=M.element,j=M.newId;if(A.waypoints){var G=f(A);G&&Se(G,{"data-element-id":j})}}),this.addHandles=S,this.updateHandles=C,this.getBendpointsContainer=f,this.getSegmentDragger=d}z2.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function aN(e){return ft(".djs-visual",e)}var I1=Math.round,Aa="reconnectStart",Da="reconnectEnd",Qc="updateWaypoints";function Gg(e,t,n,i,r,a){this._injector=e,this.start=function(c,l,u,f){var d=n.getGraphics(l),m=l.source,g=l.target,_=l.waypoints,x;!f&&u===0?x=Aa:!f&&u===_.length-1?x=Da:x=Qc;var S=x===Qc?"connection.updateWaypoints":"connection.reconnect",C=r.allowed(S,{connection:l,source:m,target:g});C===!1&&(C=r.allowed(S,{connection:l,source:g,target:m})),C!==!1&&i.init(c,"bendpoint.move",{data:{connection:l,connectionGfx:d,context:{allowed:C,bendpointIndex:u,connection:l,source:m,target:g,insert:f,type:x}}})},t.on("bendpoint.move.hover",function(c){var l=c.context,u=l.connection,f=u.source,d=u.target,m=c.hover,g=l.type;l.hover=m;var _;if(m){var x=g===Qc?"connection.updateWaypoints":"connection.reconnect";if(_=l.allowed=r.allowed(x,{connection:u,source:g===Aa?m:f,target:g===Da?m:d}),_){l.source=g===Aa?m:f,l.target=g===Da?m:d;return}_===!1&&(_=l.allowed=r.allowed(x,{connection:u,source:g===Da?m:d,target:g===Aa?m:f})),_&&(l.source=g===Da?m:d,l.target=g===Aa?m:f)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(c){var l=c.context,u=l.type;l.hover=null,l.source=null,l.target=null,u!==Qc&&(l.allowed=!1)}),t.on("bendpoint.move.end",function(c){var l=c.context,u=l.allowed,f=l.bendpointIndex,d=l.connection,m=l.insert,g=d.waypoints.slice(),_=l.source,x=l.target,S=l.type,C=l.hints||{},z={x:I1(c.x),y:I1(c.y)};if(!u)return!1;S===Qc?(m?g.splice(f,0,z):g[f]=z,C.bendpointMove={insert:m,bendpointIndex:f},g=this.cropWaypoints(d,g),a.updateWaypoints(d,aA(g),C)):(S===Aa?(C.docking="source",Pf(l)&&(C.docking="target",C.newWaypoints=g.reverse())):S===Da&&(C.docking="target",Pf(l)&&(C.docking="source",C.newWaypoints=g.reverse())),a.reconnect(d,_,x,z,C))},this)}Gg.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];Gg.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function Pf(e){var t=e.hover,n=e.source,i=e.target,r=e.type;if(r===Aa)return t&&i&&t===i&&n!==i;if(r===Da)return t&&n&&t===n&&n!==i}var sN="reconnectStart",cN="reconnectEnd",O1="updateWaypoints",Zc="connect-ok",Np="connect-not-ok",L1="connect-hover",B1="djs-updating",$1="djs-element-hidden",F1=1100;function H2(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(a){var c=a.context,l=c.bendpointIndex,u=c.connection,f=c.insert,d=u.waypoints,m=d.slice();c.waypoints=d,f&&m.splice(l,0,{x:a.x,y:a.y}),u.waypoints=m;var g=c.draggerGfx=Lv(i.getLayer("overlays"));ot(g).add("djs-dragging"),i.addMarker(u,$1),i.addMarker(u,B1)}),n.on("bendpoint.move.hover",function(a){var c=a.context,l=c.allowed,u=c.hover,f=c.type;if(u){if(i.addMarker(u,L1),f===O1)return;l?(i.removeMarker(u,Np),i.addMarker(u,Zc)):l===!1&&(i.removeMarker(u,Zc),i.addMarker(u,Np))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],F1,function(a){var c=a.context,l=c.hover,u=c.target;l&&(i.removeMarker(l,L1),i.removeMarker(l,u?Zc:Np))}),n.on("bendpoint.move.move",function(a){var c=a.context,l=c.allowed,u=c.bendpointIndex,f=c.draggerGfx,d=c.hover,m=c.type,g=c.connection,_=g.source,x=g.target,S=g.waypoints.slice(),C={x:a.x,y:a.y},z=c.hints||{},D={};r&&(z.connectionStart&&(D.connectionStart=z.connectionStart),z.connectionEnd&&(D.connectionEnd=z.connectionEnd),m===sN?Pf(c)?(D.connectionEnd=D.connectionEnd||C,D.source=x,D.target=d||_,S=S.reverse()):(D.connectionStart=D.connectionStart||C,D.source=d||_,D.target=x):m===cN?Pf(c)?(D.connectionStart=D.connectionStart||C,D.source=d||x,D.target=_,S=S.reverse()):(D.connectionEnd=D.connectionEnd||C,D.source=_,D.target=d||x):(D.noCropping=!0,D.noLayout=!0,S[u]=C),m===O1&&(S=e.cropWaypoints(g,S)),D.waypoints=S,r.drawPreview(c,l,D)),Gn(f,a.x,a.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],F1,function(a){var c=a.context,l=c.connection,u=c.draggerGfx,f=c.hover,d=c.target,m=c.waypoints;l.waypoints=m,Dt(u),i.removeMarker(l,B1),i.removeMarker(l,$1),f&&(i.removeMarker(f,Zc),i.removeMarker(f,d?Zc:Np)),r&&r.cleanUp(c)})}H2.$inject=["bendpointMove","injector","eventBus","canvas"];var j1="connect-hover",z1="djs-updating";function H1(e,t,n){return Ug(e,t,e[t]+n)}function Ug(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function lN(e,t,n,i){var r=Math.max(t[i],n[i]),a=Math.min(t[i],n[i]),c=20,l=Math.min(Math.max(a+c,e[i]),r-c);return Ug(t,i,l)}function V2(e){return e==="x"?"y":"x"}function V1(e,t,n){var i,r;return e.original?e.original:(i=Ke(t),r=V2(n),Ug(e,r,i[r]))}function G2(e,t,n,i,r,a){var c=e.get("connectionDocking",!1);this.start=function(m,g,_){var x,S=n.getGraphics(g),C=_-1,z=_,D=g.waypoints,M=D[C],A=D[z],j=Ov(n,D,m),G,L,$;G=Pr(M,A),G&&(L=G==="v"?"x":"y",C===0&&(M=V1(M,g.source,L)),z===D.length-1&&(A=V1(A,g.target,L)),j?$=j.point:$={x:(M.x+A.x)/2,y:(M.y+A.y)/2},x={connection:g,segmentStartIndex:C,segmentEndIndex:z,segmentStart:M,segmentEnd:A,axis:L,dragPosition:$},i.init(m,$,"connectionSegment.move",{cursor:L==="x"?"resize-ew":"resize-ns",data:{connection:g,connectionGfx:S,context:x}}))};function l(m,g){if(!c)return g;var _=m.waypoints,x;return m.waypoints=g,x=c.getCroppedWaypoints(m),m.waypoints=_,x}function u(m){r.update("connection",m.connection,m.connectionGfx)}function f(m,g,_){var x=m.newWaypoints,S=m.segmentStartIndex+g,C=x[S],z=m.segmentEndIndex+g,D=x[z],M=V2(m.axis),A=lN(_,C,D,M);Gn(m.draggerGfx,A.x,A.y)}function d(m,g){var _=0,x=m.filter(function(S,C){return mg(m[C-1],m[C+1],S)?(_=C<=g?_-1:_,!1):!0});return{waypoints:x,segmentOffset:_}}t.on("connectionSegment.move.start",function(m){var g=m.context,_=m.connection,x=n.getLayer("overlays");g.originalWaypoints=_.waypoints.slice(),g.draggerGfx=j2(x,g.segmentStart,g.segmentEnd),ot(g.draggerGfx).add("djs-dragging"),n.addMarker(_,z1)}),t.on("connectionSegment.move.move",function(m){var g=m.context,_=g.connection,x=g.segmentStartIndex,S=g.segmentEndIndex,C=g.segmentStart,z=g.segmentEnd,D=g.axis,M=g.originalWaypoints.slice(),A=H1(C,D,m["d"+D]),j=H1(z,D,m["d"+D]),G=M.length,L=0;M[x]=A,M[S]=j;var $,O;x<2&&($=hn(_.source,A),x===1?$==="intersect"&&(M.shift(),M[0]=A,L--):$!=="intersect"&&(M.unshift(C),L++)),S>G-3&&(O=hn(_.target,j),S===G-2?O==="intersect"&&(M.pop(),M[M.length-1]=j):O!=="intersect"&&M.push(z)),g.newWaypoints=_.waypoints=l(_,M),f(g,L,m),g.newSegmentStartIndex=x+L,u(m)}),t.on("connectionSegment.move.hover",function(m){m.context.hover=m.hover,n.addMarker(m.hover,j1)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(m){var g=m.context.hover;g&&n.removeMarker(g,j1)}),t.on("connectionSegment.move.cleanup",function(m){var g=m.context,_=g.connection;g.draggerGfx&&Dt(g.draggerGfx),n.removeMarker(_,z1)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(m){var g=m.context,_=g.connection;_.waypoints=g.originalWaypoints,u(m)}),t.on("connectionSegment.move.end",function(m){var g=m.context,_=g.connection,x=g.newWaypoints,S=g.newSegmentStartIndex;x=x.map(function(j){return{original:j.original,x:Math.round(j.x),y:Math.round(j.y)}});var C=d(x,S),z=C.waypoints,D=l(_,z),M=C.segmentOffset,A={segmentMove:{segmentStartIndex:g.segmentStartIndex,newSegmentStartIndex:S+M}};a.updateWaypoints(_,D,A)})}G2.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var uN=Math.abs,G1=Math.round;function pN(e,t,n){n=n===void 0?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],uN(r-e)<=n)return r}function U2(e){return{x:e.x,y:e.y}}function W2(e){return{x:e.x+e.width,y:e.y+e.height}}function Ei(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:G1(e.x+e.width/2),y:G1(e.y+e.height/2)}}function Ys(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function It(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=e[t],a=e.snapped=e.snapped||{};return n===!1?a[t]=!1:(a[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function Y2(e){return e.children||[]}var fN=Math.abs,U1=Math.round,tv=10;function K2(e){function t(a,c){if(Je(a)){for(var l=a.length;l--;)if(fN(a[l]-c)<=tv)return a[l]}else{a=+a;var u=c%a;if(u<tv)return c-u;if(u>a-tv)return c-u+a}return c}function n(a,c){if(a.waypoints)return iN(c,a);if(a.width)return{x:U1(a.width/2+a.x),y:U1(a.height/2+a.y)}}function i(a){var c=a.context,l=c.snapPoints,u=c.connection,f=u.waypoints,d=c.segmentStart,m=c.segmentStartIndex,g=c.segmentEnd,_=c.segmentEndIndex,x=c.axis;if(l)return l;var S=[f[m-1],d,g,f[_+1]];return m<2&&S.unshift(n(u.source,a)),_>f.length-3&&S.unshift(n(u.target,a)),c.snapPoints=l={horizontal:[],vertical:[]},W(S,function(C){C&&(C=C.original||C,x==="y"&&l.horizontal.push(C.y),x==="x"&&l.vertical.push(C.x))}),l}e.on("connectionSegment.move.move",1500,function(a){var c=i(a),l=a.x,u=a.y,f,d;if(c){f=t(c.vertical,l),d=t(c.horizontal,u);var m=l-f,g=u-d;J(a,{dx:a.dx-m,dy:a.dy-g,x:f,y:d}),(m||c.vertical.indexOf(l)!==-1)&&It(a,"x",f),(g||c.horizontal.indexOf(u)!==-1)&&It(a,"y",d)}});function r(a){var c=a.snapPoints,l=a.connection.waypoints,u=a.bendpointIndex;if(c)return c;var f=[l[u-1],l[u+1]];return a.snapPoints=c={horizontal:[],vertical:[]},W(f,function(d){d&&(d=d.original||d,c.horizontal.push(d.y),c.vertical.push(d.x))}),c}e.on(["connect.hover","connect.move","connect.end"],1500,function(a){var c=a.context,l=c.hover,u=l&&n(l,a);!dN(l)||!u||!u.x||!u.y||(It(a,"x",u.x),It(a,"y",u.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(a){var c=a.context,l=r(c),u=c.hover,f=u&&n(u,a),d=a.x,m=a.y,g,_;if(l){g=t(f?l.vertical.concat([f.x]):l.vertical,d),_=t(f?l.horizontal.concat([f.y]):l.horizontal,m);var x=d-g,S=m-_;J(a,{dx:a.dx-x,dy:a.dy-S,x:a.x-x,y:a.y-S}),(x||l.vertical.indexOf(d)!==-1)&&It(a,"x",g),(S||l.horizontal.indexOf(m)!==-1)&&It(a,"y",_)}})}K2.$inject=["eventBus"];function dN(e){return e&&!!e.waypoints}const hN={__depends__:[jr,ur],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",z2],bendpointMove:["type",Gg],bendpointMovePreview:["type",H2],connectionSegmentMove:["type",G2],bendpointSnapping:["type",K2]};function q2(e,t,n,i){function r(c,l){return i.allowed("connection.create",{source:c,target:l})}function a(c,l){return r(l,c)}e.on("connect.hover",function(c){var l=c.context,u=l.start,f=c.hover,d;if(l.hover=f,d=l.canExecute=r(u,f),!mf(d)){if(d!==!1){l.source=u,l.target=f;return}d=l.canExecute=a(u,f),!mf(d)&&d!==!1&&(l.source=f,l.target=u)}}),e.on(["connect.out","connect.cleanup"],function(c){var l=c.context;l.hover=null,l.source=null,l.target=null,l.canExecute=!1}),e.on("connect.end",function(c){var l=c.context,u=l.canExecute,f=l.connectionStart,d={x:c.x,y:c.y},m=l.source,g=l.target;if(!u)return!1;var _=null,x={connectionStart:$v(l)?d:f,connectionEnd:$v(l)?f:d};dn(u)&&(_=u),l.connection=n.connect(m,g,_,x)}),this.start=function(c,l,u,f){dn(u)||(f=u,u=Ke(l)),t.init(c,"connect",{autoActivate:f,data:{shape:l,context:{start:l,connectionStart:u}}})}}q2.$inject=["eventBus","dragging","modeling","rules"];function $v(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var mN=1100,vN=900,W1="connect-ok",Y1="connect-not-ok";function X2(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var a=r.context,c=a.canExecute,l=a.hover,u=a.source,f=a.start,d=a.startPosition,m=a.target,g=a.connectionStart||d,_=a.connectionEnd||{x:r.x,y:r.y},x=g,S=_;$v(a)&&(x=_,S=g),i.drawPreview(a,c,{source:u||f,target:m||l,connectionStart:x,connectionEnd:S})}),t.on("connect.hover",vN,function(r){var a=r.context,c=r.hover,l=a.canExecute;l!==null&&n.addMarker(c,l?W1:Y1)}),t.on(["connect.out","connect.cleanup"],mN,function(r){var a=r.hover;a&&(n.removeMarker(a,W1),n.removeMarker(a,Y1))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}X2.$inject=["injector","eventBus","canvas"];const Wg={__depends__:[cr,ur,jr],__init__:["connectPreview"],connect:["type",q2],connectPreview:["type",X2]};var gN="djs-connection-preview";function zr(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}zr.$inject=["injector","canvas","graphicsFactory","elementFactory"];zr.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,r=e.getConnection,a=n.source,c=n.target,l=n.waypoints,u=n.connectionStart,f=n.connectionEnd,d=n.noLayout,m=n.noCropping,g=n.noNoop,_,x=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),pg(i),r||(r=e.getConnection=yN(function(S,C,z){return x.getConnection(S,C,z)})),t&&(_=r(t,a,c)),!_){!g&&this.drawNoopPreview(i,n);return}_.waypoints=l||[],this._layouter&&!d&&(_.waypoints=this._layouter.layoutConnection(_,{source:a,target:c,connectionStart:u,connectionEnd:f,waypoints:n.waypoints||_.waypoints})),(!_.waypoints||!_.waypoints.length)&&(_.waypoints=[a?Ke(a):u,c?Ke(c):f]),this._connectionDocking&&(a||c)&&!m&&(_.waypoints=this._connectionDocking.getCroppedWaypoints(_,a,c)),this._graphicsFactory.drawConnection(i,_)};zr.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||Ke(n),a=t.connectionEnd||Ke(i),c=this.cropWaypoints(r,a,n,i),l=this.createNoopConnection(c[0],c[1]);Ge(e,l)};zr.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,a=n&&r.getShapePath(n),c=i&&r.getShapePath(i),l=r.getConnectionPath({waypoints:[e,t]});return e=n&&bv(a,l,!0)||e,t=i&&bv(c,l,!1)||t,[e,t]};zr.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Dt(e.connectionPreviewGfx)};zr.prototype.getConnection=function(e){var t=_N(e);return this._elementFactory.createConnection(t)};zr.prototype.createConnectionPreviewGfx=function(){var e=Be("g");return Se(e,{pointerEvents:"none"}),ot(e).add(gN),Ge(this._canvas.getActiveLayer(),e),e};zr.prototype.createNoopConnection=function(e,t){return Bf([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function yN(e){var t={};return function(n){var i=JSON.stringify(n),r=t[i];return r||(r=t[i]=e.apply(null,arguments)),r}}function _N(e){return dn(e)?e:{}}const EN={__init__:["connectionPreview"],connectionPreview:["type",zr]};var K1=Math.min,q1=Math.max;function nv(e){e.preventDefault()}function pl(e){e.stopPropagation()}function xN(e){return e.nodeType===Node.TEXT_NODE}function wN(e){return[].slice.call(e)}function Vi(e){this.container=e.container,this.parent=et('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=ft("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=Dn(this.autoResize,this),this.handlePaste=Dn(this.handlePaste,this)}Vi.prototype.create=function(e,t,n,i){var r=this,a=this.parent,c=this.content,l=this.container;i=this.options=i||{},t=this.style=t||{};var u=zi(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);J(a.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},u);var f=zi(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return J(c.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},f),i.centerVertically&&J(c.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},f),c.innerText=n,ke.bind(c,"keydown",this.keyHandler),ke.bind(c,"mousedown",pl),ke.bind(c,"paste",r.handlePaste),i.autoResize&&ke.bind(c,"input",this.autoResize),i.resizable&&this.resizable(t),l.appendChild(a),this.setSelection(c.lastChild,c.lastChild&&c.lastChild.length),a};Vi.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var r=this.autoResize(n);r&&this.resizeHandler(r)}};Vi.prototype.insertText=function(e){e=bN(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};Vi.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,r=t.startOffset,a=t.endOffset,c=t.commonAncestorContainer,l=wN(c.childNodes),u,f;if(xN(c)){var d=n.textContent;n.textContent=d.substring(0,r)+e+d.substring(a),u=n,f=r+e.length}else if(n===this.content&&i===this.content){var m=document.createTextNode(e);this.content.insertBefore(m,l[r]),u=m,f=m.textContent.length}else{var g=l.indexOf(n),_=l.indexOf(i);l.forEach(function(x,S){S===g?x.textContent=n.textContent.substring(0,r)+e+i.textContent.substring(a):S>g&&S<=_&&ar(x)}),u=n,f=r+e.length}u&&f!==void 0&&setTimeout(function(){self.setSelection(u,f)})};Vi.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}};Vi.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,a=parseInt(this.style.maxWidth)||1/0,c=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=et('<div class="djs-direct-editing-resize-handle"></div>');var l,u,f,d,m=function(x){nv(x),pl(x),l=x.clientX,u=x.clientY;var S=t.getBoundingClientRect();f=S.width,d=S.height,ke.bind(document,"mousemove",g),ke.bind(document,"mouseup",_)},g=function(x){nv(x),pl(x);var S=K1(q1(f+x.clientX-l,i),a),C=K1(q1(d+x.clientY-u,r),c);t.style.width=S+"px",t.style.height=C+"px",e.resizeHandler({width:f,height:d,dx:x.clientX-l,dy:x.clientY-u})},_=function(x){nv(x),pl(x),ke.unbind(document,"mousemove",g,!1),ke.unbind(document,"mouseup",_,!1)};ke.bind(n,"mousedown",m)}J(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};Vi.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),ke.unbind(t,"keydown",this.keyHandler),ke.unbind(t,"mousedown",pl),ke.unbind(t,"input",this.autoResize),ke.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),ar(n)),ar(e)};Vi.prototype.getValue=function(){return this.content.innerText.trim()};Vi.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};Vi.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function bN(e){return e.replace(/\r\n|\r|\n/g,`
`)}function wi(e,t){this._eventBus=e,this._providers=[],this._textbox=new Vi({container:t.getContainer(),keyHandler:Dn(this._handleKey,this),resizeHandler:Dn(this._handleResize,this)})}wi.$inject=["eventBus","canvas"];wi.prototype.registerProvider=function(e){this._providers.push(e)};wi.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};wi.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};wi.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};wi.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0};wi.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),a=e.context.text;(r!==a||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}};wi.prototype.getValue=function(){return this._textbox.getValue()};wi.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};wi.prototype._handleResize=function(e){this._fire("resize",e)};wi.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=at(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const Q2={__depends__:[Ll],__init__:["directEditing"],directEditing:["type",wi]};var SN=["marker-start","marker-mid","marker-end"],CN=["circle","ellipse","line","path","polygon","polyline","path","rect"];function Va(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i,this._clonedMarkers={};var r=this;t.on("drag.cleanup",function(){W(r._clonedMarkers,function(a){Dt(a)}),r._clonedMarkers={}})}Va.$inject=["elementRegistry","eventBus","canvas","styles"];Va.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};Va.prototype.addDragger=function(e,t,n){n=n||this.getGfx(e);var i=Kw(n),r=n.getBoundingClientRect();return this._cloneMarkers(Ef(i)),Se(i,this._styles.cls("djs-dragger",[],{x:r.top,y:r.left})),Ge(t,i),i};Va.prototype.addFrame=function(e,t){var n=Be("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return Ge(t,n),n};Va.prototype._cloneMarkers=function(e){var t=this;if(e.childNodes)for(var n=0;n<e.childNodes.length;n++)t._cloneMarkers(e.childNodes[n]);AN(e)&&SN.forEach(function(i){if(Se(e,i)){var r=TN(e,i,t._canvas.getContainer());t._cloneMarker(e,r,i)}})};Va.prototype._cloneMarker=function(e,t,n){var i=t.id,r=this._clonedMarkers[i];if(!r){r=Kw(t);var a=i+"-clone";r.id=a,ot(r).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[i]=r;var c=ft("defs",this._canvas._svg);c||(c=Be("defs"),Ge(this._canvas._svg,c)),Ge(c,r)}var l=RN(this._clonedMarkers[i].id);Se(e,n,l)};function TN(e,t,n){var i=PN(Se(e,t));return ft("marker#"+i,n||document)}function PN(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function RN(e){return"url(#"+e+")"}function AN(e){return CN.indexOf(e.nodeName)!==-1}const Fl={__init__:["previewSupport"],previewSupport:["type",Va]};var DN="drop-ok",X1="drop-not-ok",Q1="attach-ok",Z1="new-parent",J1="create",kN=2e3;function Z2(e,t,n,i,r){function a(u,f,d,m,g){if(!f)return!1;u=Ze(u,function(D){var M=D.labelTarget;return!D.parent&&!(MN(D)&&u.indexOf(M)!==-1)});var _=at(u,function(D){return!ol(D)}),x=!1,S=!1,C=!1;tx(u)&&(x=r.allowed("shape.attach",{position:d,shape:_,target:f})),x||(tx(u)?C=r.allowed("shape.create",{position:d,shape:_,source:m,target:f}):C=r.allowed("elements.create",{elements:u,position:d,target:f}));var z=g.connectionTarget;return C||x?(_&&m&&(S=r.allowed("connection.create",{source:z===m?_:m,target:z===m?m:_,hints:{targetParent:f,targetAttach:x}})),{attach:x,connect:S}):C===null||x===null?null:!1}function c(u,f){[Q1,DN,X1,Z1].forEach(function(d){d===f?e.addMarker(u,d):e.removeMarker(u,d)})}n.on(["create.move","create.hover"],function(u){var f=u.context,d=f.elements,m=u.hover,g=f.source,_=f.hints||{};if(!m){f.canExecute=!1,f.target=null;return}ex(u);var x={x:u.x,y:u.y},S=f.canExecute=m&&a(d,m,x,g,_);m&&S!==null&&(f.target=m,S&&S.attach?c(m,Q1):c(m,S?Z1:X1))}),n.on(["create.end","create.out","create.cleanup"],function(u){var f=u.hover;f&&c(f,null)}),n.on("create.end",function(u){var f=u.context,d=f.source,m=f.shape,g=f.elements,_=f.target,x=f.canExecute,S=x&&x.attach,C=x&&x.connect,z=f.hints||{};if(x===!1||!_)return!1;ex(u);var D={x:u.x,y:u.y};C?m=i.appendShape(d,m,D,_,{attach:S,connection:C===!0?{}:C,connectionTarget:z.connectionTarget}):(g=i.createElements(g,D,_,J({},z,{attach:S})),m=at(g,function(M){return!ol(M)})),J(f,{elements:g,shape:m}),J(u,{elements:g,shape:m})});function l(){var u=t.context();u&&u.prefix===J1&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",l),n.once(["create.cancel","create.end"],kN,function(){n.off("elements.changed",l)})}),this.start=function(u,f,d){Je(f)||(f=[f]);var m=at(f,function(x){return!ol(x)});if(m){d=J({elements:f,hints:{},shape:m},d||{}),W(f,function(x){Ve(x.x)||(x.x=0),Ve(x.y)||(x.y=0)});var g=Ze(f,function(x){return!x.hidden}),_=Ot(g);W(f,function(x){ol(x)&&(x.waypoints=Zt(x.waypoints,function(S){return{x:S.x-_.x-_.width/2,y:S.y-_.y-_.height/2}})),J(x,{x:x.x-_.x-_.width/2,y:x.y-_.y-_.height/2})}),t.init(u,J1,{cursor:"grabbing",autoActivate:!0,data:{shape:m,elements:f,context:d}})}}}Z2.$inject=["canvas","dragging","eventBus","modeling","rules"];function ex(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function ol(e){return!!e.waypoints}function tx(e){return e&&e.length===1&&!ol(e[0])}function MN(e){return!!e.labelTarget}var NN=750;function J2(e,t,n,i,r){function a(c){var l=Be("g");Se(l,r.cls("djs-drag-group",["no-events"]));var u=Be("g");return c.forEach(function(f){var d;f.hidden||(f.waypoints?(d=n._createContainer("connection",u),n.drawConnection(Ef(d),f)):(d=n._createContainer("shape",u),n.drawShape(Ef(d),f),Gn(d,f.x,f.y)),i.addDragger(f,l,d))}),l}t.on("create.move",NN,function(c){var l=c.hover,u=c.context,f=u.elements,d=u.dragGroup;d||(d=u.dragGroup=a(f));var m;l?(d.parentNode||(m=e.getActiveLayer(),Ge(m,d)),Gn(d,c.x,c.y)):Dt(d)}),t.on("create.cleanup",function(c){var l=c.context,u=l.dragGroup;u&&Dt(u)})}J2.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const cd={__depends__:[jr,Fl,ur,cr],__init__:["create","createPreview"],create:["type",Z2],createPreview:["type",J2]};function jl(){}jl.prototype.get=function(){return this._data};jl.prototype.set=function(e){this._data=e};jl.prototype.clear=function(){var e=this._data;return delete this._data,e};jl.prototype.isEmpty=function(){return!this._data};const IN={clipboard:["type",jl]};function Yg(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}Yg.$inject=["eventBus"];Yg.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||ON(0,0)};function ON(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,a=e,c=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,a,c,!1,!1,!1,!1,0,null),n}const zl={__init__:["mouse"],mouse:["type",Yg]};function Gi(e,t,n,i,r,a,c,l){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=a,this._mouse=c,this._rules=l,r.on("copyPaste.copyElement",function(u){var f=u.descriptor,d=u.element,m=u.elements;f.priority=1,f.id=d.id;var g=at(m,function(_){return _===d.parent});g&&(f.parent=d.parent.id),LN(d)&&(f.priority=2,f.host=d.host.id),ld(d)&&(f.priority=3,f.source=d.source.id,f.target=d.target.id,f.waypoints=BN(d)),ud(d)&&(f.priority=4,f.labelTarget=d.labelTarget.id),W(["x","y","width","height"],function(_){Ve(d[_])&&(f[_]=d[_])}),f.hidden=d.hidden,f.collapsed=d.collapsed}),r.on("copyPaste.pasteElements",function(u){var f=u.hints;J(f,{createElementsBehavior:!1})})}Gi.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];Gi.prototype.copy=function(e){var t,n;return Je(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(Je(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};Gi.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}};Gi.prototype._paste=function(e,t,n,i){W(e,function(a){Ve(a.x)||(a.x=0),Ve(a.y)||(a.y=0)});var r=Ot(e);return W(e,function(a){ld(a)&&(a.waypoints=Zt(a.waypoints,function(c){return{x:c.x-r.x-r.width/2,y:c.y-r.y-r.height/2}})),J(a,{x:a.x-r.x-r.width/2,y:a.y-r.y-r.height/2})}),this._modeling.createElements(e,n,t,J({},i))};Gi.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return W(e,function(a,c){a=ji(a,"priority"),W(a,function(l){var u=J({},Nr(l,["priority"]));i[l.parent]?u.parent=i[l.parent]:delete u.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:u});var f;if(ld(u)){u.source=i[l.source],u.target=i[l.target],f=i[l.id]=t.createConnection(u),r.push(f);return}if(ud(u)){u.labelTarget=i[u.labelTarget],f=i[l.id]=t.createLabel(u),r.push(f);return}u.host&&(u.host=i[u.host]),f=i[l.id]=t.createShape(u),r.push(f)})}),r};Gi.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Nr(e,["id"]));return t};Gi.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Nr(e,["id"]));return t};Gi.prototype.createShape=function(e){var t=this._elementFactory.createShape(Nr(e,["id"]));return t};Gi.prototype.hasRelations=function(e,t){var n,i,r;return!(ld(e)&&(i=at(t,Bi({id:e.source.id})),r=at(t,Bi({id:e.target.id})),!i||!r)||ud(e)&&(n=at(t,Bi({id:e.labelTarget.id})),!n))};Gi.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[],a=$f(e);function c(f,d){return t.allowed("element.copy",{element:f,elements:d})}function l(f,d){var m=at(r,function(g){return f===g.element});if(!m){r.push({element:f,depth:d});return}m.depth<d&&(r=u(m,r),r.push({element:m.element,depth:d}))}function u(f,d){var m=d.indexOf(f);return m!==-1&&d.splice(m,1),d}return Fa(a,function(f,d,m){if(ud(f))return;W(f.labels,function(x){l(x,m)});function g(x){x&&x.length&&W(x,function(S){W(S.labels,function(C){l(C,m)}),l(S,m)})}W([f.attachers,f.incoming,f.outgoing],g),l(f,m);var _=[];return f.children&&(_=f.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:f,children:_}),_}),e=Zt(r,function(f){return f.element}),r=Zt(r,function(f){return f.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:f.descriptor,element:f.element,elements:e}),f}),r=ji(r,function(f){return f.descriptor.priority}),e=Zt(r,function(f){return f.element}),W(r,function(f){var d=f.depth;if(!n.hasRelations(f.element,e)){ix(f.element,e);return}if(!c(f.element,e)){ix(f.element,e);return}i[d]||(i[d]=[]),i[d].push(f.descriptor)}),i};function LN(e){return!!e.host}function ld(e){return!!e.waypoints}function ud(e){return!!e.labelTarget}function BN(e){return Zt(e.waypoints,function(t){return t=nx(t),t.original&&(t.original=nx(t.original)),t})}function nx(e){return J({},e)}function ix(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const $N={__depends__:[IN,cd,zl,ur],__init__:["copyPaste"],copyPaste:["type",Gi]};function iv(e,t,n){Je(n)||(n=[n]),W(n,function(i){kr(e[i])||(t[i]=e[i])})}var rv=750;function eS(e,t,n){function i(u,f){var d=e.create(u.$type);return n.copyElement(u,d,null,f)}t.on("copyPaste.copyElement",rv,function(u){var f=u.descriptor,d=u.element,m=xe(d);if(rx(d))return f;var g=f.businessObject=i(m,!0),_=f.di=i(ct(d),!0);_.bpmnElement=g,iv(g,f,"name"),iv(_,f,"isExpanded"),m.default&&(f.default=m.default.id)});var r="-bpmn-js-refs";function a(u){return u[r]=u[r]||{}}function c(u,f){u[r]=f}function l(u,f,d){var m=xe(u);return u.default&&(d[u.default]={element:m,property:"default"}),u.host&&(xe(u).attachedToRef=xe(f[u.host])),Nr(d,Un(d,function(g,_,x){var S=_.element,C=_.property;return x===u.id&&(S[C]=m,g.push(u.id)),g},[]))}t.on("copyPaste.pasteElement",function(u){var f=u.cache,d=u.descriptor,m=d.businessObject,g=d.di;if(rx(d)){d.businessObject=xe(f[d.labelTarget]),d.di=ct(f[d.labelTarget]);return}m=d.businessObject=i(m),g=d.di=i(g),g.bpmnElement=m,iv(d,m,["isExpanded","name"]),d.type=m.$type}),t.on("copyPaste.copyElement",rv,function(u){var f=u.descriptor,d=u.element;if(b(d,"bpmn:Participant")){var m=xe(d);m.processRef&&(f.processRef=i(m.processRef,!0))}}),t.on("copyPaste.pasteElement",function(u){var f=u.descriptor,d=f.processRef;d&&(f.processRef=i(d))}),t.on("copyPaste.pasteElement",rv,function(u){var f=u.cache,d=u.descriptor;c(f,l(d,f,a(f)))})}eS.$inject=["bpmnFactory","eventBus","moddleCopy"];function rx(e){return!!e.labelTarget}var FN=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function Hl(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(!(!r||!r.length))return ji(r,function(a){return a==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,a=dn(r)&&r.$descriptor,c=i.propertyName;if(c&&FN.indexOf(c)!==-1||c&&a&&!at(a.properties,Bi({name:c})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(i){var r=i.property;if(jN(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}Hl.$inject=["eventBus","bpmnFactory","moddle"];Hl.prototype.copyElement=function(e,t,n,i){var r=this;n&&!Je(n)&&(n=[n]),n=n||Fv(e.$descriptor);var a=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return a===!1||(Je(a)&&(n=a),W(n,function(c){var l;ir(e,c)&&(l=e.get(c));var u=r.copyProperty(l,t,c,i);if(Vt(u)){var f=r._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:u,propertyName:c});f!==!1&&t.set(c,u)}})),t};Hl.prototype.copyProperty=function(e,t,n,i){var r=this,a=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(a!==!1){if(a)return dn(a)&&a.$type&&!a.$parent&&(a.$parent=t),a;var c=this._moddle.getPropertyDescriptor(t,n);if(!c.isReference)return c.isId?e&&this._copyId(e,t,i):Je(e)?Un(e,function(l,u){return a=r.copyProperty(u,t,n,i),a?l.concat(a):l},[]):dn(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(a=r._bpmnFactory.create(e.$type),a.$parent=t,a=r.copyElement(e,a,null,i),a):e}};Hl.prototype._copyId=function(e,t,n){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function Fv(e,t){return Un(e.properties,function(n,i){return t&&i.default?n:n.concat(i.name)},[])}function jN(e,t){return e&&typeof e.$instanceOf=="function"&&e.$instanceOf(t)}const tS={__depends__:[$N],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",eS],moddleCopy:["type",Hl]};var ox=Math.round;function Kg(e,t){this._modeling=e,this._eventBus=t}Kg.$inject=["modeling","eventBus"];Kg.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=this._eventBus;r.fire("replace.start",{element:e,attrs:t,hints:n});var a=t.width||e.width,c=t.height||e.height,l=t.x||e.x,u=t.y||e.y,f=ox(l+a/2),d=ox(u+c/2),m=i.replaceShape(e,J({},t,{x:f,y:d,width:a,height:c}),n);return r.fire("replace.end",{element:e,newElement:m,hints:n}),m};function nS(e,t){t.on("replace.end",500,function(n){const{newElement:i,hints:r={}}=n;r.select!==!1&&e.select(i)})}nS.$inject=["selection","eventBus"];const zN={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",nS],replace:["type",Kg]};function HN(e,t,n){Je(n)||(n=[n]),W(n,function(i){kr(e[i])||(t[i]=e[i])})}var VN=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function GN(e,t){var n=e&&ir(e,"collapsed")?e.collapsed:!ut(e),i;return t&&(ir(t,"collapsed")||ir(t,"isExpanded"))?i=ir(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i}function iS(e,t,n,i,r,a,c){function l(u,f,d){d=d||{};var m=f.type,g=u.businessObject;if(Ip(g)&&m==="bpmn:SubProcess"&&GN(u,f))return i.toggleCollapse(u),u;var _=e.create(m),x={type:m,businessObject:_};x.di={},HN(u.di,x.di,["fill","stroke","background-color","border-color","color"]);var S=Fv(g.$descriptor),C=Fv(_.$descriptor,!0),z=UN(S,C);J(_,zi(f,VN));var D=Ze(z,function(A){return A==="eventDefinitions"?ax(u,f.eventDefinitionType):A==="loopCharacteristics"?!ni(_):!(ir(_,A)||A==="processRef"&&f.isExpanded===!1||A==="triggeredByEvent")});if(_=n.copyElement(g,_,D),f.eventDefinitionType&&(ax(_,f.eventDefinitionType)||(x.eventDefinitionType=f.eventDefinitionType,x.eventDefinitionAttrs=f.eventDefinitionAttrs)),b(g,"bpmn:Activity")){if(Ip(g))x.isExpanded=ut(u);else if(f&&ir(f,"isExpanded")){x.isExpanded=f.isExpanded;var M=t.getDefaultSize(_,{isExpanded:x.isExpanded});x.width=M.width,x.height=M.height,x.x=u.x-(x.width-u.width)/2,x.y=u.y-(x.height-u.height)/2}ut(u)&&!b(g,"bpmn:Task")&&x.isExpanded&&(x.width=u.width,x.height=u.height)}return Ip(g)&&!Ip(_)&&(d.moveChildren=!1),b(g,"bpmn:Participant")&&(f.isExpanded===!0?_.processRef=e.create("bpmn:Process"):d.moveChildren=!1,x.width=u.width,x.height=t.getDefaultSize(x).height),a.allowed("shape.resize",{shape:_})||(x.height=t.getDefaultSize(x).height,x.width=t.getDefaultSize(x).width),_.name=g.name,tt(g,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&tt(_,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(_.default=g.default),f.host&&!b(g,"bpmn:BoundaryEvent")&&b(_,"bpmn:BoundaryEvent")&&(x.host=f.host),(x.type==="bpmn:DataStoreReference"||x.type==="bpmn:DataObjectReference")&&(x.x=u.x+(u.width-x.width)/2),x=r.replaceElement(u,x,d),d.select!==!1&&c.select(x),x}this.replaceElement=l}iS.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules","selection"];function Ip(e){return b(e,"bpmn:SubProcess")}function ax(e,t){var n=xe(e);return t&&n.get("eventDefinitions").some(function(i){return b(i,t)})}function UN(e,t){return e.filter(function(n){return t.indexOf(n)!==-1})}const rS={__depends__:[tS,zN,cr],bpmnReplace:["type",iS]};function sx(e){return function(t){var n=t.target,i=xe(e),r=i.eventDefinitions&&i.eventDefinitions[0],a=i.$type===n.type,c=(r&&r.$type)===n.eventDefinitionType,l=!!n.triggeredByEvent==!!i.triggeredByEvent,u=n.isExpanded===void 0||n.isExpanded===ut(e);return!a||!c||!l||!u}}var WN=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],YN=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],KN=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],qN=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],XN=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],QN=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],oS=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],ZN=oS,cx=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],JN=[{label:"Data Store Reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],eI=[{label:"Data Object Reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],tI=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],nI=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],iI=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],rI=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty Pool";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function bi(e,t,n,i,r,a,c){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=a,this._translate=c,this.register()}bi.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate"];bi.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};bi.prototype.getEntries=function(e){var t=e.businessObject,n=this._rules,i;if(!n.allowed("shape.replace",{element:e}))return[];var r=sx(e);return b(t,"bpmn:DataObjectReference")?this._createEntries(e,JN):b(t,"bpmn:DataStoreReference")&&!b(e.parent,"bpmn:Collaboration")?this._createEntries(e,eI):b(t,"bpmn:StartEvent")&&!b(t.$parent,"bpmn:SubProcess")?(i=Ze(WN,r),this._createEntries(e,i)):b(t,"bpmn:Participant")?(i=Ze(rI,function(a){return ut(e)!==a.target.isExpanded}),this._createEntries(e,i)):b(t,"bpmn:StartEvent")&&ni(t.$parent)?(i=Ze(nI,function(a){var c=a.target,l=c.isInterrupting!==!1,u=xe(e).isInterrupting===l;return r(a)||!r(a)&&!u}),this._createEntries(e,i)):b(t,"bpmn:StartEvent")&&!ni(t.$parent)&&b(t.$parent,"bpmn:SubProcess")?(i=Ze(YN,r),this._createEntries(e,i)):b(t,"bpmn:EndEvent")?(i=Ze(qN,function(a){var c=a.target;return c.eventDefinitionType=="bpmn:CancelEventDefinition"&&!b(t.$parent,"bpmn:Transaction")?!1:r(a)}),this._createEntries(e,i)):b(t,"bpmn:BoundaryEvent")?(i=Ze(tI,function(a){var c=a.target;if(c.eventDefinitionType=="bpmn:CancelEventDefinition"&&!b(t.attachedToRef,"bpmn:Transaction"))return!1;var l=c.cancelActivity!==!1,u=t.cancelActivity==l;return r(a)||!r(a)&&!u}),this._createEntries(e,i)):b(t,"bpmn:IntermediateCatchEvent")||b(t,"bpmn:IntermediateThrowEvent")?(i=Ze(KN,r),this._createEntries(e,i)):b(t,"bpmn:Gateway")?(i=Ze(XN,r),this._createEntries(e,i)):b(t,"bpmn:Transaction")?(i=Ze(oS,r),this._createEntries(e,i)):ni(t)&&ut(e)?(i=Ze(ZN,r),this._createEntries(e,i)):b(t,"bpmn:SubProcess")&&ut(e)?(i=Ze(QN,r),this._createEntries(e,i)):b(t,"bpmn:AdHocSubProcess")&&!ut(e)?(i=Ze(cx,function(a){var c=a.target,l=c.type==="bpmn:SubProcess",u=c.isExpanded===!0;return sx(e)&&(!l||u)}),this._createEntries(e,i)):b(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,iI):b(t,"bpmn:FlowNode")?(i=Ze(cx,r),b(t,"bpmn:SubProcess")&&!ut(e)&&(i=Ze(i,function(a){return a.label!=="Sub Process (collapsed)"})),this._createEntries(e,i)):[]};bi.prototype.getHeaderEntries=function(e){var t=[];return b(e,"bpmn:Activity")&&!ni(e)&&(t=t.concat(this._getLoopEntries(e))),b(e,"bpmn:DataObjectReference")&&(t=t.concat(this._getDataObjectIsCollection(e))),b(e,"bpmn:Participant")&&(t=t.concat(this._getParticipantMultiplicity(e))),b(e,"bpmn:SubProcess")&&!b(e,"bpmn:Transaction")&&!ni(e)&&t.push(this._getAdHocEntry(e)),t};bi.prototype._createEntries=function(e,t){var n=[],i=this;return W(t,function(r){var a=i._createMenuEntry(r,e);n.push(a)}),n};bi.prototype._createSequenceFlowEntries=function(e,t){var n=xe(e),i=[],r=this._modeling,a=this._moddle,c=this;return W(t,function(l){switch(l.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(b(n.sourceRef,"bpmn:ExclusiveGateway")||b(n.sourceRef,"bpmn:InclusiveGateway")||b(n.sourceRef,"bpmn:ComplexGateway")||b(n.sourceRef,"bpmn:Activity"))&&i.push(c._createMenuEntry(l,e,function(){r.updateProperties(e.source,{default:n})}));break;case"replace-with-conditional-flow":!n.conditionExpression&&b(n.sourceRef,"bpmn:Activity")&&i.push(c._createMenuEntry(l,e,function(){var u=a.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:u})}));break;default:if(b(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return i.push(c._createMenuEntry(l,e,function(){r.updateProperties(e,{conditionExpression:void 0})}));if((b(n.sourceRef,"bpmn:ExclusiveGateway")||b(n.sourceRef,"bpmn:InclusiveGateway")||b(n.sourceRef,"bpmn:ComplexGateway")||b(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return i.push(c._createMenuEntry(l,e,function(){r.updateProperties(e.source,{default:void 0})}))}}),i};bi.prototype._createMenuEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement,a=function(){return r(t,e.target)},c=e.label;c&&typeof c=="function"&&(c=c(t)),n=n||a;var l={label:i(c),className:e.className,id:e.actionName,action:n};return l};bi.prototype._getLoopEntries=function(e){var t=this,n=this._translate;function i(d,m){var g=xe(e).loopCharacteristics;m.active?g=void 0:((kr(m.options.isSequential)||!g||!b(g,m.options.loopCharacteristics))&&(g=t._moddle.create(m.options.loopCharacteristics)),g.isSequential=m.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:g})}var r=xe(e),a=r.loopCharacteristics,c,l,u;a&&(c=a.isSequential,l=a.isSequential===void 0,u=a.isSequential!==void 0&&!a.isSequential);var f=[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:n("Parallel Multi Instance"),active:u,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:n("Sequential Multi Instance"),active:c,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:n("Loop"),active:l,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}];return f};bi.prototype._getDataObjectIsCollection=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return[];function r(l,u){t._modeling.updateModdleProperties(e,i,{isCollection:!u.active})}var a=i.isCollection,c=[{id:"toggle-is-collection",className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:a,action:r}];return c};bi.prototype._getParticipantMultiplicity=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function r(l,u){var f=u.active,d;f||(d=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:d})}var a=e.businessObject.participantMultiplicity,c=[{id:"toggle-participant-multiplicity",className:"bpmn-icon-parallel-mi-marker",title:i("Participant Multiplicity"),active:!!a,action:r}];return c};bi.prototype._getAdHocEntry=function(e){var t=this._translate,n=xe(e),i=b(n,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement,a={id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:i,action:function(c,l){return i?r(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):r(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}};return a};const oI={__depends__:[rd,rS,M2],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",bi]};var Rf=Math.max,Af=Math.min,aI=20;function aS(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function sI(e,t,n){var i=n.x,r=n.y,a={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(a.y=e.y+r,a.height=e.height-r):t.indexOf("s")!==-1&&(a.height=e.height+r),t.indexOf("e")!==-1?a.width=e.width+i:t.indexOf("w")!==-1&&(a.x=e.x+i,a.width=e.width-i),a}function cI(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function Op(e,t,n){var i=t[e],r=n.min&&n.min[e],a=n.max&&n.max[e];return Ve(r)&&(i=(/top|left/.test(e)?Af:Rf)(i,r)),Ve(a)&&(i=(/top|left/.test(e)?Rf:Af)(i,a)),i}function lI(e,t){if(!t)return e;var n=Fe(e);return Ff({top:Op("top",n,t),right:Op("right",n,t),bottom:Op("bottom",n,t),left:Op("left",n,t)})}function uI(e,t,n,i){var r=Fe(t),a={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},c=i?Fe(i):a,l={top:Af(a.top,c.top),left:Af(a.left,c.left),bottom:Rf(a.bottom,c.bottom),right:Rf(a.right,c.right)};return Ff(l)}function Jc(e,t){return typeof e<"u"?e:aI}function pI(e,t){var n,i,r,a;return typeof t=="object"?(n=Jc(t.left),i=Jc(t.right),r=Jc(t.top),a=Jc(t.bottom)):n=i=r=a=Jc(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+a}}function fI(e){return!(e.waypoints||e.type==="label")}function sS(e,t){var n;if(e.length===void 0?n=Ze(e.children,fI):n=e,n.length)return pI(Ot(n),t)}var Lp=Math.abs;function dI(e,t){return aS(Fe(t),Fe(e))}var hI=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],js=30;function pd(e,t){return t=t||[],e.children.filter(function(n){b(n,"bpmn:Lane")&&(pd(n,t),t.push(n))}),t}function Ga(e){return e.children.filter(function(t){return b(t,"bpmn:Lane")})}function Li(e){return Cf(e,hI)||e}function mI(e,t){var n=Li(e),i=b(n,"bpmn:Process")?[]:[n],r=pd(n,i),a=Fe(e),c=Fe(t),l=dI(e,t),u=[];return r.forEach(function(f){if(f!==e){var d=0,m=l.right,g=0,_=l.left,x=Fe(f);l.top&&(Lp(x.bottom-a.top)<10&&(g=c.top-x.bottom),Lp(x.top-a.top)<5&&(d=c.top-x.top)),l.bottom&&(Lp(x.top-a.bottom)<10&&(d=c.bottom-x.top),Lp(x.bottom-a.bottom)<5&&(g=c.bottom-x.bottom)),(d||m||g||_)&&u.push({shape:f,newBounds:cI(f,{top:d,right:m,bottom:g,left:_})})}}),u}function Vl(e,t,n,i,r,a,c,l,u,f,d,m){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=a,this._connect=c,this._create=l,this._popupMenu=u,this._canvas=f,this._rules=d,this._translate=m,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(g){var _=g.context,x=_.shape;if(!(!Gs(g)||!i.isOpen(x))){var S=i.getEntries(x);S.replace&&S.replace.action.click(g,x)}})}Vl.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"];Vl.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&J(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Remove"),action:{click:function(i,r){t.removeElements(r.slice())}}}}),n};Vl.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return Je(t)?Ba(t,function(n){return vI(t,n)}):t};Vl.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,a=this._create,c=this._popupMenu,l=this._rules,u=this._autoPlace,f=this._translate,d={};if(e.type==="label")return d;var m=e.businessObject;function g(M,A){r.start(M,A)}function _(M,A){n.removeElements([A])}function x(M){var A=5,j=t.getPad(M).html,G=j.getBoundingClientRect(),L={x:G.left,y:G.bottom+A};return L}function S(M,A,j,G){typeof j!="string"&&(G=j,j=f("Append {type}",{type:M.replace(/^bpmn:/,"")}));function L(O,Y){var q=i.createShape(J({type:M},G));a.start(O,q,{source:Y})}var $=u?function(O,Y){var q=i.createShape(J({type:M},G));u.append(Y,q)}:L;return{group:"model",className:A,title:j,action:{dragstart:L,click:$}}}function C(M){return function(A,j){n.splitLane(j,M),t.open(j,!0)}}if(tt(m,["bpmn:Lane","bpmn:Participant"])&&ut(e)){var z=Ga(e);J(d,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:f("Add Lane above"),action:{click:function(M,A){n.addLane(A,"top")}}}}),z.length<2&&(e.height>=120&&J(d,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:f("Divide into two Lanes"),action:{click:C(2)}}}),e.height>=180&&J(d,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:f("Divide into three Lanes"),action:{click:C(3)}}})),J(d,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:f("Add Lane below"),action:{click:function(M,A){n.addLane(A,"bottom")}}}})}b(m,"bpmn:FlowNode")&&(b(m,"bpmn:EventBasedGateway")?J(d,{"append.receive-task":S("bpmn:ReceiveTask","bpmn-icon-receive-task",f("Append ReceiveTask")),"append.message-intermediate-event":S("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",f("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":S("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",f("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":S("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",f("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":S("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",f("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):lx(m,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?J(d,{"append.compensation-activity":S("bpmn:Task","bpmn-icon-task",f("Append compensation activity"),{isForCompensation:!0})}):!b(m,"bpmn:EndEvent")&&!m.isForCompensation&&!lx(m,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!ni(m)&&J(d,{"append.end-event":S("bpmn:EndEvent","bpmn-icon-end-event-none",f("Append EndEvent")),"append.gateway":S("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",f("Append Gateway")),"append.append-task":S("bpmn:Task","bpmn-icon-task",f("Append Task")),"append.intermediate-event":S("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",f("Append Intermediate/Boundary Event"))})),c.isEmpty(e,"bpmn-replace")||J(d,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:f("Change type"),action:{click:function(M,A){var j=J(x(A),{cursor:{x:M.x,y:M.y}});c.open(A,"bpmn-replace",j,{title:f("Change element"),width:300,search:!0})}}}}),b(m,"bpmn:SequenceFlow")&&J(d,{"append.text-annotation":S("bpmn:TextAnnotation","bpmn-icon-text-annotation")}),tt(m,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&J(d,{"append.text-annotation":S("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:f("Connect using "+(m.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:g,dragstart:g}}}),b(m,"bpmn:TextAnnotation")&&J(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:f("Connect using Association"),action:{click:g,dragstart:g}}}),tt(m,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&J(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:f("Connect using DataInputAssociation"),action:{click:g,dragstart:g}}}),b(m,"bpmn:Group")&&J(d,{"append.text-annotation":S("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var D=l.allowed("elements.delete",{elements:[e]});return Je(D)&&(D=D[0]===e),D&&J(d,{delete:{group:"edit",className:"bpmn-icon-trash",title:f("Remove"),action:{click:_}}}),d};function lx(e,t,n){var i=e.$instanceOf(t),r=!1,a=e.eventDefinitions||[];return W(a,function(c){c.$type===n&&(r=!0)}),i&&r}function vI(e,t){return e.indexOf(t)!==-1}const gI={__depends__:[Q2,Mg,cr,Wg,cd,oI],__init__:["contextPadProvider"],contextPadProvider:["type",Vl]};var cS=".djs-palette-toggle",lS=".entry",yI=cS+", "+lS,jv="djs-palette-",_I="shown",zv="open",ux="two-column",EI=1e3;function Bt(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}Bt.$inject=["eventBus","canvas"];Bt.prototype.registerProvider=function(e,t){t||(t=e,e=EI),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};Bt.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(wI,{})};Bt.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};Bt.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=et(Bt.HTML_MARKUP);n.appendChild(i),He(n).add(jv+_I),Vn.bind(i,yI,"click",function(r){var a=r.delegateTarget;if(lg(a,cS))return e.toggle();e.trigger("click",r)}),ke.bind(i,"mousedown",function(r){r.stopPropagation()}),Vn.bind(i,lS,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})};Bt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};Bt.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,a=He(n),c=He(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),a.toggle(ux,r),c.toggle(jv+ux,r),"open"in e&&(a.toggle(zv,e.open),c.toggle(jv+zv,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})};Bt.prototype._update=function(){var e=ft(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Pl(e),W(t,function(n,i){var r=n.group||"default",a=ft("[data-group="+yl(r)+"]",e);a||(a=et('<div class="group"></div>'),bn(a,"data-group",r),e.appendChild(a));var c=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),l=et(c);if(a.appendChild(l),!n.separator&&(bn(l,"data-action",i),n.title&&bn(l,"title",n.title),n.className&&xI(l,n.className),n.imageUrl)){var u=et("<img>");bn(u,"src",n.imageUrl),l.appendChild(u)}}),this.open()};Bt.prototype.trigger=function(e,t,n){var i,r,a=t.delegateTarget||t.target;return a?(i=bn(a,"data-action"),r=t.originalEvent||t,this.triggerEntry(i,e,r,n)):t.preventDefault()};Bt.prototype.triggerEntry=function(e,t,n,i){var r=this._entries,a,c;if(a=r[e],!!a&&(c=a.action,this._eventBus.fire("palette.trigger",{entry:a,event:n})!==!1)){if(sn(c)){if(t==="click")return c(n,i)}else if(c[t])return c[t](n,i);n.preventDefault()}};Bt.prototype._layoutChanged=function(){this._toggleState({})};Bt.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n};Bt.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};Bt.prototype.open=function(){this._toggleState({open:!0})};Bt.prototype.toggle=function(e){this.isOpen()?this.close():this.open()};Bt.prototype.isActiveTool=function(e){return e&&this._activeTool===e};Bt.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=ft(".djs-palette-entries",this._container),this._toolsContainer=ft("[data-group=tools]",t)),n=this._toolsContainer,W(n.children,function(i){var r=i.getAttribute("data-action");if(r){var a=He(i);r=r.replace("-tool",""),a.contains("entry")&&r===e?a.add("highlighted-entry"):a.remove("highlighted-entry")}})};Bt.prototype.isOpen=function(){return He(this._container).has(zv)};Bt.prototype._getParentContainer=function(){return this._canvas.getContainer()};Bt.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function xI(e,t){var n=He(e),i=Je(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function wI(e,t){var n=t.getPaletteEntries();return sn(n)?n(e):(W(n,function(i,r){e[r]=i}),e)}const uS={__init__:["palette"],palette:["type",Bt]};var Gl={id:"events",name:"Events"},bI={id:"tasks",name:"Tasks"},SI={id:"data",name:"Data"},CI={id:"participants",name:"Participants"},TI={id:"subprocess",name:"Sub Processes"},PI={id:"gateways",name:"Gateways"},RI=[{label:"Start Event",actionName:"none-start-event",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"Boundary Event",actionName:"none-boundary-event",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:BoundaryEvent"}},{label:"End Event",actionName:"none-end-event",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}].map(e=>({...e,group:Gl})),AI=[{label:"Message Start Event",actionName:"message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}].map(e=>({...e,group:Gl})),DI=[{label:"Message Intermediate Catch Event",actionName:"message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}].map(e=>({...e,group:Gl})),kI=[{label:"Message Boundary Event",actionName:"message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}].map(e=>({...e,group:Gl})),MI=[{label:"Message End Event",actionName:"message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}].map(e=>({...e,group:Gl})),NI=[{label:"Exclusive Gateway",actionName:"exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",search:"or",actionName:"inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"},rank:-1},{label:"Complex Gateway",actionName:"complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"},rank:-1},{label:"Event based Gateway",actionName:"event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}].map(e=>({...e,group:PI})),II=[{label:"Transaction",actionName:"transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",search:"subprocess",actionName:"event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",search:"subprocess",actionName:"collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",search:"subprocess",actionName:"expanded-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!0}}].map(e=>({...e,group:TI})),OI=[{label:"Task",actionName:"task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User Task",actionName:"user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service Task",actionName:"service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send Task",actionName:"send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"},rank:-1},{label:"Receive Task",actionName:"receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"},rank:-1},{label:"Manual Task",actionName:"manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"},rank:-1},{label:"Business Rule Task",actionName:"rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script Task",actionName:"script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}}].map(e=>({...e,group:bI})),LI=[{label:"Data Store Reference",actionName:"data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}},{label:"Data Object Reference",actionName:"data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}].map(e=>({...e,group:SI})),BI=[{label:"Expanded Pool",search:"Participant",actionName:"expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:"Empty Pool",search:"Collapsed Participant",actionName:"collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}].map(e=>({...e,group:CI})),pS=[...NI,...OI,...II,...RI,...AI,...DI,...MI,...kI,...LI,...BI];function Ul(e,t,n,i,r,a){this._elementFactory=e,this._popupMenu=t,this._create=n,this._autoPlace=i,this._mouse=r,this._translate=a,this.register()}Ul.$inject=["elementFactory","popupMenu","create","autoPlace","mouse","translate"];Ul.prototype.register=function(){this._popupMenu.registerProvider("bpmn-create",this)};Ul.prototype.getPopupMenuEntries=function(){const e={};return pS.forEach(t=>{const{actionName:n,className:i,label:r,target:a,description:c,group:l,search:u,rank:f}=t,d=this._createEntryAction(a);e[`create-${n}`]={label:r&&this._translate(r),className:i,description:c,group:l&&{...l,name:this._translate(l.name)},search:u,rank:f,action:{click:d,dragstart:d}}}),e};Ul.prototype._createEntryAction=function(e){const t=this._create,n=this._mouse,i=this._popupMenu,r=this._elementFactory;let a;return c=>(i.close(),e.type==="bpmn:Participant"?a=r.createParticipantShape(e):a=r.create("shape",e),c instanceof KeyboardEvent&&(c=n.getLastMoveEvent()),t.start(c,a))};const $I="data:image/svg+xml,%3Csvg%20width%3D%2222%22%20height%3D%2222%22%20viewBox%3D%220%200%205.82%205.82%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Cpath%20d%3D%22M1.3%203.4c.3%200%20.5-.2.5-.5s-.2-.4-.5-.4c-.2%200-.4.1-.4.4%200%20.3.2.5.4.5zM3%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5zM4.6%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5z%22%2F%3E%0A%3C%2Fsvg%3E",FI="data:image/svg+xml,%3Csvg%20width%3D%2246%22%20height%3D%2246%22%20viewBox%3D%22-2%20-2%209.82%209.82%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M1.3%203.4c.3%200%20.5-.2.5-.5s-.2-.4-.5-.4c-.2%200-.4.1-.4.4%200%20.3.2.5.4.5zM3%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5zM4.6%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5z%22%2F%3E%0A%3C%2Fsvg%3E";function qg(e,t,n,i,r){this._translate=t,this._popupMenu=n,this._canvas=i,this._mouse=r,e.registerProvider(800,this)}qg.$inject=["palette","translate","popupMenu","canvas","mouse"];qg.prototype.getPaletteEntries=function(e){const t=this._translate,n=this._popupMenu,i=this._canvas,r=this._mouse,a=c=>{if(c instanceof KeyboardEvent)return c=r.getLastMoveEvent(),{x:c.x,y:c.y};const f=c&&c.target||ft('.djs-palette [data-action="create"]'),d=f.getBoundingClientRect();return f&&{x:d.left+d.width/2+35,y:d.top+d.height/2+10}};return{create:{group:"create",imageUrl:FI,title:t("Create element"),action:{click:function(c){const l=a(c),u=i.getRootElement();n.open(u,"bpmn-create",l,{title:t("Create element"),width:300,search:!0})}}}}};function Xg(e){this._injector=e,this.registerActions()}Xg.$inject=["injector"];Xg.prototype.registerActions=function(){var e=this._injector.get("editorActions",!1),t=this._injector.get("selection",!1),n=this._injector.get("contextPad",!1),i=this._injector.get("palette",!1),r=this._injector.get("popupMenu",!1);const a={};t&&n&&i&&r&&i&&J(a,{appendElement:function(c){const l=t&&t.get();l.length==1&&!r.isEmpty(l[0],"bpmn-append")?n.triggerEntry("append","click",c):i.triggerEntry("create","click",c)}}),i&&J(a,{createElement:function(c){i.triggerEntry("create","click",c)}}),e&&e.register(a)};function fd(e){this._injector=e,this._keyboard=this._injector.get("keyboard",!1),this._editorActions=this._injector.get("editorActions",!1),this._keyboard&&this._injector.invoke($r,this)}Te(fd,$r);fd.$inject=["injector"];fd.prototype.registerBindings=function(){var e=this._keyboard,t=this._editorActions;$r.prototype.registerBindings.call(this,e,t);function n(i,r){t&&t.isRegistered(i)&&e&&e.addListener(r)}n("appendElement",function(i){var r=i.keyEvent;if(!(e&&e.hasModifier(r))&&e&&e.isKey(["a","A"],r))return t&&t.trigger("appendElement",r),!0}),n("createElement",function(i){var r=i.keyEvent;if(!(e&&e.hasModifier(r))&&e&&e.isKey(["n","N"],r))return t&&t.trigger("createElement",r),!0})};function Ua(e,t,n,i,r,a,c){this._elementFactory=e,this._popupMenu=t,this._create=n,this._autoPlace=i,this._rules=r,this._create=n,this._mouse=a,this._translate=c,this.register()}Ua.$inject=["elementFactory","popupMenu","create","autoPlace","rules","mouse","translate"];Ua.prototype.register=function(){this._popupMenu.registerProvider("bpmn-append",this)};Ua.prototype.getPopupMenuEntries=function(e){const t=this._rules,n=this._translate,i={};return t.allowed("shape.append",{element:e})?(this._filterEntries(pS).forEach(a=>{const{actionName:c,className:l,label:u,target:f,description:d,group:m,search:g,rank:_}=a;i[`append-${c}`]={label:u&&n(u),className:l,description:d,group:m&&{...m,name:n(m.name)},search:g,rank:_,action:this._createEntryAction(e,f)}}),i):[]};Ua.prototype._filterEntries=function(e){return e.filter(t=>{const n=t.target,{type:i,eventDefinitionType:r}=n;return!(["bpmn:StartEvent","bpmn:Participant"].includes(i)||i==="bpmn:BoundaryEvent"&&kr(r))})};Ua.prototype._createEntryAction=function(e,t){const n=this._elementFactory,i=this._autoPlace,r=this._create,a=this._mouse,c=()=>{const u=n.create("shape",t);i.append(e,u)},l=u=>{const f=n.create("shape",t);return u instanceof KeyboardEvent&&(u=a.getLastMoveEvent()),r.start(u,f,{source:e})};return{click:this._canAutoPlaceElement(t)?c:l,dragstart:l}};Ua.prototype._canAutoPlaceElement=e=>{const{type:t}=e;return!(t==="bpmn:BoundaryEvent"||t==="bpmn:SubProcess"&&e.triggeredByEvent||t==="bpmn:IntermediateCatchEvent"&&e.eventDefinitionType==="bpmn:LinkEventDefinition")};var jI=900;function dd(e,t,n,i){e.registerProvider(jI,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}dd.$inject=["contextPad","popupMenu","translate","canvas"];dd.prototype.getContextPadEntries=function(e){const t=this._popupMenu,n=this._translate,i=this._getAppendMenuPosition.bind(this);if(!t.isEmpty(e,"bpmn-append"))return{append:{group:"model",imageUrl:$I,title:n("Append element"),action:{click:function(r,a){var c=J(i(a),{cursor:{x:r.x,y:r.y}});t.open(a,"bpmn-append",c,{title:n("Append element"),width:300,search:!0})}}}}};dd.prototype._getAppendMenuPosition=function(e){const t=this._contextPad,n=5,r=t.getPad(e).html.getBoundingClientRect();return{x:r.right+n,y:r.top}};function hd(e){Yn.call(this,e)}Te(hd,Yn);hd.$inject=["eventBus"];hd.prototype.init=function(){this.addRule("shape.append",function(e){var t=e.element;const n=xe(t);if(Jt(t)||tt(t,["bpmn:EndEvent","bpmn:Group","bpmn:TextAnnotation","bpmn:Lane","bpmn:Participant","bpmn:DataStoreReference","bpmn:DataObjectReference"])||HI(t)||b(t,"bpmn:IntermediateThrowEvent")&&zI(t,"bpmn:LinkEventDefinition")||b(t,"bpmn:SubProcess")&&n.triggeredByEvent)return!1})};function zI(e,t){var n=xe(e);return!!at(n.eventDefinitions||[],function(i){return b(i,t)})}function HI(e){return e.waypoints}const VI={__depends__:[uS,rd,A2,Mg],__init__:["createMenuProvider","createPaletteProvider","createAppendEditorActions","createAppendKeyboardBindings","appendMenuProvider","appendContextPadProvider","appendRules"],createMenuProvider:["type",Ul],createPaletteProvider:["type",qg],createAppendEditorActions:["type",Xg],createAppendKeyboardBindings:["type",fd],appendMenuProvider:["type",Ua],appendContextPadProvider:["type",dd],appendRules:["type",hd]};var GI={horizontal:["x","width"],vertical:["y","height"]},px=5;function Hr(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var i=t.allowed("elements.distribute",{elements:n});return Je(i)?i:i?n:[]})}Hr.$inject=["modeling","rules"];Hr.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};Hr.prototype.trigger=function(e,t){var n=this._modeling,i,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),i=this._createGroups(r),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i};Hr.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(W(t,function(a){r=a(r,n,i)}),r):e};Hr.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var a=ji(e,i);return W(a,function(c,l){var u=n._findRange(c,i,r),f,d=t[t.length-1];d&&n._hasIntersection(d.range,u)?t[t.length-1].elements.push(c):(f={range:u,elements:[c]},t.push(f))}),t};Hr.prototype._setOrientation=function(e){var t=GI[e];this._axis=t[0],this._dimension=t[1]};Hr.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};Hr.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+px,max:t+n-px}};const UI={__init__:["distributeElements"],distributeElements:["type",Hr]};function md(e,t,n){Yn.call(this,t)}md.$inject=["distributeElements","eventBus","rules"];Te(md,Yn);md.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=Ze(t,function(n){var i=tt(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)}),t=$f(t),t.length<3?!1:t})};var fx={horizontal:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linejoin%3Around%22%20d%3D%22M450%20400V150h900v250%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22450%22%20width%3D%22600%22%20height%3D%221200%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22450%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",vertical:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linejoin%3Around%22%20d%3D%22M400%201350H150V450h250%22%2F%3E%3Crect%20x%3D%22450%22%20y%3D%22150%22%20width%3D%221200%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22450%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E"},WI=900;function Wl(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",WI,this)}Wl.$inject=["popupMenu","distributeElements","translate","rules"];Wl.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&J(t,this._getEntries(e)),t};Wl.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Wl.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu,r={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageUrl:fx.horizontal,action:function(a,c){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageUrl:fx.vertical,action:function(a,c){t.trigger(e,"vertical"),i.close()}}};return r};const YI={__depends__:[rd,UI],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",md],distributeElementsMenuProvider:["type",Wl]};var fS="is not a registered action",KI="is already registered";function Si(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}Si.$inject=["eventBus","injector"];Si.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),a=e.get("copyPaste",!1),c=e.get("canvas",!1),l=e.get("rules",!1),u=e.get("keyboardMove",!1),f=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),a&&i&&this.register("copy",function(){var d=i.get();if(d.length)return a.copy(d)}),a&&this.register("paste",function(){a.paste()}),r&&this.register("stepZoom",function(d){r.stepZoom(d.value)}),c&&this.register("zoom",function(d){c.zoom(d.value)}),n&&i&&l&&this.register("removeSelection",function(){var d=i.get();if(d.length){var m=l.allowed("elements.delete",{elements:d}),g;m!==!1&&(Je(m)?g=m:g=d,g.length&&n.removeElements(g.slice()))}}),u&&this.register("moveCanvas",function(d){u.moveCanvas(d)}),f&&this.register("moveSelection",function(d){f.moveSelection(d.direction,d.accelerated)})};Si.prototype.trigger=function(e,t){if(!this._actions[e])throw Qg(e,fS);return this._actions[e](t)};Si.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);W(e,function(i,r){n._registerAction(r,i)})};Si.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw Qg(e,KI);this._actions[e]=t};Si.prototype.unregister=function(e){if(!this.isRegistered(e))throw Qg(e,fS);this._actions[e]=void 0};Si.prototype.getActions=function(){return Object.keys(this._actions)};Si.prototype.isRegistered=function(e){return!!this._actions[e]};function Qg(e,t){return new Error(e+" "+t)}const qI={__init__:["editorActions"],editorActions:["type",Si]};function vd(e){e.invoke(Si,this)}Te(vd,Si);vd.$inject=["injector"];vd.prototype._registerDefaultActions=function(e){Si.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),a=e.get("lassoTool",!1),c=e.get("handTool",!1),l=e.get("globalConnect",!1),u=e.get("distributeElements",!1),f=e.get("alignElements",!1),d=e.get("directEditing",!1),m=e.get("searchPad",!1),g=e.get("modeling",!1),_=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var x=t.getRootElement(),S=n.filter(function(C){return C!==x});return i.select(S),S}),r&&this._registerAction("spaceTool",function(){r.toggle()}),a&&this._registerAction("lassoTool",function(){a.toggle()}),c&&this._registerAction("handTool",function(){c.toggle()}),l&&this._registerAction("globalConnectTool",function(){l.toggle()}),i&&u&&this._registerAction("distributeElements",function(x){var S=i.get(),C=x.type;S.length&&u.trigger(S,C)}),i&&f&&this._registerAction("alignElements",function(x){var S=i.get(),C=[],z=x.type;S.length&&(C=Ze(S,function(D){return!b(D,"bpmn:Lane")}),f.trigger(C,z))}),i&&g&&this._registerAction("setColor",function(x){var S=i.get();S.length&&g.setColor(S,x)}),i&&d&&this._registerAction("directEditing",function(){var x=i.get();x.length&&d.activate(x[0])}),m&&this._registerAction("find",function(){m.toggle()}),t&&g&&this._registerAction("moveToOrigin",function(){var x=t.getRootElement(),S,C;b(x,"bpmn:Collaboration")?C=n.filter(function(z){return b(z.parent,"bpmn:Collaboration")}):C=n.filter(function(z){return z!==x&&!b(z.parent,"bpmn:SubProcess")}),S=Ot(C),g.moveElements(C,{x:-S.x,y:-S.y},x)}),i&&_&&this._registerAction("replaceElement",function(x){_.triggerEntry("replace","click",x)})};const XI={__depends__:[qI],editorActions:["type",vd]};function dS(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;tt(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}dS.$inject=["eventBus"];var cf=10;function ov(e,t,n){return n||(n="round"),Math[n](e/t)*t}var QI=1200,ZI=800;function jo(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",ZI,function(){r.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],QI,function(a){var c=a.originalEvent;if(!(!r.active||c&&ii(c))){var l=a.context,u=l.gridSnappingContext;u||(u=l.gridSnappingContext={}),["x","y"].forEach(function(f){var d={},m=eO(a,f,e);m&&(d.offset=m);var g=JI(a,f);g&&J(d,g),Ys(a,f)||r.snapEvent(a,f,d)})}})}jo.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);It(e,t,i)};jo.prototype.getGridSpacing=function(){return cf};jo.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=ov(e,cf);var i,r;return t&&t.min&&(i=t.min,Ve(i)&&(i=ov(i+n,cf,"ceil"),e=Math.max(e,i))),t&&t.max&&(r=t.max,Ve(r)&&(r=ov(r+n,cf,"floor"),e=Math.min(e,r))),e-=n,e};jo.prototype.isActive=function(){return this.active};jo.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};jo.prototype.toggleActive=function(){this.setActive(!this.active)};jo.$inject=["elementRegistry","eventBus","config.gridSnapping"];function JI(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},a=n.gridSnappingContext,c=a.snapConstraints;if(c&&c[t])return c[t];c||(c=a.snapConstraints={}),c[t]||(c[t]={});var l=n.direction;i&&(lf(t)?(c.x.min=i.left,c.x.max=i.right):(c.y.min=i.top,c.y.max=i.bottom));var u=r.min,f=r.max;return u&&(lf(t)?hx(l)?c.x.max=u.left:c.x.min=u.right:dx(l)?c.y.max=u.top:c.y.min=u.bottom),f&&(lf(t)?hx(l)?c.x.min=f.left:c.x.max=f.right:dx(l)?c.y.min=f.top:c.y.max=f.bottom),c[t]}function eO(e,t,n){var i=e.context,r=e.shape,a=i.gridSnappingContext,c=a.snapLocation,l=a.snapOffset;return l&&Ve(l[t])||(l||(l=a.snapOffset={}),Ve(l[t])||(l[t]=0),!r)||(n.get(r.id)||(lf(t)?l[t]+=r[t]+r.width/2:l[t]+=r[t]+r.height/2),!c)||(t==="x"?/left/.test(c)?l[t]-=r.width/2:/right/.test(c)&&(l[t]+=r.width/2):/top/.test(c)?l[t]-=r.height/2:/bottom/.test(c)&&(l[t]+=r.height/2)),l[t]}function lf(e){return e==="x"}function dx(e){return e.indexOf("n")!==-1}function hx(e){return e.indexOf("w")!==-1}function Wa(e,t){_e.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,a=r.hints||{},c=a.autoResize;if(c){var l=r.shape,u=r.newBounds;ri(c)?r.newBounds=n.snapComplex(u,c):r.newBounds=n.snapSimple(l,u)}})}Wa.$inject=["eventBus","gridSnapping","modeling"];Te(Wa,_e);Wa.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};Wa.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};Wa.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),a={};return a.width=n.snapValue(e.width,{min:e.width}),r&&(i?(a.x=n.snapValue(e.x,{max:e.x}),a.width+=n.snapValue(e.x-a.x,{min:e.x-a.x})):e.x=e.x+e.width-a.width),J(e,a),e};Wa.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),a={};return a.height=n.snapValue(e.height,{min:e.height}),i&&(r?(a.y=n.snapValue(e.y,{max:e.y}),a.height+=n.snapValue(e.y-a.y,{min:e.y-a.y})):e.y=e.y+e.height-a.height),J(e,a),e};var tO=2e3;function hS(e,t){e.on(["spaceTool.move","spaceTool.end"],tO,function(n){var i=n.context;if(i.initialized){var r=i.axis,a;r==="x"?(a=t.snapValue(n.dx),n.x=n.x+a-n.dx,n.dx=a):(a=t.snapValue(n.dy),n.y=n.y+a-n.dy,n.dy=a)}})}hS.$inject=["eventBus","gridSnapping"];const nO={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Wa],gridSnappingSpaceToolBehavior:["type",hS]},iO={__depends__:[nO],__init__:["gridSnapping"],gridSnapping:["type",jo]};var rO=2e3;function mS(e,t){e.on("autoPlace",rO,function(n){var i=n.source,r=Ke(i),a=n.shape,c=D2(i,a);return["x","y"].forEach(function(l){var u={};c[l]!==r[l]&&(c[l]>r[l]?u.min=c[l]:u.max=c[l],b(a,"bpmn:TextAnnotation")&&(oO(l)?u.offset=-a.width/2:u.offset=-a.height/2),c[l]=t.snapValue(c[l],u))}),c})}mS.$inject=["eventBus","gridSnapping"];function oO(e){return e==="x"}var aO=1750;function vS(e,t,n){t.on(["create.start","shape.move.start"],aO,function(i){var r=i.context,a=r.shape,c=e.getRootElement();if(!(!b(a,"bpmn:Participant")||!b(c,"bpmn:Process")||!c.children.length)){var l=r.createConstraints;l&&(a.width=n.snapValue(a.width,{min:a.width}),a.height=n.snapValue(a.height,{min:a.height}))}})}vS.$inject=["canvas","eventBus","gridSnapping"];var sO=3e3;function gd(e,t,n){_e.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],sO,function(r){var a=r.context,c=a.connection,l=a.hints||{},u=c.waypoints;l.connectionStart||l.connectionEnd||l.createElementsBehavior===!1||cO(u)&&n.updateWaypoints(c,i.snapMiddleSegments(u))})}gd.$inject=["eventBus","gridSnapping","modeling"];Te(gd,_e);gd.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=pO(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function cO(e){return e.length>3}function lO(e){return e==="h"}function uO(e){return e==="v"}function pO(e,t,n){var i=Pr(t,n),r={};return lO(i)&&(r.y=e.snapValue(t.y)),uO(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=J({},t,r),n=J({},n,r)),[t,n]}const fO={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",mS],gridSnappingParticipantBehavior:["type",vS],gridSnappingLayoutConnectionBehavior:["type",gd]},dO={__depends__:[iO,fO],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",dS]};var hO=30,mO=30;function Yl(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,a=i.gfx;if(b(r,"bpmn:Lane"))return n.createParticipantHit(r,a);if(b(r,"bpmn:Participant"))return ut(r)?n.createParticipantHit(r,a):n.createDefaultHit(r,a);if(b(r,"bpmn:SubProcess"))return ut(r)?n.createSubProcessHit(r,a):n.createDefaultHit(r,a)})}Yl.$inject=["eventBus","interactionEvents"];Yl.prototype.createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};Yl.prototype.createParticipantHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:hO,height:e.height}),!0};Yl.prototype.createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:mO}),!0};const vO={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Yl]};function yd(e){e.invoke($r,this)}Te(yd,$r);yd.$inject=["injector"];yd.prototype.registerBindings=function(e,t){$r.prototype.registerBindings.call(this,e,t);function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("selectElements",function(i){var r=i.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0}),n("replaceElement",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["r","R"],r))return t.trigger("replaceElement",r),!0})};const gO={__depends__:[Ag],__init__:["keyboardBindings"],keyboardBindings:["type",yd]};var yO={moveSpeed:1,moveSpeedAccelerated:10},_O=1500,mx="left",vx="up",gx="right",yx="down",EO={ArrowLeft:mx,Left:mx,ArrowUp:vx,Up:vx,ArrowRight:gx,Right:gx,ArrowDown:yx,Down:yx},xO={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function gS(e,t,n,i,r){var a=this;this._config=J({},yO,e||{}),t.addListener(_O,function(c){var l=c.keyEvent,u=EO[l.key];if(u&&!t.isCmd(l)){var f=t.isShift(l);return a.moveSelection(u,f),!0}}),this.moveSelection=function(c,l){var u=r.get();if(u.length){var f=this._config[l?"moveSpeedAccelerated":"moveSpeed"],d=xO[c](f),m=i.allowed("elements.move",{shapes:u});m&&n.moveElements(u,d)}}}gS.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const wO={__depends__:[Ag,cr],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",gS]};var _x=10;function Kl(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function a(u,f){var d=u.shape,m=u.direction,g=u.resizeConstraints,_;u.delta=f,_=sI(d,m,f),u.newBounds=lI(_,g),u.canExecute=r.canResize(u)}function c(u){var f=u.resizeConstraints,d=u.minBounds;f===void 0&&(d===void 0&&(d=r.computeMinResizeBox(u)),u.resizeConstraints={min:Fe(d)})}function l(u){var f=u.shape,d=u.canExecute,m=u.newBounds;if(d){if(m=ib(m),!bO(f,m))return;n.resizeShape(f,m)}}e.on("resize.start",function(u){c(u.context)}),e.on("resize.move",function(u){var f={x:u.dx,y:u.dy};a(u.context,f)}),e.on("resize.end",function(u){l(u.context)})}Kl.prototype.canResize=function(e){var t=this._rules,n=zi(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};Kl.prototype.activate=function(e,t,n){var i=this._dragging,r,a;if(typeof n=="string"&&(n={direction:n}),r=J({shape:t},n),a=r.direction,!a)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,yS(t,a),"resize",{autoActivate:!0,cursor:SO(a),data:{shape:t,context:r}})};Kl.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,r;return i=e.minDimensions||{width:_x,height:_x},r=sS(t,e.childrenBoxPadding),uI(n,t,i,r)};Kl.$inject=["eventBus","rules","modeling","dragging"];function bO(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function yS(e,t){var n=Ke(e),i=Fe(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function SO(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var Ex="djs-resizing",xx="resize-not-ok",CO=500;function _S(e,t,n){function i(a){var c=a.shape,l=a.newBounds,u=a.frame;u||(u=a.frame=n.addFrame(c,t.getActiveLayer()),t.addMarker(c,Ex)),l.width>5&&Se(u,{x:l.x,width:l.width}),l.height>5&&Se(u,{y:l.y,height:l.height}),a.canExecute?ot(u).remove(xx):ot(u).add(xx)}function r(a){var c=a.shape,l=a.frame;l&&Dt(a.frame),t.removeMarker(c,Ex)}e.on("resize.move",CO,function(a){i(a.context)}),e.on("resize.cleanup",function(a){r(a.context)})}_S.$inject=["eventBus","canvas","previewSupport"];var Bp=-6,$p=8,Fp=20,el="djs-resizer",TO=["n","w","s","e","nw","ne","se","sw"];function zo(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(a){var c=a.newSelection;r.removeResizers(),c.length===1&&W(c,Dn(r.addResizer,r))}),e.on("shape.changed",function(a){var c=a.element;n.isSelected(c)&&(r.removeResizers(),r.addResizer(c))})}zo.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(a){Bo(a)&&i.activate(a,e,n)}ke.bind(t,"mousedown",r),ke.bind(t,"touchstart",r)};zo.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),a=PO(i),c=Be("g");ot(c).add(el),ot(c).add(el+"-"+e.id),ot(c).add(el+"-"+i),Ge(r,c);var l=Be("rect");Se(l,{x:-$p/2+a.x,y:-$p/2+a.y,width:$p,height:$p}),ot(l).add(el+"-visual"),Ge(c,l);var u=Be("rect");return Se(u,{x:-Fp/2+a.x,y:-Fp/2+a.y,width:Fp,height:Fp}),ot(u).add(el+"-hit"),Ge(c,u),Sv(c,t,n),c};zo.prototype.createResizer=function(e,t){var n=yS(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)};zo.prototype.addResizer=function(e){var t=this;RO(e)||!this._resize.canResize({shape:e})||W(TO,function(n){t.createResizer(e,n)})};zo.prototype.removeResizers=function(){var e=this._getResizersParent();pg(e)};zo.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};zo.$inject=["eventBus","canvas","selection","resize"];function PO(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-Bp:e.indexOf("w")!==-1&&(t.x=Bp),e.indexOf("s")!==-1?t.y=-Bp:e.indexOf("n")!==-1&&(t.y=Bp),t}function RO(e){return!!e.waypoints}const ES={__depends__:[ur,jr,Fl],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Kl],resizePreview:["type",_S],resizeHandles:["type",zo]};var AO=2e3;function ql(e,t,n,i,r,a,c){this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=c,i.registerProvider(this),e.on("element.dblclick",function(u){l(u.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(u){i.isActive()&&i.complete()}),e.on(["shape.remove","connection.remove"],AO,function(u){i.isActive(u.element)&&i.cancel()}),e.on(["commandStack.changed"],function(u){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(u){a.removeResizers()}),e.on("create.end",500,function(u){var f=u.context,d=f.shape,m=u.context.canExecute,g=u.isTouch;g||m&&(f.hints&&f.hints.createElementsBehavior===!1||l(d))}),e.on("autoPlace.end",500,function(u){l(u.shape)});function l(u,f){(f||tt(u,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||Zg(u))&&i.activate(u)}}ql.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];ql.prototype.activate=function(e){var t=Hi(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);J(n,i);var r={};return(tt(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Zg(e))&&J(r,{centerVertically:!0}),La(e)&&J(r,{autoResize:!0}),b(e,"bpmn:TextAnnotation")&&J(r,{resizable:!0,autoResize:!0}),J(n,{options:r}),n}};ql.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r={x:i.x+i.width/2,y:i.y+i.height/2},a={x:i.x,y:i.y},c=t.zoom(),l=this._textRenderer.getDefaultStyle(),u=this._textRenderer.getExternalStyle(),f=u.fontSize*c,d=u.lineHeight,m=l.fontSize*c,g=l.lineHeight,_={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(b(e,"bpmn:Lane")||MO(e))&&(J(a,{width:i.height,height:30*c,x:i.x-i.height/2+15*c,y:r.y-30*c/2}),J(_,{fontSize:m+"px",lineHeight:g,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px",transform:"rotate(-90deg)"})),(tt(e,["bpmn:Task","bpmn:CallActivity"])||kO(e)||Zg(e))&&(J(a,{width:i.width,height:i.height}),J(_,{fontSize:m+"px",lineHeight:g,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"})),DO(e)&&(J(a,{width:i.width,x:i.x}),J(_,{fontSize:m+"px",lineHeight:g,paddingTop:7*c+"px",paddingBottom:7*c+"px",paddingLeft:5*c+"px",paddingRight:5*c+"px"}));var x=90*c,S=7*c,C=4*c;if(n.labelTarget&&(J(a,{width:x,height:i.height+S+C,x:r.x-x/2,y:i.y-S}),J(_,{fontSize:f+"px",lineHeight:d,paddingTop:S+"px",paddingBottom:C+"px"})),La(n)&&!Kf(n)&&!Jt(n)){var z=qf(e),D=t.getAbsoluteBBox({x:z.x,y:z.y,width:0,height:0}),M=f+S+C;J(a,{width:x,height:M,x:D.x-x/2,y:D.y-M/2}),J(_,{fontSize:f+"px",lineHeight:d,paddingTop:S+"px",paddingBottom:C+"px"})}return b(e,"bpmn:TextAnnotation")&&(J(a,{width:i.width,height:i.height,minWidth:30*c,minHeight:10*c}),J(_,{textAlign:"left",paddingTop:5*c+"px",paddingBottom:7*c+"px",paddingLeft:7*c+"px",paddingRight:5*c+"px",fontSize:m+"px",lineHeight:g})),{bounds:a,style:_}};ql.prototype.update=function(e,t,n,i){var r,a;b(e,"bpmn:TextAnnotation")&&(a=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/a.width*i.width,height:e.height/a.height*i.height}),NO(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function Zg(e){return b(e,"bpmn:SubProcess")&&!ut(e)}function DO(e){return b(e,"bpmn:SubProcess")&&ut(e)}function kO(e){return b(e,"bpmn:Participant")&&!ut(e)}function MO(e){return b(e,"bpmn:Participant")&&ut(e)}function NO(e){return!e||!e.trim()}var wx="djs-element-hidden",bx="djs-label-hidden";function xS(e,t,n,i){var r=this,a=t.getDefaultLayer(),c,l,u;e.on("directEditing.activate",function(f){var d=f.active;if(c=d.element.label||d.element,b(c,"bpmn:TextAnnotation")){l=t.getAbsoluteBBox(c),u=Be("g");var m=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:c.width,containerHeight:c.height,position:{mx:0,my:0}}),g=r.path=Be("path");Se(g,{d:m,strokeWidth:2,stroke:IO(c)}),Ge(u,g),Ge(a,u),Gn(u,c.x,c.y)}b(c,"bpmn:TextAnnotation")||c.labelTarget?t.addMarker(c,wx):(b(c,"bpmn:Task")||b(c,"bpmn:CallActivity")||b(c,"bpmn:SubProcess")||b(c,"bpmn:Participant"))&&t.addMarker(c,bx)}),e.on("directEditing.resize",function(f){if(b(c,"bpmn:TextAnnotation")){var d=f.height,m=f.dy,g=Math.max(c.height/l.height*(d+m),0),_=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:c.width,containerHeight:g,position:{mx:0,my:0}});Se(r.path,{d:_})}}),e.on(["directEditing.complete","directEditing.cancel"],function(f){var d=f.active;d&&(t.removeMarker(d.element.label||d.element,wx),t.removeMarker(c,bx)),c=void 0,l=void 0,u&&(Dt(u),u=void 0)})}xS.$inject=["eventBus","canvas","elementRegistry","pathMap"];function IO(e,t){var n=ct(e);return n.get("stroke")||t||"black"}const OO={__depends__:[Tg,ES,Q2],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",ql],labelEditingPreview:["type",xS]};var Jg=["top","bottom","left","right"],jp=10;function ey(e,t){_e.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var a=r.context,c=a.connection,l=c.source,u=c.target,f=a.hints||{};f.createElementsBehavior!==!1&&(n(l),n(u))}),this.postExecuted(["label.create"],function(r){var a=r.context,c=a.shape,l=a.hints||{};l.createElementsBehavior!==!1&&n(c.labelTarget)}),this.postExecuted(["elements.create"],function(r){var a=r.context,c=a.elements,l=a.hints||{};l.createElementsBehavior!==!1&&c.forEach(function(u){n(u)})});function n(r){if(Kf(r)){var a=$O(r);a&&i(r,a)}}function i(r,a){var c=Ke(r),l=r.label,u=Ke(l);if(l.parent){var f=Fe(r),d;switch(a){case"top":d={x:c.x,y:f.top-jp-l.height/2};break;case"left":d={x:f.left-jp-l.width/2,y:c.y};break;case"bottom":d={x:c.x,y:f.bottom+jp+l.height/2};break;case"right":d={x:f.right+jp+l.width/2,y:c.y};break}var m=$i(d,u);t.moveShape(l,m)}}}Te(ey,_e);ey.$inject=["eventBus","modeling"];function LO(e){var t=e.host,n=Ke(e),i=hn(n,t),r;i.indexOf("-")>=0?r=i.split("-"):r=[i];var a=Jg.filter(function(c){return r.indexOf(c)===-1});return a}function BO(e){var t=Ke(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return wS(t,i)});return n}function $O(e){var t=Ke(e.label),n=Ke(e),i=wS(n,t);if(FO(i)){var r=BO(e);if(e.host){var a=LO(e);r=r.concat(a)}var c=Jg.filter(function(l){return r.indexOf(l)===-1});if(c.indexOf(i)===-1)return c[0]}}function wS(e,t){return hn(t,e,5)}function FO(e){return Jg.indexOf(e)!==-1}function ty(e,t,n){_e.call(this,e),this.preExecute("shape.append",function(i){var r=i.source,a=i.shape;i.position||(b(a,"bpmn:TextAnnotation")?i.position={x:r.x+r.width/2+75,y:r.y-50-a.height/2}:i.position={x:r.x+r.width+80+a.width/2,y:r.y+r.height/2})},!0)}Te(ty,_e);ty.$inject=["eventBus","elementFactory","bpmnRules"];function ny(e,t){e.invoke(_e,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape,a=Ze(r.incoming.concat(r.outgoing),function(c){return b(c,"bpmn:Association")});W(a,function(c){t.moveConnection(c,{x:0,y:0},i)})},!0)}Te(ny,_e);ny.$inject=["injector","modeling"];var Sx=500;function _d(e,t){t.invoke(_e,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",Sx,function(i){var r=i.elements;r=r.filter(function(a){var c=a.host;return Cx(a,c)}),r.length===1&&r.map(function(a){return r.indexOf(a)}).forEach(function(a){var c=r[a];i.elements[a]=n.replaceShape(r[a],c)})},!0),this.preExecute("elements.move",Sx,function(i){var r=i.shapes,a=i.newHost;if(r.length===1){var c=r[0];Cx(c,a)&&(i.shapes=[n.replaceShape(c,a)])}},!0)}_d.$inject=["bpmnReplace","injector"];Te(_d,_e);_d.prototype.replaceShape=function(e,t){var n=jO(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function jO(e){var t=xe(e),n=t.eventDefinitions;return n&&n[0]}function Cx(e,t){return!Jt(e)&&tt(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function iy(e,t){_e.call(this,e);function n(i){return Ze(i.attachers,function(r){return b(r,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(i){var r=i.context.source,a=i.context.target,c=n(a);b(r,"bpmn:EventBasedGateway")&&b(a,"bpmn:ReceiveTask")&&c.length>0&&t.removeElements(c)}),this.postExecute("connection.reconnect",function(i){var r=i.context.oldSource,a=i.context.newSource;b(r,"bpmn:Gateway")&&b(a,"bpmn:EventBasedGateway")&&W(a.outgoing,function(c){var l=c.target,u=n(l);b(l,"bpmn:ReceiveTask")&&u.length>0&&t.removeElements(u)})})}iy.$inject=["eventBus","modeling"];Te(iy,_e);function ry(e){e.invoke(_e,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,r=n.shape;b(i,"bpmn:Lane")&&!b(r,"bpmn:Lane")&&(n.parent=Cf(i,"bpmn:Participant"))})}ry.$inject=["injector"];Te(ry,_e);function oy(e,t,n){_e.call(this,e),this.preExecute("shape.create",function(i){var r=i.context,a=r.shape;if(b(a,"bpmn:DataObjectReference")&&a.type!=="label"){var c=t.create("bpmn:DataObject");a.businessObject.dataObjectRef=c}})}oy.$inject=["eventBus","bpmnFactory","moddle"];Te(oy,_e);var Hv=20,Vv=20,bS=30,zp=2e3;function ay(e,t,n){_e.call(this,t),t.on(["create.start","shape.move.start"],zp,function(r){var a=r.context,c=a.shape,l=e.getRootElement();if(!(!b(c,"bpmn:Participant")||!b(l,"bpmn:Process")||!l.children.length)){var u=l.children.filter(function(m){return!b(m,"bpmn:Group")&&!Jt(m)&&!VO(m)});if(u.length){var f=Ot(u),d=zO(c,f);J(c,d),a.createConstraints=HO(c,f)}}}),t.on("create.start",zp,function(r){var a=r.context,c=a.shape,l=e.getRootElement(),u=e.getGraphics(l);function f(d){d.element=l,d.gfx=u}b(c,"bpmn:Participant")&&b(l,"bpmn:Process")&&(t.on("element.hover",zp,f),t.once("create.cleanup",function(){t.off("element.hover",f)}))});function i(){var r=e.getRootElement();return b(r,"bpmn:Collaboration")?r:n.makeCollaboration()}this.preExecute("elements.create",zp,function(r){var a=r.elements,c=r.parent,l=GO(a),u;l&&b(c,"bpmn:Process")&&(r.parent=i(),u=r.hints=r.hints||{},u.participant=l,u.process=c,u.processRef=xe(l).get("processRef"))},!0),this.preExecute("shape.create",function(r){var a=r.parent,c=r.shape;b(c,"bpmn:Participant")&&b(a,"bpmn:Process")&&(r.parent=i(),r.process=a,r.processRef=xe(c).get("processRef"))},!0),this.execute("shape.create",function(r){var a=r.hints||{},c=r.process||a.process,l=r.shape,u=a.participant;c&&(!u||l===u)&&xe(l).set("processRef",xe(c))},!0),this.revert("shape.create",function(r){var a=r.hints||{},c=r.process||a.process,l=r.processRef||a.processRef,u=r.shape,f=a.participant;c&&(!f||u===f)&&xe(u).set("processRef",l)},!0),this.postExecute("shape.create",function(r){var a=r.hints||{},c=r.process||r.hints.process,l=r.shape,u=a.participant;if(c){var f=c.children.slice();u?l===u&&n.moveElements(f,{x:0,y:0},u):n.moveElements(f,{x:0,y:0},l)}},!0)}ay.$inject=["canvas","eventBus","modeling"];Te(ay,_e);function zO(e,t){t={width:t.width+Hv*2+bS,height:t.height+Vv*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function HO(e,t){return t=Fe(t),{bottom:t.top+e.height/2-Vv,left:t.right-e.width/2+Hv,top:t.bottom-e.height/2+Vv,right:t.left+e.width/2-Hv-bS}}function VO(e){return!!e.waypoints}function GO(e){return at(e,function(t){return b(t,"bpmn:Participant")})}var Tx="__targetRef_placeholder";function sy(e,t){_e.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Px(a)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Px(a));function n(c,l,u){var f=c.get("dataInputAssociations");return at(f,function(d){return d!==u&&d.targetRef===l})}function i(c,l){var u=c.get("properties"),f=at(u,function(d){return d.name===Tx});return!f&&l&&(f=t.create("bpmn:Property",{name:Tx}),Gt(u,f)),f}function r(c,l){var u=i(c);u&&(n(c,u,l)||Lt(c.get("properties"),u))}function a(c){var l=c.context,u=l.connection,f=u.businessObject,d=u.target,m=d&&d.businessObject,g=l.newTarget,_=g&&g.businessObject,x=l.oldTarget||l.target,S=x&&x.businessObject,C=u.businessObject,z;S&&S!==m&&r(S,f),_&&_!==m&&r(_,f),m?(z=i(m,!0),C.targetRef=z):C.targetRef=null}}sy.$inject=["eventBus","bpmnFactory"];Te(sy,_e);function Px(e){return function(t){var n=t.context,i=n.connection;if(b(i,"bpmn:DataInputAssociation"))return e(t)}}function Ed(e){this._bpmnUpdater=e}Ed.$inject=["bpmnUpdater"];Ed.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,r=e.newDiParent;e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r)};Ed.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,r=e.oldDiParent;this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r)};function cy(e,t,n,i){_e.call(this,i),t.registerHandler("dataStore.updateContainment",Ed);function r(){return n.filter(function(l){return b(l,"bpmn:Participant")&&xe(l).processRef})[0]}function a(l){return l.children.filter(function(u){return b(u,"bpmn:DataStoreReference")&&!u.labelTarget})}function c(l,u){var f=l.businessObject||l;if(u=u||r(),u){var d=u.businessObject||u;t.execute("dataStore.updateContainment",{dataStoreBo:f,dataStoreDi:ct(l),newSemanticParent:d.processRef||d,newDiParent:ct(u)})}}this.preExecute("shape.create",function(l){var u=l.context,f=u.shape;b(f,"bpmn:DataStoreReference")&&f.type!=="label"&&(u.hints||(u.hints={}),u.hints.autoResize=!1)}),this.preExecute("elements.move",function(l){var u=l.context,f=u.shapes,d=f.filter(function(m){return b(m,"bpmn:DataStoreReference")});d.length&&(u.hints||(u.hints={}),u.hints.autoResize=f.filter(function(m){return!b(m,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(l){var u=l.context,f=u.shape,d=f.parent;b(f,"bpmn:DataStoreReference")&&f.type!=="label"&&b(d,"bpmn:Collaboration")&&c(f)}),this.postExecute("shape.move",function(l){var u=l.context,f=u.shape,d=u.oldParent,m=f.parent;if(!b(d,"bpmn:Collaboration")&&b(f,"bpmn:DataStoreReference")&&f.type!=="label"&&b(m,"bpmn:Collaboration")){var g=b(d,"bpmn:Participant")?d:WO(d,"bpmn:Participant");c(f,g)}}),this.postExecute("shape.delete",function(l){var u=l.context,f=u.shape,d=e.getRootElement();tt(f,["bpmn:Participant","bpmn:SubProcess"])&&b(d,"bpmn:Collaboration")&&a(d).filter(function(m){return UO(m,f)}).forEach(function(m){c(m)})}),this.postExecute("canvas.updateRoot",function(l){var u=l.context,f=u.oldRoot,d=u.newRoot,m=a(f);m.forEach(function(g){b(d,"bpmn:Process")&&c(g,d)})})}cy.$inject=["canvas","commandStack","elementRegistry","eventBus"];Te(cy,_e);function UO(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function WO(e,t){for(;e.parent;){if(b(e.parent,t))return e.parent;e=e.parent}}var YO=500;function ly(e,t,n){_e.call(this,e);function i(r,a){var c=Ga(a),l=[],u=[];if(Fa(c,function(g){return g.y>r.y?u.push(g):l.push(g),g.children}),!!c.length){var f;u.length&&l.length?f=r.height/2:f=r.height;var d,m;l.length&&(d=n.calculateAdjustments(l,"y",f,r.y-10),n.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:f},"s")),u.length&&(m=n.calculateAdjustments(u,"y",-f,r.y+r.height+10),n.makeSpace(m.movingShapes,m.resizingShapes,{x:0,y:-f},"n"))}}this.postExecuted("shape.delete",YO,function(r){var a=r.context,c=a.hints,l=a.shape,u=a.oldParent;b(l,"bpmn:Lane")&&(c&&c.nested||i(l,u))})}ly.$inject=["eventBus","modeling","spaceTool"];Te(ly,_e);var Rx=500;function xd(e,t){t.invoke(_e,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",Rx,function(i){var r=i.elements;r.filter(function(a){var c=a.host;return Ax(a,c)}).map(function(a){return r.indexOf(a)}).forEach(function(a){i.elements[a]=n.replaceShape(r[a])})},!0),this.preExecute("elements.move",Rx,function(i){var r=i.shapes,a=i.newHost;r.forEach(function(c,l){var u=c.host;Ax(c,qO(r,u)?u:a)&&(r[l]=n.replaceShape(c))})},!0)}xd.$inject=["bpmnReplace","injector"];Te(xd,_e);xd.prototype.replaceShape=function(e){var t=KO(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function KO(e){var t=xe(e),n=t.eventDefinitions;return n&&n[0]}function Ax(e,t){return!Jt(e)&&b(e,"bpmn:BoundaryEvent")&&!t}function qO(e,t){return e.indexOf(t)!==-1}function uy(e,t,n){_e.call(this,e);function i(r,a,c){var l=a.waypoints,u,f,d,m,g,_,x,S=r.outgoing.slice(),C=r.incoming.slice(),z;Ve(c.width)?z=Ke(c):z=c;var D=Iv(l,z);if(D){if(u=l.slice(0,D.index),f=l.slice(D.index+(D.bendpoint?1:0)),!u.length||!f.length)return;d=D.bendpoint?l[D.index]:z,(u.length===1||!Dx(r,u[u.length-1]))&&u.push(kx(d)),(f.length===1||!Dx(r,f[0]))&&f.unshift(kx(d))}m=a.source,g=a.target,t.canConnect(m,r,a)&&(n.reconnectEnd(a,r,u||z),_=a),t.canConnect(r,g,a)&&(_?x=n.connect(r,g,{type:a.type,waypoints:f}):(n.reconnectStart(a,r,f||z),x=a));var M=[].concat(_&&Ze(C,function(A){return A.source===_.source})||[],x&&Ze(S,function(A){return A.target===x.target})||[]);M.length&&n.removeElements(M)}this.preExecute("elements.move",function(r){var a=r.newParent,c=r.shapes,l=r.delta,u=c[0];if(!(!u||!a)){a&&a.waypoints&&(r.newParent=a=a.parent);var f=Ke(u),d={x:f.x+l.x,y:f.y+l.y},m=at(a.children,function(g){var _=t.canInsert(c,g);return _&&Iv(g.waypoints,d)});m&&(r.targetFlow=m,r.position=d)}},!0),this.postExecuted("elements.move",function(r){var a=r.shapes,c=r.targetFlow,l=r.position;c&&i(a[0],c,l)},!0),this.preExecute("shape.create",function(r){var a=r.parent,c=r.shape;t.canInsert(c,a)&&(r.targetFlow=a,r.parent=a.parent)},!0),this.postExecuted("shape.create",function(r){var a=r.shape,c=r.targetFlow,l=r.position;c&&i(a,c,l)},!0)}Te(uy,_e);uy.$inject=["eventBus","bpmnRules","modeling"];function Dx(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function kx(e){return J({},e)}function py(e,t){_e.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,r=i.connection,a=i.source,c=i.target,l=i.hints;if(!(l&&l.createElementsBehavior===!1)&&Bs(r)){var u=[];b(a,"bpmn:EventBasedGateway")?u=c.incoming.filter(Bs):u=c.incoming.filter(function(f){return Bs(f)&&b(f.source,"bpmn:EventBasedGateway")}),u.forEach(function(f){t.removeConnection(f)})}}),this.preExecuted("shape.replace",function(n){var i=n.context,r=i.newShape;if(b(r,"bpmn:EventBasedGateway")){var a=r.outgoing.filter(Bs).reduce(function(c,l){return c.includes(l.target)?c:c.concat(l.target)},[]);a.forEach(function(c){c.incoming.filter(Bs).forEach(function(l){const u=c.incoming.filter(Bs).filter(function(f){return f.source===r});(l.source!==r||u.length>1)&&t.removeConnection(l)})})}})}py.$inject=["eventBus","modeling"];Te(py,_e);function Bs(e){return b(e,"bpmn:SequenceFlow")}var Hp=1500,XO=2e3;function SS(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Hp,function(i){var r=i.context,a=r.shape||i.shape,c=i.hover;b(c,"bpmn:Lane")&&!tt(a,["bpmn:Lane","bpmn:Participant"])&&(i.hover=Li(c),i.hoverGfx=e.getGraphics(i.hover));var l=n.getRootElement();c!==l&&(a.labelTarget||b(a,"bpmn:Group"))&&(i.hover=l,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Hp,function(i){var r=i.hover;b(r,"bpmn:Lane")&&(i.hover=Li(r)||r,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],Hp,function(i){var r=i.context,a=i.hover,c=r.type;b(a,"bpmn:Lane")&&/reconnect/.test(c)&&(i.hover=Li(a)||a,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],Hp,function(i){var r=i.context,a=r.start;b(a,"bpmn:Lane")&&(r.start=Li(a)||a)}),t.on("shape.move.start",XO,function(i){var r=i.shape;b(r,"bpmn:Lane")&&(i.shape=Li(r)||r)})}SS.$inject=["elementRegistry","eventBus","canvas"];function QO(e){return e.create("bpmn:Category")}function ZO(e){return e.create("bpmn:CategoryValue")}function JO(e,t,n){return Gt(t.get("categoryValue"),e),e.$parent=t,Gt(n.get("rootElements"),t),t.$parent=n,e}function e5(e){var t=e.$parent;return t&&(Lt(t.get("categoryValue"),e),e.$parent=null),e}function t5(e){var t=e.$parent;return t&&(Lt(t.get("rootElements"),e),e.$parent=null),e}var Mx=770;function fy(e,t,n,i,r,a){r.invoke(_e,this);function c(){return n.filter(function(x){return b(x,"bpmn:Group")})}function l(x,S){return x.some(function(C){var z=xe(C),D=z.categoryValueRef&&z.categoryValueRef.$parent;return D===S})}function u(x,S){return x.some(function(C){var z=xe(C);return z.categoryValueRef===S})}function f(x,S,C){var z=c().filter(function(D){return D.businessObject!==C});S&&!l(z,S)&&t5(S),x&&!u(z,x)&&e5(x)}function d(x,S){return JO(x,S,t.getDefinitions())}function m(x,S){var C=xe(x),z=C.categoryValueRef;z||(z=C.categoryValueRef=S.categoryValue=S.categoryValue||ZO(e));var D=z.$parent;D||(D=z.$parent=S.category=S.category||QO(e)),d(z,D,t.getDefinitions())}function g(x,S){var C=S.category,z=S.categoryValue,D=xe(x);z?(D.categoryValueRef=null,f(z,C,D)):f(null,D.categoryValueRef.$parent,D)}this.execute("label.create",function(x){var S=x.context,C=S.labelTarget;b(C,"bpmn:Group")&&m(C,S)}),this.revert("label.create",function(x){var S=x.context,C=S.labelTarget;b(C,"bpmn:Group")&&g(C,S)}),this.execute("shape.delete",function(x){var S=x.context,C=S.shape,z=xe(C);if(!(!b(C,"bpmn:Group")||C.labelTarget)){var D=S.categoryValue=z.categoryValueRef,M;D&&(M=S.category=D.$parent,f(D,M,z),z.categoryValueRef=null)}}),this.reverted("shape.delete",function(x){var S=x.context,C=S.shape;if(!(!b(C,"bpmn:Group")||C.labelTarget)){var z=S.category,D=S.categoryValue,M=xe(C);D&&(M.categoryValueRef=D,d(D,z))}}),this.execute("shape.create",function(x){var S=x.context,C=S.shape;!b(C,"bpmn:Group")||C.labelTarget||xe(C).categoryValueRef&&m(C,S)}),this.reverted("shape.create",function(x){var S=x.context,C=S.shape;!b(C,"bpmn:Group")||C.labelTarget||xe(C).categoryValueRef&&g(C,S)});function _(x,S){var C=e.create(x.$type);return a.copyElement(x,C,null,S)}i.on("copyPaste.copyElement",Mx,function(x){var S=x.descriptor,C=x.element;if(!(!b(C,"bpmn:Group")||C.labelTarget)){var z=xe(C);if(z.categoryValueRef){var D=z.categoryValueRef;S.categoryValue=_(D,!0),D.$parent&&(S.category=_(D.$parent,!0))}}}),i.on("copyPaste.pasteElement",Mx,function(x){var S=x.descriptor,C=S.businessObject,z=S.categoryValue,D=S.category;z&&(z=C.categoryValueRef=_(z)),D&&(z.$parent=_(D)),delete S.category,delete S.categoryValue})}fy.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];Te(fy,_e);function Gv(e,t,n,i){var r,a,c,l,u;return r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),r==0?null:(a=e.y-n.y,c=e.x-n.x,u=(i.x-n.x)*a-(i.y-n.y)*c,l=u/r,{x:Math.round(e.x+l*(t.x-e.x)),y:Math.round(e.y+l*(t.y-e.y))})}function CS(e){function t(i,r,a){var c={x:a.x,y:a.y-50},l={x:a.x-50,y:a.y},u=Gv(i,r,a,c),f=Gv(i,r,a,l),d;u&&f?Nx(u,a)>Nx(f,a)?d=f:d=u:d=u||f,i.original=d}function n(i){var r=i.waypoints;t(r[0],r[1],Ke(i.source)),t(r[r.length-1],r[r.length-2],Ke(i.target))}e.on("bpmnElement.added",function(i){var r=i.element;r.waypoints&&n(r)})}CS.$inject=["eventBus"];function Nx(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function dy(e){_e.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=n.context.shape,r=xe(i),a=ct(i);tt(r,t)&&!a.get("isHorizontal")&&a.set("isHorizontal",!0)})}dy.$inject=["eventBus"];Te(dy,_e);var TS=Math.sqrt,PS=Math.min,n5=Math.max,Ix=Math.abs;function Ox(e){return Math.pow(e,2)}function tl(e,t){return TS(Ox(e.x-t.x)+Ox(e.y-t.y))}function i5(e,t){var n=0,i,r,a,c,l,u,f,d,m,g,_;for(n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],Bx(i,r)?f=[i]:(a=tl(e,i),c=tl(e,r),u=PS(a,c),f=r5(i,r,e,u)),f.length<1)throw new Error("expected between [1, 2] circle -> line intersections");f.length===1&&(d={type:"bendpoint",position:f[0],segmentIndex:n,bendpointIndex:Bx(i,f[0])?n:n+1}),f.length===2&&(l=a5(f[0],f[1]),d={type:"segment",position:l,segmentIndex:n,relativeLocation:tl(i,l)/tl(i,r)}),m=tl(d.position,e),(!_||g>m)&&(_=d,g=m)}return _}function r5(e,t,n,i){var r=t.x-e.x,a=t.y-e.y,c=n.x-e.x,l=n.y-e.y,u=r*r+a*a,f=r*c+a*l,d=c*c+l*l-i*i,m=f/u,g=d/u,_=m*m-g;if(_<0&&_>-1e-6&&(_=0),_<0)return[];var x=TS(_),S=-m+x,C=-m-x,z={x:e.x-r*S,y:e.y-a*S};if(_===0)return[z];var D={x:e.x-r*C,y:e.y-a*C};return[z,D].filter(function(M){return o5(M,e,t)})}function o5(e,t,n){return Lx(e.x,t.x,n.x)&&Lx(e.y,t.y,n.y)}function Lx(e,t,n){return e>=PS(t,n)-Df&&e<=n5(t,n)+Df}function a5(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var Df=.1;function Bx(e,t){return Ix(e.x-t.x)<=Df&&Ix(e.y-t.y)<=Df}function s5(e,t,n,i){var r=n.segmentIndex,a=t.length-e.length;if(i.segmentMove){var c=i.segmentMove.segmentStartIndex,l=i.segmentMove.newSegmentStartIndex;return r===c?l:r>=l?r+a<l?l:r+a:r}if(i.bendpointMove){var u=i.bendpointMove.insert,f=i.bendpointMove.bendpointIndex,d;if(a===0)return r;if(r>=f&&(d=u?r+1:r-1),r<f&&(d=r,u&&n.type!=="bendpoint"&&f-1===r)){var m=AS(t,f);m<n.relativeLocation&&d++}return d}return a===0?r:i.connectionStart&&r===0?0:i.connectionEnd&&r===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function RS(e,t,n,i){var r=0,a=0,c={point:e,delta:{x:0,y:0}},l=i5(e,n),u=l.segmentIndex,f=s5(n,t,l,i);if(f<0||f>t.length-2||f===null)return c;var d=$x(n,u),m=$x(t,f),g=l.position,_=l5(d,g),x=c5(d,m);if(l.type==="bendpoint"){var S=t.length-n.length,C=l.bendpointIndex,z=n[C];if(t.indexOf(z)!==-1)return c;if(S===0){var D=t[C];return r=D.x-l.position.x,a=D.y-l.position.y,{delta:{x:r,y:a},point:{x:e.x+r,y:e.y+a}}}S<0&&C!==0&&C<n.length-1&&(_=AS(n,C))}var M={x:(m[1].x-m[0].x)*_+m[0].x,y:(m[1].y-m[0].y)*_+m[0].y},A=JM({x:e.x-g.x,y:e.y-g.y},x);return r=M.x+A.x-e.x,a=M.y+A.y-e.y,{point:Rr(M),delta:Rr({x:r,y:a})}}function AS(e,t){var n=Tf(e[t-1],e[t]),i=Tf(e[t],e[t+1]),r=n/(n+i);return r}function c5(e,t){var n=N1(e),i=N1(t);return i-n}function $x(e,t){return[e[t],e[t+1]]}function l5(e,t){var n=Tf(e[0],e[1]),i=Tf(e[0],t);return n===0?0:i/n}function u5(e,t,n,i){var r=p5(e);return RS(r,t,n,i).delta}function p5(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Xl(e,t,n){var i=ul(t),r=ul(n),a=$i(e,i),c={x:a.x*(n.width/t.width),y:a.y*(n.height/t.height)};return Rr({x:r.x+c.x,y:r.y+c.y})}function Fx(e,t,n){var i=ul(e),r=ul(t),a=ul(n),c=$i(e,i),l=$i(i,r),u=f5(i,t,n);if(u)return u;var f={x:l.x*(n.width/t.width),y:l.y*(n.height/t.height)},d={x:a.x+f.x,y:a.y+f.y};return Rr({x:d.x+c.x-e.x,y:d.y+c.y-e.y})}function f5(e,t,n){var i=Fe(t),r=Fe(n);if(d5(i,r))return null;var a=hn(t,e),c,l,u;if(a==="top")c={x:0,y:r.bottom-i.bottom};else if(a==="bottom")c={x:0,y:r.top-i.top};else if(a==="right")c={x:r.left-i.left,y:0};else if(a==="left")c={x:r.right-i.right,y:0};else return null;return l={x:e.x+c.x,y:e.y+c.y},u=hn(n,l),u!==a?null:c}function d5(e,t){return h5(e,t)||m5(e,t)}function h5(e,t){return e.right!==t.right&&e.left!==t.left}function m5(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var v5={width:90,height:20},jx="name",zx="text";function hy(e,t,n,i){_e.call(this,e),this.postExecute("element.updateProperties",function(a){var c=a.context,l=c.element,u=c.properties;if(jx in u&&t.updateLabel(l,u[jx]),zx in u&&b(l,"bpmn:TextAnnotation")){var f=i.getTextAnnotationBounds({x:l.x,y:l.y,width:l.width,height:l.height},u[zx]||"");t.updateLabel(l,u.text,f)}}),this.postExecute(["shape.create","connection.create"],function(a){var c=a.context,l=c.hints||{};if(l.createElementsBehavior!==!1){var u=c.shape||c.connection,f=u.businessObject;if(!(Jt(u)||!La(u))&&Hi(u)){var d=qf(u),m=i.getExternalLabelBounds(v5,Hi(u));t.createLabel(u,d,{id:f.id+"_label",businessObject:f,width:m.width,height:m.height})}}}),this.postExecute("shape.delete",function(a){var c=a.context,l=c.labelTarget,u=c.hints||{};l&&u.unsetLabel!==!1&&t.updateLabel(l,null,null,{removeShape:!1})}),this.postExecute(["label.create"],function(a){var c=a.context,l=c.shape,u=c.labelTarget,f;u&&b(u,"bpmn:BaseElement")&&(f=ct(u),f.label||(f.label=n.create("bpmndi:BPMNLabel",{bounds:n.create("dc:Bounds")}),l.di=f),J(f.label.bounds,{x:l.x,y:l.y,width:l.width,height:l.height}))});function r(a){var c=a.context,l=c.connection,u=l.label,f=J({},c.hints),d=c.newWaypoints||l.waypoints,m=c.oldWaypoints;return typeof f.startChanged>"u"&&(f.startChanged=!!f.connectionStart),typeof f.endChanged>"u"&&(f.endChanged=!!f.connectionEnd),u5(u,d,m,f)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var c=a.context,l=c.hints||{};if(l.labelBehavior!==!1){var u=c.connection,f=u.label,d;!f||!f.parent||(d=r(a),t.moveShape(f,d))}}),this.postExecute(["shape.replace"],function(a){var c=a.context,l=c.newShape,u=c.oldShape,f=xe(l);f&&La(f)&&u.label&&l.label&&(l.label.x=u.label.x,l.label.y=u.label.y)}),this.postExecute("shape.resize",function(a){var c=a.context,l=c.shape,u=c.newBounds,f=c.oldBounds;if(Kf(l)){var d=l.label,m=Ke(d),g=_5(f),_=y5(m,g),x=g5(_,f,u);t.moveShape(d,x)}})}Te(hy,_e);hy.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function g5(e,t,n){var i=Xl(e,t,n);return Rr($i(i,e))}function y5(e,t){if(t.length){var n=E5(e,t);return Vg(e,n)}}function _5(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function E5(e,t){var n=t.map(function(r){return{line:r,distance:B2(e,r)}}),i=ji(n,"distance");return i[0].line}function x5(e,t,n,i){return RS(e,t,n,i).point}function my(e,t){_e.call(this,e);function n(i,r){var a=i.context,c=a.connection,l=J({},a.hints),u=a.newWaypoints||c.waypoints,f=a.oldWaypoints;return typeof l.startChanged>"u"&&(l.startChanged=!!l.connectionStart),typeof l.endChanged>"u"&&(l.endChanged=!!l.connectionEnd),x5(r,u,f,l)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(i){var r=i.context,a=r.connection,c=a.outgoing,l=a.incoming;l.forEach(function(u){var f=u.waypoints[u.waypoints.length-1],d=n(i,f),m=[].concat(u.waypoints.slice(0,-1),[d]);t.updateWaypoints(u,m)}),c.forEach(function(u){var f=u.waypoints[0],d=n(i,f),m=[].concat([d],u.waypoints.slice(1));t.updateWaypoints(u,m)})}),this.postExecute(["connection.move"],function(i){var r=i.context,a=r.connection,c=a.outgoing,l=a.incoming,u=r.delta;l.forEach(function(f){var d=f.waypoints[f.waypoints.length-1],m={x:d.x+u.x,y:d.y+u.y},g=[].concat(f.waypoints.slice(0,-1),[m]);t.updateWaypoints(f,g)}),c.forEach(function(f){var d=f.waypoints[0],m={x:d.x+u.x,y:d.y+u.y},g=[].concat([m],f.waypoints.slice(1));t.updateWaypoints(f,g)})})}Te(my,_e);my.$inject=["eventBus","modeling"];function wd(e,t,n){var i=Sd(e),r=kS(i,t),a=i[0];return r.length?r[r.length-1]:Xl(a.original||a,n,t)}function bd(e,t,n){var i=Sd(e),r=kS(i,t),a=i[i.length-1];return r.length?r[0]:Xl(a.original||a,n,t)}function vy(e,t,n){var i=Sd(e),r=DS(t,n),a=i[0];return Xl(a.original||a,r,t)}function gy(e,t,n){var i=Sd(e),r=DS(t,n),a=i[i.length-1];return Xl(a.original||a,r,t)}function DS(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function Sd(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function kS(e,t){var n=Zt(e,b5);return Ze(n,function(i){return w5(i,t)})}function w5(e,t){return hn(t,e,1)==="intersect"}function b5(e){return e.original||e}function yy(e,t){_e.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(S5(i,r)){var a=C5(i);a.incoming.forEach(function(c){var l=bd(c,r,i);t.reconnectEnd(c,r,l)}),a.outgoing.forEach(function(c){var l=wd(c,r,i);t.reconnectStart(c,r,l)})}},!0)}yy.$inject=["eventBus","modeling"];Te(yy,_e);function S5(e,t){return b(e,"bpmn:Participant")&&ut(e)&&b(t,"bpmn:Participant")&&!ut(t)}function C5(e){var t=Rl([e],!1),n=[],i=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(a){b(a,"bpmn:MessageFlow")&&n.push(a)}),r.outgoing.forEach(function(a){b(a,"bpmn:MessageFlow")&&i.push(a)}))},[]),{incoming:n,outgoing:i}}var T5="flow elements must be children of pools/participants";function MS(e,t,n){function i(r,a,c){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:2e3,html:"<div>"+a+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var a=r.context,c=a.shape,l=a.target;b(l,"bpmn:Collaboration")&&b(c,"bpmn:FlowNode")&&i(r,n(T5))})}MS.$inject=["eventBus","tooltips","translate"];function _y(e,t){_e.call(this,e),this.preExecute("shape.resize",function(n){var i=n.shape,r=ct(i),a=r&&r.get("label"),c=a&&a.get("bounds");c&&t.updateModdleProperties(i,a,{bounds:void 0})},!0)}Te(_y,_e);_y.$inject=["eventBus","modeling"];function Ey(e,t,n){_e.call(this,e),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var a=r.incoming[0],c=r.outgoing[0];if(!(!b(a,"bpmn:SequenceFlow")||!b(c,"bpmn:SequenceFlow"))&&t.canConnect(a.source,c.target,a)){var l=P5(a.waypoints,c.waypoints);n.reconnectEnd(a,c.target,l)}}})}Te(Ey,_e);Ey.$inject=["eventBus","bpmnRules","modeling"];function $s(e){return e.original||e}function P5(e,t){var n=Gv($s(e[e.length-2]),$s(e[e.length-1]),$s(t[1]),$s(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[$s(e[0]),$s(t[t.length-1])]}function xy(e,t){_e.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;b(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;i&&!i.businessObject.participants.length&&t.makeProcess()},!0)}xy.$inject=["eventBus","modeling"];Te(xy,_e);function wy(e,t,n,i){_e.call(this,e);var r=i.get("dragging",!1);function a(u){var f=u.source,d=u.target,m=u.parent;if(m){var g,_;b(u,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(f,d)||(_=!0),n.canConnectMessageFlow(f,d)&&(g="bpmn:MessageFlow")),b(u,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(f,d)||(_=!0),n.canConnectSequenceFlow(f,d)&&(g="bpmn:SequenceFlow")),b(u,"bpmn:Association")&&!n.canConnectAssociation(f,d)&&(_=!0),_&&t.removeConnection(u),g&&t.connect(f,d,{type:g,waypoints:u.waypoints.slice()})}}function c(u){var f=u.context,d=f.connection,m=f.newSource||d.source,g=f.newTarget||d.target,_,x;_=n.canConnect(m,g),!(!_||_.type===d.type)&&(x=t.connect(m,g,{type:_.type,waypoints:d.waypoints.slice()}),t.removeConnection(d),f.connection=x,r&&l(d,x))}function l(u,f){var d=r.context(),m=d&&d.payload.previousSelection,g;!m||!m.length||(g=m.indexOf(u),g!==-1&&m.splice(g,1,f))}this.postExecuted("elements.move",function(u){var f=u.closure,d=f.allConnections;W(d,a)},!0),this.preExecute("connection.reconnect",c),this.postExecuted("element.updateProperties",function(u){var f=u.context,d=f.properties,m=f.element,g=m.businessObject,_;d.default&&(_=at(m.outgoing,Bi({id:m.businessObject.default.id})),_&&t.updateProperties(_,{conditionExpression:void 0})),d.conditionExpression&&g.sourceRef.default===g&&t.updateProperties(m.source,{default:void 0})})}Te(wy,_e);wy.$inject=["eventBus","modeling","bpmnRules","injector"];function Cd(e,t,n,i,r,a){i.invoke(_e,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=a,this.postExecuted(["elements.create"],500,function(c){var l=c.context,u=l.parent,f=l.elements,d=Un(f,function(m,g){var _=t.canReplace([g],g.host||g.parent||u);return _?m.concat(_.replacements):m},[]);d.length&&this.replaceElements(f,d)},this),this.postExecuted(["elements.move"],500,function(c){var l=c.context,u=l.newParent,f=l.newHost,d=[];W(l.closure.topLevel,function(g){ni(g)?d=d.concat(g.children):d=d.concat(g)}),d.length===1&&f&&(u=f);var m=t.canReplace(d,u);m&&this.replaceElements(d,m.replacements,f)},this),this.postExecute(["shape.replace"],1500,function(c){var l=c.context,u=l.oldShape,f=l.newShape,d=u.attachers,m;d&&d.length&&(m=t.canReplace(d,f),this.replaceElements(d,m.replacements))},this),this.postExecuted(["shape.replace"],1500,function(c){var l=c.context,u=l.oldShape,f=l.newShape;r.unclaimId(u.businessObject.id,u.businessObject),r.updateProperties(f,{id:u.id})})}Te(Cd,_e);Cd.prototype.replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;W(t,function(a){var c={type:a.newElementType},l=n.get(a.oldElementId),u=e.indexOf(l);e[u]=i.replaceElement(l,c,{select:!1})}),t&&r.select(e)};Cd.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var R5=1500,A5={width:140,height:120},ka={width:300,height:60},bl={width:300,height:150},NS={width:140,height:120},IS={width:50,height:30};function OS(e){e.on("resize.start",R5,function(t){var n=t.context,i=n.shape,r=n.direction,a=n.balanced;(b(i,"bpmn:Lane")||b(i,"bpmn:Participant"))&&(n.resizeConstraints=L5(i,r,a)),b(i,"bpmn:Participant")&&(n.minDimensions=bl),b(i,"bpmn:SubProcess")&&ut(i)&&(n.minDimensions=NS),b(i,"bpmn:TextAnnotation")&&(n.minDimensions=IS)})}OS.$inject=["eventBus"];var Vp=Math.abs,D5=Math.min,k5=Math.max;function LS(e,t,n,i){var r=e[t];e[t]=r===void 0?n:i(n,r)}function Gp(e,t,n){return LS(e,t,n,D5)}function Up(e,t,n){return LS(e,t,n,k5)}var M5=20,N5=50,I5=20,O5=20;function L5(e,t,n){var i=Li(e),r=!0,a=!0,c=pd(i,[i]),l=Fe(e),u={},f={};/e/.test(t)?f.right=l.left+ka.width:/w/.test(t)&&(f.left=l.right-ka.width),c.forEach(function(m){var g=Fe(m);/n/.test(t)&&(g.top<l.top-10&&(r=!1),n&&Vp(l.top-g.bottom)<10&&Up(u,"top",g.top+ka.height),Vp(l.top-g.top)<5&&Gp(f,"top",g.bottom-ka.height)),/s/.test(t)&&(g.bottom>l.bottom+10&&(a=!1),n&&Vp(l.bottom-g.top)<10&&Gp(u,"bottom",g.bottom-ka.height),Vp(l.bottom-g.bottom)<5&&Up(f,"bottom",g.top+ka.height))});var d=i.children.filter(function(m){return!m.hidden&&!m.waypoints&&(b(m,"bpmn:FlowElement")||b(m,"bpmn:Artifact"))});return d.forEach(function(m){var g=Fe(m);r&&/n/.test(t)&&Gp(f,"top",g.top-I5),/e/.test(t)&&Up(f,"right",g.right+M5),a&&/s/.test(t)&&Up(f,"bottom",g.bottom+O5),/w/.test(t)&&Gp(f,"left",g.left-N5)}),{min:f,max:u}}var Hx=1001;function BS(e,t){e.on("resize.start",Hx+500,function(n){var i=n.context,r=i.shape;(b(r,"bpmn:Lane")||b(r,"bpmn:Participant"))&&(i.balanced=!Gs(n))}),e.on("resize.end",Hx,function(n){var i=n.context,r=i.shape,a=i.canExecute,c=i.newBounds;if(b(r,"bpmn:Lane")||b(r,"bpmn:Participant"))return a&&(c=ib(c),t.resizeLane(r,c,i.balanced)),!1})}BS.$inject=["eventBus","modeling"];var B5=500;function by(e,t,n,i,r){n.invoke(_e,this);function a(d){return tt(d,["bpmn:ReceiveTask","bpmn:SendTask"])||$5(d,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function c(d){var m=e.getDefinitions(),g=m.get("rootElements");return!!at(g,Bi({id:d.id}))}function l(d){if(b(d,"bpmn:ErrorEventDefinition"))return"errorRef";if(b(d,"bpmn:EscalationEventDefinition"))return"escalationRef";if(b(d,"bpmn:MessageEventDefinition"))return"messageRef";if(b(d,"bpmn:SignalEventDefinition"))return"signalRef"}function u(d){if(tt(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.get("messageRef");var m=d.get("eventDefinitions"),g=m[0];return g.get(l(g))}function f(d,m){if(tt(d,["bpmn:ReceiveTask","bpmn:SendTask"]))return d.set("messageRef",m);var g=d.get("eventDefinitions"),_=g[0];return _.set(l(_),m)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(d){var m=d.shape||d.element;if(a(m)){var g=xe(m),_=u(g),x;_&&!c(_)&&(x=e.getDefinitions().get("rootElements"),Gt(x,_),d.addedRootElement=_)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(d){var m=d.addedRootElement;if(m){var g=e.getDefinitions().get("rootElements");Lt(g,m)}},!0),t.on("copyPaste.copyElement",function(d){var m=d.descriptor,g=d.element;if(!(g.labelTarget||!a(g))){var _=xe(g),x=u(_);x&&(m.referencedRootElement=x)}}),t.on("copyPaste.pasteElement",B5,function(d){var m=d.descriptor,g=m.businessObject,_=m.referencedRootElement;_&&(c(_)||(_=i.copyElement(_,r.create(_.$type))),f(g,_),delete m.referencedRootElement)})}by.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];Te(by,_e);function $5(e,t){return Je(t)||(t=[t]),sr(t,function(n){return Uf(e,n)})}var F5=Math.max;function $S(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,r=t.start,a={};return W(n,function(c){var l=c.id;b(c,"bpmn:Participant")&&(j5(i)?a[l]=bl:a[l]={width:bl.width,height:z5(c,r)}),b(c,"bpmn:SubProcess")&&ut(c)&&(a[l]=NS),b(c,"bpmn:TextAnnotation")&&(a[l]=IS),b(c,"bpmn:Group")&&(a[l]=A5)}),a})}$S.$inject=["eventBus"];function j5(e){return e==="x"}function z5(e,t){var n;return H5(e)?(n=V5(e,t),F5(bl.height,n)):bl.height}function H5(e){return!!Ga(e).length}function V5(e,t){var n=Ga(e),i;return i=FS(n,t),e.height-i.height+ka.height}function FS(e,t){var n,i,r;for(n=0;n<e.length;n++)if(i=e[n],t>=i.y&&t<=i.y+i.height)return r=Ga(i),r.length?FS(r,t):i}var Vx=400,G5=600,Gx={x:180,y:160};function Ho(e,t,n,i,r,a,c){_e.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=r,this._bpmnjs=a,this._elementRegistry=c;var l=this;function u(m){return b(m,"bpmn:SubProcess")&&!ut(m)}function f(m){var g=m.shape,_=m.newRootElement,x=xe(g);_=l._addDiagram(_||x),m.newRootElement=e.addRootElement(_)}function d(m){var g=m.shape,_=xe(g);l._removeDiagram(_);var x=m.newRootElement=c.get(Tr(_));e.removeRootElement(x)}this.executed("shape.create",function(m){var g=m.shape;u(g)&&f(m)},!0),this.postExecuted("shape.create",function(m){var g=m.shape,_=m.newRootElement;!_||!g.children||(l._showRecursively(g.children),l._moveChildrenToShape(g,_))},!0),this.reverted("shape.create",function(m){var g=m.shape;u(g)&&d(m)},!0),this.preExecuted("shape.delete",function(m){var g=m.shape;if(u(g)){var _=c.get(Tr(g));_&&n.removeElements(_.children.slice())}},!0),this.executed("shape.delete",function(m){var g=m.shape;u(g)&&d(m)},!0),this.reverted("shape.delete",function(m){var g=m.shape;u(g)&&f(m)},!0),this.preExecuted("shape.replace",function(m){var g=m.oldShape,_=m.newShape;!u(g)||!u(_)||(m.oldRoot=e.removeRootElement(Tr(g)))},!0),this.postExecuted("shape.replace",function(m){var g=m.newShape,_=m.oldRoot,x=e.findRoot(Tr(g));if(!(!_||!x)){var S=_.children;n.moveElements(S,{x:0,y:0},x)}},!0),this.executed("element.updateProperties",function(m){var g=m.element;if(b(g,"bpmn:SubProcess")){var _=m.properties,x=m.oldProperties,S=x.id,C=_.id;if(S!==C){if(Ym(g)){c.updateId(g,Sa(C)),c.updateId(S,C);return}var z=c.get(Sa(S));z&&c.updateId(Sa(S),Sa(C))}}},!0),this.reverted("element.updateProperties",function(m){var g=m.element;if(b(g,"bpmn:SubProcess")){var _=m.properties,x=m.oldProperties,S=x.id,C=_.id;if(S!==C){if(Ym(g)){c.updateId(g,Sa(S)),c.updateId(C,S);return}var z=c.get(Sa(C));z&&c.updateId(z,Sa(S))}}},!0),t.on("element.changed",function(m){var g=m.element;if(Ym(g)){var _=g,x=c.get(c1(_));!x||x===_||t.fire("element.changed",{element:x})}}),this.executed("shape.toggleCollapse",Vx,function(m){var g=m.shape;b(g,"bpmn:SubProcess")&&(ut(g)?d(m):(f(m),l._showRecursively(g.children)))},!0),this.reverted("shape.toggleCollapse",Vx,function(m){var g=m.shape;b(g,"bpmn:SubProcess")&&(ut(g)?d(m):(f(m),l._showRecursively(g.children)))},!0),this.postExecuted("shape.toggleCollapse",G5,function(m){var g=m.shape;if(b(g,"bpmn:SubProcess")){var _=m.newRootElement;_&&(ut(g)?l._moveChildrenToShape(_,g):l._moveChildrenToShape(g,_))}},!0),t.on("copyPaste.createTree",function(m){var g=m.element,_=m.children;if(u(g)){var x=Tr(g),S=c.get(x);S&&_.push.apply(_,S.children)}}),t.on("copyPaste.copyElement",function(m){var g=m.descriptor,_=m.element,x=m.elements,S=_.parent,C=b(ct(S),"bpmndi:BPMNPlane");if(C){var z=c1(S),D=at(x,function(M){return M.id===z});D&&(g.parent=D.id)}}),t.on("copyPaste.pasteElement",function(m){var g=m.descriptor;g.parent&&(u(g.parent)||g.parent.hidden)&&(g.hidden=!0)})}Te(Ho,_e);Ho.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,i=e.children,r;if(i){i=i.concat(i.reduce(function(f,d){return d.label&&d.label.parent!==e?f.concat(d.label):f},[]));var a=i.filter(function(f){return!f.hidden});if(!a.length){n.moveElements(i,{x:0,y:0},t,{autoResize:!1});return}var c=Ot(a);if(!t.x)r={x:Gx.x-c.x,y:Gx.y-c.y};else{var l=Ke(t),u=Ke(c);r={x:l.x-u.x,y:l.y-u.y}}n.moveElements(i,r,t,{autoResize:!1})}};Ho.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(r){r.hidden=!!t,i=i.concat(r),r.children&&(i=i.concat(n._showRecursively(r.children,r.collapsed||t)))}),i};Ho.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};Ho.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),r=t.create("bpmndi:BPMNDiagram",{plane:i});i.$parent=r;var a=n.createRoot({id:Tr(e),type:e.$type,di:i,businessObject:e,collapsed:!0});return a};Ho.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,i=at(n,function(r){return r.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(i),1),i};Ho.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function Sy(e,t){e.invoke(_e,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(!(!b(r,"bpmn:SubProcess")||!(b(i,"bpmn:Task")||b(i,"bpmn:CallActivity"))||!ut(r))){var a=U5(r);t.createShape({type:"bpmn:StartEvent"},a,r)}})}Sy.$inject=["injector","modeling"];Te(Sy,_e);function U5(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function Cy(e,t){_e.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var i=n.shape;if(ut(i))return;var r=Rl(i);r.forEach(function(c){var l=c.incoming.slice(),u=c.outgoing.slice();W(l,function(f){a(f,!0)}),W(u,function(f){a(f,!1)})});function a(c,l){r.indexOf(c.source)!==-1&&r.indexOf(c.target)!==-1||(l?t.reconnectEnd(c,i,Ke(i)):t.reconnectStart(c,i,Ke(i)))}},!0)}Te(Cy,_e);Cy.$inject=["eventBus","modeling"];var av=500;function Ty(e,t,n,i){_e.call(this,e);function r(l){l.length&&l.forEach(function(u){u.type==="label"&&!u.businessObject.name&&(u.hidden=!0)})}function a(l,u){var f=l.children,d=u,m,g;return m=W5(f).concat([l]),g=sS(m),g?(d.width=Math.max(g.width,d.width),d.height=Math.max(g.height,d.height),d.x=g.x+(g.width-d.width)/2,d.y=g.y+(g.height-d.height)/2):(d.x=l.x+(l.width-d.width)/2,d.y=l.y+(l.height-d.height)/2),d}function c(l,u){return{x:l.x+(l.width-u.width)/2,y:l.y+(l.height-u.height)/2,width:u.width,height:u.height}}this.executed(["shape.toggleCollapse"],av,function(l){var u=l.context,f=u.shape;b(f,"bpmn:SubProcess")&&(f.collapsed?ct(f).isExpanded=!1:(r(f.children),ct(f).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],av,function(l){var u=l.context,f=u.shape;f.collapsed?ct(f).isExpanded=!1:ct(f).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],av,function(l){var u=l.context.shape,f=t.getDefaultSize(u),d;u.collapsed?d=c(u,f):d=a(u,f),n.resizeShape(u,d,null,{autoResize:u.collapsed?!1:"nwse"})})}Te(Ty,_e);Ty.$inject=["eventBus","elementFactory","modeling"];function W5(e){return e.filter(function(t){return!t.hidden})}function Py(e,t,n,i){t.invoke(_e,this),this.preExecute("shape.delete",function(r){var a=r.context,c=a.shape,l=c.businessObject;Jt(c)||(b(c,"bpmn:Participant")&&ut(c)&&n.ids.unclaim(l.processRef.id),i.unclaimId(l.id,l))}),this.preExecute("connection.delete",function(r){var a=r.context,c=a.connection,l=c.businessObject;i.unclaimId(l.id,l)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),a=r.businessObject;b(r,"bpmn:Collaboration")&&n.ids.unclaim(a.id)})}Te(Py,_e);Py.$inject=["canvas","injector","moddle","modeling"];function Ry(e,t){_e.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,r=i.connection,a=r.source;Y5(r,a)&&t.updateProperties(a,{default:null})})}Te(Ry,_e);Ry.$inject=["eventBus","modeling"];function Y5(e,t){if(!b(e,"bpmn:SequenceFlow"))return!1;var n=xe(t),i=xe(e);return n.get("default")===i}var K5=500,q5=5e3;function Ay(e,t,n){_e.call(this,e);var i;function r(){return i=i||new X5,i.enter(),i}function a(){if(!i)throw new Error(n("out of bounds release"));return i}function c(){if(!i)throw new Error(n("out of bounds release"));var u=i.leave();return u&&(t.updateLaneRefs(i.flowNodes,i.lanes),i=null),u}var l=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(l,q5,function(u){r()}),this.postExecuted(l,K5,function(u){c()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(u){var f=u.context,d=f.shape,m=a();d.labelTarget||(b(d,"bpmn:Lane")&&m.addLane(d),b(d,"bpmn:FlowNode")&&m.addFlowNode(d))})}Ay.$inject=["eventBus","modeling","translate"];Te(Ay,_e);function X5(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}const Q5={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","modelingFeedback","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior"],adaptiveLabelPositioningBehavior:["type",ey],appendBehavior:["type",ty],associationBehavior:["type",ny],attachEventBehavior:["type",_d],boundaryEventBehavior:["type",iy],createBehavior:["type",ry],createDataObjectBehavior:["type",oy],createParticipantBehavior:["type",ay],dataInputAssociationBehavior:["type",sy],dataStoreBehavior:["type",cy],deleteLaneBehavior:["type",ly],detachEventBehavior:["type",xd],dropOnFlowBehavior:["type",uy],eventBasedGatewayBehavior:["type",py],fixHoverBehavior:["type",SS],groupBehavior:["type",fy],importDockingFix:["type",CS],isHorizontalFix:["type",dy],labelBehavior:["type",hy],layoutConnectionBehavior:["type",my],messageFlowBehavior:["type",yy],modelingFeedback:["type",MS],removeElementBehavior:["type",Ey],removeEmbeddedLabelBoundsBehavior:["type",_y],removeParticipantBehavior:["type",xy],replaceConnectionBehavior:["type",wy],replaceElementBehaviour:["type",Cd],resizeBehavior:["type",OS],resizeLaneBehavior:["type",BS],rootElementReferenceBehavior:["type",by],spaceToolBehavior:["type",$S],subProcessPlaneBehavior:["type",Ho],subProcessStartEventBehavior:["type",Sy],toggleCollapseConnectionBehaviour:["type",Cy],toggleElementCollapseBehaviour:["type",Ty],unclaimIdBehavior:["type",Py],unsetDefaultFlowBehavior:["type",Ry],updateFlowNodeRefsBehavior:["type",Ay]};function jS(e,t){var n=hn(e,t,-15);return n!=="intersect"?n:null}function mn(e){Yn.call(this,e)}Te(mn,Yn);mn.$inject=["eventBus"];mn.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return Z5(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent,a=i.targetAttach;if(a)return!1;r&&(n.parent=r);try{return uf(t,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return uf(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return YS(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return Yx(i)&&!kf(t,i)?!1:Ba(t,function(r){return Yx(r)?uf(r.source,r.target,r):r.host?fl(r,r.host,null,n):Kv(r,i,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return fl(n,t,null,i)||US(n,t,i)||WS(n,t)||kf(n,t)}),this.addRule("shape.create",function(e){return Kv(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return fl(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return QS(n,t)})};mn.prototype.canConnectMessageFlow=qS;mn.prototype.canConnectSequenceFlow=XS;mn.prototype.canConnectDataAssociation=My;mn.prototype.canConnectAssociation=KS;mn.prototype.canMove=WS;mn.prototype.canAttach=fl;mn.prototype.canReplace=US;mn.prototype.canDrop=Ks;mn.prototype.canInsert=kf;mn.prototype.canCreate=Kv;mn.prototype.canConnect=uf;mn.prototype.canResize=YS;mn.prototype.canCopy=QS;function Z5(e){return Uv(e)?null:tt(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Uv(e){return!e||Jt(e)}function J5(e,t){return e===t}function Ux(e){do{if(b(e,"bpmn:Process"))return xe(e);if(b(e,"bpmn:Participant"))return xe(e).processRef||xe(e)}while(e=e.parent)}function Wv(e){return b(e,"bpmn:TextAnnotation")}function Dy(e){return b(e,"bpmn:Group")&&!e.labelTarget}function ky(e){return b(e,"bpmn:BoundaryEvent")&&rr(e,"bpmn:CompensateEventDefinition")}function oc(e){return xe(e).isForCompensation}function eL(e,t){var n=Ux(e),i=Ux(t);return n===i}function tL(e){return b(e,"bpmn:InteractionNode")&&!b(e,"bpmn:BoundaryEvent")&&(!b(e,"bpmn:Event")||b(e,"bpmn:ThrowEvent")&&zS(e,"bpmn:MessageEventDefinition"))}function nL(e){return b(e,"bpmn:InteractionNode")&&!oc(e)&&(!b(e,"bpmn:Event")||b(e,"bpmn:CatchEvent")&&zS(e,"bpmn:MessageEventDefinition"))&&!(b(e,"bpmn:BoundaryEvent")&&!rr(e,"bpmn:MessageEventDefinition"))}function Wx(e){for(var t=e;t=t.parent;){if(b(t,"bpmn:FlowElementsContainer"))return xe(t);if(b(t,"bpmn:Participant"))return xe(t).processRef}return null}function iL(e,t){var n=Wx(e),i=Wx(t);return n===i}function rr(e,t){var n=xe(e);return!!at(n.eventDefinitions||[],function(i){return b(i,t)})}function zS(e,t){var n=xe(e);return(n.eventDefinitions||[]).every(function(i){return b(i,t)})}function rL(e){return b(e,"bpmn:FlowNode")&&!b(e,"bpmn:EndEvent")&&!ni(e)&&!(b(e,"bpmn:IntermediateThrowEvent")&&rr(e,"bpmn:LinkEventDefinition"))&&!ky(e)&&!oc(e)}function oL(e){return b(e,"bpmn:FlowNode")&&!b(e,"bpmn:StartEvent")&&!b(e,"bpmn:BoundaryEvent")&&!ni(e)&&!(b(e,"bpmn:IntermediateCatchEvent")&&rr(e,"bpmn:LinkEventDefinition"))&&!oc(e)}function aL(e){return b(e,"bpmn:ReceiveTask")||b(e,"bpmn:IntermediateCatchEvent")&&(rr(e,"bpmn:MessageEventDefinition")||rr(e,"bpmn:TimerEventDefinition")||rr(e,"bpmn:ConditionalEventDefinition")||rr(e,"bpmn:SignalEventDefinition"))}function Yx(e){return e.waypoints}function sL(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function Yv(e,t){var n=sL(t);return n.indexOf(e)!==-1}function uf(e,t,n){if(Uv(e)||Uv(t))return null;if(!b(n,"bpmn:DataAssociation")){if(qS(e,t))return{type:"bpmn:MessageFlow"};if(XS(e,t))return{type:"bpmn:SequenceFlow"}}var i=My(e,t);return i||(ky(e)&&oc(t)?{type:"bpmn:Association",associationDirection:"One"}:KS(e,t)?{type:"bpmn:Association"}:!1)}function Ks(e,t,n){return Jt(e)||Dy(e)?!0:b(t,"bpmn:Participant")&&!ut(t)?!1:b(e,"bpmn:Participant")?b(t,"bpmn:Process")||b(t,"bpmn:Collaboration"):tt(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:b(e,"bpmn:Lane")?b(t,"bpmn:Participant")||b(t,"bpmn:Lane"):b(e,"bpmn:BoundaryEvent")&&!cL(e)?!1:b(e,"bpmn:FlowElement")&&!b(e,"bpmn:DataStoreReference")?b(t,"bpmn:FlowElementsContainer")?ut(t):tt(t,["bpmn:Participant","bpmn:Lane"]):b(e,"bpmn:DataStoreReference")&&b(t,"bpmn:Collaboration")?sr(xe(t).get("participants"),function(i){return!!i.get("processRef")}):tt(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?tt(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):b(e,"bpmn:MessageFlow")?b(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function cL(e){return xe(e).cancelActivity&&(HS(e)||VS(e))}function lL(e){return!Jt(e)&&b(e,"bpmn:BoundaryEvent")}function uL(e){return b(e,"bpmn:Lane")}function pL(e){return lL(e)||b(e,"bpmn:IntermediateThrowEvent")&&HS(e)?!0:b(e,"bpmn:IntermediateCatchEvent")&&VS(e)}function HS(e){var t=xe(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function VS(e){return GS(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function GS(e,t){return t.some(function(n){return rr(e,n)})}function fL(e){return b(e,"bpmn:ReceiveTask")&&at(e.incoming,function(t){return b(t.source,"bpmn:EventBasedGateway")})}function fl(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return Jt(r)||!pL(r)||ni(t)||!b(t,"bpmn:Activity")||oc(t)||i&&!jS(i,t)||fL(t)?!1:"attach"}function US(e,t,n){if(!t)return!1;var i={replacements:[]};return W(e,function(r){ni(t)||b(r,"bpmn:StartEvent")&&r.type!=="label"&&Ks(r,t)&&(dD(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(hD(r)||mD(r)||vD(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),GS(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&b(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),b(t,"bpmn:Transaction")||rr(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(b(r,"bpmn:EndEvent")&&Ks(r,t)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),b(r,"bpmn:BoundaryEvent")&&fl(r,t,null,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function WS(e,t){return sr(e,uL)?!1:t?e.every(function(n){return Ks(n,t)}):!0}function Kv(e,t,n,i){return t?Jt(e)||Dy(e)?!0:J5(n,t)||n&&Yv(n,t)?!1:Ks(e,t)||kf(e,t):!1}function YS(e,t){return b(e,"bpmn:SubProcess")?ut(e)&&(!t||t.width>=100&&t.height>=80):b(e,"bpmn:Lane")?!t||t.width>=130&&t.height>=60:b(e,"bpmn:Participant")?!t||t.width>=250&&t.height>=50:!!(Wv(e)||Dy(e))}function dL(e,t){var n=Wv(e),i=Wv(t);return(n||i)&&n!==i}function KS(e,t){return ky(e)&&oc(t)?!0:Yv(t,e)||Yv(e,t)?!1:dL(e,t)?!0:!!My(e,t)}function qS(e,t){return Kx(e)&&!Kx(t)?!1:tL(e)&&nL(t)&&!eL(e,t)}function XS(e,t){return rL(e)&&oL(t)&&iL(e,t)&&!(b(e,"bpmn:EventBasedGateway")&&!aL(t))}function My(e,t){return tt(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&tt(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:tt(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&tt(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function kf(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:tt(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Jt(t)&&b(e,"bpmn:FlowNode")&&!b(e,"bpmn:BoundaryEvent")&&Ks(e,t.parent)}function hL(e,t){return e&&t&&e.indexOf(t)!==-1}function QS(e,t){return Jt(t)?!0:!(b(t,"bpmn:Lane")&&!hL(e,t.parent))}function Kx(e){return Cf(e,"bpmn:Process")||Cf(e,"bpmn:Collaboration")}const mL={__depends__:[ur],__init__:["bpmnRules"],bpmnRules:["type",mn]};var vL=2e3;function ZS(e,t){e.on("saveXML.start",vL,n);function n(){var i=t.getRootElements();W(i,function(r){var a=ct(r),c,l;c=Rl([r],!1),c=Ze(c,function(u){return u!==r&&!u.labelTarget}),l=Zt(c,ct),a.set("planeElement",l)})}}ZS.$inject=["eventBus","canvas"];const gL={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",ZS]};function Td(e){_e.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,a=i.parent,c=t.getOrdering(r,a);c&&(c.parent!==void 0&&(i.parent=c.parent),i.parentIndex=c.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,a=i.newParent||r.parent,c=t.getOrdering(r,a);c&&(c.parent!==void 0&&(i.newParent=c.parent),i.newParentIndex=c.index)})}Td.prototype.getOrdering=function(e,t){return null};Te(Td,_e);function Ny(e,t,n){Td.call(this,e);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(l){if(l.labelTarget)return{level:10};var u=at(i,function(f){return tt(l,[f.type])});return u&&u.order||{level:1}}function a(l){var u=l.order;if(u||(l.order=u=r(l)),!u)throw new Error("no order for <"+l.id+">");return u}function c(l,u,f){for(var d=u;d&&!tt(d,f);)d=d.parent;if(!d)throw new Error("no parent for <"+l.id+"> in <"+(u&&u.id)+">");return d}this.getOrdering=function(l,u){if(l.labelTarget)return{parent:t.findRoot(u)||t.getRootElement(),index:-1};var f=a(l);f.containers&&(u=c(l,u,f.containers));var d=u.children.indexOf(l),m=jw(u.children,function(g){return!l.labelTarget&&g.labelTarget?!1:f.level<a(g).level});return m!==-1&&d!==-1&&d<m&&(m-=1),{index:m,parent:u}}}Ny.$inject=["eventBus","canvas","translate"];Te(Ny,Td);const yL={__depends__:[Yf],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",Ny]};var _L=250;function Ya(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}Ya.$inject=["eventBus","dragging"];Ya.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Ya.prototype.isActive=function(e){return e&&this._active===e};Ya.prototype.length=function(e){return this._tools.length};Ya.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Ya.prototype.bindEvents=function(e,t){var n=this._eventBus,i=this._dragging,r=[];n.on(t.tool+".init",function(a){var c=a.context;if(!c.reactivate&&this.isActive(e)){this.setActive(null),i.cancel();return}this.setActive(e)},this),W(t,function(a){r.push(a+".ended"),r.push(a+".canceled")}),n.on(r,_L,function(a){this._active&&(EL(a)||this.setActive(null))},this)};function EL(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Ir(t,'.group[data-group="tools"]')}const Pd={__depends__:[jr],__init__:["toolManager"],toolManager:["type",Ya]};function xL(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function wL(e,t){var n=[];return W(e.concat(t),function(i){var r=i.incoming,a=i.outgoing;W(r.concat(a),function(c){var l=c.source,u=c.target;(nl(e,l)||nl(e,u)||nl(t,l)||nl(t,u))&&(nl(n,c)||n.push(c))})}),n}function nl(e,t){return e.indexOf(t)!==-1}function bL(e,t,n){var i=e.x,r=e.y,a=e.width,c=e.height,l=n.x,u=n.y;switch(t){case"n":return{x:i,y:r+u,width:a,height:c-u};case"s":return{x:i,y:r,width:a,height:c+u};case"w":return{x:i+l,y:r,width:a-l,height:c};case"e":return{x:i,y:r,width:a+l,height:c};default:throw new Error("unknown direction: "+t)}}var sv=Math.abs,SL=Math.round,Cr={x:"width",y:"height"},JS="crosshair",Co={n:"top",w:"left",s:"bottom",e:"right"},CL=1500,Wp={n:"s",w:"e",s:"n",e:"w"},Yp=20;function Ci(e,t,n,i,r,a,c){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=a,this._mouse=c;var l=this;a.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(u){n.once("spaceTool.selection.ended",function(){l.activateMakeSpace(u.originalEvent)})}),n.on("spaceTool.move",CL,function(u){var f=u.context,d=f.initialized;d||(d=f.initialized=l.init(u,f)),d&&Xx(u)}),n.on("spaceTool.end",function(u){var f=u.context,d=f.axis,m=f.direction,g=f.movingShapes,_=f.resizingShapes,x=f.start;if(f.initialized){Xx(u);var S={x:0,y:0};S[d]=SL(u["d"+d]),l.makeSpace(g,_,S,m,x),n.once("spaceTool.ended",function(C){l.activateSelection(C.originalEvent,!0,!0)})}})}Ci.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];Ci.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:JS,data:{context:{reactivate:n}},trapClick:!1})};Ci.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:JS,data:{context:{}}})};Ci.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)};Ci.prototype.init=function(e,t){var n=sv(e.dx)>sv(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(sv(i)<5)return!1;i<0&&(i*=-1),Gs(e)&&(i*=-1);var a=xL(n,i),c=this._canvas.getRootElement(),l=Rl(c,!0),u=this.calculateAdjustments(l,n,i,r),f=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:a,shapes:u.resizingShapes,start:r}),d=TL(u,n,a,r,f);return J(t,u,{axis:n,direction:a,spaceToolConstraints:d,start:r}),ed("resize-"+(n==="x"?"ew":"ns")),!0};Ci.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,a=[],c=[],l=[],u=[];function f(g){a.includes(g)||a.push(g);var _=g.label;_&&!a.includes(_)&&a.push(_)}function d(g){c.includes(g)||c.push(g)}W(e,function(g){if(!(!g.parent||Xv(g))){if(qv(g)){u.push(g);return}var _=g[t],x=_+g[Cr[t]];if(PL(g)&&(n>0&&Ke(g)[t]>i||n<0&&Ke(g)[t]<i)){l.push(g);return}if(n>0&&_>i||n<0&&x<i){f(g);return}if(_<i&&x>i&&r.allowed("shape.resize",{shape:g})){d(g);return}}}),W(a,function(g){var _=g.attachers;_&&W(_,function(x){f(x)})});var m=a.concat(c);return W(l,function(g){var _=g.host;Na(m,_)&&f(g)}),m=a.concat(c),W(u,function(g){var _=g.source,x=g.target,S=g.label;Na(m,_)&&Na(m,x)&&S&&f(S)}),{movingShapes:a,resizingShapes:c}};Ci.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Ci.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function qx(e){return{top:e.top-Yp,right:e.right+Yp,bottom:e.bottom+Yp,left:e.left-Yp}}function Xx(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,r;Ve(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),Ve(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),Ve(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),Ve(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function TL(e,t,n,i,r){var a=e.movingShapes,c=e.resizingShapes;if(c.length){var l={},u,f;return W(c,function(d){var m=d.attachers,g=d.children,_=Fe(d),x=Ze(g,function(Y){return!qv(Y)&&!Xv(Y)&&!Na(a,Y)&&!Na(c,Y)}),S=Ze(g,function(Y){return!qv(Y)&&!Xv(Y)&&Na(a,Y)}),C,z,D,M=[],A=[],j,G,L,$;x.length&&(z=qx(Fe(Ot(x))),C=i-_[Co[n]]+z[Co[n]],n==="n"?l.bottom=f=Ve(f)?Math.min(f,C):C:n==="w"?l.right=f=Ve(f)?Math.min(f,C):C:n==="s"?l.top=u=Ve(u)?Math.max(u,C):C:n==="e"&&(l.left=u=Ve(u)?Math.max(u,C):C)),S.length&&(D=qx(Fe(Ot(S))),C=i-D[Co[Wp[n]]]+_[Co[Wp[n]]],n==="n"?l.bottom=f=Ve(f)?Math.min(f,C):C:n==="w"?l.right=f=Ve(f)?Math.min(f,C):C:n==="s"?l.top=u=Ve(u)?Math.max(u,C):C:n==="e"&&(l.left=u=Ve(u)?Math.max(u,C):C)),m&&m.length&&(m.forEach(function(Y){Na(a,Y)?M.push(Y):A.push(Y)}),M.length&&(j=Fe(Ot(M.map(Ke))),G=_[Co[Wp[n]]]-(j[Co[Wp[n]]]-i)),A.length&&(L=Fe(Ot(A.map(Ke))),$=L[Co[n]]-(_[Co[n]]-i)),n==="n"?(C=Math.min(G||1/0,$||1/0),l.bottom=f=Ve(f)?Math.min(f,C):C):n==="w"?(C=Math.min(G||1/0,$||1/0),l.right=f=Ve(f)?Math.min(f,C):C):n==="s"?(C=Math.max(G||-1/0,$||-1/0),l.top=u=Ve(u)?Math.max(u,C):C):n==="e"&&(C=Math.max(G||-1/0,$||-1/0),l.left=u=Ve(u)?Math.max(u,C):C));var O=r&&r[d.id];O&&(n==="n"?(C=i+d[Cr[t]]-O[Cr[t]],l.bottom=f=Ve(f)?Math.min(f,C):C):n==="w"?(C=i+d[Cr[t]]-O[Cr[t]],l.right=f=Ve(f)?Math.min(f,C):C):n==="s"?(C=i-d[Cr[t]]+O[Cr[t]],l.top=u=Ve(u)?Math.max(u,C):C):n==="e"&&(C=i-d[Cr[t]]+O[Cr[t]],l.left=u=Ve(u)?Math.max(u,C):C))}),l}}function Na(e,t){return e.indexOf(t)!==-1}function PL(e){return!!e.host}function qv(e){return!!e.waypoints}function Xv(e){return!!e.labelTarget}var cv="djs-dragging",Qx="djs-resizing",RL=250,Kp=Math.max;function eC(e,t,n,i,r){function a(c,l){W(c,function(u){r.addDragger(u,l),n.addMarker(u,cv)})}e.on("spaceTool.selection.start",function(c){var l=n.getLayer("space"),u=c.context,f={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},d=Be("g");Se(d,i.cls("djs-crosshair-group",["no-events"])),Ge(l,d);var m=Be("path");Se(m,"d",f.x),ot(m).add("djs-crosshair"),Ge(d,m);var g=Be("path");Se(g,"d",f.y),ot(g).add("djs-crosshair"),Ge(d,g),u.crosshairGroup=d}),e.on("spaceTool.selection.move",function(c){var l=c.context.crosshairGroup;Gn(l,c.x,c.y)}),e.on("spaceTool.selection.cleanup",function(c){var l=c.context,u=l.crosshairGroup;u&&Dt(u)}),e.on("spaceTool.move",RL,function(c){var l=c.context,u=l.line,f=l.axis,d=l.movingShapes,m=l.resizingShapes;if(l.initialized){if(!l.dragGroup){var g=n.getLayer("space");u=Be("path"),Se(u,"d","M0,0 L0,0"),ot(u).add("djs-crosshair"),Ge(g,u),l.line=u;var _=Be("g");Se(_,i.cls("djs-drag-group",["no-events"])),Ge(n.getActiveLayer(),_),a(d,_);var x=l.movingConnections=t.filter(function(A){var j=!1;W(d,function(O){W(O.outgoing,function(Y){A===Y&&(j=!0)})});var G=!1;W(d,function(O){W(O.incoming,function(Y){A===Y&&(G=!0)})});var L=!1;W(m,function(O){W(O.outgoing,function(Y){A===Y&&(L=!0)})});var $=!1;return W(m,function(O){W(O.incoming,function(Y){A===Y&&($=!0)})}),AL(A)&&(j||L)&&(G||$)});a(x,_),l.dragGroup=_}if(!l.frameGroup){var S=Be("g");Se(S,i.cls("djs-frame-group",["no-events"])),Ge(n.getActiveLayer(),S);var C=[];W(m,function(A){var j=r.addFrame(A,S),G=j.getBBox();C.push({element:j,initialBounds:G}),n.addMarker(A,Qx)}),l.frameGroup=S,l.frames=C}var z={x:"M"+c.x+", -10000 L"+c.x+", 10000",y:"M -10000, "+c.y+" L 10000, "+c.y};Se(u,{d:z[f]});var D={x:"y",y:"x"},M={x:c.dx,y:c.dy};M[D[l.axis]]=0,Gn(l.dragGroup,M.x,M.y),W(l.frames,function(A){var j=A.element,G=A.initialBounds,L,$;l.direction==="e"?Se(j,{width:Kp(G.width+M.x,5)}):(L=Kp(G.width-M.x,5),Se(j,{width:L,x:G.x+G.width-L})),l.direction==="s"?Se(j,{height:Kp(G.height+M.y,5)}):($=Kp(G.height-M.y,5),Se(j,{height:$,y:G.y+G.height-$}))})}}),e.on("spaceTool.cleanup",function(c){var l=c.context,u=l.movingShapes,f=l.movingConnections,d=l.resizingShapes,m=l.line,g=l.dragGroup,_=l.frameGroup;W(u,function(x){n.removeMarker(x,cv)}),W(f,function(x){n.removeMarker(x,cv)}),g&&(Dt(m),Dt(g)),W(d,function(x){n.removeMarker(x,Qx)}),_&&Dt(_)})}eC.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];function AL(e){return e.waypoints}const DL={__init__:["spaceToolPreview"],__depends__:[jr,ur,Pd,Fl,zl],spaceTool:["type",Ci],spaceToolPreview:["type",eC]};function Rd(e){e.invoke(Ci,this)}Rd.$inject=["injector"];Te(Rd,Ci);Rd.prototype.calculateAdjustments=function(e,t,n,i){var r=Ci.prototype.calculateAdjustments.call(this,e,t,n,i);return r.resizingShapes=r.resizingShapes.filter(function(a){return!b(a,"bpmn:TextAnnotation")}),r};const tC={__depends__:[DL],spaceTool:["type",Rd]};function Tt(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Tt.$inject=["eventBus","injector"];Tt.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)};Tt.prototype.canExecute=function(e,t){const n={command:e,context:t},i=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r};Tt.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};Tt.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Tt.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};Tt.prototype.register=function(e,t){this._setHandler(e,t)};Tt.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};Tt.prototype.canUndo=function(){return!!this._getUndoAction()};Tt.prototype.canRedo=function(){return!!this._getRedoAction()};Tt.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};Tt.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};Tt.prototype._internalUndo=function(e){const t=e.command,n=e.context,i=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),i.revert&&this._markDirty(i.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};Tt.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const i=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const a of i)if(r=this._eventBus.fire("commandStack."+a,n),n.cancelBubble)break;return r};Tt.prototype._createId=function(){return this._uid++};Tt.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};Tt.prototype._internalExecute=function(e,t){const n=e.command,i=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(i),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(i)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(i),this._fire(n,"postExecuted",e)),this._popAction(e)};Tt.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)};Tt.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:zw("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};Tt.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=Je(e)?e:[e],t.dirty=t.dirty.concat(e))};Tt.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};Tt.prototype._revertedAction=function(e){this._stackIdx--};Tt.prototype._getHandler=function(e){return this._handlerMap[e]};Tt.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const kL={commandStack:["type",Tt]};var ML=new Cg("tt");function NL(e){var t=et('<div class="djs-tooltip-container" />');return an(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function IL(e,t,n){an(e,{left:t+"px",top:n+"px"})}function Iy(e,t){e.style.display=t===!1?"none":""}var nC="djs-tooltip",lv="."+nC;function Mn(e,t){this._eventBus=e,this._canvas=t,this._ids=ML,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=NL(t.getContainer());var n=this;Vn.bind(this._tooltipRoot,lv,"mousedown",function(i){i.stopPropagation()}),Vn.bind(this._tooltipRoot,lv,"mouseover",function(i){n.trigger("mouseover",i)}),Vn.bind(this._tooltipRoot,lv,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}Mn.$inject=["eventBus","canvas"];Mn.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=J({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};Mn.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(bn(n,"data-tooltip-id"));i&&(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))};Mn.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};Mn.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};Mn.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};Mn.prototype.remove=function(e){var t=this.get(e);t&&(ar(t.html),ar(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};Mn.prototype.show=function(){Iy(this._tooltipRoot)};Mn.prototype.hide=function(){Iy(this._tooltipRoot,!1)};Mn.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i};Mn.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),ri(n)&&(n=et(n)),i=et('<div data-tooltip-id="'+t+'" class="'+nC+'">'),an(i,{position:"absolute"}),i.appendChild(n),e.type&&He(i).add("djs-tooltip-"+e.type),e.className&&He(i).add(e.className),e.htmlContainer=i,r.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)};Mn.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;IL(n,t.x,t.y)};Mn.prototype._updateTooltipVisibilty=function(e){W(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),Iy(i,r))})};Mn.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const OL={__init__:["tooltips"],tooltips:["type",Mn]};function Ao(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var LL=250,Zx=1400;function Oy(e,t,n){_e.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",Zx,function(r){var a=r.context,c=a.shapes,l=a.validatedShapes;a.shapes=Jx(c),a.validatedShapes=Jx(l)}),i&&t.on("shape.move.start",LL,function(r){var a=r.context,c=a.shapes,l=[];W(c,function(u){W(u.labels,function(f){!f.hidden&&a.shapes.indexOf(f)===-1&&l.push(f),u.labelTarget&&l.push(u)})}),W(l,function(u){i.makeDraggable(a,u,!0)})}),this.preExecuted("elements.move",Zx,function(r){var a=r.context,c=a.closure,l=c.enclosedElements,u=[];W(l,function(f){W(f.labels,function(d){l[d.id]||u.push(d)})}),c.addAll(u)}),this.preExecute(["connection.delete","shape.delete"],function(r){var a=r.context,c=a.connection||a.shape;Ao(c.labels,function(l){n.removeShape(l,{nested:!0})})}),this.execute("shape.delete",function(r){var a=r.context,c=a.shape,l=c.labelTarget;l&&(a.labelTargetIndex=hg(l.labels,c),a.labelTarget=l,c.labelTarget=null)}),this.revert("shape.delete",function(r){var a=r.context,c=a.shape,l=a.labelTarget,u=a.labelTargetIndex;l&&(Gt(l.labels,c,u),c.labelTarget=l)})}Te(Oy,_e);Oy.$inject=["injector","eventBus","modeling"];function Jx(e){return Ze(e,function(t){return e.indexOf(t.labelTarget)===-1})}const BL={__init__:["labelSupport"],labelSupport:["type",Oy]};var $L=251,ew=1401,tw="attach-ok";function Ly(e,t,n,i,r){_e.call(this,t);var a=e.get("movePreview",!1);t.on("shape.move.start",ew,function(c){var l=c.context,u=l.shapes,f=l.validatedShapes;l.shapes=FL(u),l.validatedShapes=jL(f)}),a&&t.on("shape.move.start",$L,function(c){var l=c.context,u=l.shapes,f=Qv(u);W(f,function(d){a.makeDraggable(l,d,!0),W(d.labels,function(m){a.makeDraggable(l,m,!0)})})}),a&&t.on("shape.move.start",function(c){var l=c.context,u=l.shapes;if(u.length===1){var f=u[0],d=f.host;d&&(n.addMarker(d,tw),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(d,tw)}))}}),this.preExecuted("elements.move",ew,function(c){var l=c.context,u=l.closure,f=l.shapes,d=Qv(f);W(d,function(m){u.add(m,u.topLevel[m.host.id])})}),this.postExecuted("elements.move",function(c){var l=c.context,u=l.shapes,f=l.newHost,d;f&&u.length!==1||(f?d=u:d=Ze(u,function(m){var g=m.host;return zL(m)&&!HL(u,g)}),W(d,function(m){r.updateAttachment(m,f)}))}),this.postExecuted("elements.move",function(c){var l=c.context.shapes;W(l,function(u){W(u.attachers,function(f){W(f.outgoing.slice(),function(d){var m=i.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});m||r.removeConnection(d)}),W(f.incoming.slice(),function(d){var m=i.allowed("connection.reconnect",{connection:d,source:d.source,target:d.target});m||r.removeConnection(d)})})})}),this.postExecute("shape.create",function(c){var l=c.context,u=l.shape,f=l.host;f&&r.updateAttachment(u,f)}),this.postExecute("shape.replace",function(c){var l=c.context,u=l.oldShape,f=l.newShape;Ao(u.attachers,function(d){var m=i.allowed("elements.move",{target:f,shapes:[d]});m==="attach"?r.updateAttachment(d,f):r.removeShape(d)}),f.attachers.length&&W(f.attachers,function(d){var m=Fx(d,u,f);r.moveShape(d,m,d.parent)})}),this.postExecute("shape.resize",function(c){var l=c.context,u=l.shape,f=l.oldBounds,d=l.newBounds,m=u.attachers,g=l.hints||{};g.attachSupport!==!1&&W(m,function(_){var x=Fx(_,f,d);r.moveShape(_,x,_.parent),W(_.labels,function(S){r.moveShape(S,x,S.parent)})})}),this.preExecute("shape.delete",function(c){var l=c.context.shape;Ao(l.attachers,function(u){r.removeShape(u)}),l.host&&r.updateAttachment(l,null)})}Te(Ly,_e);Ly.$inject=["injector","eventBus","canvas","rules","modeling"];function Qv(e){return hf(Zt(e,function(t){return t.attachers||[]}))}function FL(e){var t=Qv(e);return oR("id",e,t)}function jL(e){var t=qs(e,"id");return Ze(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function zL(e){return!!e.host}function HL(e,t){return e.indexOf(t)!==-1}const VL={__depends__:[ur],__init__:["attachSupport"],attachSupport:["type",Ly]};function Ti(e){this._model=e}Ti.$inject=["moddle"];Ti.prototype._needsId=function(e){return tt(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};Ti.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;b(e,"bpmn:Activity")?t="Activity":b(e,"bpmn:Event")?t="Event":b(e,"bpmn:Gateway")?t="Gateway":tt(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};Ti.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};Ti.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};Ti.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",J({bpmnElement:e,bounds:this.createDiBounds()},t))};Ti.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};Ti.prototype.createDiWaypoints=function(e){var t=this;return Zt(e,function(n){return t.createDiWaypoint(n)})};Ti.prototype.createDiWaypoint=function(e){return this.create("dc:Point",zi(e,["x","y"]))};Ti.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",J({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};Ti.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",J({bpmnElement:e},t))};function Kn(e,t,n,i){_e.call(this,e),this._bpmnFactory=t,this._translate=i;var r=this;function a(_){var x=_.context,S=x.hints||{},C;!x.cropped&&S.createElementsBehavior!==!1&&(C=x.connection,C.waypoints=n.getCroppedWaypoints(C),x.cropped=!0)}this.executed(["connection.layout","connection.create"],a),this.reverted(["connection.layout"],function(_){delete _.context.cropped});function c(_){var x=_.context;r.updateParent(x.shape||x.connection,x.oldParent)}function l(_){var x=_.context,S=x.shape||x.connection,C=x.parent||x.newParent;r.updateParent(S,C)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],_i(c)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],_i(l));function u(_){var x=_.context,S=x.oldRoot,C=S.children;W(C,function(z){b(z,"bpmn:BaseElement")&&r.updateParent(z)})}this.executed(["canvas.updateRoot"],u),this.reverted(["canvas.updateRoot"],u);function f(_){var x=_.context.shape;b(x,"bpmn:BaseElement")&&r.updateBounds(x)}this.executed(["shape.move","shape.create","shape.resize"],_i(function(_){_.context.shape.type!=="label"&&f(_)})),this.reverted(["shape.move","shape.create","shape.resize"],_i(function(_){_.context.shape.type!=="label"&&f(_)})),e.on("shape.changed",function(_){_.element.type==="label"&&f({context:{shape:_.element}})});function d(_){r.updateConnection(_.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],_i(d)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],_i(d));function m(_){r.updateConnectionWaypoints(_.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],_i(m)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],_i(m)),this.executed("connection.reconnect",_i(function(_){var x=_.context,S=x.connection,C=x.oldSource,z=x.newSource,D=xe(S),M=xe(C),A=xe(z);D.conditionExpression&&!tt(A,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(x.oldConditionExpression=D.conditionExpression,delete D.conditionExpression),C!==z&&M.default===D&&(x.oldDefault=M.default,delete M.default)})),this.reverted("connection.reconnect",_i(function(_){var x=_.context,S=x.connection,C=x.oldSource,z=x.newSource,D=xe(S),M=xe(C),A=xe(z);x.oldConditionExpression&&(D.conditionExpression=x.oldConditionExpression),x.oldDefault&&(M.default=x.oldDefault,delete A.default)}));function g(_){r.updateAttachment(_.context)}this.executed(["element.updateAttachment"],_i(g)),this.reverted(["element.updateAttachment"],_i(g))}Te(Kn,_e);Kn.$inject=["eventBus","bpmnFactory","connectionDocking","translate"];Kn.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject};Kn.prototype.updateParent=function(e,t){if(!(e instanceof jf)&&!(b(e,"bpmn:DataStoreReference")&&e.parent&&b(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=ct(e),a=n&&n.businessObject,c=ct(n);b(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,a,t&&t.businessObject),b(e,"bpmn:DataOutputAssociation")&&(e.source?a=e.source.businessObject:a=null),b(e,"bpmn:DataInputAssociation")&&(e.target?a=e.target.businessObject:a=null),this.updateSemanticParent(i,a),b(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,a),this.updateDiParent(r,c)}};Kn.prototype.updateBounds=function(e){var t=ct(e),n=UL(e);if(n){var i=$i(n,t.get("bounds"));J(n,{x:e.x+i.x,y:e.y+i.y})}var r=e instanceof jf?this._getLabel(t):t,a=r.bounds;a||(a=this._bpmnFactory.createDiBounds(),r.set("bounds",a)),J(a,{x:e.x,y:e.y,width:e.width,height:e.height})};Kn.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,r;b(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),Lt(i,e)),b(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),Gt(r,e))}};Kn.prototype.updateDiConnection=function(e,t,n){var i=ct(e),r=ct(t),a=ct(n);i.sourceElement&&i.sourceElement.bpmnElement!==xe(t)&&(i.sourceElement=t&&r),i.targetElement&&i.targetElement.bpmnElement!==xe(n)&&(i.targetElement=n&&a)};Kn.prototype.updateDiParent=function(e,t){if(t&&!b(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(Lt(n,e),e.$parent=null)}};function GL(e){for(;e&&!b(e,"bpmn:Definitions");)e=e.$parent;return e}Kn.prototype.getLaneSet=function(e){var t,n;return b(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(b(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};Kn.prototype.updateSemanticParent=function(e,t,n){var i,r=this._translate;if(e.$parent!==t&&!((b(e,"bpmn:DataInput")||b(e,"bpmn:DataOutput"))&&(b(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(b(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(b(e,"bpmn:FlowElement")){if(t){if(b(t,"bpmn:Participant"))t=t.processRef;else if(b(t,"bpmn:Lane"))do t=t.$parent.$parent;while(b(t,"bpmn:Lane"))}i="flowElements"}else if(b(e,"bpmn:Artifact")){for(;t&&!b(t,"bpmn:Process")&&!b(t,"bpmn:SubProcess")&&!b(t,"bpmn:Collaboration");)if(b(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if(b(e,"bpmn:MessageFlow"))i="messageFlows";else if(b(e,"bpmn:Participant")){i="participants";var a=e.processRef,c;a&&(c=GL(e.$parent||t),e.$parent&&(Lt(c.get("rootElements"),a),a.$parent=null),t&&(Gt(c.get("rootElements"),a),a.$parent=c))}else b(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":b(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(r("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var l;if(e.$parent&&(l=e.$parent.get(i),Lt(l,e)),t?(l=t.get(i),l.push(e),e.$parent=t):e.$parent=null,n){var u=n.get(i);Lt(l,e),t&&(u||(u=[],t.set(i,u)),u.push(e))}}};Kn.prototype.updateConnectionWaypoints=function(e){var t=ct(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};Kn.prototype.updateConnection=function(e){var t=e.connection,n=xe(t),i=t.source,r=xe(i),a=t.target,c=xe(t.target),l;if(b(n,"bpmn:DataAssociation"))b(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=r,l=e.parent||e.newParent||c,this.updateSemanticParent(n,c,l)):b(n,"bpmn:DataOutputAssociation")&&(l=e.parent||e.newParent||r,this.updateSemanticParent(n,r,l),n.targetRef=c);else{var u=b(n,"bpmn:SequenceFlow");n.sourceRef!==r&&(u&&(Lt(n.sourceRef&&n.sourceRef.get("outgoing"),n),r&&r.get("outgoing")&&r.get("outgoing").push(n)),n.sourceRef=r),n.targetRef!==c&&(u&&(Lt(n.targetRef&&n.targetRef.get("incoming"),n),c&&c.get("incoming")&&c.get("incoming").push(n)),n.targetRef=c)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,i,a)};Kn.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function _i(e){return function(t){var n=t.context,i=n.shape||n.connection;b(i,"bpmn:BaseElement")&&e(t)}}function UL(e){if(b(e,"bpmn:Activity")){var t=ct(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function Vo(e,t,n){Lr.call(this),this._bpmnFactory=e,this._moddle=t,this._translate=n}Te(Vo,Lr);Vo.$inject=["bpmnFactory","moddle","translate"];Vo.prototype.baseCreate=Lr.prototype.create;Vo.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this.baseCreate(e,J({type:"label",di:n},gl,t))}return this.createBpmnElement(e,t)};Vo.prototype.createBpmnElement=function(e,t){var n,i=this._translate;t=J({},t||{});var r=t.businessObject,a=t.di;if(!r){if(!t.type)throw new Error(i("no shape type specified"));r=this._bpmnFactory.create(t.type),Db(r)}if(!YL(a)){var c=J({},a||{},{id:r.id+"_di"});e==="root"?a=this._bpmnFactory.createDiPlane(r,c):e==="connection"?a=this._bpmnFactory.createDiEdge(r,c):a=this._bpmnFactory.createDiShape(r,c)}b(r,"bpmn:Group")&&(t=J({isFrame:!0},t)),t=WL(r,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=iC(a,t,"isExpanded")),b(r,"bpmn:SubProcess")&&(t.collapsed=!ut(r,a)),b(r,"bpmn:ExclusiveGateway")&&(a.isMarkerVisible=!0),Vt(t.triggeredByEvent)&&(r.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Vt(t.cancelActivity)&&(r.cancelActivity=t.cancelActivity,delete t.cancelActivity);var l,u;return t.eventDefinitionType&&(l=r.get("eventDefinitions")||[],u=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(u.condition=this._bpmnFactory.create("bpmn:FormalExpression")),l.push(u),u.$parent=r,r.eventDefinitions=l,delete t.eventDefinitionType),n=this.getDefaultSize(r,a),t=J({id:r.id},n,t,{businessObject:r,di:a}),this.baseCreate(e,t)};Vo.prototype.getDefaultSize=function(e,t){var n=xe(e);return t=t||ct(e),b(n,"bpmn:SubProcess")?ut(n,t)?{width:350,height:200}:{width:100,height:80}:b(n,"bpmn:Task")?{width:100,height:80}:b(n,"bpmn:Gateway")?{width:50,height:50}:b(n,"bpmn:Event")?{width:36,height:36}:b(n,"bpmn:Participant")?ut(n,t)?{width:600,height:250}:{width:400,height:60}:b(n,"bpmn:Lane")?{width:400,height:100}:b(n,"bpmn:DataObjectReference")?{width:36,height:50}:b(n,"bpmn:DataStoreReference")?{width:50,height:50}:b(n,"bpmn:TextAnnotation")?{width:100,height:30}:b(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};Vo.prototype.createParticipantShape=function(e){return dn(e)||(e={isExpanded:e}),e=J({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function WL(e,t,n){return W(n,function(i){t=iC(e,t,i)}),t}function iC(e,t,n){return t[n]===void 0?t:(e[n]=t[n],Nr(t,[n]))}function YL(e){return tt(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function Ad(e,t){this._modeling=e,this._canvas=t}Ad.$inject=["modeling","canvas"];Ad.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;W(n,function(r){var a={x:0,y:0};Vt(i.left)?a.x=i.left-r.x:Vt(i.right)?a.x=i.right-r.width-r.x:Vt(i.center)?a.x=i.center-Math.round(r.width/2)-r.x:Vt(i.top)?a.y=i.top-r.y:Vt(i.bottom)?a.y=i.bottom-r.height-r.y:Vt(i.middle)&&(a.y=i.middle-Math.round(r.height/2)-r.y),t.moveElements([r],a,r.parent)})};Ad.prototype.postExecute=function(e){};function Dd(e){this._modeling=e}Dd.$inject=["modeling"];Dd.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i};Dd.prototype.postExecute=function(e){var t=e.hints||{};KL(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function KL(e,t){return sr(e.outgoing,function(n){return n.target===t})}function kd(e,t){this._canvas=e,this._layouter=t}kd.$inject=["canvas","layouter"];kd.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,a=e.parentIndex,c=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,c)),this._canvas.addConnection(t,r,a),t};kd.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var qp=Math.round;function By(e){this._modeling=e}By.$inject=["modeling"];By.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,a=e.hints,c=this._modeling;W(t,function(m){Ve(m.x)||(m.x=0),Ve(m.y)||(m.y=0)});var l=Ze(t,function(m){return!m.hidden}),u=Ot(l);W(t,function(m){nw(m)&&(m.waypoints=Zt(m.waypoints,function(g){return{x:qp(g.x-u.x-u.width/2+r.x),y:qp(g.y-u.y-u.height/2+r.y)}})),J(m,{x:qp(m.x-u.x-u.width/2+r.x),y:qp(m.y-u.y-u.height/2+r.y)})});var f=$f(t),d={};W(t,function(m){if(nw(m)){d[m.id]=Ve(i)?c.createConnection(d[m.source.id],d[m.target.id],i,m,m.parent||n,a):c.createConnection(d[m.source.id],d[m.target.id],m,m.parent||n,a);return}var g=J({},a);f.indexOf(m)===-1&&(g.autoResize=!1),d[m.id]=Ve(i)?c.createShape(m,zi(m,["x","y","width","height"]),m.parent||n,i,g):c.createShape(m,zi(m,["x","y","width","height"]),m.parent||n,g)}),e.elements=ag(d)};function nw(e){return!!e.waypoints}var iw=Math.round;function Go(e){this._canvas=e}Go.$inject=["canvas"];Go.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?J(t,n):J(t,{x:n.x-iw(t.width/2),y:n.y-iw(t.height/2)}),this._canvas.addShape(t,i,r),t};Go.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function Ql(e){Go.call(this,e)}Te(Ql,Go);Ql.$inject=["canvas"];var qL=Go.prototype.execute;Ql.prototype.execute=function(e){var t=e.shape;return QL(t),t.labelTarget=e.labelTarget,qL.call(this,e)};var XL=Go.prototype.revert;Ql.prototype.revert=function(e){return e.shape.labelTarget=null,XL.call(this,e)};function QL(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function Zl(e,t){this._canvas=e,this._modeling=t}Zl.$inject=["canvas","modeling"];Zl.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;Ao(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Ao(n.outgoing,function(i){t.removeConnection(i,{nested:!0})})};Zl.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=hg(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};Zl.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,Gt(n.children,t,i),this._canvas.addConnection(t,n),t};function $y(e,t){this._modeling=e,this._elementRegistry=t}$y.$inject=["modeling","elementRegistry"];$y.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;W(i,function(r){n.get(r.id)&&(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function Jl(e,t){this._canvas=e,this._modeling=t}Jl.$inject=["canvas","modeling"];Jl.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Ao(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Ao(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),Ao(n.children,function(i){ZL(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})};Jl.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=hg(i.children,n),t.removeShape(n),n};Jl.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return Gt(i.children,n,r),t.addShape(n,i),n};function ZL(e){return e.waypoints}function Md(e){this._modeling=e}Md.$inject=["modeling"];var rw={x:"y",y:"x"};Md.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function a(C,z){C.range.min=Math.min(z[i],C.range.min),C.range.max=Math.max(z[i]+z[r],C.range.max)}function c(C){return C[i]+C[r]/2}function l(C){return C.length-1}function u(C){return C.max-C.min}function f(C,z){var D={y:0};D[i]=C-c(z),D[i]&&(D[rw[i]]=0,t.moveElements([z],D,z.parent))}var d=n[0],m=l(n),g=n[m],_,x,S=0;W(n,function(C,z){var D,M,A;if(C.elements.length<2){z&&z!==n.length-1&&(a(C,C.elements[0]),S+=u(C.range));return}D=ji(C.elements,i),M=D[0],z===m&&(M=D[l(D)]),A=c(M),C.range=null,W(D,function(j){if(f(A,j),C.range===null){C.range={min:j[i],max:j[i]+j[r]};return}a(C,j)}),z&&z!==n.length-1&&(S+=u(C.range))}),x=Math.abs(g.range.min-d.range.max),_=Math.round((x-S)/(n.length-1)),!(_<n.length-1)&&W(n,function(C,z){var D={},M;C===d||C===g||(M=n[z-1],C.range.max=0,W(C.elements,function(A,j){D[rw[i]]=0,D[i]=M.range.max-A[i]+_,C.range.min!==A[i]&&(D[i]+=A[i]-C.range.min),D[i]&&t.moveElements([A],D,A.parent),C.range.max=Math.max(A[i]+A[r],j?C.range.max:0)}))})};Md.prototype.postExecute=function(e){};function Nd(e,t){this._layouter=e,this._canvas=t}Nd.$inject=["layouter","canvas"];Nd.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return J(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};Nd.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function Fy(){}Fy.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,a=t.parent;return e.oldParent=a,e.oldParentIndex=Lt(a.children,t),Gt(i.children,t,r),t.parent=i,W(t.waypoints,function(c){c.x+=n.x,c.y+=n.y,c.original&&(c.original.x+=n.x,c.original.y+=n.y)}),t};Fy.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,a=e.delta;return Lt(n.children,t),Gt(i.children,t,r),t.parent=i,W(t.waypoints,function(c){c.x-=a.x,c.y-=a.y,c.original&&(c.original.x-=a.x,c.original.y-=a.y)}),t};function jy(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}jy.prototype.add=function(e,t){return this.addAll([e],t)};jy.prototype.addAll=function(e,t){var n=KR(e,!!t,this);return J(this,n),this};function eu(e){this._modeling=e}eu.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};eu.prototype.moveClosure=function(e,t,n,i,r){var a=this._modeling,c=e.allShapes,l=e.allConnections,u=e.enclosedConnections,f=e.topLevel,d=!1;r&&r.parent===n&&(d=!0),W(c,function(m){a.moveShape(m,t,f[m.id]&&!d&&n,{recurse:!1,layout:!1})}),W(l,function(m){var g=!!c[m.source.id],_=!!c[m.target.id];u[m.id]&&g&&_?a.moveConnection(m,t,f[m.id]&&!d&&n):a.layoutConnection(m,{connectionStart:g&&vy(m,m.source,t),connectionEnd:_&&gy(m,m.target,t)})})};eu.prototype.getClosure=function(e){return new jy().addAll(e,!0)};function Id(e){this._helper=new eu(e)}Id.$inject=["modeling"];Id.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};Id.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Ka(e){this._modeling=e,this._helper=new eu(e)}Ka.$inject=["modeling"];Ka.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,a=t.parent;return e.oldBounds=zi(t,["x","y","width","height"]),e.oldParent=a,e.oldParentIndex=Lt(a.children,t),Gt(i.children,t,r),J(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t};Ka.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;i.layout!==!1&&(W(t.incoming,function(a){r.layoutConnection(a,{connectionEnd:gy(a,t,n)})}),W(t.outgoing,function(a){r.layoutConnection(a,{connectionStart:vy(a,t,n)})})),i.recurse!==!1&&this.moveChildren(e)};Ka.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return Gt(n.children,t,i),J(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t};Ka.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};Ka.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function tu(e){this._modeling=e}tu.$inject=["modeling"];tu.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return Je(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i};tu.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,a=e.hints||{},c={};a.connectionStart&&(c.connectionStart=a.connectionStart),a.connectionEnd&&(c.connectionEnd=a.connectionEnd),a.layoutConnection!==!1&&(n&&(!i||a.docking==="source")&&(c.connectionStart=c.connectionStart||ow(Je(r)?r[0]:r)),i&&(!n||a.docking==="target")&&(c.connectionEnd=c.connectionEnd||ow(Je(r)?r[r.length-1]:r)),a.newWaypoints&&(c.waypoints=a.newWaypoints),this._modeling.layoutConnection(t,c))};tu.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r};function ow(e){return e.original||e}function Vr(e,t){this._modeling=e,this._rules=t}Vr.$inject=["modeling","rules"];Vr.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,r=e.oldShape,a=e.newData,c=e.hints||{},l;function u(x,S,C){return i.allowed("connection.reconnect",{connection:C,source:x,target:S})}var f={x:a.x,y:a.y},d={x:r.x,y:r.y,width:r.width,height:r.height};l=e.newShape=e.newShape||t.createShape(a,f,r.parent,c),r.host&&n.updateAttachment(l,r.host);var m;c.moveChildren!==!1&&(m=r.children.slice(),n.moveElements(m,{x:0,y:0},l,c));var g=r.incoming.slice(),_=r.outgoing.slice();W(g,function(x){var S=x.source,C=u(S,l,x);C&&t.reconnectEnd(x,l,bd(x,l,d),c)}),W(_,function(x){var S=x.target,C=u(l,S,x);C&&t.reconnectStart(x,l,wd(x,l,d),c)})};Vr.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Vr.prototype.execute=function(e){};Vr.prototype.revert=function(e){};Vr.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)};Vr.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)};Vr.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function nu(e){this._modeling=e}nu.$inject=["modeling"];nu.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},J(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};nu.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};r.layout!==!1&&(W(n.incoming,function(a){t.layoutConnection(a,{connectionEnd:bd(a,n,i)})}),W(n.outgoing,function(a){t.layoutConnection(a,{connectionStart:wd(a,n,i)})}))};nu.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return J(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function Uo(e){this._modeling=e}Uo.$inject=["modeling"];Uo.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,a=e.start,c={};this.moveShapes(i,t),W(r,function(l){c[l.id]=e4(l)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(wL(i,r),t,n,a,i,r,c)};Uo.prototype.execute=function(){};Uo.prototype.revert=function(){};Uo.prototype.moveShapes=function(e,t){var n=this;W(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})};Uo.prototype.resizeShapes=function(e,t,n){var i=this;W(e,function(r){var a=bL(r,n,t);i._modeling.resizeShape(r,a,null,{attachSupport:!1,autoResize:!1,layout:!1})})};Uo.prototype.updateConnectionWaypoints=function(e,t,n,i,r,a,c){var l=this,u=r.concat(a);W(e,function(f){var d=f.source,m=f.target,g=JL(f),_=rC(n),x={};To(u,d)&&To(u,m)?(g=Zt(g,function(S){return sw(S,i,n)&&(S[_]=S[_]+t[_]),S.original&&sw(S.original,i,n)&&(S.original[_]=S.original[_]+t[_]),S}),l._modeling.updateWaypoints(f,g,{labelBehavior:!1})):(To(u,d)||To(u,m))&&(To(r,d)?x.connectionStart=vy(f,d,t):To(r,m)?x.connectionEnd=gy(f,m,t):To(a,d)?x.connectionStart=wd(f,d,c[d.id]):To(a,m)&&(x.connectionEnd=bd(f,m,c[m.id])),l._modeling.layoutConnection(f,x))})};function aw(e){return J({},e)}function JL(e){return Zt(e.waypoints,function(t){return t=aw(t),t.original&&(t.original=aw(t.original)),t})}function rC(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function sw(e,t,n){var i=rC(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function To(e,t){return e.indexOf(t)!==-1}function e4(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Od(e){this._modeling=e}Od.$inject=["modeling"];Od.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=oC(n),t.collapsed=!t.collapsed;var i=aC(n,t.collapsed);return[t].concat(i)};Od.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,r=sC(i,n);return t.collapsed=!t.collapsed,[t].concat(r)};function oC(e){var t={};return W(e,function(n){t[n.id]=n.hidden,n.children&&(t=J({},t,oC(n.children)))}),t}function aC(e,t){var n=[];return W(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(aC(i.children,i.collapsed||t)))}),n}function sC(e,t){var n=[];return W(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(sC(i.children,t)))}),n}function Ld(e){this._modeling=e}Ld.$inject=["modeling"];Ld.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=cC(i,t),lC(n,t),t.host=n,t};Ld.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,cC(n,t),lC(i,t,r),t};function cC(e,t){return Lt(e&&e.attachers,t)}function lC(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),Gt(i,t,n)}}function zy(){}zy.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};zy.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function gt(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}gt.$inject=["eventBus","elementFactory","commandStack"];gt.prototype.getHandlers=function(){return{"shape.append":Dd,"shape.create":Go,"shape.delete":Jl,"shape.move":Ka,"shape.resize":nu,"shape.replace":Vr,"shape.toggleCollapse":Od,spaceTool:Uo,"label.create":Ql,"connection.create":kd,"connection.delete":Zl,"connection.move":Fy,"connection.layout":Nd,"connection.updateWaypoints":zy,"connection.reconnect":tu,"elements.create":By,"elements.move":Id,"elements.delete":$y,"elements.distribute":Md,"elements.align":Ad,"element.updateAttachment":Ld}};gt.prototype.registerHandlers=function(e){W(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};gt.prototype.moveShape=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=null);var a={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",a)};gt.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};gt.prototype.moveElements=function(e,t,n,i){i=i||{};var r=i.attach,a=n,c;r===!0?(c=n,a=n.parent):r===!1&&(c=null);var l={shapes:e,delta:t,newParent:a,newHost:c,hints:i};this._commandStack.execute("elements.move",l)};gt.prototype.moveConnection=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=void 0);var a={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",a)};gt.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};gt.prototype.createConnection=function(e,t,n,i,r,a){typeof n=="object"&&(a=r,r=i,i=n,n=void 0),i=this._create("connection",i);var c={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:a};return this._commandStack.execute("connection.create",c),c.connection};gt.prototype.createShape=function(e,t,n,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var a=r.attach,c,l;e=this._create("shape",e),a?(c=n.parent,l=n):c=n;var u={position:t,shape:e,parent:c,parentIndex:i,host:l,hints:r};return this._commandStack.execute("shape.create",u),u.shape};gt.prototype.createElements=function(e,t,n,i,r){Je(e)||(e=[e]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var a={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",a),a.elements};gt.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape};gt.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var a={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",a),a.shape};gt.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};gt.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)};gt.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};gt.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};gt.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape};gt.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};gt.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)};gt.prototype.createSpace=function(e,t,n,i,r){var a={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",a)};gt.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)};gt.prototype.reconnect=function(e,t,n,i,r){var a={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",a)};gt.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,J(i,{docking:"source"}))};gt.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,J(i,{docking:"target"}))};gt.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)};gt.prototype._create=function(e,t){return t instanceof kl?t:this._elementFactory.create(e,t)};gt.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function iu(e){this._elementRegistry=e}iu.$inject=["elementRegistry"];iu.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var r=e.changed||this.getVisualReferences(n).concat(t),a=e.oldProperties||t4(n,vf(i));return uC(n,i),e.oldProperties=a,e.changed=r,r};iu.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return uC(n,t),i};iu.prototype.getVisualReferences=function(e){var t=this._elementRegistry;return b(e,"bpmn:DataObject")?n4(e,t):[]};function t4(e,t){return Un(t,function(n,i){return n[i]=e.get(i),n},{})}function uC(e,t){W(t,function(n,i){e.set(i,n)})}function n4(e,t){return t.filter(function(n){return b(n,"bpmn:DataObjectReference")&&xe(n).dataObjectRef===e})}var il="default",Dr="id",pC="di",i4={width:0,height:0};function ru(e,t,n,i,r){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=i,this._textRenderer=r}ru.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"];ru.prototype.execute=function(e){var t=e.element,n=[t],i=this._translate;if(!t)throw new Error(i("element required"));var r=this._elementRegistry,a=this._moddle.ids,c=t.businessObject,l=c4(e.properties),u=e.oldProperties||r4(t,l);return fC(l,c)&&(a.unclaim(c[Dr]),r.updateId(t,l[Dr]),a.claim(l[Dr],c)),il in l&&(l[il]&&n.push(r.get(l[il].id)),c[il]&&n.push(r.get(c[il].id))),dC(t,l),e.oldProperties=u,e.changed=n,n};ru.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&xe(n).name;if(i){var r=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,r,i4)}};ru.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,a=this._elementRegistry,c=this._moddle.ids;return dC(t,i),fC(n,r)&&(c.unclaim(n[Dr]),a.updateId(t,i[Dr]),c.claim(i[Dr],r)),e.changed};function fC(e,t){return Dr in e&&e[Dr]!==t[Dr]}function r4(e,t){var n=vf(t),i=e.businessObject,r=ct(e);return Un(n,function(a,c){return c!==pC?a[c]=i.get(c):a[c]=o4(r,vf(t.di)),a},{})}function o4(e,t){return Un(t,function(n,i){return n[i]=e&&e.get(i),n},{})}function dC(e,t){var n=e.businessObject,i=ct(e);W(t,function(r,a){a!==pC?n.set(a,r):i&&a4(i,r)})}function a4(e,t){W(t,function(n,i){e.set(i,n)})}var s4=["default"];function c4(e){var t=J({},e);return s4.forEach(function(n){n in e&&(t[n]=xe(t[n]))}),t}function Bd(e,t){this._canvas=e,this._modeling=t}Bd.$inject=["canvas","modeling"];Bd.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),a=r.businessObject,c=a.$parent,l=ct(r);t.setRootElement(n),t.removeRootElement(r),Gt(c.rootElements,i),i.$parent=c,Lt(c.rootElements,a),a.$parent=null,r.di=null,l.bpmnElement=i,n.di=l,e.oldRoot=r};Bd.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=e.oldRoot,a=r.businessObject,c=i.$parent,l=ct(n);t.setRootElement(r),t.removeRootElement(n),Lt(c.rootElements,i),i.$parent=null,Gt(c.rootElements,a),a.$parent=c,n.di=null,l.bpmnElement=a,r.di=l};function Hy(e,t){this._modeling=e,this._spaceTool=t}Hy.$inject=["modeling","spaceTool"];Hy.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,a=Li(i),c=a===i,l=c?i:i.parent,u=Ga(l);u.length||n.createShape({type:"bpmn:Lane"},{x:i.x+js,y:i.y,width:i.width-js,height:i.height},l);var f=[];Fa(a,function(S){return f.push(S),S.label&&f.push(S.label),S===i?[]:Ze(S.children,function(C){return C!==i})});var d=r==="top"?-120:120,m=r==="top"?i.y:i.y+i.height,g=m+(r==="top"?10:-10),_=r==="top"?"n":"s",x=t.calculateAdjustments(f,"y",d,g);t.makeSpace(x.movingShapes,x.resizingShapes,{x:0,y:d},_,g),e.newLane=n.createShape({type:"bpmn:Lane"},{x:i.x+(c?js:0),y:m-(r==="top"?120:0),width:i.width-(c?js:0),height:120},l)};function Vy(e,t){this._modeling=e,this._translate=t}Vy.$inject=["modeling","translate"];Vy.prototype.preExecute=function(e){var t=this._modeling,n=this._translate,i=e.shape,r=e.count,a=Ga(i),c=a.length;if(c>r)throw new Error(n("more than {count} child lanes",{count:r}));var l=Math.round(i.height/r),u,f,d,m,g;for(g=0;g<r;g++)u=i.y+g*l,g===r-1?f=i.height-l*g:f=l,d={x:i.x+js,y:u,width:i.width-js,height:f},g<c?t.resizeShape(a[g],d):(m={type:"bpmn:Lane"},t.createShape(m,d,i))};function ou(e,t){this._modeling=e,this._spaceTool=t}ou.$inject=["modeling","spaceTool"];ou.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};ou.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=mI(e,t);n.resizeShape(e,t),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})};ou.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=Fe(e),r=Fe(t),a=aS(r,i),c=Li(e),l=[],u=[];Fa(c,function(x){return l.push(x),(b(x,"bpmn:Lane")||b(x,"bpmn:Participant"))&&u.push(x),x.children});var f,d,m,g,_;(a.bottom||a.top)&&(f=a.bottom||a.top,d=e.y+(a.bottom?e.height:0)+(a.bottom?-10:10),m=a.bottom?"s":"n",g=a.top>0||a.bottom<0?-f:f,_=n.calculateAdjustments(l,"y",g,d),n.makeSpace(_.movingShapes,_.resizingShapes,{x:0,y:f},m)),(a.left||a.right)&&(f=a.right||a.left,d=e.x+(a.right?e.width:0)+(a.right?-10:100),m=a.right?"e":"w",g=a.left>0||a.right<0?-f:f,_=n.calculateAdjustments(u,"x",g,d),n.makeSpace(_.movingShapes,_.resizingShapes,{x:f,y:0},m))};var Sl="flowNodeRef",Gy="lanes";function au(e){this._elementRegistry=e}au.$inject=["elementRegistry"];au.prototype.computeUpdates=function(e,t){var n=[],i=[],r={},a=[];function c(d,m){var g=Fe(m),_={x:d.x+d.width/2,y:d.y+d.height/2};return _.x>g.left&&_.x<g.right&&_.y>g.top&&_.y<g.bottom}function l(d){n.indexOf(d)===-1&&(a.push(d),n.push(d))}function u(d){var m=Li(d);return r[m.id]||(r[m.id]=pd(m)),r[m.id]}function f(d){if(!d.parent)return[];var m=u(d);return m.filter(function(g){return c(d,g)}).map(function(g){return g.businessObject})}return t.forEach(function(d){var m=Li(d);if(!(!m||n.indexOf(m)!==-1)){var g=m.children.filter(function(_){return b(_,"bpmn:FlowNode")});g.forEach(l),n.push(m)}}),e.forEach(l),a.forEach(function(d){var m=d.businessObject,g=m.get(Gy),_=g.slice(),x=f(d);i.push({flowNode:m,remove:_,add:x})}),t.forEach(function(d){var m=d.businessObject;d.parent||m.get(Sl).forEach(function(g){i.push({flowNode:g,remove:[m],add:[]})})}),i};au.prototype.execute=function(e){var t=e.updates;t||(t=e.updates=this.computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,r=i.get(Gy);n.remove.forEach(function(a){Lt(r,a),Lt(a.get(Sl),i)}),n.add.forEach(function(a){Gt(r,a),Gt(a.get(Sl),i)})})};au.prototype.revert=function(e){var t=e.updates;t.forEach(function(n){var i=n.flowNode,r=i.get(Gy);n.add.forEach(function(a){Lt(r,a),Lt(a.get(Sl),i)}),n.remove.forEach(function(a){Gt(r,a),Gt(a.get(Sl),i)})})};function $d(e){this._moddle=e}$d.$inject=["moddle"];$d.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;r?t.claim(n,i):t.unclaim(n)};$d.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;r?t.unclaim(n):t.claim(n,i)};var l4={fill:void 0,stroke:void 0};function Uy(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(ri(t)){var n=u4(t);if(n)return n}throw new Error("invalid color value: "+t)}}}Uy.$inject=["commandStack"];Uy.prototype.postExecute=function(e){var t=e.elements,n=e.colors||l4,i=this,r={};"fill"in n&&J(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&J(r,{"border-color":this._normalizeColor(n.stroke)}),W(t,function(a){var c=p4(a)?zi(r,["border-color"]):r,l=ct(a);if(f4(c),Jt(a))i._commandStack.execute("element.updateModdleProperties",{element:a,moddleElement:l.label,properties:{color:r["border-color"]}});else{if(!tt(l,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:a,properties:{di:c}})}})};function u4(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function p4(e){return!!e.waypoints}function f4(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var d4={width:0,height:0};function hC(e,t,n){function i(f,d){if(!La(f)){var m=ct(f);d&&!m.label&&(m.label=n.create("bpmndi:BPMNLabel")),!d&&m.label&&delete m.label}}function r(f,d){var m=f.label||f,g=f.labelTarget||f;return yD(m,d),i(f,d),[m,g]}function a(f){var d=f.element,m=d.businessObject,g=f.newLabel;if(!Jt(d)&&La(d)&&!Kf(d)&&!cw(g)){var _=7,x=qf(d);x={x:x.x,y:x.y+_},e.createLabel(d,x,{id:m.id+"_label",businessObject:m,di:d.di})}}function c(f){return f.oldLabel=Hi(f.element),r(f.element,f.newLabel)}function l(f){return r(f.element,f.oldLabel)}function u(f){var d=f.element,m=d.label||d,g=f.newLabel,_=f.newBounds,x=f.hints||{};if(!(!Jt(m)&&!b(m,"bpmn:TextAnnotation"))){if(Jt(m)&&cw(g)){x.removeShape!==!1&&e.removeShape(m,{unsetLabel:!1});return}var S=Hi(m);typeof _>"u"&&(_=t.getExternalLabelBounds(m,S)),_&&e.resizeShape(m,_,d4)}}this.preExecute=a,this.execute=c,this.revert=l,this.postExecute=u}hC.$inject=["modeling","textRenderer","bpmnFactory"];function cw(e){return!e||!e.trim()}function vn(e,t,n,i){gt.call(this,e,t,n),this._bpmnRules=i}Te(vn,gt);vn.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];vn.prototype.getHandlers=function(){var e=gt.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=iu,e["element.updateProperties"]=ru,e["canvas.updateRoot"]=Bd,e["lane.add"]=Hy,e["lane.resize"]=ou,e["lane.split"]=Vy,e["lane.updateRefs"]=au,e["id.updateClaim"]=$d,e["element.setColor"]=Uy,e["element.updateLabel"]=hC,e};vn.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};vn.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)};vn.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};vn.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};vn.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};vn.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};vn.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};vn.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};vn.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};vn.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};this._commandStack.execute("canvas.updateRoot",t)};vn.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};vn.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};vn.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function mC(){}mC.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||Ke(t.source||e.source),t.connectionEnd||Ke(t.target||e.target)]};var Xp=20,h4=5,Mf=Math.round,lw=20,m4={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function v4(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function g4(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function vC(e,t,n){var i=hn(t,e,h4),r=n.split(":")[0],a=Mf((t.x-e.x)/2+e.x),c=Mf((t.y-e.y)/2+e.y),l,u,f=g4(r,i),d=/h|r|l/.test(r),m=!1,g=!1;return f?(l=d?{x:a,y:e.y}:{x:e.x,y:c},u=d?"h:h":"v:v"):(m=v4(i,r),u=d?"h:v":"v:h",m?d?(g=c===e.y,l={x:e.x+Xp*(/l/.test(r)?-1:1),y:g?c+Xp:c}):(g=a===e.x,l={x:g?a+Xp:a,y:e.y+Xp*(/t/.test(r)?-1:1)}):l={x:a,y:c}),{waypoints:Wy(e,l,u).concat(l),directions:u,turnNextDirections:g}}function y4(e,t,n){return vC(e,t,n)}function _4(e,t,n){var i=vC(t,e,uw(n));return{waypoints:i.waypoints.slice().reverse(),directions:uw(i.directions),turnNextDirections:i.turnNextDirections}}function E4(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var r=n+":"+i,a=Wy(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:a,directions:r}}function uw(e){return e.split(":").reverse().join(":")}function x4(e,t,n){var i=Mf((t.x-e.x)/2+e.x),r=Mf((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function Wy(e,t,n){if(n=n||"h:h",!D4(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(gC(n)){var i=y4(e,t,n),r=_4(e,t,n),a=E4(i,r);return[].concat(i.waypoints,a.waypoints,r.waypoints)}return x4(e,t,n)}function w4(e,t,n){var i=Wy(e,t,n);return i.unshift(e),i.push(t),yC(i)}function b4(e,t,n,i,r){var a=r&&r.preferredLayouts||[],c=iR(a,"straight")[0]||"h:h",l=m4[c]||0,u=hn(e,t,l),f=A4(u,c);n=n||Ke(e),i=i||Ke(t);var d=f.split(":"),m=fw(n,e,d[0],k4(u)),g=fw(i,t,d[1],u);return w4(m,g,f)}function S4(e,t,n,i,r,a){Je(n)&&(r=n,a=i,n=Ke(e),i=Ke(t)),a=J({preferredLayouts:[]},a),r=r||[];var c=a.preferredLayouts,l=c.indexOf("straight")!==-1,u;return u=l&&T4(e,t,n,i,a),u||(u=a.connectionEnd&&R4(t,e,i,r),u)||(u=a.connectionStart&&P4(e,t,n,r),u)?u:!a.connectionStart&&!a.connectionEnd&&r&&r.length?r:b4(e,t,n,i,a)}function C4(e,t,n){return e>=t&&e<=n}function pw(e,t,n){var i={x:"width",y:"height"};return C4(t[e],n[e],n[e]+n[i[e]])}function T4(e,t,n,i,r){var a={},c,l;return l=hn(e,t),/^(top|bottom|left|right)$/.test(l)?(/top|bottom/.test(l)&&(c="x"),/left|right/.test(l)&&(c="y"),r.preserveDocking==="target"?pw(c,i,e)?(a[c]=i[c],[{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y,original:{x:a.x!==void 0?a.x:n.x,y:a.y!==void 0?a.y:n.y}},{x:i.x,y:i.y}]):null:pw(c,n,t)?(a[c]=n[c],[{x:n.x,y:n.y},{x:a.x!==void 0?a.x:i.x,y:a.y!==void 0?a.y:i.y,original:{x:a.x!==void 0?a.x:i.x,y:a.y!==void 0?a.y:i.y}}]):null):null}function P4(e,t,n,i){return Yy(e,t,n,i)}function R4(e,t,n,i){var r=i.slice().reverse();return r=Yy(e,t,n,r),r?r.reverse():null}function Yy(e,t,n,i){function r(d){return d.length<3?!0:d.length>4?!1:!!at(d,function(m,g){var _=d[g-1];return _&&Al(m,_)<3})}function a(d,m,g){var _=Pr(m,d);switch(_){case"v":return{x:g.x,y:d.y};case"h":return{x:d.x,y:g.y}}return{x:d.x,y:d.y}}function c(d,m,g){var _;for(_=d.length-2;_!==0;_--)if(HE(d[_],m,lw)||HE(d[_],g,lw))return d.slice(_);return d}if(r(i))return null;var l=i[0],u=i.slice(),f;return u[0]=n,u[1]=a(u[1],l,n),f=c(u,e,t),f!==u&&(u=Yy(e,t,n,f)),u&&Pr(u)?null:u}function A4(e,t){if(gC(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function D4(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function gC(e){return e&&/t|r|b|l/.test(e)}function k4(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function fw(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function yC(e){return e.reduce(function(t,n,i){var r=t[t.length-1],a=e[i+1];return mg(r,a,n,0)||t.push(n),t},[])}var M4=-10,N4=40,Ky={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},pf={top:"t",right:"r",bottom:"b",left:"l"};function qy(){}Te(qy,mC);qy.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,r=t.waypoints||e.waypoints,a=t.connectionStart,c=t.connectionEnd,l,u;return a||(a=dw(r&&r[0],n)),c||(c=dw(r&&r[r.length-1],i)),(b(e,"bpmn:Association")||b(e,"bpmn:DataAssociation"))&&r&&!hw(n,i)?[].concat([a],r.slice(1,-1),[c]):(b(e,"bpmn:MessageFlow")?l=O4(n,i):(b(e,"bpmn:SequenceFlow")||hw(n,i))&&(n===i?l={preferredLayouts:V4(n,e)}:b(n,"bpmn:BoundaryEvent")?l={preferredLayouts:G4(n,i,c)}:Cl(n)||Cl(i)?l=B4(n):b(n,"bpmn:Gateway")?l={preferredLayouts:["v:h"]}:b(i,"bpmn:Gateway")?l={preferredLayouts:["h:v"]}:l={preferredLayouts:["h:h"]}),l&&(l=J(l,t),u=yC(S4(n,i,a,c,r,l))),u||[a,c])};function I4(e){var t=e.host;return hn(Ke(e),t,M4)}function O4(e,t){return{preferredLayouts:["straight","v:v"],preserveDocking:L4(e,t)}}function L4(e,t){return b(t,"bpmn:Participant")?"source":b(e,"bpmn:Participant")?"target":Cl(t)?"source":Cl(e)||b(t,"bpmn:Event")?"target":b(e,"bpmn:Event")?"source":null}function B4(e){return{preferredLayouts:["straight","h:h"],preserveDocking:$4(e)}}function $4(e){return Cl(e)?"target":"source"}function dw(e,t){return e?e.original||e:Ke(t)}function hw(e,t){return b(t,"bpmn:Activity")&&b(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Cl(e){return b(e,"bpmn:SubProcess")&&ut(e)}function dl(e,t){return e===t}function F4(e,t){return t.indexOf(e)!==-1}function hl(e){var t=/right|left/.exec(e);return t&&t[0]}function Ia(e){var t=/top|bottom/.exec(e);return t&&t[0]}function j4(e,t){return Ky[e]===t}function z4(e,t){var n=hl(e),i=Ky[n];return t.indexOf(i)!==-1}function H4(e,t){var n=Ia(e),i=Ky[n];return t.indexOf(i)!==-1}function Zv(e){return e==="right"||e==="left"}function V4(e,t){var n=t.waypoints,i=n&&n.length&&hn(n[0],e);return i==="top"?["t:r"]:i==="right"?["r:b"]:i==="left"?["l:t"]:["b:l"]}function G4(e,t,n){var i=Ke(e),r=Ke(t),a=I4(e),c,l,u=dl(e.host,t),f=F4(a,["top","right","bottom","left"]),d=hn(r,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return u?U4(a,f,e,t,n):(c=W4(a,d,f),l=Y4(a,d,f),[c+":"+l])}function U4(e,t,n,i,r){var a=t?e:Ia(e),c=pf[a],l;return t?Zv(e)?l=mw("y",n,i,r)?"h":"b":l=mw("x",n,i,r)?"v":"l":l="v",[c+":"+l]}function mw(e,t,n,i){var r=N4;return!(uv(e,i,n,r)||uv(e,i,{x:n.x+n.width,y:n.y+n.height},r)||uv(e,i,Ke(t),r))}function uv(e,t,n,i){return Math.abs(t[e]-n[e])<i}function W4(e,t,n){return n?pf[e]:dl(Ia(e),Ia(t))||j4(hl(e),hl(t))?pf[Ia(e)]:pf[hl(e)]}function Y4(e,t,n){return n?Zv(e)?z4(e,t)||dl(e,t)?"h":"v":H4(e,t)||dl(e,t)?"v":"h":Zv(t)||dl(Ia(e),Ia(t))&&hl(t)?"h":"v"}function vw(e){return J({original:e.point.original||e.point},e.actual)}function Wo(e,t){this._elementRegistry=e,this._graphicsFactory=t}Wo.$inject=["elementRegistry","graphicsFactory"];Wo.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),a=e.waypoints.slice(i.idx+1,r.idx);return a.unshift(vw(i)),a.push(vw(r)),a};Wo.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,r,a,c;return r=n?0:i.length-1,a=i[r],c=this._getIntersection(t,e,n),{point:a,actual:c||a,idx:r}};Wo.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return bv(i,r,n)};Wo.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};Wo.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};Wo.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const K4={__init__:["modeling","bpmnUpdater"],__depends__:[Q5,mL,gL,yL,rS,kL,OL,BL,VL,cr,Tg,tC],bpmnFactory:["type",Ti],bpmnUpdater:["type",Kn],elementFactory:["type",Vo],modeling:["type",vn],layouter:["type",qy],connectionDocking:["type",Wo]};var q4=500,X4=1250,Q4=1500,Nf=Math.round;function Z4(e){return{x:e.x+Nf(e.width/2),y:e.y+Nf(e.height/2)}}function _C(e,t,n,i,r){function a(l,u,f,d){return r.allowed("elements.move",{shapes:l,delta:u,position:f,target:d})}e.on("shape.move.start",Q4,function(l){var u=l.context,f=l.shape,d=i.get().slice();d.indexOf(f)===-1&&(d=[f]),d=J4(d),J(u,{shapes:d,validatedShapes:d,shape:f})}),e.on("shape.move.start",X4,function(l){var u=l.context,f=u.validatedShapes,d;if(d=u.canExecute=a(f),!d)return!1}),e.on("shape.move.move",q4,function(l){var u=l.context,f=u.validatedShapes,d=l.hover,m={x:l.dx,y:l.dy},g={x:l.x,y:l.y},_;if(_=a(f,m,g,d),u.delta=m,u.canExecute=_,_===null){u.target=null;return}u.target=d}),e.on("shape.move.end",function(l){var u=l.context,f=u.delta,d=u.canExecute,m=d==="attach",g=u.shapes;if(d===!1)return!1;f.x=Nf(f.x),f.y=Nf(f.y),!(f.x===0&&f.y===0)&&n.moveElements(g,f,u.target,{primaryShape:u.shape,attach:m})}),e.on("element.mousedown",function(l){if(Bo(l)){var u=ec(l);if(!u)throw new Error("must supply DOM mousedown event");return c(u,l.element)}});function c(l,u,f,d){if(dn(f)&&(d=f,f=!1),!(u.waypoints||!u.parent)&&!ot(l.target).has("djs-hit-no-move")){var m=Z4(u);return t.init(l,m,"shape.move",{cursor:"grabbing",autoActivate:f,data:{shape:u,context:d||{}}}),!0}}this.start=c}_C.$inject=["eventBus","dragging","modeling","selection","rules"];function J4(e){var t=qs(e,"id");return Ze(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var gw=499,pv="djs-dragging",yw="drop-ok",_w="drop-not-ok",Ew="new-parent",xw="attach-ok";function EC(e,t,n,i){function r(u){var f=a(u),d=eB(f);return d}function a(u){var f=Rl(u,!0),d=Zt(f,function(m){return(m.incoming||[]).concat(m.outgoing||[])});return hf(f.concat(d))}function c(u,f){[xw,yw,_w,Ew].forEach(function(d){d===f?t.addMarker(u,d):t.removeMarker(u,d)})}function l(u,f,d){i.addDragger(f,u.dragGroup),d&&t.addMarker(f,pv),u.allDraggedElements?u.allDraggedElements.push(f):u.allDraggedElements=[f]}e.on("shape.move.start",gw,function(u){var f=u.context,d=f.shapes,m=f.allDraggedElements,g=r(d);if(!f.dragGroup){var _=Be("g");Se(_,n.cls("djs-drag-group",["no-events"]));var x=t.getActiveLayer();Ge(x,_),f.dragGroup=_}g.forEach(function(S){i.addDragger(S,f.dragGroup)}),m?m=hf([m,a(d)]):m=a(d),W(m,function(S){t.addMarker(S,pv)}),f.allDraggedElements=m,f.differentParents=tB(d)}),e.on("shape.move.move",gw,function(u){var f=u.context,d=f.dragGroup,m=f.target,g=f.shape.parent,_=f.canExecute;m&&(_==="attach"?c(m,xw):f.canExecute&&m&&m.id!==g.id?c(m,Ew):c(m,f.canExecute?yw:_w)),Gn(d,u.dx,u.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(u){var f=u.context,d=f.target;d&&c(d,null)}),e.on("shape.move.cleanup",function(u){var f=u.context,d=f.allDraggedElements,m=f.dragGroup;W(d,function(g){t.removeMarker(g,pv)}),m&&Dt(m)}),this.makeDraggable=l}EC.$inject=["eventBus","canvas","styles","previewSupport"];function eB(e){var t=Ze(e,function(n){return nB(n)?at(e,Bi({id:n.source.id}))&&at(e,Bi({id:n.target.id})):!0});return t}function tB(e){return rR(qs(e,function(t){return t.parent&&t.parent.id}))!==1}function nB(e){return e.waypoints}const iB={__depends__:[Ll,cr,zb,ur,jr,Fl],__init__:["move","movePreview"],move:["type",_C],movePreview:["type",EC]};var xC="crosshair";function qa(e,t,n,i,r,a,c){this._selection=r,this._dragging=n,this._mouse=c;var l=this,u={create:function(f){var d=t.getActiveLayer(),m;m=f.frame=Be("rect"),Se(m,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),Ge(d,m)},update:function(f){var d=f.frame,m=f.bbox;Se(d,{x:m.x,y:m.y,width:m.width,height:m.height})},remove:function(f){f.frame&&Dt(f.frame)}};a.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(f){var d=f.originalEvent.target;!f.hover&&!(d instanceof SVGElement)||e.once("lasso.selection.ended",function(){l.activateLasso(f.originalEvent,!0)})}),e.on("lasso.end",function(f){var d=fv(f),m=i.filter(function(g){return g});l.select(m,d)}),e.on("lasso.start",function(f){var d=f.context;d.bbox=fv(f),u.create(d)}),e.on("lasso.move",function(f){var d=f.context;d.bbox=fv(f),u.update(d)}),e.on("lasso.cleanup",function(f){var d=f.context;u.remove(d)}),e.on("element.mousedown",1500,function(f){if(Fb(f))return l.activateLasso(f.originalEvent),!0})}qa.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];qa.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:xC,data:{context:{}}})};qa.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:xC,data:{context:{}}})};qa.prototype.select=function(e,t){var n=qR(e,t);this._selection.select(ag(n))};qa.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};qa.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function fv(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}const rB={__depends__:[Pd,zl],__init__:["lassoTool"],lassoTool:["type",qa]};var dv=1500,wC="grab";function ac(e,t,n,i,r,a){this._dragging=n,this._mouse=a;var c=this,l=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",dv,function(u){if(Gs(u))return c.activateMove(u.originalEvent,!0),!1}),l&&l.addListener(dv,function(u){if(!(!ww(u.keyEvent)||c.isActive())){var f=c._mouse.getLastMoveEvent();c.activateMove(f,!!f)}},"keyboard.keydown"),l&&l.addListener(dv,function(u){!ww(u.keyEvent)||!c.isActive()||c.toggle()},"keyboard.keyup"),e.on("hand.end",function(u){var f=u.originalEvent.target;if(!u.hover&&!(f instanceof SVGElement))return!1;e.once("hand.ended",function(){c.activateMove(u.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(u){var f=t.viewbox().scale;t.scroll({dx:u.dx*f,dy:u.dy*f})}),e.on("hand.move.end",function(u){var f=u.context,d=f.reactivate;return!Gs(u)&&d&&e.once("hand.move.ended",function(m){c.activateHand(m.originalEvent,!0,!0)}),!1})}ac.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];ac.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:wC,data:{context:n||{}}})};ac.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:wC,data:{context:{reactivate:n}}})};ac.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};ac.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function ww(e){return Qt("Space",e)}const oB={__depends__:[Pd,zl],__init__:["handTool"],handTool:["type",ac]};var bw="connect-ok",Sw="connect-not-ok";function sc(e,t,n,i,r,a,c){var l=this;this._dragging=t,this._rules=a,this._mouse=c,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(u){var f=u.context,d=u.hover,m=f.canStartConnect=l.canStartConnect(d);m!==null&&(f.startTarget=d,i.addMarker(d,m?bw:Sw))}),e.on(["global-connect.out","global-connect.cleanup"],function(u){var f=u.context.startTarget,d=u.context.canStartConnect;f&&i.removeMarker(f,d?bw:Sw)}),e.on(["global-connect.ended"],function(u){var f=u.context,d=f.startTarget,m={x:u.x,y:u.y},g=l.canStartConnect(d);if(g)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,d,m)}),!1})}sc.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];sc.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};sc.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};sc.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};sc.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const aB={__depends__:[Wg,ur,jr,Pd,zl],globalConnect:["type",sc]};function Xy(e,t,n,i,r,a,c,l){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=a,this._globalConnect=c,this._translate=l,e.registerProvider(this)}Xy.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Xy.prototype.getPaletteEntries=function(e){var t={},n=this._create,i=this._elementFactory,r=this._spaceTool,a=this._lassoTool,c=this._handTool,l=this._globalConnect,u=this._translate;function f(g,_,x,S,C){function z(M){var A=i.createShape(J({type:g},C));n.start(M,A)}var D=g.replace(/^bpmn:/,"");return{group:_,className:x,title:S||u("Create {type}",{type:D}),action:{dragstart:z,click:z}}}function d(g){var _=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),x=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:_});n.start(g,[_,x],{hints:{autoSelect:[_]}})}function m(g){n.start(g,i.createParticipantShape())}return J(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:u("Activate the hand tool"),action:{click:function(g){c.activateHand(g)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:u("Activate the lasso tool"),action:{click:function(g){a.activateSelection(g)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:u("Activate the create/remove space tool"),action:{click:function(g){r.activateSelection(g)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:u("Activate the global connect tool"),action:{click:function(g){l.start(g)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":f("bpmn:StartEvent","event","bpmn-icon-start-event-none",u("Create StartEvent")),"create.intermediate-event":f("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",u("Create Intermediate/Boundary Event")),"create.end-event":f("bpmn:EndEvent","event","bpmn-icon-end-event-none",u("Create EndEvent")),"create.exclusive-gateway":f("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",u("Create Gateway")),"create.task":f("bpmn:Task","activity","bpmn-icon-task",u("Create Task")),"create.data-object":f("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",u("Create DataObjectReference")),"create.data-store":f("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",u("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:u("Create expanded SubProcess"),action:{dragstart:d,click:d}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:u("Create Pool/Participant"),action:{dragstart:m,click:m}},"create.group":f("bpmn:Group","artifact","bpmn-icon-group",u("Create Group"))}),t};const sB={__depends__:[uS,cd,tC,rB,oB,aB,Yf],__init__:["paletteProvider"],paletteProvider:["type",Xy]};var cB=250;function Qy(e,t,n,i,r){_e.call(this,e);function a(l){var u=l.canExecute.replacements;W(u,function(f){var d=f.oldElementId,m={type:f.newElementType};if(!l.visualReplacements[d]){var g=t.get(d);J(m,{x:g.x,y:g.y});var _=n.createShape(m);i.addShape(_,g.parent);var x=ft('[data-element-id="'+yl(g.id)+'"]',l.dragGroup);x&&Se(x,{display:"none"});var S=r.addDragger(_,l.dragGroup);l.visualReplacements[d]=S,i.removeShape(_)}})}function c(l){var u=l.visualReplacements;W(u,function(f,d){var m=ft('[data-element-id="'+yl(d)+'"]',l.dragGroup);m&&Se(m,{display:"inline"}),f.remove(),u[d]&&delete u[d]})}e.on("shape.move.move",cB,function(l){var u=l.context,f=u.canExecute;u.visualReplacements||(u.visualReplacements={}),f&&f.replacements?a(u):c(u)})}Qy.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];Te(Qy,_e);const lB={__depends__:[Fl],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Qy]};var uB=1250,hv=40,pB=20,fB=10,Cw=20,bC=["x","y"],dB=Math.abs;function SC(e){e.on(["connect.hover","connect.move","connect.end"],uB,function(t){var n=t.context,i=n.canExecute,r=n.start,a=n.hover,c=n.source,l=n.target;t.originalEvent&&ii(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&a&&hB(t,a,yB(a)),a&&gB(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=Ei(r),tt(a,["bpmn:Event","bpmn:Gateway"])&&Tw(t,Ei(a)),tt(a,["bpmn:Task","bpmn:SubProcess"])&&mB(t,a),b(c,"bpmn:BoundaryEvent")&&l===c.host&&vB(t)):CC(i,"bpmn:MessageFlow")?(b(r,"bpmn:Event")&&(n.connectionStart=Ei(r)),b(a,"bpmn:Event")&&Tw(t,Ei(a))):n.connectionStart=n.initialConnectionStart)})}SC.$inject=["eventBus"];function hB(e,t,n){bC.forEach(function(i){var r=TC(i,t);e[i]<t[i]+n?It(e,i,t[i]+n):e[i]>t[i]+r-n&&It(e,i,t[i]+r-n)})}function mB(e,t){var n=Ei(t);bC.forEach(function(i){_B(e,t,i)&&It(e,i,n[i])})}function vB(e){var t=e.context,n=t.source,i=t.target;if(!EB(t)){var r=Ei(n),a=hn(r,i,-10),c=[];/top|bottom/.test(a)&&c.push("x"),/left|right/.test(a)&&c.push("y"),c.forEach(function(l){var u=e[l],f;dB(u-r[l])<hv&&(u>r[l]?f=r[l]+hv:f=r[l]-hv,It(e,l,f))})}}function Tw(e,t){It(e,"x",t.x),It(e,"y",t.y)}function CC(e,t){return e&&e.type===t}function gB(e,t){return sr(t,function(n){return CC(e,n)})}function TC(e,t){return e==="x"?t.width:t.height}function yB(e){return b(e,"bpmn:Task")?fB:pB}function _B(e,t,n){return e[n]>t[n]+Cw&&e[n]<t[n]+TC(n,t)-Cw}function EB(e){var t=e.hover,n=e.source;return t&&n&&t===n}function Yo(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}Yo.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};Yo.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};Yo.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};Yo.prototype.getSnapLocations=function(){return this._snapLocations};Yo.prototype.setSnapLocations=function(e){this._snapLocations=e};Yo.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Fd,n.initDefaults(this._defaultSnaps)),n};function Fd(e){this._snapValues={}}Fd.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};Fd.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&pN(e[n],r[n],i)};Fd.prototype.initDefaults=function(e){var t=this;W(e||{},function(n,i){W(n,function(r){t.add(i,r)})})};var xB=1250;function pr(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],xB,function(r){var a=r.context,c=a.shape,l=a.snapContext,u=a.target;if(!(r.originalEvent&&ii(r.originalEvent))&&!(Ys(r)||!u)){var f=l.pointsForTarget(u);f.initialized||(f=i.addSnapTargetPoints(f,c,u),f.initialized=!0),n.snap(r,f)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}pr.$inject=["elementRegistry","eventBus","snapping"];pr.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,r=n.snapContext;r||(r=n.snapContext=new Yo);var a;t.get(i.id)?a=Ei(i,e):a={x:e.x+Ei(i).x,y:e.y+Ei(i).y};var c={x:a.x-i.width/2,y:a.y-i.height/2},l={x:a.x+i.width/2,y:a.y+i.height/2};return r.setSnapOrigin("mid",{x:a.x-e.x,y:a.y-e.y}),Jv(i)||(r.setSnapOrigin("top-left",{x:c.x-e.x,y:c.y-e.y}),r.setSnapOrigin("bottom-right",{x:l.x-e.x,y:l.y-e.y})),r};pr.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return W(i,function(r){if(Jv(r)){Jv(t)&&e.add("mid",Ei(r));return}if(wB(r)){if(r.waypoints.length<3)return;var a=r.waypoints.slice(1,-1);W(a,function(c){e.add("mid",c)});return}e.add("mid",Ei(r))}),!Ve(t.x)||!Ve(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",Ei(t)),e};pr.prototype.getSnapTargets=function(e,t){return Y2(t).filter(function(n){return!bB(n)})};function wB(e){return!!e.waypoints}function bB(e){return!!e.hidden}function Jv(e){return!!e.labelTarget}var Pw=1500;function cc(e,t){t.invoke(pr,this),e.on(["create.move","create.end"],Pw,PB),e.on(["create.move","create.end","shape.move.move","shape.move.end"],Pw,function(n){var i=n.context,r=i.canExecute,a=i.target,c=r&&(r==="attach"||r.attach);c&&!Ys(n)&&SB(n,a)})}Te(cc,pr);cc.$inject=["eventBus","injector"];cc.prototype.initSnap=function(e){var t=pr.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return W(n.outgoing,function(r){var a=r.waypoints[0];a=a.original||a,t.setSnapOrigin(r.id+"-docking",Aw(a,i,e))}),W(n.incoming,function(r){var a=r.waypoints[r.waypoints.length-1];a=a.original||a,t.setSnapOrigin(r.id+"-docking",Aw(a,i,e))}),b(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};cc.prototype.addSnapTargetPoints=function(e,t,n){pr.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);W(i,function(a){(TB(a)||CB([t,a],"bpmn:TextAnnotation"))&&(e.add("top-left",U2(a)),e.add("bottom-right",W2(a)))});var r=this._elementRegistry;return W(t.incoming,function(a){if(r.get(t.id)){Rw(i,a.source)||e.add("mid",Ke(a.source));var c=a.waypoints[0];e.add(a.id+"-docking",c.original||c)}}),W(t.outgoing,function(a){if(r.get(t.id)){Rw(i,a.target)||e.add("mid",Ke(a.target));var c=a.waypoints[a.waypoints.length-1];e.add(a.id+"-docking",c.original||c)}}),b(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};cc.prototype.getSnapTargets=function(e,t){return pr.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!b(n,"bpmn:Lane")})};function SB(e,t){var n=Fe(t),i=jS(e,t),r=e.context,a=r.shape,c;a.parent?c={x:0,y:0}:c=Ke(a),/top/.test(i)?It(e,"y",n.top-c.y):/bottom/.test(i)&&It(e,"y",n.bottom-c.y),/left/.test(i)?It(e,"x",n.left-c.x):/right/.test(i)&&It(e,"x",n.right-c.x)}function CB(e,t){return e.every(function(n){return b(n,t)})}function TB(e){return b(e,"bpmn:SubProcess")&&ut(e)?!0:b(e,"bpmn:Participant")}function PB(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,r=n.right,a=n.bottom,c=n.left;(c&&c>=e.x||r&&r<=e.x)&&It(e,"x",e.x),(i&&i>=e.y||a&&a<=e.y)&&It(e,"y",e.y)}}function Rw(e,t){return e.indexOf(t)!==-1}function Aw(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var RB=1250;function su(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],RB,function(i){var r=i.context,a=r.shape,c=a.parent,l=r.direction,u=r.snapContext;if(!(i.originalEvent&&ii(i.originalEvent))&&!Ys(i)){var f=u.pointsForTarget(c);f.initialized||(f=n.addSnapTargetPoints(f,a,c,l),f.initialized=!0),NB(l)&&It(i,"x",i.x),IB(l)&&It(i,"y",i.y),t.snap(i,f)}}),e.on(["resize.cleanup"],function(){t.hide()})}su.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new Yo);var a=PC(n,i);return r.setSnapOrigin("corner",{x:a.x-e.x,y:a.y-e.y}),r};su.prototype.addSnapTargetPoints=function(e,t,n,i){var r=this.getSnapTargets(t,n);return W(r,function(a){e.add("corner",W2(a)),e.add("corner",U2(a))}),e.add("corner",PC(t,i)),e};su.$inject=["eventBus","snapping"];su.prototype.getSnapTargets=function(e,t){return Y2(t).filter(function(n){return!AB(n,e)&&!DB(n)&&!kB(n)&&!MB(n)})};function PC(e,t){var n=Ke(e),i=Fe(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function AB(e,t){return e.host===t}function DB(e){return!!e.waypoints}function kB(e){return!!e.hidden}function MB(e){return!!e.labelTarget}function NB(e){return e==="n"||e==="s"}function IB(e){return e==="e"||e==="w"}var OB=7,LB=1e3;function Ko(e){this._canvas=e,this._asyncHide=Hw(Dn(this.hide,this),LB)}Ko.$inject=["canvas"];Ko.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,r=i.getSnapLocations(),a={x:Ys(e,"x"),y:Ys(e,"y")};W(r,function(c){var l=i.getSnapOrigin(c),u={x:e.x+l.x,y:e.y+l.y};if(W(["x","y"],function(f){var d;a[f]||(d=t.snap(u,c,f,OB),d!==void 0&&(a[f]={value:d,originValue:d-l[f]}))}),a.x&&a.y)return!1}),this.showSnapLine("vertical",a.x&&a.x.value),this.showSnapLine("horizontal",a.y&&a.y.value),W(["x","y"],function(c){var l=a[c];dn(l)&&It(e,c,l.originValue)})};Ko.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=Be("path");return Se(n,{d:"M0,0 L0,0"}),ot(n).add("djs-snap-line"),Ge(t,n),{update:function(i){Ve(i)?e==="horizontal"?Se(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):Se(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):Se(n,{display:"none"})}}};Ko.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};Ko.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};Ko.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};Ko.prototype.hide=function(){W(this._snapLines,function(e){e.update()})};const BB={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",pr],resizeSnapping:["type",su],snapping:["type",Ko]},$B={__depends__:[BB],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",SC],createMoveSnapping:["type",cc]};function Ye(e,t,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=i,this._container=et(Ye.BOX_HTML),this._searchInput=ft(Ye.INPUT_SELECTOR,this._container),this._resultsContainer=ft(Ye.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy"],this.close,this)}Ye.$inject=["canvas","eventBus","overlays","selection"];Ye.prototype._bindEvents=function(){var e=this;function t(n,i,r,a){e._eventMaps.push({el:n,type:r,listener:Vn.bind(n,i,r,a)})}t(document,"html","click",function(n){e.close()}),t(this._container,Ye.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,Ye.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,Ye.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,Ye.INPUT_SELECTOR,"keydown",function(n){Qt("ArrowUp",n)&&n.preventDefault(),Qt("ArrowDown",n)&&n.preventDefault()}),t(this._container,Ye.INPUT_SELECTOR,"keyup",function(n){if(Qt("Escape",n))return e.close();if(Qt("Enter",n)){var i=e._getCurrentResult();return i?e._select(i):e.close()}if(Qt("ArrowUp",n))return e._scrollToDirection(!0);if(Qt("ArrowDown",n))return e._scrollToDirection();Qt(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};Ye.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){Vn.unbind(e.el,e.type,e.listener)})};Ye.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n.length){n.forEach(function(r){var a=r.element.id,c=t._createResultNode(r,a);t._results[a]={element:r.element,node:c}});var i=ft(Ye.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}};Ye.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};Ye.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}};Ye.prototype._clearResults=function(){Pl(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")};Ye.prototype._getCurrentResult=function(){return ft(Ye.RESULT_SELECTED_SELECTOR,this._resultsContainer)};Ye.prototype._createResultNode=function(e,t){var n=et(Ye.RESULT_HTML);return e.primaryTokens.length>0&&Dw(n,e.primaryTokens,Ye.RESULT_PRIMARY_HTML),Dw(n,e.secondaryTokens,Ye.RESULT_SECONDARY_HTML),bn(n,Ye.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};Ye.prototype.registerProvider=function(e){this._searchProvider=e};Ye.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,He(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};Ye.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,He(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))};Ye.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Ye.prototype.isOpen=function(){return this._open};Ye.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&He(t).remove(Ye.RESULT_SELECTED_CLASS);var n=bn(e,Ye.RESULT_ID_ATTRIBUTE),i=this._results[n].element;He(e).add(Ye.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._canvas.scrollToElement(i,{top:400}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}};Ye.prototype._select=function(e){var t=bn(e,Ye.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(n,{top:400}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};Ye.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=Ot(e),n=FB(t);this._overlayId=this._overlays.add(e,n)}};function FB(e){var t=6,n=e.width+t*2,i=e.height+t*2,r={width:n+"px",height:i+"px"},a=et('<div class="'+Ye.OVERLAY_CLASS+'"></div>');return an(a,r),{position:{bottom:i-t,right:n-t},show:!0,html:a}}function Dw(e,t,n){var i=jB(t),r=et(n);r.innerHTML=i,e.appendChild(r)}function jB(e){var t="";return e.forEach(function(n){n.matched?t+='<strong class="'+Ye.RESULT_HIGHLIGHT_CLASS+'">'+xf(n.matched)+"</strong>":t+=xf(n.normal)}),t!==""?t:null}Ye.CONTAINER_SELECTOR=".djs-search-container";Ye.INPUT_SELECTOR=".djs-search-input input";Ye.RESULTS_CONTAINER_SELECTOR=".djs-search-results";Ye.RESULT_SELECTOR=".djs-search-result";Ye.RESULT_SELECTED_CLASS="djs-search-result-selected";Ye.RESULT_SELECTED_SELECTOR="."+Ye.RESULT_SELECTED_CLASS;Ye.RESULT_ID_ATTRIBUTE="data-result-id";Ye.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";Ye.OVERLAY_CLASS="djs-search-overlay";Ye.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>';Ye.RESULT_HTML='<div class="djs-search-result"></div>';Ye.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';Ye.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const zB={__depends__:[Zf,cr],searchPad:["type",Ye]};function Zy(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}Zy.$inject=["elementRegistry","searchPad","canvas"];Zy.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter(function(i){return!i.labelTarget});return n=Ze(n,function(i){return i!==t}),n=Zt(n,function(i){return{primaryTokens:Mw(Hi(i),e),secondaryTokens:Mw(i.id,e),element:i}}),n=Ze(n,function(i){return kw(i.primaryTokens)||kw(i.secondaryTokens)}),n=ji(n,function(i){return Hi(i.element)+i.element.id}),n};function kw(e){var t=Ze(e,function(n){return!!n.matched});return t.length>0}function Mw(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(r!==0&&n.push({normal:i.substr(0,r)}),n.push({matched:i.substr(r,t.length)}),t.length+r<e.length&&n.push({normal:i.substr(t.length+r,e.length)})):n.push({normal:i}),n}const HB={__depends__:[zB],__init__:["bpmnSearch"],bpmnSearch:["type",Zy]};var VB='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function or(e){Ol.call(this,e)}Te(or,Ol);or.Viewer=Fo;or.NavigatedViewer=_l;or.prototype.createDiagram=Js(function(){return this.importXML(VB)});or.prototype._interactionModules=[Jb,i2,Zk,a2];or.prototype._modelingModules=[bM,M2,YM,zM,hN,Wg,EN,gI,tS,cd,VI,YI,XI,dO,vO,gO,wO,OO,K4,iB,sB,lB,ES,$B,HB];or.prototype._modules=[].concat(Fo.prototype._modules,or.prototype._interactionModules,or.prototype._modelingModules);const Jy=1,RC=2,AC=4,DC=8,GB=16,UB=32,WB=64,YB=128,KB=256,qB=512,XB=Jy|RC|AC,QB=Jy|DC,pt=Object.freeze({ACTIVATED:Jy,RUNNING:RC,ENDING:AC,ENDED:DC,DESTROYED:GB,FAILED:UB,TERMINATED:WB,CANCELED:YB,COMPLETED:KB,COMPENSABLE:qB,ACTIVE:XB,NOT_DEAD:QB}),lc={};function Pa(e,t){throw new Error(`illegal transition: ${e.name} -> ${t}`)}function Ra(e,t){return e===lc?t:e}class ci{constructor(t,n,{start:i,cancel:r,complete:a,destroy:c,fail:l,terminate:u,compensable:f}={}){this.name=t,this.traits=n,this._start=Ra(i,this),this._compensable=Ra(f,this),this._cancel=Ra(r,this),this._complete=Ra(a,this),this._destroy=Ra(c,this),this._fail=Ra(l,this),this._terminate=Ra(u,this)}hasTrait(t){return(this.traits&t)!==0}complete(){return this._complete||Pa(this,"complete")}destroy(){return this._destroy||Pa(this,"destroy")}cancel(){return this._cancel||Pa(this,"cancel")}fail(){return this._fail||Pa(this,"fail")}terminate(){return this._terminate||Pa(this,"terminate")}compensable(){return this._compensable||Pa(this,"compensable")}start(){return this._start||Pa(this,"start")}}const jd=new ci("failed",pt.DESTROYED|pt.FAILED),zd=new ci("terminated",pt.DESTROYED|pt.TERMINATED),e0=new ci("completed",pt.DESTROYED|pt.COMPLETED),qo=new ci("terminating",pt.ENDING|pt.TERMINATED,{destroy:zd}),uc=new ci("canceling",pt.ENDING|pt.FAILED|pt.CANCELED,{destroy:jd,complete:lc,terminate:qo}),t0=new ci("completing",pt.ENDING|pt.COMPLETED,{destroy:e0,cancel:uc,terminate:qo}),n0=new ci("failing",pt.ENDING|pt.FAILED,{cancel:uc,complete:t0,destroy:jd,terminate:qo}),ZB=new ci("compensable:failing",pt.ENDING|pt.FAILED,{complete:lc,terminate:qo,destroy:jd}),kC=new ci("compensable:completed",pt.ENDED|pt.COMPLETED,{cancel:uc,fail:ZB,destroy:e0,compensable:lc}),JB=new ci("compensable:completing",pt.ENDING|pt.COMPLETED,{destroy:kC,terminate:qo,compensable:lc}),e6=new ci("compensable:running",pt.RUNNING|pt.COMPENSABLE,{cancel:uc,complete:JB,compensable:lc,destroy:kC,fail:n0,terminate:qo}),MC=new ci("running",pt.RUNNING,{cancel:uc,complete:t0,compensable:e6,destroy:zd,fail:n0,terminate:qo}),t6=new ci("activated",pt.ACTIVATED,{start:MC,destroy:zd}),n6=Object.freeze({ACTIVATED:t6,RUNNING:MC,CANCELING:uc,COMPLETING:t0,COMPLETED:e0,FAILING:n0,FAILED:jd,TERMINATING:qo,TERMINATED:zd});class i6{constructor(t,n,i=null,r=null){this.id=t,this.element=n,this.parent=i,this.initiator=r,this.subscriptions=new Set,this.children=[],this.state=n6.ACTIVATED}get running(){return this.hasTrait(pt.RUNNING)}get destroyed(){return this.hasTrait(pt.DESTROYED)}get completed(){return this.hasTrait(pt.COMPLETED)}get canceled(){return this.hasTrait(pt.CANCELED)}get failed(){return this.hasTrait(pt.FAILED)}hasTrait(t){return this.state.hasTrait(t)}start(){return this.state=this.state.start(),this}compensable(){return this.state=this.state.compensable(),this}fail(t){return this.failed||(this.state=this.state.fail(),this.failInitiator=t),this}cancel(t){return this.canceled||(this.state=this.state.cancel(),this.cancelInitiator=t),this}terminate(t){return this.state=this.state.terminate(),this.terminateInitiator=t,this}complete(){return this.state=this.state.complete(),this}destroy(t){return this.state=this.state.destroy(),this.destroyInitiator=t,this}getTokens(){return this.children.filter(t=>!t.destroyed).length}getTokensByElement(t){return this.children.filter(n=>!n.destroyed&&n.element===t).length}}function al(e,t){const n=[];for(const i of e)t(i)&&n.push(i);return n}function Nw(e,t){for(const n of e)if(t(n))return n;return null}function eg(e,t){return["type","name","ref","iref"].every(n=>!(n in e)||e[n]===t[n])}function NC(e){return e.filter(t=>b(t,"bpmn:SequenceFlow"))}function tg(e){return b(e,"bpmn:MessageFlow")}function r6(e){return b(e,"bpmn:SequenceFlow")}function o6(e){return i0(e)&&LC(e,"bpmn:LinkEventDefinition")}function If(e){return i0(e)&&LC(e,"bpmn:CompensateEventDefinition")}function IC(e){return b(e,"bpmn:Activity")&&e.businessObject.isForCompensation}function i0(e){return(b(e,"bpmn:CatchEvent")||b(e,"bpmn:ReceiveTask"))&&!Hd(e)}function ff(e){return b(e,"bpmn:BoundaryEvent")&&!Hd(e)}function df(e){return b(e,"bpmn:StartEvent")&&!Hd(e)}function Hd(e){return!!e.labelTarget}function Io(e){return xe(e).triggeredByEvent}function OC(e){return b(e,"bpmn:StartEvent")&&xe(e).isInterrupting||b(e,"bpmn:BoundaryEvent")&&xe(e).cancelActivity}function cu(e,t){return t.some(n=>b(e,n))}function LC(e,t){return sr(xe(e).eventDefinitions,n=>b(n,t))}function BC(e,t,n){const i=e.get("scopeIds",!1)||new Fi([32,36]),r={},a={},c=new a6,l=new Set,u=[],f=new Set,d=new Set;me("tick",function(){for(const B of l)Ee("elementChanged",{element:B});l.clear()});function m(B,Q){if(u.push([Q,B]),u.length!==1)return;let Z;for(;Z=u[0];){const[ee,le]=Z;le.destroyed||ee(),u.shift()}Ee("tick")}function g(B){return a[B.type]||c}function _(B){const{element:Q,parentScope:Z,initiator:ee=null}=B,le=B.scope||T({element:Q,parent:Z,initiator:ee});return m(le,function(){le.running||le.start(),Ae("signal",{...B,scope:le}),g(Q).signal({...B,scope:le}),le.parent&&Me(le.parent)}),le}function x(B){const{element:Q,scope:Z,initiator:ee=Z}=B,le=T({element:Q,parent:Z,initiator:ee});return m(le,function(){le.running||le.start(),Ae("enter",B),g(Q).enter({...B,initiator:ee,scope:le}),Me(Z)}),le}function S(B){const{element:Q,scope:Z,initiator:ee=Z}=B;m(Z,function(){Ae("exit",B),g(Q).exit({...B,initiator:ee}),Z.running&&Z.complete(),ce(Z,ee),Z.parent&&Me(Z.parent)})}function C(B){const{event:Q,initiator:Z,scope:ee}=B,le=A(Q),pe=ee.subscriptions,ve=al(pe,Ce=>eg(le,Ce.event)),se=ve.filter(Ce=>!Ce.event.interrupting),ue=ve.filter(Ce=>Ce.event.interrupting);if(!ue.length)return se.map(Ce=>Ce.triggerFn(Z)).flat();const je=ue.find(Ce=>!Ce.event.boundary)||ue[0],ze=al(pe,Ce=>Ce.event.persistent||s6(Ce.event,je.event));return pe.forEach(Ce=>{ze.includes(Ce)||Ce.remove()}),[je.triggerFn(Z)].flat().filter(Ce=>Ce)}function z(B,Q,Z){Q=A(Q);const ee=Q.element,le={scope:B,event:Q,element:ee,triggerFn:Z,remove(){D(le)}};return d.add(le),B.subscriptions.add(le),ee&&nt(ee),le}function D(B){const{scope:Q,event:Z}=B;d.delete(B),Q.subscriptions.delete(B),Z.element&&nt(Z.element)}function M(B){return b(B,"bpmn:StartEvent")||b(B,"bpmn:IntermediateCatchEvent")||b(B,"bpmn:ReceiveTask")||l6(B)?xe(B).name||B.id:null}function A(B){if(!B.businessObject)return B;const Q=OC(B),Z=ff(B),ee=M(B),le={element:B,interrupting:Q,boundary:Z,...ee?{iref:ee}:{}},pe=$C(B)[0];if(!pe)return{...le,type:c6(B)?"message":"none"};if(b(pe,"bpmn:LinkEventDefinition"))return{...le,type:"link",name:pe.name};if(b(pe,"bpmn:SignalEventDefinition"))return{...le,type:"signal",ref:pe.signalRef};if(b(pe,"bpmn:TimerEventDefinition"))return{...le,type:"timer"};if(b(pe,"bpmn:ConditionalEventDefinition"))return{...le,type:"condition"};if(b(pe,"bpmn:EscalationEventDefinition"))return{...le,type:"escalation",ref:pe.escalationRef};if(b(pe,"bpmn:CancelEventDefinition"))return{...le,type:"cancel"};if(b(pe,"bpmn:ErrorEventDefinition"))return{...le,type:"error",ref:pe.errorRef};if(b(pe,"bpmn:MessageEventDefinition"))return{...le,type:"message",ref:pe.messageRef};if(b(pe,"bpmn:CompensateEventDefinition")){let ve=pe.activityRef&&n.get(pe.activityRef.id);return ve||(df(B)&&Io(B.parent)?ve=B.parent.parent:ff(B)?ve=B.host:ve=B.parent),{...le,type:"compensate",ref:ve,persistent:!0}}throw new Error("unknown event definition",pe)}function j(B,Q=!0){const{element:Z,parent:ee,initiator:le}=B;Q&&Ae("createScope",{element:Z,scope:ee});const pe=new i6(i.next(),Z,ee,le);return ee&&ee.children.push(pe),f.add(pe),Q&&Ee("createScope",{scope:pe}),nt(Z),ee&&nt(ee.element),pe}function G(B){if(typeof B=="function")return B;const{event:Q,element:Z,scope:ee}=B,le=B.elements||Z&&[Z],pe=Q&&A(Q);return ve=>(!pe||eg(pe,ve.event))&&(!le||le.includes(ve.element))&&(!ee||ee===ve.scope)}function L(B){const Q=B==="function"?B:G(B);return Z=>Array.from(Z.subscriptions).some(Q)}function $(B){if(typeof B=="function")return B;const{element:Q,waitsOnElement:Z,parent:ee,trait:le=pt.RUNNING,subscribedTo:pe}=B,ve=pe?L(pe):()=>!0;return se=>(!Q||se.element===Q)&&(!ee||se.parent===ee)&&(!Z||se.getTokensByElement(Z)>0)&&se.hasTrait(le)&&ve(se)}function O(B){return al(d,G(B))}function Y(B){return Nw(d,G(B))}function q(B){return al(f,$(B))}function ae(B){return Nw(f,$(B))}function ce(B,Q=null){if(!B.destroyed){B.destroy(Q);for(const Z of B.subscriptions){const ee=Z.event.traits||pt.ACTIVE;B.hasTrait(ee)||D(Z)}if(B.destroyed){for(const Z of B.children)Z.destroyed||ce(Z,Q);Ae("destroyScope",{element:B.element,scope:B}),f.delete(B),Ee("destroyScope",{scope:B})}nt(B.element),B.parent&&nt(B.parent.element)}}function Ae(B,Q){Ee("trace",{...Q,action:B})}function nt(B){l.add(B),u.length||Ee("tick")}function Me(B){Ee("scopeChanged",{scope:B})}function Ee(B,Q={}){return t.fire(`tokenSimulation.simulator.${B}`,Q)}function me(B,Q){t.on("tokenSimulation.simulator."+B,Q)}function N(B,Q){t.off("tokenSimulation.simulator."+B,Q)}function E(B,Q){const Z=H(B);r[B.id||B]={...Z,...Q},nt(B)}function w(){const B=[];return n.forEach(Q=>{if(!cu(Q,["bpmn:Process","bpmn:Participant"]))return;const Z=j({element:Q},!1);B.push(Z);const ee=Q.children.filter(df);for(const le of ee){const pe={...A(le),interrupting:!1};z(Z,pe,ve=>_({element:Q,startEvent:le,initiator:ve}))}}),B}function T(B){const{element:Q}=B,Z=j(B),{children:ee=[],attachers:le=[]}=Q;for(const pe of ee)if(Io(pe)){const ve=pe.children.filter(se=>df(se)&&!If(se));for(const se of ve)z(Z,se,ue=>_({element:pe,parentScope:Z,startEvent:se,initiator:ue}))}for(const pe of le)ff(pe)&&!If(pe)&&z(Z,pe,ve=>_({element:pe,parentScope:Z.parent,hostScope:Z,initiator:ve}));return Z}function H(B){return r[B.id||B]||{}}function I(B,Q){if(!Q.length)return;const Z={type:"all-completed",persistent:!1},ee=new Set(Q),le=pe=>{ee.delete(pe.scope),ee.size===0&&(N("destroyScope",le),C({scope:B,event:Z}))};return me("destroyScope",le),Z}function V(B,Q=!0){E(B,{wait:Q})}function ne(){for(const B of f)ce(B);for(const B of w())f.add(B);Ee("tick"),Ee("reset")}this.createScope=j,this.destroyScope=ce,this.findScope=ae,this.findScopes=q,this.findSubscription=Y,this.findSubscriptions=O,this.waitAtElement=V,this.waitForScopes=I,this.setConfig=E,this.getConfig=H,this.signal=_,this.enter=x,this.exit=S,this.subscribe=z,this.trigger=C,this.reset=ne,this.on=me,this.off=N,this.registerBehavior=function(B,Q){a[B]=Q}}BC.$inject=["injector","eventBus","elementRegistry"];function a6(){this.signal=function(e){console.log("ignored #exit",e.element)},this.exit=function(e){console.log("ignored #exit",e.element)},this.enter=function(e){console.log("ignored #enter",e.element)}}function s6(e,t){return e.type===t.type&&e.boundary&&!t.boundary}function c6(e){return b(e,"bpmn:ReceiveTask")||e.incoming.some(t=>b(t,"bpmn:MessageFlow"))}function l6(e){if(!ff(e))return!1;const t=$C(e);return!t[0]||cu(t[0],["bpmn:ConditionalEventDefinition","bpmn:TimerEventDefinition"])}function $C(e){return e.businessObject.get("eventDefinitions")||[]}function Vd(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:StartEvent",this)}Vd.prototype.signal=function(e){this._simulator.exit(e)};Vd.prototype.exit=function(e){this._activityBehavior.exit(e)};Vd.$inject=["simulator","activityBehavior"];function lu(e,t,n){this._intermediateThrowEventBehavior=n,this._scopeBehavior=t,e.registerBehavior("bpmn:EndEvent",this)}lu.$inject=["simulator","scopeBehavior","intermediateThrowEventBehavior"];lu.prototype.enter=function(e){this._intermediateThrowEventBehavior.enter(e)};lu.prototype.signal=function(e){this._intermediateThrowEventBehavior.signal(e)};lu.prototype.exit=function(e){const{scope:t}=e;this._scopeBehavior.tryExit(t.parent,t)};function Gd(e,t,n){this._simulator=e,this._activityBehavior=t,this._scopeBehavior=n,e.registerBehavior("bpmn:BoundaryEvent",this)}Gd.prototype.signal=function(e){const{element:t,scope:n,hostScope:i=this._simulator.findScope({parent:n.parent,element:t.host})}=e;if(!i)throw new Error("host scope not found");if(xe(t).cancelActivity){this._scopeBehavior.interrupt(i,n);const a=this._scopeBehavior.tryExit(i,n);if(a){const c=this._simulator.subscribe(i,a,l=>(c.remove(),this._simulator.exit(e)));return}}this._simulator.exit(e)};Gd.prototype.exit=function(e){this._activityBehavior.exit(e)};Gd.$inject=["simulator","activityBehavior","scopeBehavior"];function uu(e,t){this._activityBehavior=t,this._simulator=e,e.registerBehavior("bpmn:IntermediateCatchEvent",this),e.registerBehavior("bpmn:ReceiveTask",this)}uu.$inject=["simulator","activityBehavior"];uu.prototype.signal=function(e){return this._simulator.exit(e)};uu.prototype.enter=function(e){const{element:t}=e;return this._activityBehavior.signalOnEvent(e,t)};uu.prototype.exit=function(e){this._activityBehavior.exit(e)};function pu(e,t,n){this._simulator=e,this._activityBehavior=t,this._eventBehaviors=n,e.registerBehavior("bpmn:IntermediateThrowEvent",this),e.registerBehavior("bpmn:SendTask",this)}pu.prototype.enter=function(e){const{element:t}=e,n=this._eventBehaviors.get(t);if(n){const i=n(e);if(i)return this._activityBehavior.signalOnEvent(e,i)}this._activityBehavior.enter(e)};pu.prototype.signal=function(e){this._activityBehavior.signal(e)};pu.prototype.exit=function(e){this._activityBehavior.exit(e)};pu.$inject=["simulator","activityBehavior","eventBehaviors"];function Ud(e){this._simulator=e,e.registerBehavior("bpmn:ExclusiveGateway",this)}Ud.prototype.enter=function(e){this._simulator.exit(e)};Ud.prototype.exit=function(e){const{element:t,scope:n}=e,i=NC(t.outgoing);if(i.length===1)return this._simulator.enter({element:i[0],scope:n.parent});const{activeOutgoing:r}=this._simulator.getConfig(t),a=i.find(c=>c===r);if(!a)throw new Error("no outgoing configured");return this._simulator.enter({element:a,scope:n.parent})};Ud.$inject=["simulator"];function Wd(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:ParallelGateway",this)}Wd.prototype.enter=function(e){const{scope:t,element:n}=e,i=NC(n.incoming),{parent:r}=t,a=this._simulator.findScopes({parent:r,element:n});if(a.length===i.length){for(const c of a)c!==t&&this._simulator.destroyScope(c.complete(),t);this._simulator.exit(e)}};Wd.prototype.exit=function(e){this._activityBehavior.exit(e)};Wd.$inject=["simulator","activityBehavior"];function r0(e){this._simulator=e,e.registerBehavior("bpmn:EventBasedGateway",this)}r0.$inject=["simulator"];r0.prototype.enter=function(e){const{element:t,scope:n}=e,i=n.parent,a=u6(t).map(c=>this._simulator.subscribe(i,c,l=>(a.forEach(u=>u.remove()),this._simulator.destroyScope(n,l),this._simulator.signal({element:c,parentScope:i,initiator:l}))))};function u6(e){return e.outgoing.map(t=>t.target).filter(t=>cu(t,["bpmn:IntermediateCatchEvent","bpmn:ReceiveTask"]))}function Gr(e,t,n){this._simulator=e,this._scopeBehavior=t,this._transactionBehavior=n;const i=["bpmn:BusinessRuleTask","bpmn:CallActivity","bpmn:ManualTask","bpmn:ScriptTask","bpmn:ServiceTask","bpmn:Task","bpmn:UserTask"];for(const r of i)e.registerBehavior(r,this)}Gr.$inject=["simulator","scopeBehavior","transactionBehavior"];Gr.prototype.signal=function(e){const t=this._triggerMessages(e);if(t)return this.signalOnEvent(e,t);this._simulator.exit(e)};Gr.prototype.enter=function(e){const{element:t}=e,n=this.waitAtElement(t);if(n)return this.signalOnEvent(e,n);const i=this._triggerMessages(e);if(i)return this.signalOnEvent(e,i);this._simulator.exit(e)};Gr.prototype.exit=function(e){const{element:t,scope:n}=e,i=n.parent,r=!n.failed;r&&!Io(t)&&this._transactionBehavior.registerCompensation(n);const a=r?t.outgoing.filter(r6):[];a.forEach(c=>this._simulator.enter({element:c,scope:i})),a.length===0&&this._scopeBehavior.tryExit(i,n)};Gr.prototype.signalOnEvent=function(e,t){const{scope:n,element:i}=e,r=this._simulator.subscribe(n,t,a=>(r.remove(),this._simulator.signal({scope:n,element:i,initiator:a})))};Gr.prototype.waitAtElement=function(e){return this._simulator.getConfig(e).wait&&{element:e,type:"continue",interrupting:!1,boundary:!1}};Gr.prototype._getMessageContexts=function(e,t=null){const n=t?r=>r.referencePoint.x>t.x:()=>!0,i=(r,a)=>r.referencePoint.x-a.referencePoint.x;return[...e.incoming.filter(tg).map(r=>({incoming:r,referencePoint:f6(r.waypoints)})),...e.outgoing.filter(tg).map(r=>({outgoing:r,referencePoint:p6(r.waypoints)}))].sort(i).filter(n)};Gr.prototype._triggerMessages=function(e){const{element:t,initiator:n,scope:i}=e;let r=i.messageContexts;r||(r=i.messageContexts=this._getMessageContexts(t));const a=n&&n.element;if(tg(a)&&i.expectedIncoming!==a){console.debug("Simulator :: ActivityBehavior :: ignoring out-of-bounds message");return}for(;r.length;){const{incoming:c,outgoing:l}=r.shift();if(c){if(!n)continue;return i.expectedIncoming=c,{element:t,type:"message",name:c.id,interrupting:!1,boundary:!1}}this._simulator.signal({element:l})}};function p6(e){return e&&e[0]}function f6(e){return e&&e[e.length-1]}function Xa(e,t,n,i,r){this._simulator=e,this._activityBehavior=t,this._scopeBehavior=n,this._transactionBehavior=i,this._elementRegistry=r,e.registerBehavior("bpmn:SubProcess",this),e.registerBehavior("bpmn:Transaction",this),e.registerBehavior("bpmn:AdHocSubProcess",this)}Xa.$inject=["simulator","activityBehavior","scopeBehavior","transactionBehavior","elementRegistry"];Xa.prototype.signal=function(e){this._start(e)};Xa.prototype.enter=function(e){const{element:t}=e,n=this._activityBehavior.waitAtElement(t);if(n)return this._activityBehavior.signalOnEvent(e,n);this._start(e)};Xa.prototype.exit=function(e){const{scope:t}=e,n=t.parent;n.failInitiator===t&&n.complete(),this._activityBehavior.exit(e)};Xa.prototype._start=function(e){const{element:t,startEvent:n,scope:i}=e,r=i.parent;if(Io(t)){if(!n)throw new Error("missing <startEvent>: required for event sub-process")}else if(n)throw new Error("unexpected <startEvent>: not allowed for sub-process");if(r.destroyed)throw new Error(`target scope <${r.id}> destroyed`);d6(t)&&this._transactionBehavior.setup(e),n&&OC(n)&&this._scopeBehavior.interrupt(r,i);const a=n?[n]:this._findStarts(t);for(const c of a)this._simulator.signal({element:c,parentScope:i,initiator:i})};Xa.prototype._findStarts=function(e){return e=this._elementRegistry.get(e.id+"_plane")||e,e.children.filter(t=>Hd(t)||t.incoming.find(i=>b(i,"bpmn:SequenceFlow"))||IC(t)||Io(t)?!1:cu(t,["bpmn:Activity","bpmn:StartEvent","bpmn:EndEvent"]))};function d6(e){return b(e,"bpmn:Transaction")}const ng={type:"cancel",interrupting:!0,boundary:!1,persistent:!0};function Xo(e,t){this._simulator=e,this._scopeBehavior=t}Xo.$inject=["simulator","scopeBehavior"];Xo.prototype.setup=function(e){const{scope:t}=e,n=this._simulator.subscribe(t,ng,a=>(n.remove(),this.cancel({scope:t,initiator:a}))),i={type:"compensate",ref:t.element,persistent:!0,traits:pt.NOT_DEAD},r=this._simulator.subscribe(t,i,a=>t.canceled?(r.remove(),this.compensate({scope:t,element:t.element,initiator:a})):this._simulator.trigger({event:ng,scope:t}))};Xo.prototype.cancel=function(e){const{scope:t,initiator:n}=e;if(!t.destroyed)return t.cancel(n),this._simulator.trigger({event:{type:"compensate",ref:t.element},initiator:n,scope:t}),this._simulator.trigger({scope:t,initiator:n,event:ng})};Xo.prototype.registerCompensation=function(e){const{element:t}=e,n=t.children.filter(Io).map(a=>a.children.find(c=>df(c)&&If(c))).filter(a=>a),i=t.attachers.filter(If);if(!n.length&&!i.length)return;const r=this.findTransactionScope(e.parent);b(r.element,"bpmn:Transaction")||this.makeCompensable(r);for(const a of n){const c={element:a,type:"compensate",persistent:!0,interrupting:!0,ref:t,traits:pt.NOT_DEAD},l=a.parent,u=this._simulator.subscribe(e,c,f=>(u.remove(),this._simulator.signal({initiator:f,element:l,startEvent:a,parentScope:e})))}for(const a of i){const c={element:a,type:"compensate",persistent:!0,ref:t,traits:pt.NOT_DEAD},l=a.outgoing.map(f=>f.target).find(IC);if(!l)continue;const u=this._simulator.subscribe(r,c,f=>(u.remove(),this._simulator.enter({initiator:f,element:l,scope:r})))}};Xo.prototype.makeCompensable=function(e){if(e.hasTrait(pt.COMPENSABLE)||!e.parent)return;const t={type:"compensate",ref:e.element,interrupting:!0,persistent:!0,traits:pt.NOT_DEAD};e.compensable();const n=this._simulator.subscribe(e,t,a=>(n.remove(),e.fail(a),this.compensate({scope:e,element:e.element,initiator:a}),this._scopeBehavior.tryExit(e,a),e)),i=e.parent;if(!i)return;const r=this._simulator.subscribe(i,t,a=>(r.remove(),this._simulator.trigger({scope:e,event:t,initiator:a})));this.makeCompensable(i)};Xo.prototype.findTransactionScope=function(e){let t=e;for(;t;){const n=t.element;if(b(n,"bpmn:SubProcess")&&!Io(n)||cu(n,["bpmn:Transaction","bpmn:Process","bpmn:Participant"]))return t;t=t.parent}throw h6(e)};Xo.prototype.compensate=function(e){const{scope:t,element:n}=e,i=al(t.subscriptions,c=>eg({type:"compensate"},c.event)),r=i.filter(c=>c.event.ref===n),a=i.filter(c=>c.event.ref!==n);for(const c of r)this._scopeBehavior.preExit(t,l=>this._simulator.trigger(c));for(const c of a.reverse())this._scopeBehavior.preExit(t,l=>this._simulator.trigger(c))};function h6(e){throw new Error(`no transaction context for <${e.id}>`)}function Qa(e,t){this._simulator=e,this._scopeBehavior=t,e.registerBehavior("bpmn:SequenceFlow",this)}Qa.prototype.enter=function(e){this._simulator.exit(e)};Qa.prototype.exit=function(e){const{element:t,scope:n}=e;this._simulator.enter({element:t.target,scope:n.parent})};Qa.$inject=["simulator","scopeBehavior"];function Za(e){this._simulator=e,e.registerBehavior("bpmn:MessageFlow",this)}Za.$inject=["simulator"];Za.prototype.signal=function(e){this._simulator.exit(e)};Za.prototype.exit=function(e){const{element:t,scope:n}=e,i=t.target,r=i0(i)?i:{type:"message",element:t,name:t.id},a=this._simulator.findSubscription({event:r,elements:[i,i.parent]});a&&this._simulator.trigger({event:r,initiator:n,scope:a.scope})};function yt(e,t){return e.type==="label"?!1:(Array.isArray(t)||(t=[t]),t.some(function(n){return b(e,n)}))}function m6(e,t){return at(xe(e).eventDefinitions,n=>yt(n,t))}function FC(e,t){return sr(xe(e).eventDefinitions,n=>yt(n,t))}function o0(e,t,n){this._simulator=e,this._elementRegistry=t,this._scopeBehavior=n}o0.$inject=["simulator","elementRegistry","scopeBehavior"];o0.prototype.get=function(e){const n=Object.entries({"bpmn:LinkEventDefinition":i=>{const{element:r,scope:a}=i,c=Iw(r),l=a.parent,f=l.element.children.filter(d=>o6(d)&&Iw(d).name===c.name);for(const d of f)this._simulator.signal({element:d,parentScope:l,initiator:a})},"bpmn:SignalEventDefinition":i=>{const{element:r,scope:a}=i,c=this._simulator.findSubscriptions({event:r}),l=new Set;for(const u of c){const f=u.scope;l.has(f)||(l.add(f),this._simulator.trigger({event:r,scope:f,initiator:a}))}},"bpmn:EscalationEventDefinition":i=>{const{element:r,scope:a}=i,c=this._simulator.findScopes({subscribedTo:{event:r},trait:pt.ACTIVE});let l=a;for(;l=l.parent;)if(c.includes(l)){this._simulator.trigger({event:r,scope:l,initiator:a});break}},"bpmn:ErrorEventDefinition":i=>{const{element:r,scope:a}=i;this._simulator.trigger({event:r,initiator:a,scope:mv(a)})},"bpmn:TerminateEventDefinition":i=>{const{scope:r}=i;this._scopeBehavior.terminate(r.parent,r)},"bpmn:CancelEventDefinition":i=>{const{scope:r,element:a}=i;this._simulator.trigger({event:a,initiator:r,scope:mv(r)})},"bpmn:CompensateEventDefinition":i=>{const{scope:r,element:a}=i;return this._simulator.waitForScopes(r,this._simulator.trigger({event:a,scope:mv(r)}))}}).find(i=>FC(e,i[0]));return n&&n[1]};function Iw(e){return m6(e,"bpmn:LinkEventDefinition")}function mv(e){for(;Io(e.parent.element);)e=e.parent;return e.parent}const jC={type:"pre-exit",persistent:!0,interrupting:!0,boundary:!1},vv={type:"exit",interrupting:!0,boundary:!1,persistent:!0};function Ur(e){this._simulator=e}Ur.$inject=["simulator"];Ur.prototype.isFinished=function(e,t=null){return t=zC(t),e.children.every(n=>n.destroyed||n.completed||t(n))};Ur.prototype.destroyChildren=function(e,t,n=null){n=zC(n),e.children.filter(i=>!i.destroyed&&!n(i)).map(i=>{this._simulator.destroyScope(i,t)})};Ur.prototype.terminate=function(e,t){this.destroyChildren(e,t),e.terminate(t),this.tryExit(e,t)};Ur.prototype.interrupt=function(e,t){this.destroyChildren(e,t,t),e.fail(t)};Ur.prototype.tryExit=function(e,t){if(!e)throw new Error("missing <scope>");if(t||(t=e),!this.isFinished(e,t))return vv;const n=this._simulator.findSubscriptions({event:jC,scope:e});for(const i of n){const{event:r,scope:a}=i;if(this._simulator.trigger({event:r,scope:a,initiator:t}).length)return vv}this._simulator.trigger({event:vv,scope:e,initiator:t}),this.exit({scope:e,initiator:t})};Ur.prototype.exit=function(e){const{scope:t,initiator:n}=e;if(!n)throw new Error("missing <initiator>");this._simulator.exit({element:t.element,scope:t,initiator:n})};Ur.prototype.preExit=function(e,t){const n=this._simulator.subscribe(e,jC,i=>(n.remove(),t(i)));return n};function zC(e){return typeof e=="function"?e:t=>t===e}function Yd(e,t){this._simulator=e,this._scopeBehavior=t,e.registerBehavior("bpmn:Process",this),e.registerBehavior("bpmn:Participant",this)}Yd.prototype.signal=function(e){const{startEvent:t,scope:n}=e;if(!t)throw new Error("missing <startEvent>");this._simulator.signal({element:t,parentScope:n})};Yd.prototype.exit=function(e){const{scope:t,initiator:n}=e;this._scopeBehavior.destroyChildren(t,n)};Yd.$inject=["simulator","scopeBehavior"];const v6={__init__:["startEventBehavior","endEventBehavior","boundaryEventBehavior","intermediateCatchEventBehavior","intermediateThrowEventBehavior","exclusiveGatewayBehavior","parallelGatewayBehavior","eventBasedGatewayBehavior","subProcessBehavior","sequenceFlowBehavior","messageFlowBehavior","processBehavior"],startEventBehavior:["type",Vd],endEventBehavior:["type",lu],boundaryEventBehavior:["type",Gd],intermediateCatchEventBehavior:["type",uu],intermediateThrowEventBehavior:["type",pu],exclusiveGatewayBehavior:["type",Ud],parallelGatewayBehavior:["type",Wd],eventBasedGatewayBehavior:["type",r0],activityBehavior:["type",Gr],subProcessBehavior:["type",Xa],sequenceFlowBehavior:["type",Qa],messageFlowBehavior:["type",Za],eventBehaviors:["type",o0],scopeBehavior:["type",Ur],processBehavior:["type",Yd],transactionBehavior:["type",Xo]},g6=5e3,HC={__depends__:[v6],__init__:[["eventBus","simulator",function(e,t){e.on(["tokenSimulation.toggleMode","tokenSimulation.resetSimulation"],g6,n=>{t.reset()})}]],simulator:["type",BC]};function Kd(e,t){e.invoke(Za,this),this._animation=t}Te(Kd,Za);Kd.$inject=["injector","animation"];Kd.prototype.signal=function(e){const{element:t,scope:n}=e;this._animation.animate(t,n,()=>{Za.prototype.signal.call(this,e)})};function qd(e,t){e.invoke(Qa,this),this._animation=t}Te(qd,Qa);qd.$inject=["injector","animation"];qd.prototype.enter=function(e){const{element:t,scope:n}=e;this._animation.animate(t,n,()=>{Qa.prototype.enter.call(this,e)})};const y6={sequenceFlowBehavior:["type",qd],messageFlowBehavior:["type",Kd]},ln="tokenSimulation.toggleMode",VC="tokenSimulation.playSimulation",GC="tokenSimulation.pauseSimulation",Wr="tokenSimulation.resetSimulation",_6="tokenSimulation.animationCreated",UC="tokenSimulation.animationSpeedChanged",WC="tokenSimulation.simulator.elementChanged",fu="tokenSimulation.simulator.destroyScope",E6="tokenSimulation.simulator.scopeChanged",Ja="tokenSimulation.simulator.createScope",pc="tokenSimulation.scopeFilterChanged",YC="tokenSimulation.simulator.trace",Ow=e=>!0;function du(e,t){this._eventBus=e,this._simulator=t,this._filter=Ow,e.on([ln,Wr],()=>{this._filter=Ow}),e.on(fu,n=>{const{scope:i}=n;this._scope===i&&i.parent&&this.toggle(i.parent)}),e.on(Ja,n=>{const{scope:i}=n;!i.parent&&this._scope&&!KC(this._scope,i)&&this.toggle(null)})}du.prototype.toggle=function(e){const t=this._scope!==e;this._scope=t?e:null,this._filter=this._scope?n=>KC(this._scope,n):n=>!0,this._eventBus.fire(pc,{filter:this._filter,scope:this._scope})};du.prototype.isShown=function(e){return typeof e=="string"&&(e=this._simulator.findScope(t=>t.id===e)),e&&this._filter(e)};du.prototype.findScope=function(e){return this._simulator.findScopes(e).filter(t=>this.isShown(t))[0]};du.$inject=["eventBus","simulator"];function KC(e,t){do if(e===t)return!0;while(t=t.parent);return!1}const fc={scopeFilter:["type",du]},qC=getComputedStyle(document.documentElement),x6=qC.getPropertyValue("--token-simulation-green-base-44"),w6=qC.getPropertyValue("--token-simulation-white");function b6(){}function S6(e,t){return t.length===2?R6:e===1?T6:e===t.length-1?P6:C6}const C6=function(e){return e},T6=function(e){return-Math.cos(e*Math.PI/2)+1},P6=function(e){return Math.sin(e*Math.PI/2)},R6=function(e){return-Math.cos(e*Math.PI)/2+.5},ml=20;function li(e,t,n){this._eventBus=t,this._scopeFilter=n,this._canvas=e,this._animations=new Set,this._speed=1,t.on(Wr,()=>{this.clearAnimations()}),t.on(GC,()=>{this.pause()}),t.on(VC,()=>{this.play()}),t.on(pc,i=>{this.each(r=>{this._scopeFilter.isShown(r.scope)?r.show():r.hide()})}),t.on(fu,i=>{const{scope:r}=i;this.clearAnimations(r)})}li.prototype.animate=function(e,t,n){this.createAnimation(e,t,n)};li.prototype.pause=function(){this.each(e=>e.pause())};li.prototype.play=function(){this.each(e=>e.play())};li.prototype.each=function(e){this._animations.forEach(e)};li.prototype.createAnimation=function(e,t,n=b6){const i=this._getGroup(t);if(!i)return;const r=this._createTokenGfx(i,t),a=new Ui(r,e.waypoints,()=>{this._animations.delete(a),n()});return a.setSpeed(this.getAnimationSpeed()),this._scopeFilter.isShown(t)||a.hide(),a.scope=t,a.element=e,this._animations.add(a),this._eventBus.fire(_6,{animation:a}),a.play(),a};li.prototype.setAnimationSpeed=function(e){this._speed=e,this.each(t=>t.setSpeed(e)),this._eventBus.fire(UC,{speed:e})};li.prototype.getAnimationSpeed=function(){return this._speed};li.prototype.clearAnimations=function(e){this.each(t=>{(!e||t.scope===e)&&t.remove()})};li.prototype._createTokenGfx=function(e,t){const n=Be(this._getTokenSVG(t).trim());return ug(n,e)};li.prototype._getTokenSVG=function(e){const t=e.colors||{primary:x6,auxiliary:w6};return`
    <g class="bts-token">
      <circle
        class="bts-circle"
        r="${ml/2}"
        cx="${ml/2}"
        cy="${ml/2}"
        fill="${t.primary}"
      />
      <text
        class="bts-text"
        transform="translate(10, 14)"
        text-anchor="middle"
        fill="${t.auxiliary}"
      >1</text>
    </g>
  `};li.prototype._getGroup=function(e){var t=this._canvas,n,i;"findRoot"in t?(i=t.findRoot(e.element),n=t._findPlaneForRoot(i).layer):n=ft(".viewport",t._svg);var r=ft(".bts-animation-tokens",n);return r||(r=Be('<g class="bts-animation-tokens" />'),ug(r,n)),r};li.$inject=["canvas","eventBus","scopeFilter"];function Ui(e,t,n){this.gfx=e,this.waypoints=t,this.done=n,this._paused=!0,this._t=0,this._parts=[],this.create()}Ui.prototype.pause=function(){this._paused=!0};Ui.prototype.play=function(){this._paused&&(this._paused=!1,this.tick(0)),this.schedule()};Ui.prototype.schedule=function(){if(this._paused||this._scheduled)return;const e=Date.now();this._scheduled=!0,requestAnimationFrame(()=>{this._scheduled=!1,!this._paused&&(this.tick((Date.now()-e)*this._speed),this.schedule())})};Ui.prototype.tick=function(e){const t=this._t=this._t+e,n=this._parts.find(l=>l.startTime<=t&&l.endTime>t);if(!n)return this.remove();const i=t-n.startTime,r=n.length*n.easing(i/n.duration),a=n.startLength+r,c=this._path.getPointAtLength(a);this.move(c.x,c.y)};Ui.prototype.move=function(e,t){Se(this.gfx,"transform",`translate(${e}, ${t})`)};Ui.prototype.create=function(){const e=this.waypoints,t=e.reduce((a,c,l)=>{const u=e[l-1];if(u){const f=a[a.length-1],d=f&&f.endLength||0,m=k6(u,c);a.push({startLength:d,endLength:d+m,length:m,easing:S6(l,e)})}return a},[]),n=t.reduce(function(a,c){return a+c.length},0),i=e.reduce((a,c,l)=>{const u=c.x-ml/2,f=c.y-ml/2;return a.push([l>0?"L":"M",u,f]),a},[]).flat().join(" "),r=A6(n);this._parts=t.reduce((a,c,l)=>{const u=r/n*c.length,f=l>0?a[l-1].endTime:0,d=f+u;return[...a,{...c,startTime:f,endTime:d,duration:u}]},[]),this._path=Be(`<path d="${i}" />`),this._t=0};Ui.prototype.show=function(){Se(this.gfx,"display","")};Ui.prototype.hide=function(){Se(this.gfx,"display","none")};Ui.prototype.remove=function(){this.pause(),Dt(this.gfx),this.done()};Ui.prototype.setSpeed=function(e){this._speed=e};function A6(e){return Math.log(e)*D6(250,300)}function D6(e,t){return e+Math.floor(Math.random()*(t-e))}function k6(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}const M6={__depends__:[HC,y6,fc],animation:["type",li]};var sl={exports:{}},N6=sl.exports,Lw;function I6(){return Lw||(Lw=1,function(e,t){(function(n,i){{var r=i();e&&e.exports&&(t=e.exports=r),t.randomColor=r}})(N6,function(){var n=null,i={};z();var r=[],a=function(L){if(L=L||{},L.seed!==void 0&&L.seed!==null&&L.seed===parseInt(L.seed,10))n=L.seed;else if(typeof L.seed=="string")n=j(L.seed);else{if(L.seed!==void 0&&L.seed!==null)throw new TypeError("The seed value must be an integer or string");n=null}var $,O,Y;if(L.count!==null&&L.count!==void 0){for(var q=L.count,ae=[],ce=0;ce<L.count;ce++)r.push(!1);for(L.count=null;q>ae.length;){var Ae=a(L);n!==null&&(L.seed=n),ae.push(Ae)}return L.count=q,ae}return $=c(L),O=l($,L),Y=u($,O,L),f([$,O,Y],L)};function c(L){if(r.length>0){var $=G(L.hue),O=x($),Y=($[1]-$[0])/r.length,q=parseInt((O-$[0])/Y);r[q]===!0?q=(q+2)%r.length:r[q]=!0;var ae=($[0]+q*Y)%359,ce=($[0]+(q+1)*Y)%359;return $=[ae,ce],O=x($),O<0&&(O=360+O),O}else{var $=m(L.hue);return O=x($),O<0&&(O=360+O),O}}function l(L,$){if($.hue==="monochrome")return 0;if($.luminosity==="random")return x([0,100]);var O=g(L),Y=O[0],q=O[1];switch($.luminosity){case"bright":Y=55;break;case"dark":Y=q-10;break;case"light":q=55;break}return x([Y,q])}function u(L,$,O){var Y=d(L,$),q=100;switch(O.luminosity){case"dark":q=Y+20;break;case"light":Y=(q+Y)/2;break;case"random":Y=0,q=100;break}return x([Y,q])}function f(L,$){switch($.format){case"hsvArray":return L;case"hslArray":return A(L);case"hsl":var O=A(L);return"hsl("+O[0]+", "+O[1]+"%, "+O[2]+"%)";case"hsla":var Y=A(L),ce=$.alpha||Math.random();return"hsla("+Y[0]+", "+Y[1]+"%, "+Y[2]+"%, "+ce+")";case"rgbArray":return D(L);case"rgb":var q=D(L);return"rgb("+q.join(", ")+")";case"rgba":var ae=D(L),ce=$.alpha||Math.random();return"rgba("+ae.join(", ")+", "+ce+")";default:return S(L)}}function d(L,$){for(var O=_(L).lowerBounds,Y=0;Y<O.length-1;Y++){var q=O[Y][0],ae=O[Y][1],ce=O[Y+1][0],Ae=O[Y+1][1];if($>=q&&$<=ce){var nt=(Ae-ae)/(ce-q),Me=ae-nt*q;return nt*$+Me}}return 0}function m(L){if(typeof parseInt(L)=="number"){var $=parseInt(L);if($<360&&$>0)return[$,$]}if(typeof L=="string"){if(i[L]){var O=i[L];if(O.hueRange)return O.hueRange}else if(L.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var Y=M(L)[0];return[Y,Y]}}return[0,360]}function g(L){return _(L).saturationRange}function _(L){L>=334&&L<=360&&(L-=360);for(var $ in i){var O=i[$];if(O.hueRange&&L>=O.hueRange[0]&&L<=O.hueRange[1])return i[$]}return"Color not found"}function x(L){if(n===null){var $=.618033988749895,O=Math.random();return O+=$,O%=1,Math.floor(L[0]+O*(L[1]+1-L[0]))}else{var Y=L[1]||1,q=L[0]||0;n=(n*9301+49297)%233280;var ae=n/233280;return Math.floor(q+ae*(Y-q))}}function S(L){var $=D(L);function O(q){var ae=q.toString(16);return ae.length==1?"0"+ae:ae}var Y="#"+O($[0])+O($[1])+O($[2]);return Y}function C(L,$,O){var Y=O[0][0],q=O[O.length-1][0],ae=O[O.length-1][1],ce=O[0][1];i[L]={hueRange:$,lowerBounds:O,saturationRange:[Y,q],brightnessRange:[ae,ce]}}function z(){C("monochrome",null,[[0,0],[100,0]]),C("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),C("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),C("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),C("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),C("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),C("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),C("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function D(L){var $=L[0];$===0&&($=1),$===360&&($=359),$=$/360;var O=L[1]/100,Y=L[2]/100,q=Math.floor($*6),ae=$*6-q,ce=Y*(1-O),Ae=Y*(1-ae*O),nt=Y*(1-(1-ae)*O),Me=256,Ee=256,me=256;switch(q){case 0:Me=Y,Ee=nt,me=ce;break;case 1:Me=Ae,Ee=Y,me=ce;break;case 2:Me=ce,Ee=Y,me=nt;break;case 3:Me=ce,Ee=Ae,me=Y;break;case 4:Me=nt,Ee=ce,me=Y;break;case 5:Me=Y,Ee=ce,me=Ae;break}var N=[Math.floor(Me*255),Math.floor(Ee*255),Math.floor(me*255)];return N}function M(L){L=L.replace(/^#/,""),L=L.length===3?L.replace(/(.)/g,"$1$1"):L;var $=parseInt(L.substr(0,2),16)/255,O=parseInt(L.substr(2,2),16)/255,Y=parseInt(L.substr(4,2),16)/255,q=Math.max($,O,Y),ae=q-Math.min($,O,Y),ce=q?ae/q:0;switch(q){case $:return[60*((O-Y)/ae%6)||0,ce,q];case O:return[60*((Y-$)/ae+2)||0,ce,q];case Y:return[60*(($-O)/ae+4)||0,ce,q]}}function A(L){var $=L[0],O=L[1]/100,Y=L[2]/100,q=(2-O)*Y;return[$,Math.round(O*Y/(q<1?q:2-q)*1e4)/100,q/2*100]}function j(L){for(var $=0,O=0;O!==L.length&&!($>=Number.MAX_SAFE_INTEGER);O++)$+=L.charCodeAt(O);return $}function G(L){if(isNaN(L)){if(typeof L=="string"){if(i[L]){var O=i[L];if(O.hueRange)return O.hueRange}else if(L.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var Y=M(L)[0];return _(Y).hueRange}}}else{var $=parseInt(L);if($<360&&$>0)return _(L).hueRange}return[0,360]}return a})}(sl,sl.exports)),sl.exports}var O6=I6();const L6=Of(O6),B6=1500;function XC(e){const t=L6({count:60}).filter(a=>n(a.substring(1))<200);function n(a){var c=parseInt(a.substr(0,2),16),l=parseInt(a.substr(2,2),16),u=parseInt(a.substr(4,2),16),f=(c*299+l*587+u*114)/1e3;return f}let i=0;function r(a){const{element:c}=a;if(c&&c.type==="bpmn:MessageFlow")return{primary:"#999",auxiliary:"#FFF"};if(a.parent)return a.parent.colors;const l=t[i++%t.length];return{primary:l,auxiliary:n(l)>=128?"#111":"#fff"}}e.on(Ja,B6,a=>{const{scope:c}=a;c.colors=r(c)})}XC.$inject=["eventBus"];const $6={__init__:["coloredScopes"],coloredScopes:["type",XC]};var F6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"/></svg>',j6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg>',z6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></svg>',H6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>',V6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></svg>',G6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"/></svg>',U6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"/></svg>',W6=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 580.5 448">
  <path fill="currentColor" d="M112 0C85 0 64 22 64 48v196l192-89V48c0-26-22-48-48-48zm256 0c-27 0-48 22-48 48v77l190-89c-5-21-24-36-46-36Zm144 105-192 89v70l192-89zM256 224 64 314v70l192-90zm256 21-192 89v66c0 27 21 48 48 48h96c26 0 48-21 48-48zM256 364 89 442c7 4 14 6 23 6h96c26 0 48-21 48-48z"/>
  <rect fill="currentColor" width="63.3" height="618.2" x="311.5" y="-469.4" transform="rotate(65)" rx="10"/>
</svg>
`,Y6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Adapted from Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"/></svg>',K6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"/></svg>',q6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"/></svg>',X6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>',Q6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',Z6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"/></svg>',J6='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"/></svg>';function Nn(e){return function(n=""){return`<span class="bts-icon ${n}">${e}</span>`}}const Bw=Nn(F6),QC=Nn(j6),ig=Nn(z6),e8=Nn(W6),t8=Nn(H6),ZC=Nn(V6),JC=Nn(G6),rg=Nn(U6),eT=Nn(Y6),n8=Nn(K6),i8=Nn(q6),r8=Nn(X6),o8=Nn(Q6),tT=Nn(Z6),a8=Nn(J6);function a0(e){this._exclusiveGatewaySettings=e}a0.prototype.createContextPads=function(e){if(e.outgoing.filter(function(r){return yt(r,"bpmn:SequenceFlow")}).length<2)return;const n=`
    <div class="bts-context-pad" title="Set Sequence Flow">
      ${t8()}
    </div>
  `;return[{action:()=>{this._exclusiveGatewaySettings.setSequenceFlow(e)},element:e,html:n}]};a0.$inject=["exclusiveGatewaySettings"];function es(e){this._simulator=e}es.prototype.createContextPads=function(e){return yt(e,"bpmn:ReceiveTask")||yt(e,"bpmn:SubProcess")&&xe(e).triggeredByEvent?[]:[this.createPauseContextPad(e)]};es.prototype.createPauseContextPad=function(e){const t=()=>this._findSubscriptions({element:e}),n=this._isPaused(e),i=`
    <div class="bts-context-pad ${n?"":"show-hover"}" title="${n?"Remove":"Add"} pause point">
      ${(n?e8:rg)("show-hover")}
      ${rg("hide-hover")}
    </div>
  `;return{action:()=>{this._togglePaused(e)},element:e,hideContexts:t,html:i}};es.prototype._isPaused=function(e){const{wait:t}=this._simulator.getConfig(e);return t};es.prototype._togglePaused=function(e){const t=!this._isPaused(e);this._simulator.waitAtElement(e,t)};es.prototype._findSubscriptions=function(e){return this._simulator.findSubscriptions(e)};es.$inject=["simulator"];function Ro(e){this._simulator=e}Ro.$inject=["simulator"];Ro.prototype.createContextPads=function(e){return[this.createTriggerContextPad(e)]};Ro.prototype.createTriggerContextPad=function(e){const t=()=>this._findSubscriptions({element:e}),n=`
    <div class="bts-context-pad" title="Trigger Event">
      ${eT()}
    </div>
  `;return{action:r=>{const{event:a,scope:c}=r[0];return this._simulator.trigger({event:a,scope:c})},element:e,html:n,contexts:t}};Ro.prototype._findSubscriptions=function(e){return this._simulator.findSubscriptions(e)};const gv=500,s8=-15,c8=-15;function Pi(e,t,n,i,r,a){this._elementRegistry=t,this._overlays=n,this._injector=i,this._canvas=r,this._scopeFilter=a,this._overlayCache=new Map,this._handlerIdx=0,this._handlers=[],this.registerHandler("bpmn:ExclusiveGateway",a0),this.registerHandler("bpmn:Activity",es),this.registerHandler("bpmn:StartEvent",Ro),this.registerHandler("bpmn:IntermediateCatchEvent",Ro),this.registerHandler("bpmn:BoundaryEvent",Ro),this.registerHandler("bpmn:Activity",Ro),e.on(ln,gv,c=>{c.active?this.openContextPads():this.closeContextPads()}),e.on(Wr,gv,()=>{this.closeContextPads(),this.openContextPads()}),e.on(pc,c=>{const l=Mr(".djs-overlay-ts-context-menu [data-scope-ids]",n._overlayRoot);for(const f of l){const m=f.dataset.scopeIds.split(",").some(g=>a.isShown(g));He(f).toggle("hidden",!m)}const u=Mr(".djs-overlay-ts-context-menu [data-hide-scope-ids]",n._overlayRoot);for(const f of u){const m=f.dataset.hideScopeIds.split(",").some(g=>a.isShown(g));He(f).toggle("hidden",m)}}),e.on(WC,gv,c=>{const{element:l}=c;this.updateElementContextPads(l)})}Pi.prototype.registerHandler=function(e,t){const n=this._injector.instantiate(t);n.hash=String(this._handlerIdx++),this._handlers.push({handler:n,type:e})};Pi.prototype.getHandlers=function(e){return this._handlers.filter(({type:t})=>yt(e,t)).map(({handler:t})=>t)};Pi.prototype.openContextPads=function(e){e||(e=this._canvas.getRootElement()),this._elementRegistry.forEach(t=>{l8(e,t)&&this.updateElementContextPads(t)})};Pi.prototype._getOverlays=function(e){return this._overlayCache.get(e)||[]};Pi.prototype._addOverlay=function(e,t){const{handlerHash:n}=t;if(!n)throw new Error("<handlerHash> required");const i=this._overlays.add(e,"ts-context-menu",{...t,position:{top:s8,left:c8},show:{minZoom:.5}}),r=this._overlays.get(i),a=this._overlayCache;a.has(n)||a.set(n,[]),a.get(n).push(r)};Pi.prototype._removeOverlay=function(e){const{id:t,handlerHash:n}=e;this._overlays.remove(t);const i=this._overlayCache.get(n)||[],r=i.indexOf(e);r!==-1&&i.splice(r,1)};Pi.prototype.updateElementContextPads=function(e){for(const t of this.getHandlers(e))this._updateElementContextPads(e,t)};Pi.prototype._updateElementContextPads=function(e,t){const n=(t.createContextPads(e)||[]).filter(c=>c),i=`${e.id}------${t.hash}`,r=this._getOverlays(i),a=[];for(const c of n){const{element:l,contexts:u,hideContexts:f,action:d,html:m}=c,g=`${c.element.id}-------${m}`;let _=r.find(S=>S.hash===g);const x=_&&_.html||et(m);if(u){const S=u();x.dataset.scopeIds=S.map(z=>z.scope.id).join(",");const C=S.filter(z=>this._scopeFilter.isShown(z.scope));He(x).toggle("hidden",C.length===0)}if(f){const S=f();x.dataset.hideScopeIds=S.map(z=>z.scope.id).join(",");const C=S.filter(z=>this._scopeFilter.isShown(z.scope));He(x).toggle("hidden",C.length>0)}if(_){a.push(_);continue}d&&ke.bind(x,"click",S=>{S.preventDefault();const C=u?u().filter(z=>this._scopeFilter.isShown(z.scope)):null;d(C)}),this._addOverlay(l,{hash:g,handlerHash:i,html:x})}for(const c of r)a.includes(c)||this._removeOverlay(c)};Pi.prototype.closeContextPads=function(){for(const e of this._overlayCache.values())for(const t of e)this._closeOverlay(t);this._overlayCache.clear()};Pi.prototype._closeOverlay=function(e){this._overlays.remove(e.id)};Pi.$inject=["eventBus","elementRegistry","overlays","injector","canvas","scopeFilter"];function l8(e,t){do{if(e===t)return!0;t=t.parent}while(t);return!1}const u8={__depends__:[fc],__init__:["contextPads"],contextPads:["type",Pi]};function nT(e,t,n){e.on(fu,i=>{const{scope:r}=i,{destroyInitiator:a,element:c}=r;!r.completed||!a||!["bpmn:Process","bpmn:Participant"].includes(c.type)||n.addElementNotification(a.element,{type:"success",icon:ig(),text:"Finished",scope:r})})}nT.$inject=["eventBus","simulator","elementNotifications"];const p8=-15,f8=15;function hu(e,t){this._overlays=e,t.on([Wr,Ja,ln],()=>{this.clear()})}hu.prototype.addElementNotification=function(e,t){const n={top:p8,right:f8},{type:i,icon:r,text:a,scope:c={}}=t,l=c.colors,u=l?`style="color: ${l.auxiliary}; background: ${l.primary}"`:"",f=et(`
    <div class="bts-element-notification ${i||""}" ${u}>
      ${r||""}
      <span class="bts-text">${a}</span>
    </div>
  `);this._overlays.add(e,"element-notification",{position:n,html:f,show:{minZoom:.5}})};hu.prototype.clear=function(){this._overlays.remove({type:"element-notification"})};hu.prototype.removeElementNotification=function(e){this._overlays.remove({element:e})};hu.$inject=["overlays","eventBus"];const iT={elementNotifications:["type",hu]},d8=2e3,h8=JC();function mu(e,t,n){this._eventBus=e,this._canvas=t,this._scopeFilter=n,this._init(),e.on([ln,Wr],i=>{this.clear()})}mu.prototype._init=function(){this.container=et('<div class="bts-notifications"></div>'),this._canvas.getContainer().appendChild(this.container)};mu.prototype.showNotification=function(e){const{text:t,type:n="info",icon:i=h8,scope:r,ttl:a=d8}=e;if(r&&!this._scopeFilter.isShown(r))return;const c=i.startsWith("<")?i:`<i class="${i}"></i>`,l=r&&r.colors,u=l?`style="color: ${l.auxiliary}; background: ${l.primary}"`:"",f=et(`
    <div class="bts-notification ${n}">
      <span class="bts-icon">${c}</span>
      <span class="bts-text" title="${t}">${t}</span>
      ${r?`<span class="bts-scope" ${u}>${r.id}</span>`:""}
    </div>
  `);for(this.container.appendChild(f);this.container.children.length>5;)this.container.children[0].remove();setTimeout(function(){f.remove()},a)};mu.prototype.clear=function(){for(;this.container.children.length;)this.container.children[0].remove()};mu.$inject=["eventBus","canvas","scopeFilter"];const vu={__depends__:[fc],notifications:["type",mu]},m8={__depends__:[iT,vu],__init__:["simulationState"],simulationState:["type",nT]},v8="--token-simulation-silver-base-97",g8="--token-simulation-green-base-44",rT="show-scopes",y8=3e3;function Ri(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._scopeFilter=n,this._elementColors=i,this._simulationStyles=r,this._highlight=null,this._init(),e.on(ln,a=>{a.active?He(this._container).remove("hidden"):(He(this._container).add("hidden"),Pl(this._container),this.unhighlightScope())}),e.on(pc,a=>{const c=this.getScopeElements();for(const l of c){const u=l.dataset.scopeId;He(l).toggle("inactive",!this._scopeFilter.isShown(u))}}),e.on(Ja,a=>{this.addScope(a.scope)}),e.on(fu,a=>{this.removeScope(a.scope)}),e.on(E6,a=>{this.updateScope(a.scope)}),e.on(Wr,()=>{this.removeAllInstances()})}Ri.prototype._init=function(){this._container=et('<div class="bts-scopes hidden"></div>'),this._canvas.getContainer().appendChild(this._container)};Ri.prototype.addScope=function(e){const t=["bpmn:Process","bpmn:SubProcess","bpmn:Participant"],{element:n}=e;if(!t.includes(n.type))return;const i=e.colors,r=i?`style="color: ${i.auxiliary}; background: ${i.primary}"`:"",a=et(`
    <div data-scope-id="${e.id}" class="bts-scope"
         title="View Process Instance ${e.id}" ${r}>
      ${e.getTokens()}
    </div>
  `);ke.bind(a,"click",()=>{this._scopeFilter.toggle(e)}),ke.bind(a,"mouseenter",()=>{this.highlightScope(n)}),ke.bind(a,"mouseleave",()=>{this.unhighlightScope()}),this._scopeFilter.isShown(e)||He(a).add("inactive"),this._container.appendChild(a)};Ri.prototype.getScopeElements=function(){return Mr("[data-scope-id]",this._container)};Ri.prototype.getScopeElement=function(e){return ft(`[data-scope-id="${e.id}"]`,this._container)};Ri.prototype.updateScope=function(e){const t=this.getScopeElement(e);t&&(t.textContent=e.getTokens())};Ri.prototype.removeScope=function(e){const t=this.getScopeElement(e);t&&t.remove()};Ri.prototype.removeAllInstances=function(){this._container.innerHTML=""};Ri.prototype.highlightScope=function(e){this.unhighlightScope(),this._highlight=e,this._elementColors.add(e,rT,this._getHighlightColors(),y8),e.parent||He(this._canvas.getContainer()).add("highlight")};Ri.prototype.unhighlightScope=function(){if(!this._highlight)return;const e=this._highlight;this._elementColors.remove(e,rT),e.parent||He(this._canvas.getContainer()).remove("highlight"),this._highlight=null};Ri.prototype._getHighlightColors=function(){return{fill:this._simulationStyles.get(v8),stroke:this._simulationStyles.get(g8)}};Ri.$inject=["eventBus","canvas","scopeFilter","elementColors","simulationStyles"];function Xd(){this._cache={}}Xd.$inject=[];Xd.prototype.get=function(e){const t=this._cache[e];return t||(this._computedStyle||(this._computedStyle=this._getComputedStyle()),this._cache[e]=this._computedStyle.getPropertyValue(e).trim())};Xd.prototype._getComputedStyle=function(){const e=typeof getComputedStyle=="function"?getComputedStyle:_8,t=typeof document<"u"?document.documentElement:{};return e(t)};function _8(){return{getPropertyValue(){return""}}}const s0={simulationStyles:["type",Xd]},E8={__depends__:[fc,s0],__init__:["showScopes"],showScopes:["type",Ri]},x8=JC();function Qp(e){const t=e&&e.businessObject.name;return t&&xf(t)}function ts(e,t,n,i,r,a){this._notifications=t,this._tokenSimulationPalette=n,this._canvas=i,this._scopeFilter=r,this._init(),e.on(pc,c=>{const l=Mr(".bts-entry[data-scope-id]",this._container);for(const u of l){const f=u.dataset.scopeId;He(u).toggle("inactive",!this._scopeFilter.isShown(f))}}),e.on(fu,c=>{const{scope:l}=c,{element:u}=l,f=l.completed;if(!["bpmn:Process","bpmn:Participant","bpmn:SubProcess"].includes(u.type))return;const g=`${yt(u,"bpmn:SubProcess")?Qp(u)||"SubProcess":"Process"} ${f?"finished":"canceled"}`;this.log({text:g,icon:f?ig():r8(),scope:l})}),e.on(Ja,c=>{const{scope:l}=c,{element:u}=l;if(!["bpmn:Process","bpmn:Participant","bpmn:SubProcess"].includes(u.type))return;const m=`${yt(u,"bpmn:SubProcess")?Qp(u)||"SubProcess":"Process"} started`;this.log({text:m,icon:ig(),scope:l})}),e.on(YC,c=>{const{action:l,scope:u,element:f}=c;if(l!=="exit")return;const d=u.parent,m=Qp(f);if(yt(f,"bpmn:BusinessRuleTask")?this.log({text:m||"Business Rule Task",icon:"bpmn-icon-business-rule",scope:d}):yt(f,"bpmn:CallActivity")?this.log({text:m||"Call Activity",icon:"bpmn-icon-call-activity",scope:d}):(yt(f,"bpmn:IntermediateCatchEvent")||yt(f,"bpmn:IntermediateThrowEvent"))&&this.log({text:m||"Intermediate Event",icon:"bpmn-icon-intermediate-event-none",scope:d}),yt(f,"bpmn:BoundaryEvent"))this.log({text:m||"Boundary Event",icon:"bpmn-icon-intermediate-event-none",scope:d});else if(yt(f,"bpmn:ManualTask"))this.log({text:m||"Manual Task",icon:"bpmn-icon-manual",scope:d});else if(yt(f,"bpmn:ScriptTask"))this.log({text:m||"Script Task",icon:"bpmn-icon-script",scope:d});else if(yt(f,"bpmn:ServiceTask"))this.log({text:m||"Service Task",icon:"bpmn-icon-service",scope:d});else if(yt(f,"bpmn:Task"))this.log({text:m||"Task",icon:"bpmn-icon-task",scope:d});else if(yt(f,"bpmn:UserTask"))this.log({text:m||"User Task",icon:"bpmn-icon-user",scope:d});else if(yt(f,"bpmn:ExclusiveGateway")){if(f.outgoing.length<2)return;const g=Qp(f.sequenceFlow);let _=m||"Gateway";g&&(_=_.concat(` ${QC()} ${g}`)),this.log({text:_,icon:"bpmn-icon-gateway-xor",scope:d})}else yt(f,"bpmn:EndEvent")?FC(xe(f),"bpmn:TerminateEventDefinition")?this.log({text:m||"Terminate End Event",icon:"bpmn-icon-end-event-terminate",scope:d}):this.log({text:m||"End Event",icon:"bpmn-icon-end-event-none",scope:d}):yt(f,"bpmn:StartEvent")&&this.log({text:m||"Start Event",icon:"bpmn-icon-start-event-none",scope:d})}),e.on([ln,Wr],c=>{this.clear(),this.toggle(!1)})}ts.prototype._init=function(){this._container=et(`
    <div class="bts-log hidden djs-scrollable">
      <div class="bts-header">
        ${Bw("bts-log-icon")}
        Simulation Log
        <button class="bts-close">
          ${o8()}
        </button>
      </div>
      <div class="bts-content">
        <p class="bts-entry placeholder">No Entries</p>
      </div>
    </div>
  `),this._placeholder=ft(".bts-placeholder",this._container),this._content=ft(".bts-content",this._container),ke.bind(this._content,"mousedown",e=>{e.stopPropagation()}),this._close=ft(".bts-close",this._container),ke.bind(this._close,"click",()=>{this.toggle(!1)}),this._icon=ft(".bts-log-icon",this._container),ke.bind(this._icon,"click",()=>{this.toggle()}),this._canvas.getContainer().appendChild(this._container),this.paletteEntry=et(`
    <div class="bts-entry" title="Toggle Simulation Log">
      ${Bw()}
    </div>
  `),ke.bind(this.paletteEntry,"click",()=>{this.toggle()}),this._tokenSimulationPalette.addEntry(this.paletteEntry,3)};ts.prototype.isShown=function(){const e=this._container;return!He(e).has("hidden")};ts.prototype.toggle=function(e=!this.isShown()){const t=this._container;e?He(t).remove("hidden"):He(t).add("hidden")};ts.prototype.log=function(e){const{text:t,type:n="info",icon:i=x8,scope:r}=e,a=this._content;He(this._placeholder).add("hidden"),this.isShown()||this._notifications.showNotification(e);const c=i.startsWith("<")?i:`<i class="${i}"></i>`,l=r&&r.colors,u=l?`style="background: ${l.primary}; color: ${l.auxiliary}"`:"",f=et(`
    <p class="bts-entry ${n} ${r&&this._scopeFilter.isShown(r)?"":"inactive"}" ${r?`data-scope-id="${r.id}"`:""}>
      <span class="bts-icon">${c}</span>
      <span class="bts-text" title="${t}">${t}</span>
      ${r?`<span class="bts-scope" data-scope-id="${r.id}" ${u}>${r.id}</span>`:""}
    </p>
  `);Vn.bind(f,".bts-scope[data-scope-id]","click",m=>{this._scopeFilter.toggle(r)});const d=Math.abs(a.clientHeight+a.scrollTop-a.scrollHeight)<2;a.appendChild(f),d&&(a.scrollTop=a.scrollHeight)};ts.prototype.clear=function(){for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._placeholder=et('<p class="bts-entry placeholder">No Entries</p>'),this._content.appendChild(this._placeholder)};ts.$inject=["eventBus","notifications","tokenSimulationPalette","canvas","scopeFilter","simulator"];const w8={__depends__:[vu,fc],__init__:["log"],log:["type",ts]},b8=["bpmn:InclusiveGateway","bpmn:ComplexGateway"];function S8(e){return e.labelTarget}function dc(e,t,n,i,r){this._eventBus=e,this._elementRegistry=t,this._elementNotifications=r,this._notifications=i,this._canvasParent=n.getContainer().parentNode,e.on(ln,a=>{a.active?this.enable():this.clear()})}dc.prototype.getUnsupportedElements=function(){return this._unsupportedElements};dc.prototype.enable=function(){const e=[];this._elementRegistry.forEach(t=>{S8(t)||yt(t,b8)&&(this.showWarning(t),e.push(t))}),e.length&&this._notifications.showNotification({text:"Found unsupported elements",icon:ZC(),type:"warning",ttl:5e3}),this._unsupportedElements=e};dc.prototype.clear=function(){He(this._canvasParent).remove("warning")};dc.prototype.showWarning=function(e){this._elementNotifications.addElementNotification(e,{type:"warning",icon:ZC(),text:"Not supported"})};dc.$inject=["eventBus","elementRegistry","canvas","notifications","elementNotifications"];const C8={__depends__:[iT,vu],__init__:["elementSupport"],elementSupport:["type",dc]},oT=eT(),T8=rg(),$w=1500;function Qo(e,t,n,i){this._eventBus=e,this._tokenSimulationPalette=t,this._notifications=n,this.canvasParent=i.getContainer().parentNode,this.isActive=!1,this.isPaused=!0,this._init(),e.on(Ja,$w,r=>{this.activate(),this.unpause()}),e.on([Wr,ln],()=>{this.deactivate(),this.pause()}),e.on(YC,$w,r=>{this.unpause()})}Qo.prototype._init=function(){this.paletteEntry=et(`
    <div class="bts-entry disabled" title="Play/Pause Simulation">
      ${oT}
    </div>
  `),ke.bind(this.paletteEntry,"click",this.toggle.bind(this)),this._tokenSimulationPalette.addEntry(this.paletteEntry,1)};Qo.prototype.toggle=function(){this.isPaused?this.unpause():this.pause()};Qo.prototype.pause=function(){this.isActive&&(He(this.paletteEntry).remove("active"),He(this.canvasParent).add("paused"),this.paletteEntry.innerHTML=oT,this._eventBus.fire(GC),this._notifications.showNotification({text:"Pause Simulation"}),this.isPaused=!0)};Qo.prototype.unpause=function(){!this.isActive||!this.isPaused||(He(this.paletteEntry).add("active"),He(this.canvasParent).remove("paused"),this.paletteEntry.innerHTML=T8,this._eventBus.fire(VC),this._notifications.showNotification({text:"Play Simulation"}),this.isPaused=!1)};Qo.prototype.activate=function(){this.isActive=!0,He(this.paletteEntry).remove("disabled")};Qo.prototype.deactivate=function(){this.isActive=!1,He(this.paletteEntry).remove("active"),He(this.paletteEntry).add("disabled")};Qo.$inject=["eventBus","tokenSimulationPalette","notifications","canvas"];const P8={__depends__:[vu],__init__:["pauseSimulation"],pauseSimulation:["type",Qo]};function Qd(e,t,n){this._eventBus=e,this._tokenSimulationPalette=t,this._notifications=n,this._init(),e.on(Ja,()=>{He(this._paletteEntry).remove("disabled")}),e.on(ln,i=>{(this._active=i.active)||this.resetSimulation()})}Qd.prototype._init=function(){this._paletteEntry=et(`
    <div class="bts-entry disabled" title="Reset Simulation">
      ${n8()}
    </div>
  `),ke.bind(this._paletteEntry,"click",()=>{this.resetSimulation(),this._notifications.showNotification({text:"Reset Simulation",type:"info"})}),this._tokenSimulationPalette.addEntry(this._paletteEntry,2)};Qd.prototype.resetSimulation=function(){He(this._paletteEntry).add("disabled"),this._eventBus.fire(Wr)};Qd.$inject=["eventBus","tokenSimulationPalette","notifications"];const R8={__depends__:[vu],__init__:["resetSimulation"],resetSimulation:["type",Qd]},A8=10,D8=-15,k8=500,M8="--token-simulation-green-base-44",N8="--token-simulation-white";function Zo(e,t,n,i,r){this._overlays=t,this._scopeFilter=i,this._simulator=n,this._simulationStyles=r,this.overlayIds={},e.on(WC,k8,a=>{const{element:c}=a;this.removeTokenCounts(c),this.addTokenCounts(c)}),e.on(pc,a=>{const c=Mr(".bts-token-count[data-scope-id]",t._overlayRoot);for(const l of c){const u=l.dataset.scopeId;He(l).toggle("inactive",!this._scopeFilter.isShown(u))}})}Zo.prototype.addTokenCounts=function(e){if(yt(e,"bpmn:MessageFlow")||yt(e,"bpmn:SequenceFlow"))return;const t=this._simulator.findScopes(n=>!n.destroyed&&n.children.some(i=>!i.destroyed&&i.element===e&&!i.children.length));this.addTokenCount(e,t)};Zo.prototype.addTokenCount=function(e,t){if(!t.length)return;const n=t.map(c=>this._getTokenHTML(e,c)).join(""),i=et(`
    <div class="bts-token-count-parent">
      ${n}
    </div>
  `),r={bottom:A8,left:D8},a=this._overlays.add(e,"token-count",{position:r,html:i,show:{minZoom:.5}});this.overlayIds[e.id]=a};Zo.prototype.removeTokenCounts=function(e){this.removeTokenCount(e)};Zo.prototype.removeTokenCount=function(e){const t=this.overlayIds[e.id];t&&(this._overlays.remove(t),delete this.overlayIds[e.id])};Zo.prototype._getTokenHTML=function(e,t){const n=t.colors||this._getDefaultColors();return`
    <div data-scope-id="${t.id}" class="bts-token-count waiting ${this._scopeFilter.isShown(t)?"":"inactive"}"
         style="color: ${n.auxiliary}; background: ${n.primary}">
      ${t.getTokensByElement(e)}
    </div>
  `};Zo.prototype._getDefaultColors=function(){return{primary:this._simulationStyles.get(M8),auxiliary:this._simuationStyles.get(N8)}};Zo.$inject=["eventBus","overlays","simulator","scopeFilter","simulationStyles"];const I8={__depends__:[fc,s0],__init__:["tokenCount"],tokenCount:["type",Zo]},O8=[["Slow",.5],["Normal",1],["Fast",2]];function gu(e,t,n){this._canvas=e,this._animation=t,this._eventBus=n,this._init(t.getAnimationSpeed()),n.on(ln,i=>{i.active?He(this._container).remove("hidden"):He(this._container).add("hidden")}),n.on(UC,i=>{this.setActive(i.speed)})}gu.prototype.getToggleSpeed=function(e){return parseFloat(e.dataset.speed)};gu.prototype._init=function(e){this._container=et(`
    <div class="bts-set-animation-speed hidden">
      ${i8()}
      <div class="bts-animation-speed-buttons">
        ${O8.map(([t,n],i)=>`
            <button title="Set animation speed = ${t}" data-speed="${n}" class="bts-animation-speed-button ${n===e?"active":""}">
              ${Array.from({length:i+1}).map(()=>QC()).join("")}
            </button>
          `).join("")}
      </div>
    </div>
  `),Vn.bind(this._container,"[data-speed]","click",t=>{const n=t.delegateTarget,i=this.getToggleSpeed(n);this._animation.setAnimationSpeed(i)}),this._canvas.getContainer().appendChild(this._container)};gu.prototype.setActive=function(e){Mr("[data-speed]",this._container).forEach(t=>{const n=this.getToggleSpeed(t)===e;He(t)[n?"add":"remove"]("active")})};gu.$inject=["canvas","animation","eventBus"];const L8={__init__:["setAnimationSpeed"],setAnimationSpeed:["type",gu]},B8="--token-simulation-grey-darken-30",$8="--token-simulation-grey-lighten-56";function F8(e,t){var n=e.outgoing.filter(c0),i=n.indexOf(t||e.sequenceFlow);return n[i+1]?n[i+1]:n[0]}function c0(e){return yt(e,"bpmn:SequenceFlow")}const j8="exclusive-gateway-settings",z8=2e3;function hc(e,t,n,i,r){this._elementRegistry=t,this._elementColors=n,this._simulator=i,this._simulationStyles=r,e.on(ln,a=>{a.active?this.setSequenceFlowsDefault():this.resetSequenceFlows()})}hc.prototype.setSequenceFlowsDefault=function(){const e=this._elementRegistry.filter(t=>yt(t,"bpmn:ExclusiveGateway"));for(const t of e)this.setSequenceFlow(t)};hc.prototype.resetSequenceFlows=function(){this._elementRegistry.filter(t=>yt(t,"bpmn:ExclusiveGateway")).forEach(t=>{t.outgoing.filter(c0).length&&this.resetSequenceFlow(t)})};hc.prototype.resetSequenceFlow=function(e){this._simulator.setConfig(e,{activeOutgoing:void 0})};hc.prototype.setSequenceFlow=function(e){const t=e.outgoing.filter(c0);if(t.length<2)return;const{activeOutgoing:n}=this._simulator.getConfig(e);let i;n?i=F8(e,n):i=t[0],this._simulator.setConfig(e,{activeOutgoing:i}),e.outgoing.forEach(r=>{const a=r===i?B8:$8,c=this._simulationStyles.get(a);this._elementColors.add(r,j8,{stroke:c},z8)})};hc.$inject=["eventBus","elementRegistry","elementColors","simulator","simulationStyles"];const Fw=5e4;function Wi(e,t,n){this._elementRegistry=e,this._eventBus=t,this._graphicsFactory=n,this._originalColors={},this._customColors={},t.on(ln,Fw,i=>{i.active?this._saveOriginalColors():(this._applyOriginalColors(),this._originalColors={},this._customColors={})}),t.on("saveXML.start",Fw,()=>{this._applyOriginalColors(),t.once("saveXML.done",()=>this._applyCustomColors())})}Wi.$inject=["elementRegistry","eventBus","graphicsFactory"];Wi.prototype.add=function(e,t,n,i=1e3){let r=this._customColors[e.id];r||(r=this._customColors[e.id]={}),r[t]={...n,priority:i},this._applyHighestPriorityColor(e)};Wi.prototype.remove=function(e,t){const n=this._customColors[e.id];n&&(delete n[t],Object.keys(n)||delete this._customColors[e.id]),this._applyHighestPriorityColor(e)};Wi.prototype._get=function(e){const t=ct(e);if(t){if(aT(e))return{stroke:t.label&&t.label.get("color")};if(tt(t,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return{fill:t.get("background-color"),stroke:t.get("border-color")}}};Wi.prototype._set=function(e,t={}){const{fill:n,stroke:i}=t,r=ct(e);r&&(aT(e)?r.label&&r.label.set("color",i):tt(r,["bpmndi:BPMNEdge","bpmndi:BPMNShape"])&&(r.set("background-color",n),r.set("border-color",i)),this._forceRedraw(e))};Wi.prototype._saveOriginalColors=function(){this._originalColors={},this._elementRegistry.forEach(e=>{this._originalColors[e.id]=this._get(e)})};Wi.prototype._applyOriginalColors=function(){this._elementRegistry.forEach(e=>{const t=this._originalColors[e.id];t&&this._set(e,t)})};Wi.prototype._applyCustomColors=function(){this._elementRegistry.forEach(e=>{const t=this._customColors[e.id];t&&this._set(e,sT(t))})};Wi.prototype._applyHighestPriorityColor=function(e){const t=this._customColors[e.id];if(!t){this._set(e,this._originalColors[e.id]);return}this._set(e,sT(t))};Wi.prototype._forceRedraw=function(e){const t=this._elementRegistry.getGraphics(e),n=e.waypoints?"connection":"shape";this._graphicsFactory.update(n,e,t)};function aT(e){return"labelTarget"in e}function sT(e={}){const t=Object.values(e).reduce((n,i)=>{const{priority:r=1e3}=i;return!n||r>n.priority?i:n},void 0);if(t){const{priority:n,...i}=t;return i}}const cT={elementColors:["type",Wi]},H8={__depends__:[cT,s0],exclusiveGatewaySettings:["type",hc]},V8="neutral-element-colors";function l0(e,t,n){this._elementRegistry=t,this._elementColors=n,e.on(ln,i=>{const{active:r}=i;r&&this._setNeutralColors()})}l0.prototype._setNeutralColors=function(){this._elementRegistry.forEach(e=>{this._elementColors.add(e,V8,{stroke:"#212121",fill:"#fff"})})};l0.$inject=["eventBus","elementRegistry","elementColors"];const G8={__depends__:[cT],__init__:["neutralElementColors"],neutralElementColors:["type",l0]};function Zd(e,t){var n=this;this._canvas=t,this.entries=[],this._init(),e.on(ln,function(i){var r=i.active;r?He(n.container).remove("hidden"):He(n.container).add("hidden")})}Zd.prototype._init=function(){this.container=et('<div class="bts-palette hidden"></div>'),this._canvas.getContainer().appendChild(this.container)};Zd.prototype.addEntry=function(e,t){var n=0;this.entries.forEach(function(i){t>=i.index&&n++}),this.container.insertBefore(e,this.container.childNodes[n]),this.entries.push({entry:e,index:t})};Zd.$inject=["eventBus","canvas"];const U8={__init__:["tokenSimulationPalette"],tokenSimulationPalette:["type",Zd]},W8={__depends__:[HC,M6,$6,u8,m8,E8,w8,C8,P8,R8,I8,L8,H8,G8,U8]},Y8=10001;function lT(e,t,n,i,r,a,c,l){let u=!1;e.on(ln,Y8,g=>{u=g.active,u&&(i.cancel(),t.close(),n.cancel()),c._update()});function f(g,_,x){const S=g[_];g[_]=function(){return x.call(this,S,arguments)}}function d(g,_){f(g,_,function(x,S){if(!u)return x.apply(this,S)})}function m(g,_){f(g,_,function(x,S){if(u)throw new Error("model is read-only");return x.apply(this,S)})}d(t,"open"),d(n,"init"),d(i,"activate"),d(n,"init"),d(i,"activate"),m(a,"moveShape"),m(a,"updateAttachment"),m(a,"moveElements"),m(a,"moveConnection"),m(a,"layoutConnection"),m(a,"createConnection"),m(a,"createShape"),m(a,"createLabel"),m(a,"appendShape"),m(a,"removeElements"),m(a,"distributeElements"),m(a,"removeShape"),m(a,"removeConnection"),m(a,"replaceShape"),m(a,"pasteElements"),m(a,"alignElements"),m(a,"resizeShape"),m(a,"createSpace"),m(a,"updateWaypoints"),m(a,"reconnectStart"),m(a,"reconnectEnd"),f(r,"trigger",function(g,_){const x=_[0];if(!(u&&K8(["undo","redo","copy","paste","removeSelection","spaceTool","lassoTool","globalConnectTool","distributeElements","alignElements","directEditing"],x)))return g.apply(this,_)})}lT.$inject=["eventBus","contextPad","dragging","directEditing","editorActions","modeling","palette","paletteProvider"];function K8(e,t){return e.indexOf(t)>-1}const q8={__init__:["disableModeling"],disableModeling:["type",lT]};function Jd(e,t,n,i){this._eventBus=e,this._canvas=t,this._selection=n,this._contextPad=i,this._active=!1,e.on("import.parse.start",()=>{this._active&&(this.toggleMode(!1),e.once("import.done",()=>{this.toggleMode(!0)}))}),e.on("diagram.init",()=>{this._canvasParent=this._canvas.getContainer().parentNode,this._palette=ft(".djs-palette",this._canvas.getContainer()),this._init()})}Jd.prototype._init=function(){this._container=et(`
    <div class="bts-toggle-mode">
      Token Simulation <span class="bts-toggle">${tT()}</span>
    </div>
  `),ke.bind(this._container,"click",()=>this.toggleMode()),this._canvas.getContainer().appendChild(this._container)};Jd.prototype.toggleMode=function(e=!this._active){if(e!==this._active){if(e)this._container.innerHTML=`Token Simulation <span class="bts-toggle">${a8()}</span>`,He(this._canvasParent).add("simulation"),He(this._palette).add("hidden");else{this._container.innerHTML=`Token Simulation <span class="bts-toggle">${tT()}</span>`,He(this._canvasParent).remove("simulation"),He(this._palette).remove("hidden");const t=this._selection.get();t.length===1&&this._contextPad.open(t[0])}this._eventBus.fire(ln,{active:e}),this._active=e}};Jd.$inject=["eventBus","canvas","selection","contextPad"];const X8={__init__:["toggleMode"],toggleMode:["type",Jd]};function uT(e,t,n,i,r,a){var c=!1;r.register({toggleTokenSimulation:function(){t.toggleMode()}}),r.register({togglePauseTokenSimulation:function(){c&&n.toggle()}}),r.register({resetTokenSimulation:function(){c&&i.resetSimulation()}});const l=a.get("log",!1);l&&r.register({toggleTokenSimulationLog:function(){l.toggle()}}),e.on(ln,u=>{c=u.active})}uT.$inject=["eventBus","toggleMode","pauseSimulation","resetSimulation","editorActions","injector"];const Q8={__init__:["tokenSimulationEditorActions"],tokenSimulationEditorActions:["type",uT]},Z8=1e4;function pT(e,t){var n=t.get("editorActions",!1),i=t.get("keyboard",!1);if(!i||!n)return;var r=!1;function a(c){if(Zp(["t","T"],c))return n.trigger("toggleTokenSimulation"),!0;if(r){if(Zp(["l","L"],c))return n.trigger("toggleTokenSimulationLog"),!0;if(Zp([" ","Spacebar"],c))return n.trigger("togglePauseTokenSimulation"),!0;if(Zp(["r","R"],c))return n.trigger("resetTokenSimulation"),!0}}e.on("keyboard.init",function(){i.addListener(Z8,function(c){var l=c.keyEvent;a(l)})}),e.on(ln,function(c){var l=c.active;l?r=!0:r=!1})}pT.$inject=["eventBus","injector"];function Zp(e,t){return e.indexOf(t.key)>-1}const J8={__init__:["tokenSimulationKeyboardBindings"],tokenSimulationKeyboardBindings:["type",pT]},e$={__depends__:[W8,q8,X8,Q8,J8]},t$="https://cdn.statically.io/gh/bpmn-io/bpmn-js-examples/dfceecba/starter/diagram.bpmn",n$=()=>{const e=yv.useRef(null);return yv.useEffect(()=>{const t=new or({container:e.current,additionalModules:[e$],keyboard:{bindTo:window}});return fetch(t$).then(n=>{if(!n.ok)throw new Error(`Error al cargar el diagrama: ${n.statusText}`);return n.text()}).then(n=>{t.importXML(n).then(()=>console.log("Diagrama cargado")).catch(i=>console.error("Error al importar el BPMN",i))}).catch(n=>console.error("Error al realizar la solicitud",n)),()=>{t.destroy()}},[]),zs.jsx("div",{ref:e,style:{width:"100%",height:"500px"}})};function i$(){return zs.jsxs("div",{className:"App",children:[zs.jsx("h1",{children:"Visualizador BPMN"}),zs.jsx(n$,{})]})}ZP.createRoot(document.getElementById("root")).render(zs.jsx(yv.StrictMode,{children:zs.jsx(i$,{})}));
